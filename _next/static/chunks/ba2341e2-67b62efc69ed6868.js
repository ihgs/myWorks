"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[290],{8191:function(t,e,r){r.d(e,{default:function(){return s}});var n=r(5566),i=r(7133).lW;function s(t){Opal.modules["asciidoctor/js/opal_ext/browser/file"]=function(t){var e,r,n,i=t.klass,s=t.defs,o=[];return t.nil,t.add_stubs("new"),r=[e=i(o[0],null,"File")].concat(o),n=t.$r(r),s(e,"$read",function(t){var e="",r=-1;try{var i=new XMLHttpRequest;i.open("GET",t,!1),i.addEventListener("load",function(){r=this.status,(0===r||200===r)&&(e=this.responseText)}),i.overrideMimeType("text/plain"),i.send()}catch(e){throw n("IOError").$new("Error reading file or directory: "+t+"; reason: "+e.message)}if(404===r||0===r&&!e)throw n("IOError").$new("No such file or directory: "+t);return e})},Opal.modules["asciidoctor/js/opal_ext/browser"]=function(e){var r,n,i,s,o=e.const_set,a=e.top;if(e.nil,e.add_stubs("require"),"object"==typeof t&&"object"==typeof t.runtime){var l=t.runtime;r=l.platform,n=l.engine,i=l.framework,s=l.ioModule}return r=r||"browser",n=n||"",i=i||"",o([][0],"JAVASCRIPT_IO_MODULE",s=s||"xmlhttprequest"),o([][0],"JAVASCRIPT_PLATFORM",r),o([][0],"JAVASCRIPT_ENGINE",n),o([][0],"JAVASCRIPT_FRAMEWORK",i),a.$require("asciidoctor/js/opal_ext/browser/file")},Opal.modules["asciidoctor/js/asciidoctor_ext/browser/abstract_node"]=function(t){var e,r,n,i,s=t.module,o=t.klass,a=t.hash2,l=t.truthy,$=t.def,u=[],c=t.nil,h=t.$$$;return t.add_stubs("web_path,path_resolver,uriish?,[],attr?,start_with?,descends_from?,base_dir,join,prepare_source_string,read,fetch,warn,logger,normalize_system_path,read_asset"),n=[r=o((e=[s(u[0],"Asciidoctor")].concat(u))[0],null,"AbstractNode")].concat(e),i=t.$r(n),r.$$prototype.document=c,$(r,"$read_contents",function(e,r){var n=c,s=c,o=c;if(null==r&&(r=a([],{})),n=this.document,!(l(i("Helpers")["$uriish?"](e))||l(s=r["$[]"]("start"))&&l(i("Helpers")["$uriish?"](s))&&l(e=n.$path_resolver().$web_path(e,s))))return e=this.$normalize_system_path(e,r["$[]"]("start"),c,a(["target_name"],{target_name:l(o=r["$[]"]("label"))?o:"asset"})),this.$read_asset(e,a(["normalize","warn_on_failure","label"],{normalize:r["$[]"]("normalize"),warn_on_failure:r.$fetch("warn_on_failure",!0),label:r["$[]"]("label")}));if(!(l(n.$path_resolver()["$descends_from?"](e,n.$base_dir()))||l(e["$start_with?"]("chrome://"))||l(n["$attr?"]("allow-uri-read"))))return l(r.$fetch("warn_on_failure",!0))&&this.$logger().$warn("cannot retrieve contents of "+(l(o=r["$[]"]("label"))?o:"asset")+" at URI: "+e+" (allow-uri-read attribute not enabled)"),c;try{if(l(r["$[]"]("normalize")))return i("Helpers").$prepare_source_string(h("File").$read(e)).$join(i("LF"));return h("File").$read(e)}catch(n){if(t.rescue(n,[i("StandardError")]))try{return l(r.$fetch("warn_on_failure",!0))&&this.$logger().$warn("could not retrieve contents of "+(l(o=r["$[]"]("label"))?o:"asset")+" at URI: "+e),c}finally{t.pop_exception()}else throw n}},-2),$(r,"$generate_data_uri_from_uri",function(t,e){null==e&&(e=!1);var r="",n="",i=-1;try{var s=new XMLHttpRequest;s.open("GET",t,!1),s.overrideMimeType("text/plain; charset=x-user-defined"),s.addEventListener("load",function(){if(i=this.status,0===i||200===i){for(var t="",e=this.responseText,s=0,o=e.length;s<o;++s){var a=e.charCodeAt(s),l=255&a;t+=String.fromCharCode(l)}n=btoa(t),r=this.getResponseHeader("content-type")}}),s.send(null),!r&&(t.endsWith(".jpeg")||t.endsWith(".jpg")||t.endsWith(".jpe")?r="image/jpg":t.endsWith(".png")?r="image/png":t.endsWith(".svg")?r="image/svg+xml":t.endsWith(".bmp")?r="image/bmp":(t.endsWith(".tif")||t.endsWith(".tiff"))&&(r="image/tiff"))}catch(t){i=0}return 404!==i&&(0!==i||n&&r)?"data:"+r+";base64,"+n:(this.$logger().$warn("could not retrieve image data from URI: "+t),t)},-2)},Opal.modules["asciidoctor/js/asciidoctor_ext/browser/open_uri"]=function(t){var e,r,n=t.module,i=t.slice,s=t.send,o=t.to_a,a=t.defs,l=[],$=t.nil;return t.add_stubs("new,path"),e=[n(l[0],"OpenURI")].concat(l),a((r=t.$r(e))("OpenURI"),"$open_uri",function e(n,a){var l,u=e.$$p||$,c=$;return(e.$$p=null,l=i(arguments,1),c=s(r("File"),"new",[this.$path()].concat(o(l))),u!==$)?t.yield1(u,c):c},-2)},Opal.modules["asciidoctor/js/asciidoctor_ext/browser/path_resolver"]=function(t){var e=t.module,r=t.klass,n=t.truthy,i=t.def,s=[],o=t.nil;return t.add_stubs("absolute_path?,start_with?"),i(r([e(s[0],"Asciidoctor")].concat(s)[0],null,"PathResolver"),"$root?",function(t){var e=o;return n(e=this["$absolute_path?"](t))?e:t["$start_with?"]("file://","http://","https://","chrome://")})},Opal.modules["asciidoctor/js/asciidoctor_ext/browser/reader"]=function(t){var e,r,n,i,s,o,a=t.module,l=t.klass,$=t.truthy,u=t.eqeq,c=t.not,h=t.def,_=[],d=t.nil;return t.add_stubs("posixify,new,base_dir,start_with?,uriish?,key?,attributes,descends_from?,replace_next_line,absolute_path?,==,empty?,!,slice,length"),e=[a(_[0],"Asciidoctor")].concat(_),r=t.$r(e),i=[n=l(e[0],r("Reader"),"PreprocessorReader")].concat(e),s=t.$r(i),(o=n.$$prototype).path_resolver=o.document=o.include_stack=o.dir=d,h(n,"$resolve_include_path",function(t,e,r){var n,i=d,o=d,a=d,l=d,h=d,_=d,p=d,f=d;if(i=(this.path_resolver=$(o=this.path_resolver)?o:s("PathResolver").$new("\\")).$posixify(t),(n=["file",this.document.$base_dir()])[0],a=n[1],$(i["$start_with?"]("file://")))l=h=i;else if($(s("Helpers")["$uriish?"](i))){if(!($(this.path_resolver["$descends_from?"](i,a))||$(this.document.$attributes()["$key?"]("allow-uri-read"))))return this.$replace_next_line("link:"+t+"["+e+"]");l=h=i}else if($(this.path_resolver["$absolute_path?"](i)))l=h="file://"+($(i["$start_with?"]("/"))?"":"/")+i;else if(u(_=$(p=this.include_stack["$empty?"]())?a:this.dir,"."))l=h=i;else if($(_["$start_with?"]("file://"))||c(s("Helpers")["$uriish?"](_)))l=""+_+"/"+i,h=$(p)?i:u(a,".")||c(f=this.path_resolver["$descends_from?"](l,a))?l:l.$slice(f,l.$length());else if($(p))l=""+_+"/"+(h=i);else{if(!($(f=this.path_resolver["$descends_from?"](_,a))||$(this.document.$attributes()["$key?"]("allow-uri-read"))))return this.$replace_next_line("link:"+t+"["+e+"]");l=""+_+"/"+i,h=$(f)?l.$slice(f,l.$length()):i}return[l,"file",h]})},Opal.modules["asciidoctor/js/asciidoctor_ext/browser"]=function(t){var e=t.eqeq,r=t.top,n=t.$r([]),i=t.nil;return(t.add_stubs("==,require"),e(n("JAVASCRIPT_IO_MODULE"),"xmlhttprequest"))?(r.$require("asciidoctor/js/asciidoctor_ext/browser/abstract_node"),r.$require("asciidoctor/js/asciidoctor_ext/browser/open_uri"),r.$require("asciidoctor/js/asciidoctor_ext/browser/path_resolver"),r.$require("asciidoctor/js/asciidoctor_ext/browser/reader")):i},Opal.modules.set=Opal.return_val(Opal.nil),Opal.modules["asciidoctor/js/opal_ext/kernel"]=function(t){var e,r,n,i=t.module,s=t.slice,o=t.send,a=t.to_a,l=t.def,$=t.return_val,u=[],c=t.nil;return t.add_stubs("new"),r=[e=i(u[0],"Kernel")].concat(u),n=t.$r(r),l(e,"$open",function e(r,i){var l,$=e.$$p||c,u=c;return(e.$$p=null,l=s(arguments,1),u=o(n("File"),"new",[r].concat(a(l))),$!==c)?t.yield1($,u):u},-2),l(e,"$__dir__",$(""))},Opal.modules["asciidoctor/js/opal_ext/file"]=function(t){var e,r,n,i,s,o,a,l,$,u,c=t.klass,h=t.def,_=t.truthy,d=t.gvars,p=t.return_val,f=t.defs,m=[],g=t.nil;return t.add_stubs("attr_reader,delete,gsub,read,size,to_enum,chomp,each_line,readlines,split"),r=[e=c(m[0],null,"File")].concat(m),n=t.$r(r),(i=e.$$prototype).eof=i.path=g,e.$attr_reader("eof"),e.$attr_reader("lineno"),e.$attr_reader("path"),h(e,"$initialize",function(t,e){var r=g;return null==e&&(e="r"),this.path=t,this.contents=g,this.eof=!1,this.lineno=0,e=e.$delete("b"),r=/:(.*)/,e=e.$gsub(r,""),this.flags=e},-2),h(e,"$read",function(){var t=g;return _(this.eof)?"":(t=n("File").$read(this.path),this.eof=!0,this.lineno=t.$size(),t)}),h(e,"$each_line",function e(r){var i=e.$$p||g,s=g;if(null==d["/"]&&(d["/"]=g),e.$$p=null,null==r&&(r=d["/"]),_(this.eof))return i!==g?this:[].$to_enum();if(i===g)return this.$read().$each_line();s=n("File").$read(this.path),this.eof=!1,this.lineno=0;for(var o=s.$chomp(),a=s.length!=o.length,l=o.split(r),$=0,u=l.length;$<u;$++)this.lineno+=1,$<u-1||a?t.yield1(i,l[$]+r):t.yield1(i,l[$]);return this.eof=!0,this},-1),h(e,"$readlines",function(){return n("File").$readlines(this.path)}),o=[s=t.get_singleton_class(e)].concat(r),a=t.$r(o),h(s,"$readlines",function(t,e){return null==d["/"]&&(d["/"]=g),null==e&&(e=d["/"]),a("File").$read(t).$split(e)},-2),h(s,"$file?",p(!0)),h(s,"$readable?",p(!0)),h(s,"$read",p("")),$=[l=c(m[0],null,"IO")].concat(m),u=t.$r($),f(l,"$read",function(t){return u("File").$read(t)})},Opal.modules["asciidoctor/js/opal_ext/match_data"]=function(t){var e,r=t.klass,n=t.send,i=t.def,s=t.nil;return t.add_stubs("[]="),(e=r([][0],null,"MatchData")).$$prototype.matches=s,i(e,"$[]=",function(t,e){var r;return r=[t,e],n(this.matches,"[]=",r),r[r.length-1]})},Opal.modules["asciidoctor/js/opal_ext/string"]=function(t){var e,r=t.klass,n=t.truthy,i=t.rb_lt,s=t.def,o=t.alias,a=t.rb_ge,l=t.eqeq,$=t.rb_minus,u=t.nil;return t.add_stubs("method_defined?,<,length,bytes,to_s,byteslice,limit_bytesize,>=,==,-,_original_byteslice,unpack,_original_unpack"),n((e=r([][0],null,"String"))["$method_defined?"]("limit_bytesize"))||s(e,"$limit_bytesize",function(t){return n(i(t,this.$bytes().$length()))?this.$byteslice(0,t).$to_s():this.$to_s()}),n(e["$method_defined?"]("limit"))||o(e,"limit","limit_bytesize"),o(e,"_original_byteslice","byteslice"),s(e,"$byteslice",function(t,e){return(null==e&&(e=1),l(t,3)&&n(a(e,t))&&n(65279===this.charCodeAt()))?this.substr(1).$byteslice(0,$(e,3)):this.$_original_byteslice(t,e)},-2),o(e,"_original_unpack","unpack"),s(e,"$unpack",function(t){if(!l(t,"C3"))return this.$_original_unpack(t);if(n(65279===this.charCodeAt()))return[239,187,191];for(var e=[],r=0;r<3;r++)r<this.length?e.push(this.charCodeAt(r)):e.push(u);return e})},Opal.modules["asciidoctor/js/opal_ext/uri"]=function(t){var e,r,n,i=t.module,s=t.defs,o=t.return_self,a=t.def,l=[];return t.nil,t.add_stubs("extend"),r=[e=i(l[0],"URI")].concat(l),n=t.$r(r),s(e,"$parse",function(t){return t.$extend(n("URI"))}),a(e,"$path",o)},Opal.modules["asciidoctor/js/opal_ext/base64"]=function(t){var e,r,n,s=t.module,o=t.defs,a=t.ensure_kwargs,l=t.truthy,$=t.nil;return t.add_stubs("delete"),n=s([][0],"Base64"),e=t.global.btoa||function(t){return(t instanceof i?t:i.from(t.toString(),"binary")).toString("base64")},r=t.global.atob||function(t){return i.from(t,"base64").toString("binary")},o(n,"$decode64",function(t){return r(t.replace(/\r?\n/g,""))}),o(n,"$encode64",function(t){return e(t).replace(/(.{60})/g,"$1\n").replace(/([^\n])$/g,"$1\n")}),o(n,"$strict_decode64",function(t){return r(t)}),o(n,"$strict_encode64",function(t){return e(t)}),o(n,"$urlsafe_decode64",function(t){return r(t.replace(/\-/g,"+").replace(/_/g,"/"))}),o(n,"$urlsafe_encode64",function(t,r){var n,i=$;return null==(n=(r=a(r)).$$smap.padding)&&(n=!0),i=e(t).replace(/\+/g,"-").replace(/\//g,"_"),l(n)||(i=i.$delete("=")),i},-2)},Opal.modules["asciidoctor/js/opal_ext/number"]=function(t){var e,r,n,i=t.klass,s=t.truthy,o=t.rb_gt,a=t.def,l=[],$=t.$r(l);return t.nil,t.add_stubs("coerce_to!,>"),r=[e=i(l[0],$("Numeric"),"Number")].concat(l),n=t.$r(r),a(e,"$round",function(t){return s(o(t=n("Opal")["$coerce_to!"](t,n("Integer"),"to_int"),0))?Number(this.toFixed(t)):Math.round(this)},-1)},Opal.modules["asciidoctor/js/opal_ext"]=function(t){var e=t.top;t.nil,t.add_stubs("require"),e.$require("asciidoctor/js/opal_ext/kernel"),e.$require("asciidoctor/js/opal_ext/file"),e.$require("asciidoctor/js/opal_ext/match_data"),e.$require("asciidoctor/js/opal_ext/string"),e.$require("asciidoctor/js/opal_ext/uri"),e.$require("asciidoctor/js/opal_ext/base64"),e.$require("asciidoctor/js/opal_ext/number"),t.config.unsupported_features_severity="ignore",e.$require("asciidoctor/js/opal_ext/browser")},Opal.modules["asciidoctor/js/rx"]=function(t){var e,r,n,i=t.module,s=t.const_set,o=t.send,a=t.gvars,l=t.truthy,$=t.defs,u=t.rb_plus,c=[],h=t.nil;return t.add_stubs("gsub,+,unpack_hex_range"),r=[e=i(c[0],"Asciidoctor")].concat(c),n=t.$r(r),s(r[0],"HEX_RANGE_RX",/([A-F0-9]{4})(?:-([A-F0-9]{4}))?/),$(e,"$unpack_hex_range",function(t){return o(t,"gsub",[n("HEX_RANGE_RX")],function(){var t,e=h;return"\\u"+((t=a["~"])===h?h:t["$[]"](1))+(l(e=(t=a["~"])===h?h:t["$[]"](2))?"-\\u"+((t=a["~"])===h?h:t["$[]"](2)):e)})}),s(r[0],"P_L",u("A-Za-z",e.$unpack_hex_range("00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D037F03860388-038A038C038E-03A103A3-03F503F7-0481048A-052F0531-055605590561-058705D0-05EA05F0-05F20620-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280840-085808A0-08B20904-0939093D09500958-09610971-09800985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10CF10CF20D05-0D0C0D0E-0D100D12-0D3A0D3D0D4E0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC-0EDF0F000F40-0F470F49-0F6C0F88-0F8C1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510C710CD10D0-10FA10FC-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA16F1-16F81700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191E1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1BBA-1BE51C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11CF51CF61D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209C21022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2CF22CF32D00-2D252D272D2D2D30-2D672D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A66EA67F-A69DA6A0-A6E5A717-A71FA722-A788A78B-A78EA790-A7ADA7B0A7B1A7F7-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFA9E0-A9E4A9E6-A9EFA9FA-A9FEAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA7E-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDAAE0-AAEAAAF2-AAF4AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EAB30-AB5AAB5C-AB5FAB64AB65ABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC"))),s(r[0],"P_Nl",e.$unpack_hex_range("16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF")),s(r[0],"P_Nd",u("0-9",e.$unpack_hex_range("0660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0DE6-0DEF0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19D91A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9A9F0-A9F9AA50-AA59ABF0-ABF9FF10-FF19"))),s(r[0],"P_Pc",e.$unpack_hex_range("005F203F20402054FE33FE34FE4D-FE4FFF3F")),s(r[0],"CC_ALPHA",""+n("P_L")+n("P_Nl")),s(r[0],"CG_ALPHA","["+n("CC_ALPHA")+"]"),s(r[0],"CC_ALNUM",""+n("CC_ALPHA")+n("P_Nd")),s(r[0],"CG_ALNUM","["+n("CC_ALNUM")+"]"),s(r[0],"CC_WORD",""+n("CC_ALNUM")+n("P_Pc")),s(r[0],"CG_WORD","["+n("CC_WORD")+"]"),s(r[0],"CG_BLANK","[ \\t]"),s(r[0],"CC_EOL","(?=\\n|$)"),s(r[0],"CG_GRAPH","[^\\s\\x00-\\x1F\\x7F]"),s(r[0],"CC_ALL","[\\s\\S]"),s(r[0],"CC_ANY","[^\\n]")},Opal.modules.strscan=function(t){var e,r,n,i,s=t.klass,o=t.def,a=t.truthy,l=t.eqeqeq,$=t.Opal,u=t.return_ivar,c=t.send,h=t.alias,_=[],d=t.nil;return t.add_stubs("attr_reader,anchor,empty?,===,to_s,coerce_to!,scan_until,length,size,rest,pos=,beginning_of_line?,get_byte,private"),r=[e=s(_[0],null,"StringScanner")].concat(_),n=t.$r(r),(i=e.$$prototype).pos=i.string=i.working=i.matched=i.prev_pos=i.match=d,e.$attr_reader("pos","matched"),o(e,"$initialize",function(t){return this.string=t,this.pos=0,this.matched=d,this.working=t,this.match=[]}),e.$attr_reader("string"),o(e,"$beginning_of_line?",function(){return 0===this.pos||"\n"===this.string.charAt(this.pos-1)}),o(e,"$scan",function(t){var e=(t=this.$anchor(t)).exec(this.working);return null==e?this.matched=d:(this.prev_pos=this.pos,this.pos+=e[0].length,this.working=this.working.substring(e[0].length),this.matched=e[0],this.match=e,e[0])}),o(e,"$scan_until",function(t){t=this.$anchor(t);for(var e=this.working,r=0;e.length!=r;++r){var n=t.exec(e.substr(r));if(null!==n){var i=r+n[0].length,s=e.substr(0,i);return this.matched=n[0],this.match=n,this.prev_pos=this.pos+r,this.pos+=i,this.working=e.substr(i),s}}return this.matched=d}),o(e,"$[]",function(t){var e=d;if(a(this.match["$empty?"]()))return d;l(n("Symbol"),e=t)?t=t.$to_s():l(n("String"),e)||(t=$["$coerce_to!"](t,n("Integer"),"to_int"));var r=this.match;return(t<0&&(t+=r.length),t<0||t>=r.length||null==r[t])?d:r[t]}),o(e,"$check",function(t){var e=(t=this.$anchor(t)).exec(this.working);return null==e?this.matched=d:this.matched=e[0]}),o(e,"$check_until",function(t){var e=this.prev_pos,r=this.pos,n=this.working,i=this.$scan_until(t);return this.prev_pos=e,this.pos=r,this.working=n,i}),o(e,"$peek",function(t){return this.working.substring(0,t)}),o(e,"$eos?",function(){return 0===this.working.length}),o(e,"$exist?",function(t){var e=t.exec(this.working);return null==e?d:0==e.index?0:e.index+1}),o(e,"$skip",function(t){var e=(t=this.$anchor(t)).exec(this.working);if(null==e)return this.match=[],this.matched=d;var r=e[0],n=r.length;return this.matched=r,this.match=e,this.prev_pos=this.pos,this.pos+=n,this.working=this.working.substring(n),n}),o(e,"$skip_until",function(t){var e=this.$scan_until(t);return e===d?d:(this.matched=e.substr(-1),e.length)}),o(e,"$get_byte",function(){var t=d;return this.pos<this.string.length?(this.prev_pos=this.pos,this.pos+=1,t=this.matched=this.working.substring(0,1),this.working=this.working.substring(1)):this.matched=d,t}),o(e,"$match?",function(t){var e=(t=this.$anchor(t)).exec(this.working);return null==e?d:(this.prev_pos=this.pos,e[0].length)}),o(e,"$pos=",function(t){return t<0&&(t+=this.string.$length()),this.pos=t,this.working=this.string.slice(t)}),o(e,"$matched_size",function(){return this.matched===d?d:this.matched.length}),o(e,"$post_match",function(){return this.matched===d?d:this.string.substr(this.pos)}),o(e,"$pre_match",function(){return this.matched===d?d:this.string.substr(0,this.prev_pos)}),o(e,"$reset",function(){return this.working=this.string,this.matched=d,this.pos=0}),o(e,"$rest",u("working")),o(e,"$rest?",function(){return 0!==this.working.length}),o(e,"$rest_size",function(){return this.$rest().$size()}),o(e,"$terminate",function(){var t;return this.match=d,c(this,"pos=",t=[this.string.$length()]),t[t.length-1]}),o(e,"$unscan",function(){return this.pos=this.prev_pos,this.prev_pos=d,this.match=d,this}),h(e,"bol?","beginning_of_line?"),h(e,"getch","get_byte"),e.$private(),o(e,"$anchor",function(t){var e=t.toString().match(/\/([^\/]+)$/);return e=e?e[1]:void 0,RegExp("^(?:"+t.source+")",e)})},Opal.modules["asciidoctor/js"]=function(t){var e=t.top;return t.nil,t.add_stubs("require"),e.$require("asciidoctor/js/opal_ext"),e.$require("asciidoctor/js/rx"),e.$require("strscan")},Opal.modules["asciidoctor/core_ext/nil_or_empty"]=function(t){var e,r,n,i,s,o=t.klass,a=t.truthy,l=t.alias,$=t.nil;return t.add_stubs("method_defined?,nil?,empty?"),a((e=o([][0],null,"NilClass"))["$method_defined?"]("nil_or_empty?"))||l(e,"nil_or_empty?","nil?"),a((r=o([][0],null,"String"))["$method_defined?"]("nil_or_empty?"))||l(r,"nil_or_empty?","empty?"),a((n=o([][0],null,"Array"))["$method_defined?"]("nil_or_empty?"))||l(n,"nil_or_empty?","empty?"),a((i=o([][0],null,"Hash"))["$method_defined?"]("nil_or_empty?"))||l(i,"nil_or_empty?","empty?"),a((s=o([][0],null,"Numeric"))["$method_defined?"]("nil_or_empty?"))?$:l(s,"nil_or_empty?","nil?")},Opal.modules["asciidoctor/core_ext/hash/merge"]=function(t){var e=t.eqeq,r=t.send,n=t.slice,i=t.truthy,s=t.rb_lt,o=t.rb_gt,a=t.send2,l=t.find_super,$=t.def,u=t.top,c=t.$r([]),h=t.nil;return(t.add_stubs("==,arity,instance_method,send,new,<,length,dup,>,inject,merge,[]"),e(c("Hash").$instance_method("merge").$arity(),1))?c("Hash").$send("prepend",r(c("Module"),"new",[],function t(){return $(null==t.$$s?this:t.$$s,"$merge",function t(e){t.$$p;var $,u=h;return(t.$$p=null,$=n(arguments),i(s(u=$.$length(),1)))?this.$dup():i(o(u,1))?r($,"inject",[this],function(t,e){return null==t&&(t=h),null==e&&(e=h),t.$merge(e)}):a(this,l(this,"merge",t,!1,!0),"merge",[$["$[]"](0)],null)},-1)},{$$s:u})):h},Opal.modules["asciidoctor/core_ext/match_data/names"]=function(t){var e=t.truthy,r=t.klass,n=t.def,i=[],s=t.$r(i),o=t.nil;return(t.add_stubs("method_defined?"),e(s("MatchData")["$method_defined?"]("names")))?o:n(r(i[0],null,"MatchData"),"$names",function(){return[]})},Opal.modules["asciidoctor/core_ext"]=function(t){var e=t.top;return t.nil,e.$require("asciidoctor/core_ext.rb/../core_ext/nil_or_empty"),e.$require("asciidoctor/core_ext.rb/../core_ext/hash/merge"),e.$require("asciidoctor/core_ext.rb/../core_ext/match_data/names")},Opal.modules["asciidoctor/helpers"]=function(t){var e,r,n,i,s,o=t.module,a=t.truthy,l=t.eqeq,$=t.gvars,u=t.def,c=t.send,h=t.neqeq,_=t.const_set,d=t.hash2,p=t.to_ary,f=t.rb_times,m=t.eqeqeq,g=t.rb_plus,b=t.Class,v=t.Object,y=[],x=t.nil,k=t.$$$;return t.add_stubs("module_function,require,include?,include,==,path,message,raise,warn,logger,chomp,empty?,slice,unpack,[],[]=,byteslice,bytesize,map,rstrip,encode,encoding,nil_or_empty?,!=,tap,each_line,<<,!,start_with?,match?,gsub,rindex,index,basename,extname,length,directory?,dirname,mkdir_p,mkdir,private_constant,join,divmod,*,===,+,to_s,to_i,succ,class_for_name,const_get"),r=(e=[o(y[0],"Asciidoctor")].concat(y))[0],i=[n=o(r,"Helpers")].concat(e),s=t.$r(i),n.$module_function(),u(n,"$require_library",function(e,r,n){var i=x;null==$["!"]&&($["!"]=x),null==r&&(r=!0),null==n&&(n="abort");try{return this.$require(e)}catch(o){if(t.rescue(o,[k("LoadError")]))try{if(a(this["$include?"](s("Logging")))||this.$include(s("Logging")),a(r))switch(l(r,!0)&&(r=e),n){case"abort":i=l($["!"].$path(),r)?"":" (reason: "+(a($["!"].$path())?"cannot load '"+$["!"].$path()+"'":$["!"].$message())+")",this.$raise(k("LoadError"),"asciidoctor: FAILED: required gem '"+r+"' is not available"+i+". Processing aborted.");break;case"warn":i=l($["!"].$path(),r)?"":" (reason: "+(a($["!"].$path())?"cannot load '"+$["!"].$path()+"'":$["!"].$message())+")",this.$logger().$warn("optional gem '"+r+"' is not available"+i+". Functionality disabled.")}else switch(n){case"abort":this.$raise(k("LoadError"),"asciidoctor: FAILED: "+$["!"].$message().$chomp(".")+". Processing aborted.");break;case"warn":this.$logger().$warn(""+$["!"].$message().$chomp(".")+". Functionality disabled.")}return x}finally{t.pop_exception()}else throw o}},-2),u(n,"$prepare_source_array",function(t,e){var r=x,n=x,i=x;return(null==e&&(e=!0),a(t["$empty?"]()))?[]:l(r=(n=(i=t["$[]"](0)).$unpack("C3")).$slice(0,2),s("BOM_BYTES_UTF_16LE"))?(t["$[]="](0,i.$byteslice(2,i.$bytesize())),a(e)?c(t,"map",[],function(t){return null==t&&(t=x),t.$encode(s("UTF_8"),k(k("Encoding"),"UTF_16LE")).$rstrip()}):c(t,"map",[],function(t){return null==t&&(t=x),t.$encode(s("UTF_8"),k(k("Encoding"),"UTF_16LE")).$chomp()})):l(r,s("BOM_BYTES_UTF_16BE"))?(t["$[]="](0,i.$byteslice(2,i.$bytesize())),a(e)?c(t,"map",[],function(t){return null==t&&(t=x),t.$encode(s("UTF_8"),k(k("Encoding"),"UTF_16BE")).$rstrip()}):c(t,"map",[],function(t){return null==t&&(t=x),t.$encode(s("UTF_8"),k(k("Encoding"),"UTF_16BE")).$chomp()})):(l(n,s("BOM_BYTES_UTF_8"))&&t["$[]="](0,i.$byteslice(3,i.$bytesize())),l(i.$encoding(),s("UTF_8")))?a(e)?c(t,"map",[],function(t){return null==t&&(t=x),t.$rstrip()}):c(t,"map",[],function(t){return null==t&&(t=x),t.$chomp()}):a(e)?c(t,"map",[],function(t){return null==t&&(t=x),t.$encode(s("UTF_8")).$rstrip()}):c(t,"map",[],function(t){return null==t&&(t=x),t.$encode(s("UTF_8")).$chomp()})},-2),u(n,"$prepare_source_string",function(t,e){var r=x,n=x;return(null==e&&(e=!0),a(t["$nil_or_empty?"]()))?[]:(l(r=(n=t.$unpack("C3")).$slice(0,2),s("BOM_BYTES_UTF_16LE"))?t=t.$byteslice(2,t.$bytesize()).$encode(s("UTF_8"),k(k("Encoding"),"UTF_16LE")):l(r,s("BOM_BYTES_UTF_16BE"))?t=t.$byteslice(2,t.$bytesize()).$encode(s("UTF_8"),k(k("Encoding"),"UTF_16BE")):l(n,s("BOM_BYTES_UTF_8"))?l((t=t.$byteslice(3,t.$bytesize())).$encoding(),s("UTF_8"))||(t=t.$encode(s("UTF_8"))):h(t.$encoding(),s("UTF_8"))&&(t=t.$encode(s("UTF_8"))),a(e))?c([],"tap",[],function(e){return null==e&&(e=x),c(t,"each_line",[],function(t){return null==t&&(t=x),e["$<<"](t.$rstrip())})}):c([],"tap",[],function(e){return null==e&&(e=x),c(t,"each_line",[],function(t){return null==t&&(t=x),e["$<<"](t.$chomp())})})},-2),u(n,"$uriish?",l(k("RUBY_ENGINE"),"jruby")?function(t){var e=x,r=x;return a(e=a(r=t["$include?"](":"))?t["$start_with?"]("uri:classloader:")["$!"]():r)?s("UriSniffRx")["$match?"](t):e}:function(t){var e=x;return a(e=t["$include?"](":"))?s("UriSniffRx")["$match?"](t):e}),u(n,"$encode_uri_component",function(t){return encodeURIComponent(t).replace(/%20|[!'()*]/g,function(t){return"%20"===t?"+":"%"+t.charCodeAt(0).toString(16)})}),u(n,"$encode_spaces_in_uri",function(t){return a(t["$include?"](" "))?t.$gsub(" ","%20"):t}),u(n,"$rootname",function(t){var e=x;return a(e=t.$rindex("."))?a(t.$index("/",e))?t:t.$slice(0,e):t}),u(n,"$basename",function(t,e){return(null==e&&(e=x),a(e))?k("File").$basename(t,l(e,!0)?this.$extname(t):e):k("File").$basename(t)},-2),u(n,"$extname?",function(t){var e=x,r=x;return a(e=r=t.$rindex("."))?t.$index("/",r)["$!"]():e}),u(n,"$extname",a(k(k("File"),"ALT_SEPARATOR"))?function(t,e){var r=x;return(null==e&&(e=""),a(r=t.$rindex(".")))?a(t.$index("/",r))||a(t.$index(k(k("File"),"ALT_SEPARATOR"),r))?e:t.$slice(r,t.$length()):e}:function(t,e){var r=x;return(null==e&&(e=""),a(r=t.$rindex(".")))?a(t.$index("/",r))?e:t.$slice(r,t.$length()):e},-2),u(n,"$mkdir_p",function(e){var r=x;if(a(k("File")["$directory?"](e)))return x;l(r=k("File").$dirname(e),".")||this.$mkdir_p(r);try{return k("Dir").$mkdir(e)}catch(r){if(t.rescue(r,[k("SystemCallError")]))try{if(a(k("File")["$directory?"](e)))return x;return this.$raise()}finally{t.pop_exception()}else throw r}}),_(i[0],"ROMAN_NUMERALS",d(["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],{M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1})),n.$private_constant("ROMAN_NUMERALS"),u(n,"$int_to_roman",function(t){return c(s("ROMAN_NUMERALS"),"map",[],function(e,r){var n,i=x;return null==e&&(e=x),null==r&&(r=x),i=null==(n=p(t.$divmod(r)))[0]?x:n[0],t=null==n[1]?x:n[1],f(e,i)}).$join()}),u(n,"$nextval",function(t){var e=x;return m(k("Integer"),t)?g(t,1):l((e=t.$to_i()).$to_s(),t.$to_s())?g(e,1):t.$succ()}),u(n,"$resolve_class",function(t){return m(b,t)?t:m(k("String"),t)?this.$class_for_name(t):x}),u(n,"$class_for_name",function(e){var r=x;try{return m(b,r=v.$const_get(e,!1))||this.$raise(),r}catch(r){if(t.rescue(r,[s("StandardError")]))try{return this.$raise(k("NameError"),"Could not resolve class for name: "+e)}finally{t.pop_exception()}else throw r}})},Opal.modules.logger=function(t){var e,r,n,i,s,o,a,l,$=t.klass,u=t.module,c=t.const_set,h=t.send,_=t.def,d=t.eqeqeq,p=t.rb_plus,f=t.truthy,m=t.rb_le,g=t.rb_lt,b=[],v=t.nil,y=t.$$$;return t.add_stubs("include,to_h,map,constants,const_get,to_s,format,chr,strftime,message_as_string,===,+,message,class,join,backtrace,inspect,attr_reader,attr_accessor,new,key,upcase,raise,add,to_proc,<=,<,write,call,[],now"),r=[e=$(b[0],null,"Logger")].concat(b),n=t.$r(r),(i=e.$$prototype).level=i.progname=i.pipe=i.formatter=v,c((s=[u(r[0],"Severity")].concat(r))[0],"DEBUG",0),c(s[0],"INFO",1),c(s[0],"WARN",2),c(s[0],"ERROR",3),c(s[0],"FATAL",4),c(s[0],"UNKNOWN",5),e.$include(n("Severity")),c(r[0],"SEVERITY_LABELS",h(n("Severity").$constants(),"map",[],function(t){return null==t&&(t=v),[n("Severity").$const_get(t),t.$to_s()]}).$to_h()),a=[o=$(r[0],null,"Formatter")].concat(r),l=t.$r(a),c(a[0],"MESSAGE_FORMAT","%s, [%s] %5s -- %s: %s\n"),c(a[0],"DATE_TIME_FORMAT","%Y-%m-%dT%H:%M:%S.%6N"),_(o,"$call",function(t,e,r,n){return this.$format(l("MESSAGE_FORMAT"),t.$chr(),e.$strftime(l("DATE_TIME_FORMAT")),t,r,this.$message_as_string(n))}),_(o,"$message_as_string",function(t){var e=v,r=v;return d(y("String"),e=t)?t:d(y("Exception"),e)?p(""+t.$message()+" ("+t.$class()+")\n",(f(r=t.$backtrace())?r:[]).$join("\n")):t.$inspect()}),e.$attr_reader("level"),e.$attr_accessor("progname"),e.$attr_accessor("formatter"),_(e,"$initialize",function(t){return this.pipe=t,this.level=n("DEBUG"),this.formatter=n("Formatter").$new()}),_(e,"$level=",function(t){var e=v;return d(y("Integer"),t)?this.level=t:f(e=n("SEVERITY_LABELS").$key(t.$to_s().$upcase()))?this.level=e:this.$raise(n("ArgumentError"),"invalid log level: "+t)}),_(e,"$info",function t(e){var r=t.$$p||v;return t.$$p=null,null==e&&(e=v),h(this,"add",[n("INFO"),v,e],r.$to_proc())},-1),_(e,"$debug",function t(e){var r=t.$$p||v;return t.$$p=null,null==e&&(e=v),h(this,"add",[n("DEBUG"),v,e],r.$to_proc())},-1),_(e,"$warn",function t(e){var r=t.$$p||v;return t.$$p=null,null==e&&(e=v),h(this,"add",[n("WARN"),v,e],r.$to_proc())},-1),_(e,"$error",function t(e){var r=t.$$p||v;return t.$$p=null,null==e&&(e=v),h(this,"add",[n("ERROR"),v,e],r.$to_proc())},-1),_(e,"$fatal",function t(e){var r=t.$$p||v;return t.$$p=null,null==e&&(e=v),h(this,"add",[n("FATAL"),v,e],r.$to_proc())},-1),_(e,"$unknown",function t(e){var r=t.$$p||v;return t.$$p=null,null==e&&(e=v),h(this,"add",[n("UNKNOWN"),v,e],r.$to_proc())},-1),_(e,"$info?",function(){return m(this.level,n("INFO"))}),_(e,"$debug?",function(){return m(this.level,n("DEBUG"))}),_(e,"$warn?",function(){return m(this.level,n("WARN"))}),_(e,"$error?",function(){return m(this.level,n("ERROR"))}),_(e,"$fatal?",function(){return m(this.level,n("FATAL"))}),_(e,"$add",function e(r,i,s){var o=e.$$p||v,a=v;return e.$$p=null,null==i&&(i=v),null==s&&(s=v),!!f(g(r=f(a=r)?a:n("UNKNOWN"),this.level))||(s=f(a=s)?a:this.progname,f(i)||(o!==v?i=t.yieldX(o,[]):(i=s,s=this.progname)),this.pipe.$write(this.formatter.$call(f(a=n("SEVERITY_LABELS")["$[]"](r))?a:"ANY",y("Time").$now(),s,i)),!0)},-2)},Opal.modules["asciidoctor/logging"]=function(t){var e,r,n,i,s,o,a,l,$,u,c,h,_,d,p,f,m,g,b,v,y=t.module,x=t.klass,k=t.slice,w=t.send2,A=t.find_super,E=t.to_a,S=t.send,C=t.def,O=t.truthy,R=t.rb_gt,I=t.const_set,T=t.hash2,z=t.eqeqeq,F=t.gvars,N=t.alias,L=t.defs,D=t.top,q=[],B=t.nil,M=t.$$$;return t.add_stubs("require,attr_reader,progname=,formatter=,new,level=,>,[],===,inspect,to_h,map,constants,const_get,<<,clear,empty?,max,attr_accessor,memoize_logger,private,logger,extend,private_class_method,merge"),D.$require("logger"),n=[r=x((e=[y(q[0],"Asciidoctor")].concat(q))[0],M("Logger"),"Logger")].concat(e),i=t.$r(n),r.$$prototype.max_severity=B,r.$attr_reader("max_severity"),C(r,"$initialize",function t(e){var r,n,s=t.$$p||B;return t.$$p=null,r=k(arguments),w(this,A(this,"initialize",t,!1,!0),"initialize",E(r),s),this["$progname="]("asciidoctor"),this["$formatter="](i("BasicFormatter").$new()),S(this,"level=",n=[i("WARN")]),n[n.length-1]},-1),C(r,"$add",function t(e,r,n){var s=t.$$p||B,o=B;return t.$$p=null,null==r&&(r=B),null==n&&(n=B),O(R(e=O(o=e)?o:i("UNKNOWN"),this.max_severity=O(o=this.max_severity)?o:e))&&(this.max_severity=e),w(this,A(this,"add",t,!1,!0),"add",[e,r,n],s)},-2),o=[s=x(n[0],i("Formatter"),"BasicFormatter")].concat(n),a=t.$r(o),I(o[0],"SEVERITY_LABEL_SUBSTITUTES",T(["WARN","FATAL"],{WARN:"WARNING",FATAL:"FAILED"})),C(s,"$call",function(t,e,r,n){var i=B;return""+r+": "+(O(i=a("SEVERITY_LABEL_SUBSTITUTES")["$[]"](t))?i:t)+": "+(z(M("String"),n)?n:n.$inspect())+a("LF")}),C(y(n[0],"AutoFormattingMessage"),"$inspect",function(){var t=B;return O(t=this["$[]"]("source_location"))?""+t+": "+this["$[]"]("text"):this["$[]"]("text")}),$=[l=x(e[0],M("Logger"),"MemoryLogger")].concat(e),u=t.$r($),l.$$prototype.messages=B,I($[0],"SEVERITY_SYMBOL_BY_VALUE",S(u("Severity").$constants(!1),"map",[],function(t){return null==t&&(t=B),[u("Severity").$const_get(t),t]}).$to_h()),l.$attr_reader("messages"),C(l,"$initialize",function(){return this["$level="](u("WARN")),this.messages=[]}),C(l,"$add",function e(r,n,i){var s=e.$$p||B,o=B;return e.$$p=null,null==n&&(n=B),null==i&&(i=B),n=O(o=n)?o:s!==B?t.yieldX(s,[]):i,this.messages["$<<"](T(["severity","message"],{severity:u("SEVERITY_SYMBOL_BY_VALUE")["$[]"](O(o=r)?o:u("UNKNOWN")),message:n})),!0},-2),C(l,"$clear",function(){return this.messages.$clear()}),C(l,"$empty?",function(){return this.messages["$empty?"]()}),C(l,"$max_severity",function(){return O(this["$empty?"]())?B:S(this.messages,"map",[],function(t){return null==t&&(t=B),u("Severity").$const_get(t["$[]"]("severity"))}).$max()}),h=[c=x(e[0],M("Logger"),"NullLogger")].concat(e),_=t.$r(h),c.$$prototype.max_severity=B,c.$attr_reader("max_severity"),C(c,"$initialize",function(){var t;return S(this,"level=",t=[_("WARN")]),t[t.length-1]}),C(c,"$add",function(t,e,r){var n=B;return null==e&&(e=B),null==r&&(r=B),O(R(t=O(n=t)?n:_("UNKNOWN"),this.max_severity=O(n=this.max_severity)?n:t))&&(this.max_severity=t),!0},-2),p=[d=y(e[0],"LoggerManager")].concat(e),f=t.$r(p),d.logger_class=f("Logger"),[m=t.get_singleton_class(d)].concat(p),m.$attr_accessor("logger_class"),C(m,"$logger",function(t){var e=B;return null==this.logger&&(this.logger=B),null==this.logger_class&&(this.logger_class=B),null==F.stderr&&(F.stderr=B),null==t&&(t=F.stderr),this.$memoize_logger(),this.logger=O(e=this.logger)?e:this.logger_class.$new(t)},-1),C(m,"$logger=",function(t){var e=B;return null==this.logger_class&&(this.logger_class=B),null==F.stderr&&(F.stderr=B),this.logger=O(e=t)?e:this.logger_class.$new(F.stderr)}),m.$private(),C(m,"$memoize_logger",function(){var e;return N(e=t.get_singleton_class(this),"logger","logger"),e.$attr_reader("logger")}),b=[g=y(e[0],"Logging")].concat(e),v=t.$r(b),L(g,"$included",function(t){return t.$extend(v("Logging"))}),g.$private_class_method("included"),C(g,"$logger",function(){return v("LoggerManager").$logger()}),C(g,"$message_with_context",function(t,e){return null==e&&(e=T([],{})),T(["text"],{text:t}).$merge(e).$extend(M(v("Logger"),"AutoFormattingMessage"))},-2)},Opal.modules["asciidoctor/rx"]=function(t){var e,r,n=t.module,i=t.const_set,s=t.regexp,o=t.hash2,a=t.send,l=t.truthy,$=t.hash,u=[],c=t.nil,h=t.$$$;return t.add_stubs("join,to_a,new,[]=,empty?,escape"),e=[n(u[0],"Asciidoctor")].concat(u),r=t.$r(e),n(e[0],"Rx"),i(e[0],"AuthorInfoLineRx",s(["^(",r("CG_WORD"),"[",r("CC_WORD"),"\\-'.]*)(?: +(",r("CG_WORD"),"[",r("CC_WORD"),"\\-'.]*))?(?: +(",r("CG_WORD"),"[",r("CC_WORD"),"\\-'.]*))?(?: +<([^>]+)>)?$"])),i(e[0],"AuthorDelimiterRx",/;(?: |$)/),i(e[0],"RevisionInfoLineRx",s(["^(?:[^\\d{]*(",r("CC_ANY"),"*?),)? *(?!:)(",r("CC_ANY"),"*?)(?: *(?!^),?: *(",r("CC_ANY"),"*))?$"])),i(e[0],"ManpageTitleVolnumRx",s(["^(",r("CC_ANY"),"+?) *\\( *(",r("CC_ANY"),"+?) *\\)$"])),i(e[0],"ManpageNamePurposeRx",s(["^(",r("CC_ANY"),"+?) +- +(",r("CC_ANY"),"+)$"])),i(e[0],"ConditionalDirectiveRx",s(["^(\\\\)?(ifdef|ifndef|ifeval|endif)::(\\S*?(?:([,+])\\S*?)?)\\[(",r("CC_ANY"),"+)?\\]$"])),i(e[0],"EvalExpressionRx",s(["^(",r("CC_ANY"),"+?) *([=!><]=|[><]) *(",r("CC_ANY"),"+)$"])),i(e[0],"IncludeDirectiveRx",s(["^(\\\\)?include::([^\\s\\[](?:[^\\[]*[^\\s\\[])?)\\[(",r("CC_ANY"),"+)?\\]$"])),i(e[0],"TagDirectiveRx",/\b(?:tag|(e)nd)::(\S+?)\[\](?=$|[ \r])/m),i(e[0],"AttributeEntryRx",s(["^:(!?",r("CG_WORD"),"[^:]*):(?:[ \\t]+(",r("CC_ANY"),"*))?$"])),i(e[0],"InvalidAttributeNameCharsRx",s(["[^",r("CC_WORD"),"-]"])),i(e[0],"AttributeEntryPassMacroRx",s(["^pass:([a-z]+(?:,[a-z-]+)*)?\\[(",r("CC_ALL"),"*)\\]$"])),i(e[0],"AttributeReferenceRx",s(["(\\\\)?\\{(",r("CG_WORD"),"[",r("CC_WORD"),"-]*|(set|counter2?):",r("CC_ANY"),"+?)(\\\\)?\\}"])),i(e[0],"BlockAnchorRx",s(["^\\[\\[(?:|([",r("CC_ALPHA"),"_:][",r("CC_WORD"),"\\-:.]*)(?:, *(",r("CC_ANY"),"+))?)\\]\\]$"])),i(e[0],"BlockAttributeListRx",s(["^\\[(|[",r("CC_WORD"),".#%{,\"']",r("CC_ANY"),"*)\\]$"])),i(e[0],"BlockAttributeLineRx",s(["^\\[(?:|[",r("CC_WORD"),".#%{,\"']",r("CC_ANY"),"*|\\[(?:|[",r("CC_ALPHA"),"_:][",r("CC_WORD"),"\\-:.]*(?:, *",r("CC_ANY"),"+)?)\\])\\]$"])),i(e[0],"BlockTitleRx",s(["^\\.(\\.?[^ \\t.]",r("CC_ANY"),"*)$"])),i(e[0],"AdmonitionParagraphRx",s(["^(",r("ADMONITION_STYLES").$to_a().$join("|"),"):[ \\t]+"])),i(e[0],"LiteralParagraphRx",s(["^([ \\t]+",r("CC_ANY"),"*)$"])),i(e[0],"AtxSectionTitleRx",s(["^(=={0,5})[ \\t]+(",r("CC_ANY"),"+?)(?:[ \\t]+\\1)?$"])),i(e[0],"ExtAtxSectionTitleRx",s(["^(=={0,5}|#\\#{0,5})[ \\t]+(",r("CC_ANY"),"+?)(?:[ \\t]+\\1)?$"])),i(e[0],"SetextSectionTitleRx",s(["^((?!\\.)",r("CC_ANY"),"*?",r("CG_ALNUM"),r("CC_ANY"),"*)$"])),i(e[0],"InlineSectionAnchorRx",s([" (\\\\)?\\[\\[([",r("CC_ALPHA"),"_:][",r("CC_WORD"),"\\-:.]*)(?:, *(",r("CC_ANY"),"+))?\\]\\]$"])),i(e[0],"InvalidSectionIdCharsRx",s(["<[^>]+>|&(?:[a-z][a-z]+\\d{0,2}|#\\d\\d\\d{0,4}|#x[\\da-f][\\da-f][\\da-f]{0,3});|[^ ",r("CC_WORD"),"\\-.]+?"])),i(e[0],"SectionLevelStyleRx",/^sect\d$/),i(e[0],"AnyListRx",s(["^(?:[ \\t]*(?:-|\\*\\**|\\.\\.*|\\u2022|\\d+\\.|[a-zA-Z]\\.|[IVXivx]+\\))[ \\t]|(?!//[^/])[ \\t]*[^ \\t]",r("CC_ANY"),"*?(?::::{0,2}|;;)(?:$|[ \\t])|<(?:\\d+|\\.)>[ \\t])"])),i(e[0],"UnorderedListRx",s(["^[ \\t]*(-|\\*\\**|\\u2022)[ \\t]+(",r("CC_ANY"),"*)$"])),i(e[0],"OrderedListRx",s(["^[ \\t]*(\\.\\.*|\\d+\\.|[a-zA-Z]\\.|[IVXivx]+\\))[ \\t]+(",r("CC_ANY"),"*)$"])),i(e[0],"OrderedListMarkerRxMap",o(["arabic","loweralpha","lowerroman","upperalpha","upperroman"],{arabic:/\d+\./,loweralpha:/[a-z]\./,lowerroman:/[ivx]+\)/,upperalpha:/[A-Z]\./,upperroman:/[IVX]+\)/})),i(e[0],"DescriptionListRx",s(["^(?!//[^/])[ \\t]*([^ \\t]",r("CC_ANY"),"*?)(:::{0,2}|;;)(?:$|[ \\t]+(",r("CC_ANY"),"*)$)"])),i(e[0],"DescriptionListSiblingRx",o(["::",":::","::::",";;"],{"::":s(["^(?!//[^/])[ \\t]*([^ \\t]",r("CC_ANY"),"*?[^:]|[^ \\t:])(::)(?:$|[ \\t]+(",r("CC_ANY"),"*)$)"]),":::":s(["^(?!//[^/])[ \\t]*([^ \\t]",r("CC_ANY"),"*?[^:]|[^ \\t:])(:::)(?:$|[ \\t]+(",r("CC_ANY"),"*)$)"]),"::::":s(["^(?!//[^/])[ \\t]*([^ \\t]",r("CC_ANY"),"*?[^:]|[^ \\t:])(::::)(?:$|[ \\t]+(",r("CC_ANY"),"*)$)"]),";;":s(["^(?!//[^/])[ \\t]*([^ \\t]",r("CC_ANY"),"*?)(;;)(?:$|[ \\t]+(",r("CC_ANY"),"*)$)"])})),i(e[0],"CalloutListRx",s(["^<(\\d+|\\.)>[ \\t]+(",r("CC_ANY"),"*)$"])),i(e[0],"CalloutExtractRx",/((?:\/\/|#|--|;;) ?)?(\\)?<!?(|--)(\d+|\.)\3>(?=(?: ?\\?<!?\3(?:\d+|\.)\3>)*$)/),i(e[0],"CalloutExtractRxt","(\\\\)?<()(\\d+|\\.)>(?=(?: ?\\\\?<(?:\\d+|\\.)>)*$)"),i(e[0],"CalloutExtractRxMap",a(h("Hash"),"new",[],function(t,e){var n;return null==t&&(t=c),null==e&&(e=c),a(t,"[]=",n=[e,s(["(",l(e["$empty?"]())?"":""+h("Regexp").$escape(e)+" ?",")?",r("CalloutExtractRxt")])]),n[n.length-1]})),i(e[0],"CalloutScanRx",s(["\\\\?<!?(|--)(\\d+|\\.)\\1>(?=(?: ?\\\\?<!?\\1(?:\\d+|\\.)\\1>)*",r("CC_EOL"),")"])),i(e[0],"CalloutSourceRx",s(["((?://|#|--|;;) ?)?(\\\\)?&lt;!?(|--)(\\d+|\\.)\\3&gt;(?=(?: ?\\\\?&lt;!?\\3(?:\\d+|\\.)\\3&gt;)*",r("CC_EOL"),")"])),i(e[0],"CalloutSourceRxt","(\\\\)?&lt;()(\\d+|\\.)&gt;(?=(?: ?\\\\?&lt;(?:\\d+|\\.)&gt;)*"+r("CC_EOL")+")"),i(e[0],"CalloutSourceRxMap",a(h("Hash"),"new",[],function(t,e){var n;return null==t&&(t=c),null==e&&(e=c),a(t,"[]=",n=[e,s(["(",l(e["$empty?"]())?"":""+h("Regexp").$escape(e)+" ?",")?",r("CalloutSourceRxt")])]),n[n.length-1]})),i(e[0],"ListRxMap",o(["ulist","olist","dlist","colist"],{ulist:r("UnorderedListRx"),olist:r("OrderedListRx"),dlist:r("DescriptionListRx"),colist:r("CalloutListRx")})),i(e[0],"ColumnSpecRx",/^(?:(\d+)\*)?([<^>](?:\.[<^>]?)?|(?:[<^>]?\.)?[<^>])?(\d+%?|~)?([a-z])?$/),i(e[0],"CellSpecStartRx",/^[ \t]*(?:(\d+(?:\.\d*)?|(?:\d*\.)?\d+)([*+]))?([<^>](?:\.[<^>]?)?|(?:[<^>]?\.)?[<^>])?([a-z])?$/),i(e[0],"CellSpecEndRx",/[ \t]+(?:(\d+(?:\.\d*)?|(?:\d*\.)?\d+)([*+]))?([<^>](?:\.[<^>]?)?|(?:[<^>]?\.)?[<^>])?([a-z])?$/),i(e[0],"CustomBlockMacroRx",s(["^(",r("CG_WORD"),"[",r("CC_WORD"),"-]*)::(|\\S|\\S",r("CC_ANY"),"*?\\S)\\[(",r("CC_ANY"),"+)?\\]$"])),i(e[0],"BlockMediaMacroRx",s(["^(image|video|audio)::(\\S|\\S",r("CC_ANY"),"*?\\S)\\[(",r("CC_ANY"),"+)?\\]$"])),i(e[0],"BlockTocMacroRx",s(["^toc::\\[(",r("CC_ANY"),"+)?\\]$"])),i(e[0],"InlineAnchorRx",s(["(\\\\)?(?:\\[\\[([",r("CC_ALPHA"),"_:][",r("CC_WORD"),"\\-:.]*)(?:, *(",r("CC_ANY"),"+?))?\\]\\]|anchor:([",r("CC_ALPHA"),"_:][",r("CC_WORD"),"\\-:.]*)\\[(?:\\]|(",r("CC_ANY"),"*?[^\\\\])\\]))"])),i(e[0],"InlineAnchorScanRx",s(["(?:^|[^\\\\\\[])\\[\\[([",r("CC_ALPHA"),"_:][",r("CC_WORD"),"\\-:.]*)(?:, *(",r("CC_ANY"),"+?))?\\]\\]|(?:^|[^\\\\])anchor:([",r("CC_ALPHA"),"_:][",r("CC_WORD"),"\\-:.]*)\\[(?:\\]|(",r("CC_ANY"),"*?[^\\\\])\\])"])),i(e[0],"LeadingInlineAnchorRx",s(["^\\[\\[([",r("CC_ALPHA"),"_:][",r("CC_WORD"),"\\-:.]*)(?:, *(",r("CC_ANY"),"+?))?\\]\\]"])),i(e[0],"InlineBiblioAnchorRx",s(["^\\[\\[\\[([",r("CC_ALPHA"),"_:][",r("CC_WORD"),"\\-:.]*)(?:, *(",r("CC_ANY"),"+?))?\\]\\]\\]"])),i(e[0],"InlineEmailRx",s(["([\\\\>:/])?",r("CG_WORD"),"(?:&amp;|[",r("CC_WORD"),"\\-.%+])*@",r("CG_ALNUM"),"[",r("CC_ALNUM"),"_\\-.]*\\.[a-zA-Z]{2,5}\\b"])),i(e[0],"InlineFootnoteMacroRx",s(["\\\\?footnote(?:(ref):|:([",r("CC_WORD"),"-]+)?)\\[(?:|(",r("CC_ALL"),"*?[^\\\\]))\\](?!</a>)"],"m")),i(e[0],"InlineImageMacroRx",s(["\\\\?i(?:mage|con):([^:\\s\\[](?:[^\\n\\[]*[^\\s\\[])?)\\[(|",r("CC_ALL"),"*?[^\\\\])\\]"],"m")),i(e[0],"InlineIndextermMacroRx",s(["\\\\?(?:(indexterm2?):\\[(",r("CC_ALL"),"*?[^\\\\])\\]|\\(\\((",r("CC_ALL"),"+?)\\)\\)(?!\\)))"],"m")),i(e[0],"InlineKbdBtnMacroRx",s(["(\\\\)?(kbd|btn):\\[(",r("CC_ALL"),"*?[^\\\\])\\]"],"m")),i(e[0],"InlineLinkRx",s(["(^|link:|",r("CG_BLANK"),"|&lt;|[>\\(\\)\\[\\];\"'])(\\\\?(?:https?|file|ftp|irc)://)(?:([^\\s\\[\\]]+)\\[(|",r("CC_ALL"),"*?[^\\\\])\\]|([^\\s\\[\\]<]*([^\\s,.?!\\[\\]<\\)])))"],"m")),i(e[0],"InlineLinkMacroRx",s(["\\\\?(?:link|(mailto)):(|[^:\\s\\[][^\\s\\[]*)\\[(|",r("CC_ALL"),"*?[^\\\\])\\]"],"m")),i(e[0],"MacroNameRx",s(["^",r("CG_WORD"),"[",r("CC_WORD"),"-]*$"])),i(e[0],"InlineStemMacroRx",s(["\\\\?(stem|(?:latex|ascii)math):([a-z]+(?:,[a-z-]+)*)?\\[(",r("CC_ALL"),"*?[^\\\\])\\]"],"m")),i(e[0],"InlineMenuMacroRx",s(["\\\\?menu:(",r("CG_WORD"),"|[",r("CC_WORD"),"&][^\\n\\[]*[^\\s\\[])\\[ *(?:|(",r("CC_ALL"),"*?[^\\\\]))\\]"],"m")),i(e[0],"InlineMenuRx",s(['\\\\?"([',r("CC_WORD"),'&][^"]*?[ \\n]+&gt;[ \\n]+[^"]*)"'])),i(e[0],"InlinePassRx",$(!1,["+","-]",s(["((?:^|[^",r("CC_WORD"),";:\\\\])(?=(\\[)|\\+)|\\\\(?=\\[)|(?=\\\\\\+))(?:\\2(x-|[^\\]]+ x-)\\]|(?:\\[([^\\]]+)\\])?(?=(\\\\)?\\+))(\\5?(\\+|`)(\\S|\\S",r("CC_ALL"),"*?\\S)\\7)(?!",r("CG_WORD"),")"],"m")],!0,["`",c,s(["(^|[^`",r("CC_WORD"),"])(?:(\\Z)()|\\[([^\\]]+)\\](?=(\\\\))?)?(\\5?(`)([^`\\s]|[^`\\s]",r("CC_ALL"),"*?\\S)\\7)(?![`",r("CC_WORD"),"])"],"m")])),i(e[0],"InlinePassMacroRx",s(["(?:(?:(\\\\?)\\[([^\\]]+)\\])?(\\\\{0,2})(\\+\\+\\+?|\\$\\$)(",r("CC_ALL"),"*?)\\4|(\\\\?)pass:([a-z]+(?:,[a-z-]+)*)?\\[(|",r("CC_ALL"),"*?[^\\\\])\\])"],"m")),i(e[0],"InlineXrefMacroRx",s(["\\\\?(?:&lt;&lt;([",r("CC_WORD"),"#/.:{]",r("CC_ALL"),"*?)&gt;&gt;|xref:([",r("CC_WORD"),"#/.:{]",r("CC_ALL"),"*?)\\[(?:\\]|(",r("CC_ALL"),"*?[^\\\\])\\]))"],"m")),i(e[0],"HardLineBreakRx",s(["^(",r("CC_ANY"),"*) \\+$"],"m")),i(e[0],"MarkdownThematicBreakRx",/^ {0,3}([-*_])( *)\1\2\1$/),i(e[0],"ExtLayoutBreakRx",/^(?:'{3,}|<{3,}|([-*_])( *)\1\2\1)$/),i(e[0],"BlankLineRx",/\n{2,}/),i(e[0],"EscapedSpaceRx",/\\([ \t\n])/),i(e[0],"ReplaceableTextRx",/[&']|--|\.\.\.|\([CRT]M?\)/),i(e[0],"SpaceDelimiterRx",/([^\\])[ \t\n]+/),i(e[0],"SubModifierSniffRx",/[+-]/),i(e[0],"TrailingDigitsRx",/\d+$/),i(e[0],"UriSniffRx",s(["^",r("CG_ALPHA"),"[",r("CC_ALNUM"),".+-]+:/{0,2}"])),i(e[0],"XmlSanitizeRx",/<[^>]+>/)},Opal.modules["asciidoctor/substitutors"]=function(t){var e,r,n,i,s,o=t.module,a=t.const_set,l=t.hash2,$=t.hash,u=t.rb_plus,c=t.regexp,h=t.not,_=t.truthy,d=t.send,p=t.def,f=t.alias,m=t.gvars,g=t.eqeq,b=t.to_ary,v=t.neqeq,y=t.to_a,x=t.eqeqeq,k=t.rb_gt,w=t.slice,A=t.rb_minus,E=t.rb_lt,S=t.rb_times,C=[],O=t.nil,R=t.$$$;return t.add_stubs("freeze,+,keys,!,empty?,===,[],join,include?,extract_passthroughs,each,sub_specialchars,sub_quotes,sub_attributes,sub_replacements,sub_macros,highlight_source,sub_callouts,sub_post_replacements,warn,logger,restore_passthroughs,clear,split,apply_subs,gsub,match?,compat_mode,convert_quoted_text,attributes,==,shift,store_attribute,!=,attribute_undefined,counter,key?,downcase,attribute_missing,info,squeeze,delete,reject,start_with?,do_replacement,inline_macros?,extensions,inline_macros,regexp,instance,slice,length,names,config,merge,[]=,normalize_text,parse_attributes,process_method,expand_subs,text=,text,convert,class,strip,index,min,compact,>,end_with?,map,chop,new,pop,rstrip,register,tr,basename,parse,lstrip,split_simple_csv,-,partition,extract_attributes_from_text,sub,encode_uri_component,style,extname?,rindex,catalog,info?,fetch,outfilesuffix,natural_xrefs,resolve_id,find,footnotes,id,<,size,<<,attr?,attr,to_s,read_next_id,callouts,highlight?,syntax_highlighter,sub_source,extract_callouts,name,to_i,to_sym,resolve_lines_to_highlight,highlight,nil_or_empty?,restore_callouts,count,to_a,|,sort,*,parse_quoted_text_attributes,resolve_pass_subs,basebackend?,error,chr,drop,&,resolve_subs,resolve_block_subs,parse_into,private,shorthand_property_syntax,each_char"),r=(e=[o(C[0],"Asciidoctor")].concat(C))[0],i=[n=o(r,"Substitutors")].concat(e),s=t.$r(i),a(i[0],"SpecialCharsRx",/[<&>]/),a(i[0],"SpecialCharsTr",l([">","<","&"],{">":"&gt;","<":"&lt;","&":"&amp;"})),a(i[0],"QuotedTextSniffRx",$(!1,/[*_`#^~]/,!0,/[*'_+#^~]/)),a(i[0],"BASIC_SUBS",["specialcharacters"]).$freeze(),a(i[0],"HEADER_SUBS",["specialcharacters","attributes"]).$freeze(),a(i[0],"NO_SUBS",[]).$freeze(),a(i[0],"NORMAL_SUBS",["specialcharacters","quotes","attributes","replacements","macros","post_replacements"]).$freeze(),a(i[0],"REFTEXT_SUBS",["specialcharacters","quotes","replacements"]).$freeze(),a(i[0],"VERBATIM_SUBS",["specialcharacters","callouts"]).$freeze(),a(i[0],"SUB_GROUPS",l(["none","normal","verbatim","specialchars"],{none:s("NO_SUBS"),normal:s("NORMAL_SUBS"),verbatim:s("VERBATIM_SUBS"),specialchars:s("BASIC_SUBS")})),a(i[0],"SUB_HINTS",l(["a","m","n","p","q","r","c","v"],{a:"attributes",m:"macros",n:"normal",p:"post_replacements",q:"quotes",r:"replacements",c:"specialcharacters",v:"verbatim"})),a(i[0],"SUB_OPTIONS",l(["block","inline"],{block:u(u(s("SUB_GROUPS").$keys(),s("NORMAL_SUBS")),["callouts"]),inline:u(s("SUB_GROUPS").$keys(),s("NORMAL_SUBS"))})),a(i[0],"CAN","\x18"),a(i[0],"DEL","\x7f"),a(i[0],"PASS_START","\x96"),a(i[0],"PASS_END","\x97"),a(i[0],"PassSlotRx",c([s("PASS_START"),"(\\d+)",s("PASS_END")])),a(i[0],"HighlightedPassSlotRx",c(["<span\\b[^>]*>",s("PASS_START"),"</span>[^\\d]*(\\d+)[^\\d]*<span\\b[^>]*>",s("PASS_END"),"</span>"])),a(i[0],"RS","\\"),a(i[0],"R_SB","]"),a(i[0],"ESC_R_SB","\\]"),a(i[0],"PLUS","+"),p(n,"$apply_subs",function(t,e){var r=O,n=O,i=O,o=O;return(null==this.passthroughs&&(this.passthroughs=O),null==this.passthroughs_locked&&(this.passthroughs_locked=O),null==e&&(e=s("NORMAL_SUBS")),_(t["$empty?"]())||h(e))?t:(_(r=R("Array")["$==="](t))&&(t=_(t["$[]"](1))?t.$join(s("LF")):t["$[]"](0)),_(e["$include?"]("macros"))&&(t=this.$extract_passthroughs(t),_(this.passthroughs["$empty?"]())||(n=this.passthroughs,this.passthroughs_locked=_(i=this.passthroughs_locked)?i:o=!0)),d(e,"each",[],function r(n){var i=null==r.$$s?this:r.$$s;switch(null==n&&(n=O),n){case"specialcharacters":return t=i.$sub_specialchars(t);case"quotes":return t=i.$sub_quotes(t);case"attributes":if(_(t["$include?"](s("ATTR_REF_HEAD"))))return t=i.$sub_attributes(t);return O;case"replacements":return t=i.$sub_replacements(t);case"macros":return t=i.$sub_macros(t);case"highlight":return t=i.$highlight_source(t,e["$include?"]("callouts"));case"callouts":if(_(e["$include?"]("highlight")))return O;return t=i.$sub_callouts(t);case"post_replacements":return t=i.$sub_post_replacements(t);default:return i.$logger().$warn("unknown substitution type "+n)}},{$$s:this}),_(n)&&(t=this.$restore_passthroughs(t),_(o)&&(n.$clear(),this.passthroughs_locked=O)),_(r))?t.$split(s("LF"),-1):t},-2),p(n,"$apply_normal_subs",function(t){return this.$apply_subs(t,s("NORMAL_SUBS"))}),p(n,"$apply_header_subs",function(t){return this.$apply_subs(t,s("HEADER_SUBS"))}),f(n,"apply_title_subs","apply_subs"),p(n,"$apply_reftext_subs",function(t){return this.$apply_subs(t,s("REFTEXT_SUBS"))}),p(n,"$sub_specialchars",function(t){return _(t["$include?"](">"))||_(t["$include?"]("&"))||_(t["$include?"]("<"))?t.$gsub(s("SpecialCharsRx"),s("SpecialCharsTr")):t}),f(n,"sub_specialcharacters","sub_specialchars"),p(n,"$sub_quotes",function(t){var e=O;return null==this.document&&(this.document=O),_(s("QuotedTextSniffRx")["$[]"](e=this.document.$compat_mode())["$match?"](t))&&d(s("QUOTE_SUBS")["$[]"](e),"each",[],function e(r,n,i){var s=null==e.$$s?this:e.$$s;return null==r&&(r=O),null==n&&(n=O),null==i&&(i=O),t=d(t,"gsub",[i],function t(){var e=null==t.$$s?this:t.$$s;return null==m["~"]&&(m["~"]=O),e.$convert_quoted_text(m["~"],r,n)},{$$s:s})},{$$s:this}),t}),p(n,"$sub_attributes",function(t,e){var r=O,n=O,i=O,o=O,a=O,$=O,u=O,c=O;return(null==this.document&&(this.document=O),null==e&&(e=l([],{})),r=this.document.$attributes(),n=i=o=a=$=u=O,t=d(t,"gsub",[s("AttributeReferenceRx")],function t(){var l,c=null==t.$$s?this:t.$$s,h=O,p=O,f=O,x=O,k=O,w=O;if(null==c.document&&(c.document=O),g((l=m["~"])===O?O:l["$[]"](1),s("RS"))||g((l=m["~"])===O?O:l["$[]"](4),s("RS")))return"{"+((l=m["~"])===O?O:l["$[]"](2))+"}";if(_((l=m["~"])===O?O:l["$[]"](3)))switch((h=((l=m["~"])===O?O:l["$[]"](2)).$split(":",3)).$shift()){case"set":if(null==(l=b(s("Parser").$store_attribute(h["$[]"](0),_(p=h["$[]"](1))?p:"",c.document)))[0]||l[0],_(f=null==l[1]?O:l[1])||v($=_(p=$)?p:_(x=r["$[]"]("attribute-undefined"))?x:s("Compliance").$attribute_undefined(),"drop-line"))return n=a=s("DEL");return n=i=s("CAN");case"counter2":return d(c.document,"counter",y(h)),n=a=s("DEL");default:return d(c.document,"counter",y(h))}else if(_(r["$key?"](k=((l=m["~"])===O?O:l["$[]"](2)).$downcase())))return r["$[]"](k);else if(_(f=s("INTRINSIC_ATTRIBUTES")["$[]"](k)))return f;else switch(u=_(p=u)?p:_(x=_(w=e["$[]"]("attribute_missing"))?w:r["$[]"]("attribute-missing"))?x:s("Compliance").$attribute_missing()){case"drop":return n=a=s("DEL");case"drop-line":return g(o=_(p=o)?p:_(x=e["$[]"]("drop_line_severity"))?x:"info","info")&&d(c.$logger(),"info",[],function(){return"dropping line containing reference to missing attribute: "+k}),n=i=s("CAN");case"warn":return c.$logger().$warn("skipping reference to missing attribute: "+k),(l=m["~"])===O?O:l["$[]"](0);default:return(l=m["~"])===O?O:l["$[]"](0)}},{$$s:this}),_(n))?_(a)?(c=t.$squeeze(s("DEL")).$split(s("LF"),-1),_(i))?d(c,"reject",[],function(t){var e=O,r=O,n=O;return(null==t&&(t=O),_(e=_(r=_(n=t["$=="](s("DEL")))?n:t["$=="](s("CAN")))?r:t["$start_with?"](s("CAN"))))?e:t["$include?"](s("CAN"))}).$join(s("LF")).$delete(s("DEL")):d(c,"reject",[],function(t){return null==t&&(t=O),t["$=="](s("DEL"))}).$join(s("LF")).$delete(s("DEL")):_(t["$include?"](s("LF")))?d(t.$split(s("LF"),-1),"reject",[],function(t){var e=O,r=O;return(null==t&&(t=O),_(e=_(r=t["$=="](s("CAN")))?r:t["$start_with?"](s("CAN"))))?e:t["$include?"](s("CAN"))}).$join(s("LF")):"":t},-2),p(n,"$sub_replacements",function(t){return _(s("ReplaceableTextRx")["$match?"](t))&&d(s("REPLACEMENTS"),"each",[],function e(r,n,i){var s=null==e.$$s?this:e.$$s;return null==r&&(r=O),null==n&&(n=O),null==i&&(i=O),t=d(t,"gsub",[r],function t(){var e=null==t.$$s?this:t.$$s;return null==m["~"]&&(m["~"]=O),e.$do_replacement(m["~"],n,i)},{$$s:s})},{$$s:this}),t}),p(n,"$sub_macros",function(e){var r=O,n=O,i=O,o=O,a=O,$=O,c=O,p=O;return null==this.document&&(this.document=O),null==this.parent&&(this.parent=O),null==this.context&&(this.context=O),r=e["$include?"]("["),n=e["$include?"](":"),i=_(o=r)?n:o,a=_(o=i)?e["$include?"](":["):o,$=(c=this.document).$attributes(),_(p=c.$extensions())&&_(p["$inline_macros?"]())&&d(p.$inline_macros(),"each",[],function r(n){var i=null==r.$$s?this:r.$$s;return null==n&&(n=O),e=d(e,"gsub",[n.$instance().$regexp()],function e(){var r,i,a=null==e.$$s?this:e.$$s,$=O,u=O,c=O,h=O,p=O,f=O,b=O,v=O,y=O;return(null==m["~"]&&(m["~"]=O),_(($=(r=m["~"])===O?O:r["$[]"](0))["$start_with?"](s("RS"))))?((r=m["~"])===O?O:r["$[]"](0)).$slice(1,((r=m["~"])===O?O:r["$[]"](0)).$length()):(u=_(m["~"].$names()["$empty?"]())?(r=[(i=m["~"])===O?O:i["$[]"](1),(i=m["~"])===O?O:i["$[]"](2)])[0]:(r=[function(){try{return m["~"]["$[]"]("target")}catch(e){if(t.rescue(e,[s("StandardError")]))try{return O}finally{t.pop_exception()}else throw e}}(),function(){try{return m["~"]["$[]"]("content")}catch(e){if(t.rescue(e,[s("StandardError")]))try{return O}finally{t.pop_exception()}else throw e}}()])[0],c=r[1],h=_(p=(f=n.$config())["$[]"]("default_attrs"))?p.$merge():l([],{}),_(c)&&(_(c["$empty?"]())?g(f["$[]"]("content_model"),"attributes")||h["$[]="]("text",c):(c=a.$normalize_text(c,!0,!0),g(f["$[]"]("content_model"),"attributes")?a.$parse_attributes(c,_(o=_(b=f["$[]"]("positional_attrs"))?b:f["$[]"]("pos_attrs"))?o:[],l(["into"],{into:h})):h["$[]="]("text",c)),u=_(o=u)?o:g(f["$[]"]("format"),"short")?c:u),x(s("Inline"),v=n.$process_method()["$[]"](a,u,h)))?(_(y=v.$attributes().$delete("subs"))&&_(y=a.$expand_subs(y,"custom inline macro"))&&v["$text="](a.$apply_subs(v.$text(),y)),v.$convert()):_(v)?(d(a.$logger(),"info",[],function(){return"expected substitution value for custom inline macro to be of type Inline; got "+v.$class()+": "+$}),v):""},{$$s:i})},{$$s:this}),_($["$key?"]("experimental"))&&(_(a)&&(_(e["$include?"]("kbd:"))||_(e["$include?"]("btn:")))&&(e=d(e,"gsub",[s("InlineKbdBtnMacroRx")],function t(){var e,r=null==t.$$s?this:t.$$s,n=O,i=O,o=O;return _((e=m["~"])===O?O:e["$[]"](1))?((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length()):g((e=m["~"])===O?O:e["$[]"](2),"kbd")?(_((n=((e=m["~"])===O?O:e["$[]"](3)).$strip())["$include?"](s("R_SB")))&&(n=n.$gsub(s("ESC_R_SB"),s("R_SB"))),_(k(n.$length(),1))&&_(i=_(i=n.$index(",",1))?[i,n.$index("+",1)].$compact().$min():n.$index("+",1))?(o=n.$slice(i,1),_(n["$end_with?"](o))?(n=d(n.$chop().$split(o,-1),"map",[],function(t){return null==t&&(t=O),t.$strip()}))["$[]="](-1,u(n["$[]"](-1),o)):n=d(n.$split(o),"map",[],function(t){return null==t&&(t=O),t.$strip()})):n=[n],s("Inline").$new(r,"kbd",O,l(["attributes"],{attributes:l(["keys"],{keys:n})})).$convert()):s("Inline").$new(r,"button",r.$normalize_text((e=m["~"])===O?O:e["$[]"](3),!0,!0)).$convert()},{$$s:this})),_(i)&&_(e["$include?"]("menu:"))&&(e=d(e,"gsub",[s("InlineMenuMacroRx")],function t(){var e,r=null==t.$$s?this:t.$$s,n=O,i=O,o=O,a=O,$=O;return _(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"](s("RS")))?((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length()):(n=(e=m["~"])===O?O:e["$[]"](1),_(i=(e=m["~"])===O?O:e["$[]"](2))?(_(i["$include?"](s("R_SB")))&&(i=i.$gsub(s("ESC_R_SB"),s("R_SB"))),_(o=_(i["$include?"]("&gt;"))?"&gt;":_(i["$include?"](","))?",":O)?$=(a=d(i.$split(o),"map",[],function(t){return null==t&&(t=O),t.$strip()})).$pop():(a=(e=[[],i.$rstrip()])[0],$=e[1])):(a=(e=[[],O])[0],$=e[1]),s("Inline").$new(r,"menu",O,l(["attributes"],{attributes:l(["menu","submenus","menuitem"],{menu:n,submenus:a,menuitem:$})})).$convert())},{$$s:this})),_(e["$include?"]('"'))&&_(e["$include?"]("&gt;"))&&(e=d(e,"gsub",[s("InlineMenuRx")],function t(){var e,r,n=null==t.$$s?this:t.$$s,i=O,o=O,a=O;return _(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"](s("RS")))?((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length()):(i=null==(e=b(d(((r=m["~"])===O?O:r["$[]"](1)).$split("&gt;"),"map",[],function(t){return null==t&&(t=O),t.$strip()})))[0]?O:e[0],a=(o=w(e,1)).$pop(),s("Inline").$new(n,"menu",O,l(["attributes"],{attributes:l(["menu","submenus","menuitem"],{menu:i,submenus:o,menuitem:a})})).$convert())},{$$s:this}))),_(i)&&(_(e["$include?"]("image:"))||_(e["$include?"]("icon:")))&&(e=d(e,"gsub",[s("InlineImageMacroRx")],function t(){var e,r=null==t.$$s?this:t.$$s,n=O,i=O,a=O,u=O;return _(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"](s("RS")))?((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length()):(n=_(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"]("icon:"))?(e=["icon",["size"]])[0]:(e=["image",["alt","width","height"]])[0],i=e[1],a=(e=m["~"])===O?O:e["$[]"](1),u=r.$parse_attributes((e=m["~"])===O?O:e["$[]"](2),i,l(["unescape_input"],{unescape_input:!0})),g(n,"icon")||(c.$register("images",a),u["$[]="]("imagesdir",$["$[]"]("imagesdir"))),_(o=u["$[]"]("alt"))||u["$[]="]("alt",(d(u,"[]=",e=["default-alt",s("Helpers").$basename(a,!0).$tr("_-"," ")]),e[e.length-1])),s("Inline").$new(r,"image",O,l(["type","target","attributes"],{type:n,target:a,attributes:u})).$convert())},{$$s:this})),(_(e["$include?"]("(("))&&_(e["$include?"]("))"))||_(a)&&_(e["$include?"]("dexterm")))&&(e=d(e,"gsub",[s("InlineIndextermMacroRx")],function t(){var e,r=null==t.$$s?this:t.$$s,n=O,i=O,o=O,a=O,$=O,u=O,c=O,h=O,p=O,f=O,g=O,v=O,y=O,x=O;switch((e=m["~"])===O?O:e["$[]"](1)){case"indexterm":if(_(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"](s("RS"))))return((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length());return _((n=r.$normalize_text((e=m["~"])===O?O:e["$[]"](2),!0,!0))["$include?"]("="))?_(i=(o=s("AttributeList").$new(n,r).$parse())["$[]"](1))?(o["$[]="]("terms",[i]),_(a=o["$[]"]("see-also"))&&o["$[]="]("see-also",_(a["$include?"](","))?d(a.$split(","),"map",[],function(t){return null==t&&(t=O),t.$lstrip()}):[a])):o=l(["terms"],{terms:n}):o=l(["terms"],{terms:r.$split_simple_csv(n)}),s("Inline").$new(r,"indexterm",O,l(["attributes"],{attributes:o})).$convert();case"indexterm2":if(_(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"](s("RS"))))return((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length());return _(($=r.$normalize_text((e=m["~"])===O?O:e["$[]"](2),!0,!0))["$include?"]("="))&&($=_(u=_(c=(o=s("AttributeList").$new($,r).$parse())["$[]"](1))?c:o=O)?u:$,_(o)&&_(a=o["$[]"]("see-also"))&&o["$[]="]("see-also",_(a["$include?"](","))?d(a.$split(","),"map",[],function(t){return null==t&&(t=O),t.$lstrip()}):[a])),s("Inline").$new(r,"indexterm",$,l(["attributes","type"],{attributes:o,type:"visible"})).$convert();default:if(h=(e=m["~"])===O?O:e["$[]"](3),_(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"](s("RS")))){if(!(_(h["$start_with?"]("("))&&_(h["$end_with?"](")"))))return((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length());h=h.$slice(1,A(h.$length(),2)),p=(e=[!0,"(",")"])[0],f=e[1],g=e[2]}else p=!0,_(h["$start_with?"]("("))?_(h["$end_with?"](")"))?(h=(e=[h.$slice(1,A(h.$length(),2)),!1])[0],p=e[1]):(h=(e=[h.$slice(1,h.$length()),"(",""])[0],f=e[1],g=e[2]):_(h["$end_with?"](")"))&&(h=(e=[h.$chop(),"",")"])[0],f=e[1],g=e[2]);if(_(p)?(_(($=r.$normalize_text(h,!0))["$include?"](";&"))&&(_($["$include?"](" &gt;&gt; "))?($=null==(e=b($.$partition(" &gt;&gt; ")))[0]?O:e[0],null==e[1]||e[1],o=l(["see"],{see:v=null==e[2]?O:e[2]})):_($["$include?"](" &amp;&gt; "))&&($=null==(e=b($.$split(" &amp;&gt; ")))[0]?O:e[0],o=l(["see-also"],{"see-also":a=w(e,1)}))),y=s("Inline").$new(r,"indexterm",$,l(["attributes","type"],{attributes:o,type:"visible"})).$convert()):(o=l([],{}),_((x=r.$normalize_text(h,!0))["$include?"](";&"))&&(_(x["$include?"](" &gt;&gt; "))?(x=null==(e=b(x.$partition(" &gt;&gt; ")))[0]?O:e[0],null==e[1]||e[1],v=null==e[2]?O:e[2],o["$[]="]("see",v)):_(x["$include?"](" &amp;&gt; "))&&(x=null==(e=b(x.$split(" &amp;&gt; ")))[0]?O:e[0],a=w(e,1),o["$[]="]("see-also",a))),o["$[]="]("terms",r.$split_simple_csv(x)),y=s("Inline").$new(r,"indexterm",O,l(["attributes"],{attributes:o})).$convert()),_(f))return""+f+y+g;return y}},{$$s:this})),_(n)&&_(e["$include?"]("://"))&&(e=d(e,"gsub",[s("InlineLinkRx")],function t(){var e,r,n=null==t.$$s?this:t.$$s,i=O,a=O,p=O,f=O,v=O,y=O,x=O,k=O,w=O;if(_((i=u((e=m["~"])===O?O:e["$[]"](2),_(o=(e=m["~"])===O?O:e["$[]"](3))?o:(e=m["~"])===O?O:e["$[]"](5)))["$start_with?"](s("RS"))))return u(((e=m["~"])===O?O:e["$[]"](0)).$slice(0,a=((e=m["~"])===O?O:e["$[]"](1)).$length()),((e=m["~"])===O?O:e["$[]"](0)).$slice(u(a,1),((e=m["~"])===O?O:e["$[]"](0)).$length()));if(p=(e=[(r=m["~"])===O?O:r["$[]"](1),""])[0],f=e[1],_((e=m["~"])===O?O:e["$[]"](4)))g(p,"link:")&&(p=""),_((v=(e=m["~"])===O?O:e["$[]"](4))["$empty?"]())&&(v=O);else{switch(p){case"link:":case'"':case"'":return(e=m["~"])===O?O:e["$[]"](0)}switch((e=m["~"])===O?O:e["$[]"](6)){case";":if(_(p["$start_with?"]("&lt;"))&&_(i["$end_with?"]("&gt;"))?(p=p.$slice(4,p.$length()),i=i.$slice(0,A(i.$length(),4))):_((i=i.$chop())["$end_with?"](")"))?(i=i.$chop(),f=");"):f=";",_(i["$end_with?"]("://")))return(e=m["~"])===O?O:e["$[]"](0);break;case":":if(_((i=i.$chop())["$end_with?"](")"))?(i=i.$chop(),f="):"):f=":",_(i["$end_with?"]("://")))return(e=m["~"])===O?O:e["$[]"](0)}}return y=(e=[O,l(["type"],{type:"link"})])[0],x=e[1],_(v)?(_(v["$include?"](s("R_SB")))&&(k=v=v.$gsub(s("ESC_R_SB"),s("R_SB"))),h(c.$compat_mode())&&_(v["$include?"]("="))&&(v=null==(e=b(r=n.$extract_attributes_from_text(v,"")))[0]?O:e[0],y=null==e[1]?O:e[1],k=v,x["$[]="]("id",y["$[]"]("id"))),_(v["$end_with?"]("^"))&&(k=v=v.$chop(),_(y)?_(o=y["$[]"]("window"))||y["$[]="]("window","_blank"):y=l(["window"],{window:"_blank"})),_(k)&&_(k["$empty?"]())&&(v=_($["$key?"]("hide-uri-scheme"))?i.$sub(s("UriSniffRx"),""):i,w=!0)):(v=_($["$key?"]("hide-uri-scheme"))?i.$sub(s("UriSniffRx"),""):i,w=!0),_(w)&&(_(y)?y["$[]="]("role",_(y["$key?"]("role"))?"bare "+y["$[]"]("role"):"bare"):y=l(["role"],{role:"bare"})),c.$register("links",(d(x,"[]=",e=["target",i]),e[e.length-1])),_(y)&&x["$[]="]("attributes",y),""+p+s("Inline").$new(n,"anchor",v,x).$convert()+f},{$$s:this})),_(i)&&(_(e["$include?"]("link:"))||_(e["$include?"]("ilto:")))&&(e=d(e,"gsub",[s("InlineLinkMacroRx")],function t(){var e,r=null==t.$$s?this:t.$$s,n=O,i=O,a=O,p=O,f=O,g=O;return _(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"](s("RS")))?((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length()):(i=_(n=(e=m["~"])===O?O:e["$[]"](1))?u("mailto:",a=(e=m["~"])===O?O:e["$[]"](2)):(e=m["~"])===O?O:e["$[]"](2),p=(e=[O,l(["type"],{type:"link"})])[0],f=e[1],!_((g=(e=m["~"])===O?O:e["$[]"](3))["$empty?"]())&&(_(g["$include?"](s("R_SB")))&&(g=g.$gsub(s("ESC_R_SB"),s("R_SB"))),_(n)?h(c.$compat_mode())&&_(g["$include?"](","))&&(g=null==(e=b(r.$extract_attributes_from_text(g,"")))[0]?O:e[0],p=null==e[1]?O:e[1],f["$[]="]("id",p["$[]"]("id")),_(p["$key?"](2))&&(i=_(p["$key?"](3))?""+i+"?subject="+s("Helpers").$encode_uri_component(p["$[]"](2))+"&amp;body="+s("Helpers").$encode_uri_component(p["$[]"](3)):""+i+"?subject="+s("Helpers").$encode_uri_component(p["$[]"](2)))):h(c.$compat_mode())&&_(g["$include?"]("="))&&(g=null==(e=b(r.$extract_attributes_from_text(g,"")))[0]?O:e[0],p=null==e[1]?O:e[1],f["$[]="]("id",p["$[]"]("id"))),_(g["$end_with?"]("^"))&&(g=g.$chop(),_(p)?_(o=p["$[]"]("window"))||p["$[]="]("window","_blank"):p=l(["window"],{window:"_blank"}))),_(g["$empty?"]())&&(_(n)?g=a:(_($["$key?"]("hide-uri-scheme"))?_((g=i.$sub(s("UriSniffRx"),""))["$empty?"]())&&(g=i):g=i,_(p)?p["$[]="]("role",_(p["$key?"]("role"))?"bare "+p["$[]"]("role"):"bare"):p=l(["role"],{role:"bare"}))),c.$register("links",(d(f,"[]=",e=["target",i]),e[e.length-1])),_(p)&&f["$[]="]("attributes",p),s("Inline").$new(r,"anchor",g,f).$convert())},{$$s:this})),_(e["$include?"]("@"))&&(e=d(e,"gsub",[s("InlineEmailRx")],function t(){var e,r=null==t.$$s?this:t.$$s,n=O,i=O;return _((e=m["~"])===O?O:e["$[]"](1))?g((e=m["~"])===O?O:e["$[]"](1),s("RS"))?((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length()):(e=m["~"])===O?O:e["$[]"](0):(n=u("mailto:",i=(e=m["~"])===O?O:e["$[]"](0)),c.$register("links",n),s("Inline").$new(r,"anchor",i,l(["type","target"],{type:"link",target:n})).$convert())},{$$s:this})),_(r)&&g(this.context,"list_item")&&g(this.parent.$style(),"bibliography")&&(e=d(e,"sub",[s("InlineBiblioAnchorRx")],function t(){var e,r=null==t.$$s?this:t.$$s;return s("Inline").$new(r,"anchor",(e=m["~"])===O?O:e["$[]"](2),l(["type","id"],{type:"bibref",id:(e=m["~"])===O?O:e["$[]"](1)})).$convert()},{$$s:this})),(_(r)&&_(e["$include?"]("[["))||_(i)&&_(e["$include?"]("or:")))&&(e=d(e,"gsub",[s("InlineAnchorRx")],function t(){var e,r=null==t.$$s?this:t.$$s,n=O,i=O;return _((e=m["~"])===O?O:e["$[]"](1))?((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length()):(_(n=(e=m["~"])===O?O:e["$[]"](2))?i=(e=m["~"])===O?O:e["$[]"](3):(n=(e=m["~"])===O?O:e["$[]"](4),_(i=(e=m["~"])===O?O:e["$[]"](5))&&_(i["$include?"](s("R_SB")))&&(i=i.$gsub(s("ESC_R_SB"),s("R_SB")))),s("Inline").$new(r,"anchor",i,l(["type","id"],{type:"ref",id:n})).$convert())},{$$s:this})),(_(e["$include?"]("&"))&&_(e["$include?"](";&l"))||_(i)&&_(e["$include?"]("xref:")))&&(e=d(e,"gsub",[s("InlineXrefMacroRx")],function t(){var e,r=null==t.$$s?this:t.$$s,n=O,i=O,a=O,$=O,p=O,f=O,x=O,w=O,E=O,S=O;return _(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"](s("RS")))?((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length()):(n=l([],{}),_(i=(e=m["~"])===O?O:e["$[]"](1))?_(i["$include?"](","))&&(i=null==(e=b(i.$partition(",")))[0]?O:e[0],null==e[1]||e[1],_((a=(a=null==e[2]?O:e[2]).$lstrip())["$empty?"]())&&(a=O)):($=!0,i=(e=m["~"])===O?O:e["$[]"](2),_(a=(e=m["~"])===O?O:e["$[]"](3))&&(_(a["$include?"](s("R_SB")))&&(a=a.$gsub(s("ESC_R_SB"),s("R_SB"))),h(c.$compat_mode())&&_(a["$include?"]("="))&&(a=null==(e=b(r.$extract_attributes_from_text(a)))[0]?O:e[0],n=null==e[1]?O:e[1]))),_(c.$compat_mode())?p=i:_(f=i.$index("#"))&&v(i["$[]"](A(f,1)),"&")?_(k(f,0))?(_(k(x=A(A(i.$length(),1),f),0))?(w=(e=[i.$slice(0,f),i.$slice(u(f,1),x)])[0],p=e[1]):w=i.$chop(),_($)?_(w["$end_with?"](".adoc"))?E=w=w.$slice(0,A(w.$length(),5)):h(s("Helpers")["$extname?"](w))&&(E=w):E=_(d(w,"end_with?",y(s("ASCIIDOC_EXTENSIONS").$keys())))?w=w.$slice(0,w.$rindex(".")):w):(S=(e=[i,i.$slice(1,i.$length())])[0],p=e[1]):_($)?_(i["$end_with?"](".adoc"))?E=w=i.$slice(0,A(i.$length(),5)):_(s("Helpers")["$extname?"](i))?w=i:p=i:p=i,_(S)?(i=p,_(r.$logger()["$info?"]())&&h(c.$catalog()["$[]"]("refs")["$[]"](i))&&r.$logger().$info("possible invalid reference: "+i)):_(w)?_(E)&&(g(c.$attributes()["$[]"]("docname"),w)||_(c.$catalog()["$[]"]("includes")["$[]"](w)))?_(p)?(i=(e=[p,O,"#"+p])[0],w=e[1],S=e[2],_(r.$logger()["$info?"]())&&h(c.$catalog()["$[]"]("refs")["$[]"](i))&&r.$logger().$info("possible invalid reference: "+i)):(i=(e=[O,O,"#"])[0],w=e[1],S=e[2]):(i=(e=[w,""+(_(o=c.$attributes()["$[]"]("relfileprefix"))?o:"")+w+(_(E)?c.$attributes().$fetch("relfilesuffix",c.$outfilesuffix()):"")])[0],w=e[1],_(p)?(i=(e=[""+i+"#"+p,""+w+"#"+p])[0],S=e[1]):S=w):_(c.$compat_mode())||h(s("Compliance").$natural_xrefs())?(i=(e=[p,"#"+p])[0],S=e[1],_(r.$logger()["$info?"]())&&h(c.$catalog()["$[]"]("refs")["$[]"](i))&&r.$logger().$info("possible invalid reference: "+i)):_(c.$catalog()["$[]"]("refs")["$[]"](p))?(i=(e=[p,"#"+p])[0],S=e[1]):(_(p["$include?"](" "))||v(p.$downcase(),p))&&_(i=c.$resolve_id(p))?(p=(e=[i,"#"+i])[0],S=e[1]):(i=(e=[p,"#"+p])[0],S=e[1],_(r.$logger()["$info?"]())&&r.$logger().$info("possible invalid reference: "+i)),n["$[]="]("path",w),n["$[]="]("fragment",p),n["$[]="]("refid",i),s("Inline").$new(r,"anchor",a,l(["type","target","attributes"],{type:"xref",target:S,attributes:n})).$convert())},{$$s:this})),_(i)&&_(e["$include?"]("tnote"))&&(e=d(e,"gsub",[s("InlineFootnoteMacroRx")],function t(){var e,r,n=null==t.$$s?this:t.$$s,i=O,o=O,a=O,$=O,u=O,h=O;if(_(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"](s("RS"))))return((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length());if(_((e=m["~"])===O?O:e["$[]"](1))){if(!_((e=m["~"])===O?O:e["$[]"](3)))return(e=m["~"])===O?O:e["$[]"](0);i=null==(e=b(((r=m["~"])===O?O:r["$[]"](3)).$split(",",2)))[0]?O:e[0],o=null==e[1]?O:e[1],_(c.$compat_mode())||n.$logger().$warn("found deprecated footnoteref macro: "+((e=m["~"])===O?O:e["$[]"](0))+"; use footnote macro with target instead")}else i=(e=m["~"])===O?O:e["$[]"](2),o=(e=m["~"])===O?O:e["$[]"](3);if(_(i))_(a=d(c.$footnotes(),"find",[],function(t){return null==t&&(t=O),t.$id()["$=="](i)}))?($=(e=[a.$index(),a.$text()])[0],o=e[1],u=(e=["xref",i,O])[0],h=e[1],i=e[2]):_(o)?(o=n.$restore_passthroughs(n.$normalize_text(o,!0,!0)),$=c.$counter("footnote-number"),c.$register("footnotes",R(s("Document"),"Footnote").$new($,i,o)),u=(e=["ref",O])[0],h=e[1]):(n.$logger().$warn("invalid footnote reference: "+i),u=(e=["xref",i,i,O])[0],h=e[1],o=e[2],i=e[3]);else{if(!_(o))return(e=m["~"])===O?O:e["$[]"](0);o=n.$restore_passthroughs(n.$normalize_text(o,!0,!0)),$=c.$counter("footnote-number"),c.$register("footnotes",R(s("Document"),"Footnote").$new($,i,o)),u=h=O}return s("Inline").$new(n,"footnote",o,l(["attributes","id","target","type"],{attributes:l(["index"],{index:$}),id:i,target:h,type:u})).$convert()},{$$s:this})),e}),p(n,"$sub_post_replacements",function(t){var e=O,r=O;return(null==this.document&&(this.document=O),null==this.attributes&&(this.attributes=O),_(this.attributes["$[]"]("hardbreaks-option"))||_(this.document.$attributes()["$[]"]("hardbreaks-option")))?_(E((e=t.$split(s("LF"),-1)).$size(),2))?t:(r=e.$pop(),d(e,"map",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=O),s("Inline").$new(r,"break",_(e["$end_with?"](s("HARD_LINE_BREAK")))?e.$slice(0,A(e.$length(),2)):e,l(["type"],{type:"line"})).$convert()},{$$s:this})["$<<"](r).$join(s("LF"))):_(t["$include?"](s("PLUS")))&&_(t["$include?"](s("HARD_LINE_BREAK")))?d(t,"gsub",[s("HardLineBreakRx")],function t(){var e,r=null==t.$$s?this:t.$$s;return s("Inline").$new(r,"break",(e=m["~"])===O?O:e["$[]"](1),l(["type"],{type:"line"})).$convert()},{$$s:this}):t}),p(n,"$sub_source",function(t,e){return _(e)?this.$sub_callouts(this.$sub_specialchars(t)):this.$sub_specialchars(t)}),p(n,"$sub_callouts",function(t){var e=O,r=O;return e=_(this["$attr?"]("line-comment"))?s("CalloutSourceRxMap")["$[]"](this.$attr("line-comment")):s("CalloutSourceRx"),r=0,d(t,"gsub",[e],function t(){var e,n=null==t.$$s?this:t.$$s,i=O;return(null==n.document&&(n.document=O),_((e=m["~"])===O?O:e["$[]"](2)))?((e=m["~"])===O?O:e["$[]"](0)).$sub(s("RS"),""):s("Inline").$new(n,"callout",g((e=m["~"])===O?O:e["$[]"](4),".")?(r=u(r,1)).$to_s():(e=m["~"])===O?O:e["$[]"](4),l(["id","attributes"],{id:n.document.$callouts().$read_next_id(),attributes:l(["guard"],{guard:_(i=(e=m["~"])===O?O:e["$[]"](1))?i:g((e=m["~"])===O?O:e["$[]"](3),"--")?["<!--","-->"]:O})})).$convert()},{$$s:this})}),p(n,"$highlight_source",function(t,e){var r,n=O,i=O,o=O,a=O,$=O,u=O,c=O,h=O,d=O,p=O;return(null==this.document&&(this.document=O),null==this.passthroughs&&(this.passthroughs=O),_(n=this.document.$syntax_highlighter())&&_(n["$highlight?"]()))?(_(e)&&(t=null==(r=b(this.$extract_callouts(t)))[0]?O:r[0],i=null==r[1]?O:r[1]),o=this.document.$attributes(),a=n.$name(),_(u=_(this["$attr?"]("linenums"))?(_(c=o["$[]"](""+a+"-linenums-mode"))?c:"table").$to_sym():O)&&_(E($=this.$attr("start",1).$to_i(),1))&&($=1),_(this["$attr?"]("highlight"))&&(h=this.$resolve_lines_to_highlight(t,this.$attr("highlight"),$)),d=null==(r=b(n.$highlight(this,t,this.$attr("language"),l(["callouts","css_mode","highlight_lines","number_lines","start_line_number","style"],{callouts:i,css_mode:(_(c=o["$[]"](""+a+"-css"))?c:"class").$to_sym(),highlight_lines:h,number_lines:u,start_line_number:$,style:o["$[]"](""+a+"-style")}))))[0]?O:r[0],p=null==r[1]?O:r[1],_(this.passthroughs["$empty?"]())||(d=d.$gsub(s("HighlightedPassSlotRx"),""+s("PASS_START")+"\\1"+s("PASS_END"))),_(i["$nil_or_empty?"]()))?d:this.$restore_callouts(d,i,p):this.$sub_source(t,e)}),p(n,"$resolve_lines_to_highlight",function(e,r,n){var i=O,o=O;return null==n&&(n=O),i=[],_(r["$include?"](" "))&&(r=r.$delete(" ")),d(_(r["$include?"](","))?r.$split(","):r.$split(";"),"map",[],function(r){var n,o=O,a=O,l=O,$=O,c=O;return(null==r&&(r=O),_(r["$start_with?"]("!"))&&(r=r.$slice(1,r.$length()),o=!0),_(a=_(r["$include?"](".."))?"..":_(r["$include?"]("-"))?"-":O))?(l=null==(n=b(r.$partition(a)))[0]?O:n[0],null==n[1]||n[1],(_(($=null==n[2]?O:n[2])["$empty?"]())||_(E($=$.$to_i(),0)))&&($=u(e.$count(s("LF")),1)),i=_(o)?A(i,t.Range.$new(l.$to_i(),$,!1).$to_a()):i["$|"](t.Range.$new(l.$to_i(),$,!1).$to_a())):_(o)?i.$delete(r.$to_i()):h(i["$include?"](c=r.$to_i()))?i["$<<"](c):O}),g(o=_(n)?A(n,1):0,0)||(i=d(i,"map",[],function(t){return null==t&&(t=O),A(t,o)})),i.$sort()},-3),p(n,"$extract_passthroughs",function(t){var e,r=O,n=O,i=O,o=O,a=O;return null==this.document&&(this.document=O),null==this.passthroughs&&(this.passthroughs=O),r=this.document.$compat_mode(),n=this.passthroughs,(_(t["$include?"]("++"))||_(t["$include?"]("$$"))||_(t["$include?"]("ss:")))&&(t=d(t,"gsub",[s("InlinePassMacroRx")],function t(){var e,i=null==t.$$s?this:t.$$s,o=O,a=O,$=O,u=O,c=O,h=O,d=O,p=O,f=O;if(_(o=(e=m["~"])===O?O:e["$[]"](4))){if(_(r)&&g(o,"++"))return(_((e=m["~"])===O?O:e["$[]"](2))?""+((e=m["~"])===O?O:e["$[]"](1))+"["+((e=m["~"])===O?O:e["$[]"](2))+"]"+((e=m["~"])===O?O:e["$[]"](3)):""+((e=m["~"])===O?O:e["$[]"](1))+((e=m["~"])===O?O:e["$[]"](3)))+"++"+i.$extract_passthroughs((e=m["~"])===O?O:e["$[]"](5))+"++";if(_(a=(e=m["~"])===O?O:e["$[]"](2))){if(_(k($=((e=m["~"])===O?O:e["$[]"](3)).$length(),0)))return""+((e=m["~"])===O?O:e["$[]"](1))+"["+a+"]"+S(s("RS"),A($,1))+o+((e=m["~"])===O?O:e["$[]"](5))+o;g((e=m["~"])===O?O:e["$[]"](1),s("RS"))?u="["+a+"]":g(o,"++")?g(a,"x-")?(c=!0,h=l([],{})):_(a["$end_with?"](" x-"))?(c=!0,h=i.$parse_quoted_text_attributes(a.$slice(0,A(a.$length(),3)))):h=i.$parse_quoted_text_attributes(a):h=i.$parse_quoted_text_attributes(a)}else if(_(k($=((e=m["~"])===O?O:e["$[]"](3)).$length(),0)))return""+S(s("RS"),A($,1))+o+((e=m["~"])===O?O:e["$[]"](5))+o;d=g(o,"+++")?[]:s("BASIC_SUBS"),_(h)?_(c)?n["$[]="](p=n.$size(),l(["text","subs","type","attributes"],{text:(e=m["~"])===O?O:e["$[]"](5),subs:s("NORMAL_SUBS"),type:"monospaced",attributes:h})):n["$[]="](p=n.$size(),l(["text","subs","type","attributes"],{text:(e=m["~"])===O?O:e["$[]"](5),subs:d,type:"unquoted",attributes:h})):n["$[]="](p=n.$size(),l(["text","subs"],{text:(e=m["~"])===O?O:e["$[]"](5),subs:d}))}else{if(g((e=m["~"])===O?O:e["$[]"](6),s("RS")))return((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length());_(d=(e=m["~"])===O?O:e["$[]"](7))?n["$[]="](p=n.$size(),l(["text","subs"],{text:i.$normalize_text((e=m["~"])===O?O:e["$[]"](8),O,!0),subs:i.$resolve_pass_subs(d)})):n["$[]="](p=n.$size(),l(["text"],{text:i.$normalize_text((e=m["~"])===O?O:e["$[]"](8),O,!0)}))}return""+(_(f=u)?f:"")+s("PASS_START")+p+s("PASS_END")},{$$s:this})),i=null==(e=b(s("InlinePassRx")["$[]"](r)))[0]?O:e[0],o=null==e[1]?O:e[1],a=null==e[2]?O:e[2],(_(t["$include?"](i))||_(o)&&_(t["$include?"](o)))&&(t=d(t,"gsub",[a],function t(){var e,i=null==t.$$s?this:t.$$s,o=O,a=O,$=O,u=O,c=O,h=O,d=O,p=O,f=O,b=O,v=O,y=O;if(o=(e=m["~"])===O?O:e["$[]"](1),a=_($=(e=m["~"])===O?O:e["$[]"](4))?$:(e=m["~"])===O?O:e["$[]"](3),_((e=m["~"])===O?O:e["$[]"](5))&&(u=!0),c=(e=m["~"])===O?O:e["$[]"](6),h=(e=m["~"])===O?O:e["$[]"](7),d=(e=m["~"])===O?O:e["$[]"](8),_(r)?p=!0:_(a)&&(g(a,"x-")||_(a["$end_with?"](" x-")))&&(p=f=!0),_(a)){if(_(u))return""+o+"["+a+"]"+c.$slice(1,c.$length());if(g(o,s("RS"))){if(_(f)&&g(h,"`"))return""+o+"["+a+"]"+c;o="["+a+"]"}else b=_(f)?g(a,"x-")?l([],{}):i.$parse_quoted_text_attributes(a.$slice(0,A(a.$length(),3))):i.$parse_quoted_text_attributes(a)}else if(_(u))return""+o+c.$slice(1,c.$length());else if(_(r)&&g(o,s("RS")))return c;return _(r)?n["$[]="](v=n.$size(),l(["text","subs","attributes","type"],{text:d,subs:s("BASIC_SUBS"),attributes:b,type:"monospaced"})):_(b)?_(p)?(y=g(h,"`")?s("BASIC_SUBS"):s("NORMAL_SUBS"),n["$[]="](v=n.$size(),l(["text","subs","attributes","type"],{text:d,subs:y,attributes:b,type:"monospaced"}))):n["$[]="](v=n.$size(),l(["text","subs","attributes","type"],{text:d,subs:s("BASIC_SUBS"),attributes:b,type:"unquoted"})):n["$[]="](v=n.$size(),l(["text","subs"],{text:d,subs:s("BASIC_SUBS")})),""+o+s("PASS_START")+v+s("PASS_END")},{$$s:this})),_(t["$include?"](":"))&&(_(t["$include?"]("stem:"))||_(t["$include?"]("math:")))&&(t=d(t,"gsub",[s("InlineStemMacroRx")],function t(){var e,r=null==t.$$s?this:t.$$s,i=O,o=O,a=O,$=O;return(null==r.document&&(r.document=O),_(((e=m["~"])===O?O:e["$[]"](0))["$start_with?"](s("RS"))))?((e=m["~"])===O?O:e["$[]"](0)).$slice(1,((e=m["~"])===O?O:e["$[]"](0)).$length()):(g(i=((e=m["~"])===O?O:e["$[]"](1)).$to_sym(),"stem")&&(i=s("STEM_TYPE_ALIASES")["$[]"](r.document.$attributes()["$[]"]("stem")).$to_sym()),o=(e=m["~"])===O?O:e["$[]"](2),a=r.$normalize_text((e=m["~"])===O?O:e["$[]"](3),O,!0),g(i,"latexmath")&&_(a["$start_with?"]("$"))&&_(a["$end_with?"]("$"))&&(a=a.$slice(1,A(a.$length(),2))),o=_(o)?r.$resolve_pass_subs(o):_(r.document["$basebackend?"]("html"))?s("BASIC_SUBS"):O,n["$[]="]($=n.$size(),l(["text","subs","type"],{text:a,subs:o,type:i})),""+s("PASS_START")+$+s("PASS_END"))},{$$s:this})),t}),p(n,"$restore_passthroughs",function(t){var e=O;return null==this.passthroughs&&(this.passthroughs=O),e=this.passthroughs,d(t,"gsub",[s("PassSlotRx")],function r(){var n,i=null==r.$$s?this:r.$$s,o=O,a=O,$=O,u=O,c=O;return _(o=e["$[]"](((n=m["~"])===O?O:n["$[]"](1)).$to_i()))?(a=i.$apply_subs(o["$[]"]("text"),o["$[]"]("subs")),_($=o["$[]"]("type"))&&(_(u=o["$[]"]("attributes"))&&(c=u["$[]"]("id")),a=s("Inline").$new(i,"quoted",a,l(["type","id","attributes"],{type:$,id:c,attributes:u})).$convert()),_(a["$include?"](s("PASS_START"))))?i.$restore_passthroughs(a):a:(i.$logger().$error("unresolved passthrough detected: "+t),"??pass??")},{$$s:this})}),p(n,"$resolve_subs",function(t,e,r,n){var i=O,o=O,a=O,l=O;return(null==e&&(e="block"),null==r&&(r=O),null==n&&(n=O),_(t["$nil_or_empty?"]()))?O:(i=O,_(t["$include?"](" "))&&(t=t.$delete(" ")),o=s("SubModifierSniffRx")["$match?"](t),d(t.$split(","),"each",[],function(t){var n=O,a=O,l=O,$=O,c=O,h=O;if(null==t&&(t=O),n=O,_(o)&&(g(a=t.$chr(),"+")?(n="append",t=t.$slice(1,t.$length())):g(a,"-")?(n="remove",t=t.$slice(1,t.$length())):_(t["$end_with?"]("+"))&&(n="prepend",t=t.$chop())),t=t.$to_sym(),g(e,"inline")&&(g(t,"verbatim")||g(t,"v"))?l=s("BASIC_SUBS"):_(s("SUB_GROUPS")["$key?"](t))?l=s("SUB_GROUPS")["$[]"](t):g(e,"inline")&&g(t.$length(),1)&&_(s("SUB_HINTS")["$key?"](t))?($=s("SUB_HINTS")["$[]"](t),l=_(c=s("SUB_GROUPS")["$[]"]($))?c:[$]):l=[t],!_(n))return i=u(i=_(h=i)?h:[],l);switch(i=_(h=i)?h:_(r)?r.$drop(0):[],n){case"append":return i=u(i,l);case"prepend":return i=u(l,i);case"remove":return i=A(i,l);default:return O}}),_(i))?(a=i["$&"](s("SUB_OPTIONS")["$[]"](e)),_(A(i,a)["$empty?"]())||(l=A(i,a),this.$logger().$warn("invalid substitution type"+(_(k(l.$size(),1))?"s":"")+(_(n)?" for ":"")+n+": "+l.$join(", "))),a):O},-2),p(n,"$resolve_block_subs",function(t,e,r){return this.$resolve_subs(t,"block",e,r)}),p(n,"$resolve_pass_subs",function(t){return this.$resolve_subs(t,"inline",O,"passthrough macro")}),p(n,"$expand_subs",function(t,e){var r=O,n=O,i=O;return(null==e&&(e=O),x(R("Symbol"),r=t))?g(t,"none")?O:_(n=s("SUB_GROUPS")["$[]"](t))?n:[t]:x(R("Array"),r)?(i=[],d(t,"each",[],function(t){var e=O;return(null==t&&(t=O),g(t,"none"))?O:_(e=s("SUB_GROUPS")["$[]"](t))?i=u(i,e):i["$<<"](t)}),_(i["$empty?"]()))?O:i:this.$resolve_subs(t,"inline",O,e)},-2),p(n,"$commit_subs",function(){var t=O,e=O,r=O,n=O,i=O;if(null==this.default_subs&&(this.default_subs=O),null==this.content_model&&(this.content_model=O),null==this.context&&(this.context=O),null==this.subs&&(this.subs=O),null==this.attributes&&(this.attributes=O),null==this.document&&(this.document=O),null==this.style&&(this.style=O),!_(t=this.default_subs))switch(this.content_model){case"simple":t=s("NORMAL_SUBS");break;case"verbatim":t=g(this.context,"verse")?s("NORMAL_SUBS"):s("VERBATIM_SUBS");break;case"raw":t=g(this.context,"stem")?s("BASIC_SUBS"):s("NO_SUBS");break;default:return this.subs}return _(e=this.attributes["$[]"]("subs"))?this.subs=_(r=this.$resolve_block_subs(e,t,this.context))?r:[]:this.subs=t.$drop(0),g(this.context,"listing")&&g(this.style,"source")&&_(i=this.document.$syntax_highlighter())&&_(i["$highlight?"]())&&_(n=this.subs.$index("specialcharacters"))&&this.subs["$[]="](n,"highlight"),O}),p(n,"$parse_attributes",function(t,e,r){var n=O,i=O;return(null==this.document&&(this.document=O),null==e&&(e=[]),null==r&&(r=l([],{})),_(!_(t)||t["$empty?"]()))?l([],{}):(_(r["$[]"]("unescape_input"))&&(t=this.$normalize_text(t,!0,!0)),_(r["$[]"]("sub_input"))&&_(t["$include?"](s("ATTR_REF_HEAD")))&&(t=this.document.$sub_attributes(t)),_(r["$[]"]("sub_result"))&&(n=this),_(i=r["$[]"]("into")))?s("AttributeList").$new(t,n).$parse_into(i,e):s("AttributeList").$new(t,n).$parse(e)},-2),n.$private(),p(n,"$extract_attributes_from_text",function(t,e){var r=O,n=O,i=O;return(null==e&&(e=O),r=_(t["$include?"](s("LF")))?t.$tr(s("LF")," "):t,_(n=(i=s("AttributeList").$new(r,this).$parse())["$[]"](1)))?g(n,r)?[t,i.$clear()]:[n,i]:[e,i]},-2),p(n,"$extract_callouts",function(t){var e=O,r=O,n=O,i=O,o=O;return e=l([],{}),r=n=0,i=O,o=_(this["$attr?"]("line-comment"))?s("CalloutExtractRxMap")["$[]"](this.$attr("line-comment")):s("CalloutExtractRx"),t=d(t.$split(s("LF"),-1),"map",[],function(t){return null==t&&(t=O),n=u(n,1),d(t,"gsub",[o],function(){var t,o=O;return _((t=m["~"])===O?O:t["$[]"](2))?((t=m["~"])===O?O:t["$[]"](0)).$sub(s("RS"),""):((_(o=e["$[]"](n))?o:(d(e,"[]=",t=[n,[]]),t[t.length-1]))["$<<"]([_(o=(t=m["~"])===O?O:t["$[]"](1))?o:g((t=m["~"])===O?O:t["$[]"](3),"--")?["<!--","-->"]:O,g((t=m["~"])===O?O:t["$[]"](4),".")?(r=u(r,1)).$to_s():(t=m["~"])===O?O:t["$[]"](4)]),i=n,"")})}).$join(s("LF")),_(i)?g(i,n)&&(t=""+t+s("LF")):e=O,[t,e]}),p(n,"$restore_callouts",function(t,e,r){var n=O,i=O;return null==r&&(r=O),_(r)?(n=t.$slice(0,r),t=t.$slice(r,t.$length())):n="",i=0,u(n,d(t.$split(s("LF"),-1),"map",[],function t(r){var n,o=null==t.$$s?this:t.$$s,a=O,$=O,c=O;return(null==o.document&&(o.document=O),null==r&&(r=O),_(a=e.$delete(i=u(i,1))))?g(a.$size(),1)?($=null==(n=b(a["$[]"](0)))[0]?O:n[0],c=null==n[1]?O:n[1],""+r+s("Inline").$new(o,"callout",c,l(["id","attributes"],{id:o.document.$callouts().$read_next_id(),attributes:l(["guard"],{guard:$})})).$convert()):""+r+d(a,"map",[],function t(e,r){var n=null==t.$$s?this:t.$$s;return null==n.document&&(n.document=O),null==e&&(e=O),null==r&&(r=O),s("Inline").$new(n,"callout",r,l(["id","attributes"],{id:n.document.$callouts().$read_next_id(),attributes:l(["guard"],{guard:e})})).$convert()},{$$s:o}).$join(" "):r},{$$s:this}).$join(s("LF")))},-3),p(n,"$convert_quoted_text",function(t,e,r){var n=O,i=O,o=O,a=O,$=O;if(_(t["$[]"](0)["$start_with?"](s("RS")))){if(!(g(r,"constrained")&&_(n=t["$[]"](2))))return t["$[]"](0).$slice(1,t["$[]"](0).$length());i="["+n+"]"}return g(r,"constrained")?_(i)?""+i+s("Inline").$new(this,"quoted",t["$[]"](3),l(["type"],{type:e})).$convert():(_(o=t["$[]"](2))&&(a=($=this.$parse_quoted_text_attributes(o))["$[]"]("id"),g(e,"mark")&&(e="unquoted")),""+t["$[]"](1)+s("Inline").$new(this,"quoted",t["$[]"](3),l(["type","id","attributes"],{type:e,id:a,attributes:$})).$convert()):(_(o=t["$[]"](1))&&(a=($=this.$parse_quoted_text_attributes(o))["$[]"]("id"),g(e,"mark")&&(e="unquoted")),s("Inline").$new(this,"quoted",t["$[]"](2),l(["type","id","attributes"],{type:e,id:a,attributes:$})).$convert())}),p(n,"$do_replacement",function(t,e,r){var n=O;if(_((n=t["$[]"](0))["$include?"](s("RS"))))return n.$sub(s("RS"),"");switch(r){case"none":return e;case"bounding":return u(u(t["$[]"](1),e),t["$[]"](2));default:return u(t["$[]"](1),e)}}),p(n,"$parse_quoted_text_attributes",function(t){var e,r=O,n=O,i=O,o=O,a=O;return(_(t["$include?"](s("ATTR_REF_HEAD")))&&(t=this.$sub_attributes(t)),_(t["$include?"](","))&&(t=t.$slice(0,t.$index(","))),_((t=t.$strip())["$empty?"]()))?l([],{}):_(t["$start_with?"](".","#"))&&_(s("Compliance").$shorthand_property_syntax())?(r=null==(e=b(t.$partition("#")))[0]?O:e[0],null==e[1]||e[1],n=null==e[2]?O:e[2],i=l([],{}),_(n["$empty?"]())?_(k(r.$length(),1))&&i["$[]="]("role",r.$tr("."," ").$lstrip()):(o=null==(e=b(n.$partition(".")))[0]?O:e[0],null==e[1]||e[1],a=null==e[2]?O:e[2],_(o["$empty?"]())||i["$[]="]("id",o),_(a["$empty?"]())?_(k(r.$length(),1))&&i["$[]="]("role",r.$tr("."," ").$lstrip()):_(k(r.$length(),1))?i["$[]="]("role",u(u(r,"."),a).$tr("."," ").$lstrip()):i["$[]="]("role",a.$tr("."," "))),i):l(["role"],{role:t})}),p(n,"$normalize_text",function(t,e,r){return null==e&&(e=O),null==r&&(r=O),!_(t["$empty?"]())&&(_(e)&&(t=t.$strip().$tr(s("LF")," ")),_(r)&&_(t["$include?"](s("R_SB")))&&(t=t.$gsub(s("ESC_R_SB"),s("R_SB")))),t},-2),p(n,"$split_simple_csv",function(t){var e=O,r=O,n=O;return _(t["$empty?"]())?[]:_(t["$include?"]('"'))?(e=[],r="",n=O,d(t,"each_char",[],function(t){switch(null==t&&(t=O),t){case",":if(_(n))return r=u(r,t);return e["$<<"](r.$strip()),r="";case'"':return n=n["$!"]();default:return r=u(r,t)}}),e["$<<"](r.$strip())):d(t.$split(","),"map",[],function(t){return null==t&&(t=O),t.$strip()})})},Opal.modules["asciidoctor/version"]=function(t){var e=t.module,r=t.const_set,n=[];return t.nil,r([e(n[0],"Asciidoctor")].concat(n)[0],"VERSION","2.0.20")},Opal.modules["asciidoctor/abstract_node"]=function(t){var e,r,n,i,s,o=t.module,a=t.klass,l=t.hash2,$=t.eqeq,u=t.truthy,c=t.def,h=t.send,_=t.rb_minus,d=t.eqeqeq,p=t.rb_lt,f=t.not,m=t.to_ary,g=[],b=t.nil,v=t.$$$;return t.add_stubs("include,attr_reader,attr_accessor,==,document,to_s,[],merge,raise,converter,attributes,key?,[]=,delete,tap,new,each_key,end_with?,<<,slice,-,length,update,split,include?,===,join,empty?,apply_reftext_subs,attr?,attr,extname?,image_uri,<,safe,normalize_web_path,uriish?,encode_spaces_in_uri,generate_data_uri_from_uri,generate_data_uri,extname,normalize_system_path,readable?,strict_encode64,binread,warn,logger,require_library,!,open_uri,content_type,read,base_dir,root?,path_resolver,system_path,web_path,!=,prepare_source_string,fetch,read_asset"),n=[r=a((e=[o(g[0],"Asciidoctor")].concat(g))[0],null,"AbstractNode")].concat(e),i=t.$r(n),(s=r.$$prototype).document=s.attributes=s.parent=b,r.$include(i("Logging")),r.$include(i("Substitutors")),r.$attr_reader("attributes"),r.$attr_reader("context"),r.$attr_reader("document"),r.$attr_accessor("id"),r.$attr_reader("node_name"),r.$attr_reader("parent"),c(r,"$initialize",function(t,e,r){var n=b;return null==r&&(r=l([],{})),$(e,"document")?this.document=this:u(t)&&(this.document=(this.parent=t).$document()),this.node_name=(this.context=e).$to_s(),this.attributes=u(n=r["$[]"]("attributes"))?n.$merge():l([],{}),this.passthroughs=[]},-3),c(r,"$block?",function(){return this.$raise(v("NotImplementedError"))}),c(r,"$inline?",function(){return this.$raise(v("NotImplementedError"))}),c(r,"$converter",function(){return this.document.$converter()}),c(r,"$parent=",function(t){var e;return e=[t,t.$document()],this.parent=e[0],this.document=e[1],e}),c(r,"$attr",function(t,e,r){var n=b,i=b,s=b,o=b;return(null==e&&(e=b),null==r&&(r=b),u(n=this.attributes["$[]"](t.$to_s())))?n:u(i=u(s=u(o=r)?this.parent:o)?this.document.$attributes()["$[]"](($(r,!0)?t:r).$to_s()):s)?i:e},-2),c(r,"$attr?",function(t,e,r){var n=b;return(null==e&&(e=b),null==r&&(r=b),u(e))?e["$=="](u(n=this.attributes["$[]"](t.$to_s()))?n:u(r)&&u(this.parent)?this.document.$attributes()["$[]"](($(r,!0)?t:r).$to_s()):b):u(n=this.attributes["$key?"](t.$to_s()))?n:!!(u(r)&&u(this.parent))&&this.document.$attributes()["$key?"](($(r,!0)?t:r).$to_s())},-2),c(r,"$set_attr",function(t,e,r){return null==e&&(e=""),null==r&&(r=!0),!($(r,!1)&&u(this.attributes["$key?"](t)))&&(this.attributes["$[]="](t,e),!0)},-2),c(r,"$remove_attr",function(t){return this.attributes.$delete(t)}),c(r,"$option?",function(t){return!!u(this.attributes["$[]"](""+t+"-option"))}),c(r,"$set_option",function(t){return this.attributes["$[]="](""+t+"-option",""),b}),c(r,"$enabled_options",function(){return h(v("Set").$new(),"tap",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.attributes&&(r.attributes=b),null==e&&(e=b),h(r.attributes,"each_key",[],function(t){return(null==t&&(t=b),u(t.$to_s()["$end_with?"]("-option")))?e["$<<"](t.$slice(0,_(t.$length(),7))):b})},{$$s:this})}),c(r,"$update_attributes",function(t){return this.attributes.$update(t)}),c(r,"$role",function(){return this.attributes["$[]"]("role")}),c(r,"$roles",function(){var t=b;return u(t=this.attributes["$[]"]("role"))?t.$split():[]}),c(r,"$role?",function(t){return(null==t&&(t=b),u(t))?t["$=="](this.attributes["$[]"]("role")):this.attributes["$key?"]("role")},-1),c(r,"$has_role?",function(t){var e=b;return!!u(e=this.attributes["$[]"]("role"))&&(" "+e+" ")["$include?"](" "+t+" ")}),c(r,"$role=",function(t){var e;return e=["role",d(v("Array"),t)?t.$join(" "):t],h(this.attributes,"[]=",e),e[e.length-1]}),c(r,"$add_role",function(t){var e=b;return u(e=this.attributes["$[]"]("role"))?!u((" "+e+" ")["$include?"](" "+t+" "))&&(this.attributes["$[]="]("role",""+e+" "+t),!0):(this.attributes["$[]="]("role",t),!0)}),c(r,"$remove_role",function(t){var e=b;return!!(u(e=this.attributes["$[]"]("role"))&&u((e=e.$split()).$delete(t)))&&(u(e["$empty?"]())?this.attributes.$delete("role"):this.attributes["$[]="]("role",e.$join(" ")),!0)}),c(r,"$reftext",function(){var t=b;return u(t=this.attributes["$[]"]("reftext"))?this.$apply_reftext_subs(t):b}),c(r,"$reftext?",function(){return this.attributes["$key?"]("reftext")}),c(r,"$icon_uri",function(t){var e=b;return u(this["$attr?"]("icon"))?(e=this.$attr("icon"),u(i("Helpers")["$extname?"](e))||(e=""+e+"."+this.document.$attr("icontype","png"))):e=""+t+"."+this.document.$attr("icontype","png"),this.$image_uri(e,"iconsdir")}),c(r,"$image_uri",function(t,e){var r=b,n=b;return(null==e&&(e="imagesdir"),u(p((r=this.document).$safe(),v(i("SafeMode"),"SECURE")))&&u(r["$attr?"]("data-uri")))?u(i("Helpers")["$uriish?"](t))&&u(t=i("Helpers").$encode_spaces_in_uri(t))||u(e)&&u(n=r.$attr(e))&&u(i("Helpers")["$uriish?"](n))&&u(t=this.$normalize_web_path(t,n,!1))?u(r["$attr?"]("allow-uri-read"))?this.$generate_data_uri_from_uri(t,r["$attr?"]("cache-uri")):t:this.$generate_data_uri(t,e):this.$normalize_web_path(t,u(e)?r.$attr(e):b)},-2),c(r,"$media_uri",function(t,e){return null==e&&(e="imagesdir"),this.$normalize_web_path(t,u(e)?this.document.$attr(e):b)},-2),c(r,"$generate_data_uri",function(t,e){var r=b,n=b,s=b;return(null==e&&(e=b),n=u(r=i("Helpers").$extname(t,b))?$(r,".svg")?"image/svg+xml":"image/"+r.$slice(1,r.$length()):"application/octet-stream",s=u(e)?this.$normalize_system_path(t,this.document.$attr(e),b,l(["target_name"],{target_name:"image"})):this.$normalize_system_path(t),u(v("File")["$readable?"](s)))?"data:"+n+";base64,"+v("Base64").$strict_encode64(v("File").$binread(s)):(this.$logger().$warn("image to embed not found or not readable: "+s),"data:"+n+";base64,")},-2),c(r,"$generate_data_uri_from_uri",function(e,r){var n,s,o=b,a=b;null==r&&(r=!1),u(r)?i("Helpers").$require_library("open-uri/cached","open-uri-cached"):f(i("RUBY_ENGINE_OPAL"))&&v("OpenURI");try{return s=h(v("OpenURI"),"open_uri",[e,i("URI_READ_MODE")],function(t){return null==t&&(t=b),[t.$content_type(),t.$read()]}),n=m(s),o=null==n[0]?b:n[0],a=null==n[1]?b:n[1],"data:"+o+";base64,"+v("Base64").$strict_encode64(a)}catch(r){if(t.rescue(r,[i("StandardError")]))try{return this.$logger().$warn("could not retrieve image data from URI: "+e),e}finally{t.pop_exception()}else throw r}},-2),c(r,"$normalize_asset_path",function(t,e,r){return null==e&&(e="path"),null==r&&(r=!0),this.$normalize_system_path(t,this.document.$base_dir(),b,l(["target_name","recover"],{target_name:e,recover:r}))},-2),c(r,"$normalize_system_path",function(t,e,r,n){var s=b,o=b;return null==e&&(e=b),null==r&&(r=b),null==n&&(n=l([],{})),u(p((s=this.document).$safe(),v(i("SafeMode"),"SAFE")))?u(e)?u(s.$path_resolver()["$root?"](e))||(e=v("File").$join(s.$base_dir(),e)):e=s.$base_dir():(e=u(o=e)?o:s.$base_dir(),r=u(o=r)?o:s.$base_dir()),s.$path_resolver().$system_path(t,e,r,n)},-2),c(r,"$normalize_web_path",function(t,e,r){return(null==e&&(e=b),null==r&&(r=!0),u(r)&&u(i("Helpers")["$uriish?"](t)))?i("Helpers").$encode_spaces_in_uri(t):this.document.$path_resolver().$web_path(t,e)},-2),c(r,"$read_asset",function(t,e){var r=b;return(null==e&&(e=l([],{})),d(v("Hash"),e)||(e=l(["warn_on_failure"],{warn_on_failure:e["$!="](!1)})),u(v("File")["$readable?"](t)))?u(e["$[]"]("normalize"))?i("Helpers").$prepare_source_string(v("File").$read(t,l(["mode"],{mode:i("FILE_READ_MODE")}))).$join(i("LF")):v("File").$read(t,l(["mode"],{mode:i("FILE_READ_MODE")})):(u(e["$[]"]("warn_on_failure"))&&this.$logger().$warn(""+(u(r=this.$attr("docfile"))?r:"<stdin>")+": "+(u(r=e["$[]"]("label"))?r:"file")+" does not exist or cannot be read: "+t),b)},-2),c(r,"$read_contents",function(e,r){var n=b,s=b,o=b,a=b;if(null==r&&(r=l([],{})),n=this.document,u(i("Helpers")["$uriish?"](e))||u(s=r["$[]"]("start"))&&u(i("Helpers")["$uriish?"](s))&&u(e=n.$path_resolver().$web_path(e,s))){if(u(n["$attr?"]("allow-uri-read"))){u(n["$attr?"]("cache-uri"))&&i("Helpers").$require_library("open-uri/cached","open-uri-cached");try{o=u(r["$[]"]("normalize"))?i("Helpers").$prepare_source_string(h(v("OpenURI"),"open_uri",[e,i("URI_READ_MODE")],function(t){return null==t&&(t=b),t.$read()})).$join(i("LF")):h(v("OpenURI"),"open_uri",[e,i("URI_READ_MODE")],function(t){return null==t&&(t=b),t.$read()})}catch(n){if(t.rescue(n,[i("StandardError")]))try{u(r.$fetch("warn_on_failure",!0))&&this.$logger().$warn("could not retrieve contents of "+(u(a=r["$[]"]("label"))?a:"asset")+" at URI: "+e)}finally{t.pop_exception()}else throw n}}else u(r.$fetch("warn_on_failure",!0))&&this.$logger().$warn("cannot retrieve contents of "+(u(a=r["$[]"]("label"))?a:"asset")+" at URI: "+e+" (allow-uri-read attribute not enabled)")}else e=this.$normalize_system_path(e,r["$[]"]("start"),b,l(["target_name"],{target_name:u(a=r["$[]"]("label"))?a:"asset"})),o=this.$read_asset(e,l(["normalize","warn_on_failure","label"],{normalize:r["$[]"]("normalize"),warn_on_failure:r.$fetch("warn_on_failure",!0),label:r["$[]"]("label")}));return u(o)&&u(r["$[]"]("warn_if_empty"))&&u(o["$empty?"]())&&this.$logger().$warn("contents of "+(u(a=r["$[]"]("label"))?a:"asset")+" is empty: "+e),o},-2),c(r,"$is_uri?",function(t){return i("Helpers")["$uriish?"](t)})},Opal.modules["asciidoctor/abstract_block"]=function(t){var e,r,n,i,s,o,a=t.module,l=t.klass,$=t.hash2,u=t.send2,c=t.find_super,h=t.eqeq,_=t.eqeqeq,d=t.def,p=t.return_val,f=t.truthy,m=t.alias,g=t.send,b=t.rb_plus,v=t.not,y=t.neqeq,x=[],k=t.nil,w=t.$$$;return t.add_stubs("attr_reader,attr_writer,attr_accessor,==,===,level,file,lineno,playback_attributes,convert,converter,join,map,to_s,parent,parent=,<<,empty?,Integer,find_by_internal,to_proc,find_by,context,[],items,+,find_index,include?,next_adjacent_block,blocks,select,sub_specialchars,match?,sub_replacements,title,apply_title_subs,delete,!,reftext,nil_or_empty?,sub_placeholder,sub_quotes,compat_mode,attributes,chomp,increment_and_store_counter,index=,numbered,sectname,numeral=,counter,caption=,numeral,int_to_roman,each,assign_numeral,reindex_sections,protected,has_role?,raise,header?,!=,flatten,head,rows,merge,body,foot,style,inner_document"),e=[a(x[0],"Asciidoctor")].concat(x),r=t.$r(e),i=[n=l(e[0],r("AbstractNode"),"AbstractBlock")].concat(e),s=t.$r(i),(o=n.$$prototype).source_location=o.document=o.attributes=o.blocks=o.numeral=o.context=o.parent=o.caption=o.style=o.converted_title=o.title=o.subs=o.next_section_index=o.next_section_ordinal=o.id=o.header=k,n.$attr_reader("blocks"),n.$attr_writer("caption"),n.$attr_accessor("content_model"),n.$attr_accessor("level"),n.$attr_accessor("numeral"),n.$attr_accessor("source_location"),n.$attr_accessor("style"),n.$attr_reader("subs"),d(n,"$initialize",function t(e,r,n){var i=t.$$p||k;return(t.$$p=null,null==n&&(n=$([],{})),u(this,c(this,"initialize",t,!1,!0),"initialize",[e,r,n],i),this.content_model="compound",this.blocks=[],this.subs=[],this.id=this.title=this.caption=this.numeral=this.style=this.default_subs=this.source_location=k,h(r,"document")||h(r,"section"))?(this.level=this.next_section_index=0,this.next_section_ordinal=1):_(s("AbstractBlock"),e)?this.level=e.$level():this.level=k},-3),d(n,"$block?",p(!0)),d(n,"$inline?",p(!1)),d(n,"$file",function(){var t=k;return f(t=this.source_location)?this.source_location.$file():t}),d(n,"$lineno",function(){var t=k;return f(t=this.source_location)?this.source_location.$lineno():t}),d(n,"$convert",function(){return this.document.$playback_attributes(this.attributes),this.$converter().$convert(this)}),m(n,"render","convert"),d(n,"$content",function(){return g(this.blocks,"map",[],function(t){return null==t&&(t=k),t.$convert()}).$join(s("LF"))}),d(n,"$context=",function(t){return this.node_name=(this.context=t).$to_s()}),d(n,"$<<",function(t){return h(t.$parent(),this)||t["$parent="](this),this.blocks["$<<"](t),this}),m(n,"append","<<"),d(n,"$blocks?",function(){return!f(this.blocks["$empty?"]())}),d(n,"$sections?",p(!1)),d(n,"$number",function(){try{return this.$Integer(this.numeral)}catch(e){if(t.rescue(e,[s("StandardError")]))try{return this.numeral}finally{t.pop_exception()}else throw e}}),d(n,"$number=",function(t){return this.numeral=t.$to_s()}),d(n,"$find_by",function e(r){var n=e.$$p||k,i=k;e.$$p=null,null==r&&(r=$([],{}));try{return g(this,"find_by_internal",[r,i=[]],n.$to_proc())}catch(e){if(t.rescue(e,[w("StopIteration")]))try{return i}finally{t.pop_exception()}else throw e}},-1),m(n,"query","find_by"),d(n,"$next_adjacent_block",function(){var t=k,e=k;return h(this.context,"document")?k:h((t=this.parent).$context(),"dlist")&&h(this.context,"list_item")?f(e=t.$items()["$[]"](b(g(t.$items(),"find_index",[],function t(e,r){var n=null==t.$$s?this:t.$$s,i=k;return(null==e&&(e=k),null==r&&(r=k),f(i=e["$include?"](n)))?i:r["$=="](n)},{$$s:this}),1)))?e:t.$next_adjacent_block():f(e=t.$blocks()["$[]"](b(t.$blocks().$find_index(this),1)))?e:t.$next_adjacent_block()}),d(n,"$sections",function(){return g(this.blocks,"select",[],function(t){return null==t&&(t=k),t.$context()["$=="]("section")})}),d(n,"$alt",function(){var t=k;return f(t=this.attributes["$[]"]("alt"))?h(t,this.attributes["$[]"]("default-alt"))?this.$sub_specialchars(t):(t=this.$sub_specialchars(t),f(s("ReplaceableTextRx")["$match?"](t)))?this.$sub_replacements(t):t:""}),d(n,"$caption",function(){return h(this.context,"admonition")?this.attributes["$[]"]("textlabel"):this.caption}),d(n,"$captioned_title",function(){return""+this.caption+this.$title()}),d(n,"$list_marker_keyword",function(t){var e=k;return null==t&&(t=k),s("ORDERED_LIST_KEYWORDS")["$[]"](f(e=t)?e:this.style)},-1),d(n,"$title",function(){var t=k,e=k;return this.converted_title=f(t=this.converted_title)?t:f(e=this.title)?this.$apply_title_subs(this.title):e}),d(n,"$title?",function(){return!!f(this.title)}),d(n,"$title=",function(t){return this.converted_title=k,this.title=t}),d(n,"$sub?",function(t){return this.subs["$include?"](t)}),d(n,"$remove_sub",function(t){return this.subs.$delete(t),k}),d(n,"$xreftext",function(t){var e=k,r=k,n=k,i=k;if(null==t&&(t=k),f(e=this.$reftext())&&v(e["$empty?"]()))return e;if(!(f(t)&&f(this.title)&&v(this.caption["$nil_or_empty?"]())))return this.$title();switch(t){case"full":if(r=this.$sub_placeholder(this.$sub_quotes(f(this.document.$compat_mode())?"``%s''":'"`%s`"'),this.$title()),f(this.numeral)&&f(i=s("CAPTION_ATTRIBUTE_NAMES")["$[]"](this.context))&&f(n=this.document.$attributes()["$[]"](i)))return""+n+" "+this.numeral+", "+r;return""+this.caption.$chomp(". ")+", "+r;case"short":if(f(this.numeral)&&f(i=s("CAPTION_ATTRIBUTE_NAMES")["$[]"](this.context))&&f(n=this.document.$attributes()["$[]"](i)))return""+n+" "+this.numeral;return this.caption.$chomp(". ");default:return this.$title()}},-1),d(n,"$assign_caption",function(t,e){var r=k,n=k,i=k;return null==e&&(e=this.context),f(this.caption)||v(this.title)||f(this.caption=f(r=t)?r:this.document.$attributes()["$[]"]("caption"))||f(i=s("CAPTION_ATTRIBUTE_NAMES")["$[]"](e))&&f(n=this.document.$attributes()["$[]"](i))&&(this.caption=""+n+" "+(this.numeral=this.document.$increment_and_store_counter(""+e+"-number",this))+". "),k},-2),d(n,"$assign_numeral",function(t){var e,r=k,n=k,i=k;return this.next_section_index=b((g(t,"index=",e=[this.next_section_index]),e[e.length-1]),1),f(r=t.$numbered())&&(h(n=t.$sectname(),"appendix")?(t["$numeral="](this.document.$counter("appendix-number","A")),t["$caption="](f(i=this.document.$attributes()["$[]"]("appendix-caption"))?""+i+" "+t.$numeral()+": ":""+t.$numeral()+". ")):h(n,"chapter")||h(r,"chapter")?t["$numeral="](this.document.$counter("chapter-number",1).$to_s()):(t["$numeral="](h(n,"part")?s("Helpers").$int_to_roman(this.next_section_ordinal):this.next_section_ordinal.$to_s()),this.next_section_ordinal=b(this.next_section_ordinal,1))),k}),d(n,"$reindex_sections",function(){return this.next_section_index=0,this.next_section_ordinal=1,g(this.blocks,"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return(null==e&&(e=k),h(e.$context(),"section"))?(r.$assign_numeral(e),e.$reindex_sections()):k},{$$s:this})}),n.$protected(),d(n,"$find_by_internal",function e(r,n){var i=e.$$p||k,s=k,o=k,a=k,l=k,u=k,c=k;if(e.$$p=null,null==r&&(r=$([],{})),null==n&&(n=[]),(f(l=!f(u=r["$[]"]("context"))||k)||h(u,this.context))&&(v(a=r["$[]"]("style"))||h(a,this.style))&&(v(o=r["$[]"]("role"))||f(this["$has_role?"](o)))&&(v(s=r["$[]"]("id"))||h(s,this.id))){if(i!==k){if(f(c=t.yield1(i,this)))switch(c){case"prune":return n["$<<"](this),f(s)&&this.$raise(w("StopIteration")),n;case"reject":return f(s)&&this.$raise(w("StopIteration")),n;case"stop":this.$raise(w("StopIteration"));break;default:n["$<<"](this),f(s)&&this.$raise(w("StopIteration"))}else f(s)&&this.$raise(w("StopIteration"))}else n["$<<"](this),f(s)&&this.$raise(w("StopIteration"))}switch(this.context){case"document":h(u,"document")||(f(this["$header?"]())&&(f(l)||h(u,"section"))&&g(this.header,"find_by_internal",[r,n],i.$to_proc()),g(this.blocks,"each",[],function(t){return(null==t&&(t=k),h(u,"section")&&y(t.$context(),"section"))?k:g(t,"find_by_internal",[r,n],i.$to_proc())}));break;case"dlist":(f(l)||y(u,"section"))&&g(this.blocks.$flatten(),"each",[],function(t){return(null==t&&(t=k),f(t))?g(t,"find_by_internal",[r,n],i.$to_proc()):k});break;case"table":f(r["$[]"]("traverse_documents"))?(g(this.$rows().$head(),"each",[],function(t){return null==t&&(t=k),g(t,"each",[],function(t){return null==t&&(t=k),g(t,"find_by_internal",[r,n],i.$to_proc())})}),h(u,"inner_document")&&(r=r.$merge($(["context"],{context:"document"}))),g(b(this.$rows().$body(),this.$rows().$foot()),"each",[],function(t){return null==t&&(t=k),g(t,"each",[],function(t){return(null==t&&(t=k),g(t,"find_by_internal",[r,n],i.$to_proc()),h(t.$style(),"asciidoc"))?g(t.$inner_document(),"find_by_internal",[r,n],i.$to_proc()):k})})):g(b(b(this.$rows().$head(),this.$rows().$body()),this.$rows().$foot()),"each",[],function(t){return null==t&&(t=k),g(t,"each",[],function(t){return null==t&&(t=k),g(t,"find_by_internal",[r,n],i.$to_proc())})});break;default:g(this.blocks,"each",[],function(t){return(null==t&&(t=k),h(u,"section")&&y(t.$context(),"section"))?k:g(t,"find_by_internal",[r,n],i.$to_proc())})}return n},-1)},Opal.modules["asciidoctor/attribute_list"]=function(t){var e,r,n,i,s,o=t.module,a=t.klass,l=t.const_set,$=t.hash,u=t.regexp,c=t.hash2,h=t.def,_=t.truthy,d=t.rb_plus,p=t.send,f=t.defs,m=t.eqeqeq,g=t.eqeq,b=t.rb_times,v=[],y=t.nil,x=t.$$$;return t.add_stubs("new,[],update,parse,parse_attribute,eos?,skip_delimiter,+,rekey,each_with_index,[]=,private,skip_blank,===,peek,parse_attribute_value,get_byte,start_with?,scan_name,end_with?,rstrip,string,==,unscan,scan_to_delimiter,*,include?,delete,each,split,empty?,apply_subs,scan_to_quote,gsub,skip,scan"),n=[r=a((e=[o(v[0],"Asciidoctor")].concat(v))[0],null,"AttributeList")].concat(e),i=t.$r(n),(s=r.$$prototype).attributes=s.scanner=s.delimiter=s.block=s.delimiter_skip_pattern=s.delimiter_boundary_pattern=y,l(n[0],"APOS","'"),l(n[0],"BACKSLASH","\\"),l(n[0],"QUOT",'"'),l(n[0],"BoundaryRx",$(i("QUOT"),/.*?[^\\](?=")/,i("APOS"),/.*?[^\\](?=')/,",",/.*?(?=[ \t]*(,|$))/)),l(n[0],"EscapedQuotes",$(i("QUOT"),'\\"',i("APOS"),"\\'")),l(n[0],"NameRx",u([i("CG_WORD"),"[",i("CC_WORD"),"\\-.]*"])),l(n[0],"BlankRx",/[ \t]+/),l(n[0],"SkipRx",c([","],{",":/[ \t]*(,|$)/})),h(r,"$initialize",function(t,e,r){return null==e&&(e=y),null==r&&(r=","),this.scanner=x("StringScanner").$new(t),this.block=e,this.delimiter=r,this.delimiter_skip_pattern=i("SkipRx")["$[]"](r),this.delimiter_boundary_pattern=i("BoundaryRx")["$[]"](r),this.attributes=y},-2),h(r,"$parse_into",function(t,e){return null==e&&(e=[]),t.$update(this.$parse(e))},-2),h(r,"$parse",function(t){var e=y;if(null==t&&(t=[]),_(this.attributes))return this.attributes;for(this.attributes=c([],{}),e=0;_(this.$parse_attribute(e,t))&&!_(this.scanner["$eos?"]());)this.$skip_delimiter(),e=d(e,1);return this.attributes},-1),h(r,"$rekey",function(t){return i("AttributeList").$rekey(this.attributes,t)}),f(r,"$rekey",function(t,e){return p(e,"each_with_index",[],function(e,r){var n,i=y;return(null==e&&(e=y),null==r&&(r=y),_(e)&&_(i=t["$[]"](d(r,1))))?(p(t,"[]=",n=[e,i]),n[n.length-1]):y}),t}),r.$private(),h(r,"$parse_attribute",function(t,e){var r=y,n=y,s=y,o=y,a=y,l=y,$=y,u=y,c=y,h=y;if(r=!0,this.$skip_blank(),m(i("QUOT"),n=this.scanner.$peek(1)))s=this.$parse_attribute_value(this.scanner.$get_byte());else if(m(i("APOS"),n))_((s=this.$parse_attribute_value(this.scanner.$get_byte()))["$start_with?"](i("APOS")))||(o=!0);else if(a=_(l=_($=s=this.$scan_name())?this.$skip_blank():$)?l:0,_(this.scanner["$eos?"]())){if(!(_(s)||_(this.scanner.$string().$rstrip()["$end_with?"](this.delimiter))))return y;r=y}else if(g(u=this.scanner.$get_byte(),this.delimiter))this.scanner.$unscan();else if(_(s)){if(g(u,"=")){if(this.$skip_blank(),m(i("QUOT"),l=u=this.scanner.$get_byte()))c=this.$parse_attribute_value(u);else if(m(i("APOS"),l))_((c=this.$parse_attribute_value(u))["$start_with?"](i("APOS")))||(o=!0);else if(m(this.delimiter,l))c="",this.scanner.$unscan();else if(m(y,l))c="";else if(g(c=""+u+this.$scan_to_delimiter(),"None"))return!0}else s=""+s+b(" ",a)+u+this.$scan_to_delimiter()}else s=""+u+this.$scan_to_delimiter();if(_(c))switch(s){case"options":case"opts":_(c["$include?"](","))?(_(c["$include?"](" "))&&(c=c.$delete(" ")),p(c.$split(","),"each",[],function t(e){var r,n=null==t.$$s?this:t.$$s;return(null==n.attributes&&(n.attributes=y),null==e&&(e=y),_(e["$empty?"]()))?y:(r=[""+e+"-option",""],p(n.attributes,"[]=",r),r[r.length-1])},{$$s:this})):_(c["$empty?"]())||this.attributes["$[]="](""+c+"-option","");break;default:if(_(o)&&_(this.block))switch(s){case"title":case"reftext":this.attributes["$[]="](s,c);break;default:this.attributes["$[]="](s,this.block.$apply_subs(c))}else this.attributes["$[]="](s,c)}else _(o)&&_(this.block)&&(s=this.block.$apply_subs(s)),_(h=e["$[]"](t))&&_(s)&&this.attributes["$[]="](h,s),this.attributes["$[]="](d(t,1),s);return r}),h(r,"$parse_attribute_value",function(t){var e=y;return g(this.scanner.$peek(1),t)?(this.scanner.$get_byte(),""):_(e=this.$scan_to_quote(t))?(this.scanner.$get_byte(),_(e["$include?"](i("BACKSLASH"))))?e.$gsub(i("EscapedQuotes")["$[]"](t),t):e:""+t+this.$scan_to_delimiter()}),h(r,"$skip_blank",function(){return this.scanner.$skip(i("BlankRx"))}),h(r,"$skip_delimiter",function(){return this.scanner.$skip(this.delimiter_skip_pattern)}),h(r,"$scan_name",function(){return this.scanner.$scan(i("NameRx"))}),h(r,"$scan_to_delimiter",function(){return this.scanner.$scan(this.delimiter_boundary_pattern)}),h(r,"$scan_to_quote",function(t){return this.scanner.$scan(i("BoundaryRx")["$[]"](t))})},Opal.modules["asciidoctor/block"]=function(t){var e,r,n,i,s,o,a=t.module,l=t.klass,$=t.const_set,u=t.hash2,c=t.alias,h=t.send2,_=t.find_super,d=t.truthy,p=t.eqeqeq,f=t.def,m=t.rb_lt,g=t.eqeq,b=[],v=t.nil,y=t.$$$;return t.add_stubs("default=,context,attr_accessor,[],key?,===,drop,delete,[]=,to_s,commit_subs,nil_or_empty?,prepare_source_string,apply_subs,join,<,size,empty?,rstrip,shift,pop,==,warn,logger,class,object_id,inspect"),e=[a(b[0],"Asciidoctor")].concat(b),r=t.$r(e),i=[n=l(e[0],r("AbstractBlock"),"Block")].concat(e),s=t.$r(i),(o=n.$$prototype).attributes=o.content_model=o.lines=o.subs=o.blocks=o.context=o.style=v,$(i[0],"DEFAULT_CONTENT_MODEL",u(["audio","image","listing","literal","stem","open","page_break","pass","thematic_break","video"],{audio:"empty",image:"empty",listing:"verbatim",literal:"verbatim",stem:"raw",open:"compound",page_break:"empty",pass:"raw",thematic_break:"empty",video:"empty"}))["$default="]("simple"),c(n,"blockname","context"),n.$attr_accessor("lines"),f(n,"$initialize",function t(e,r,n){var i=t.$$p||v,o=v,a=v,l=v;return(t.$$p=null,null==n&&(n=u([],{})),h(this,_(this,"initialize",t,!1,!0),"initialize",[e,r,n],i),this.content_model=d(o=n["$[]"]("content_model"))?o:s("DEFAULT_CONTENT_MODEL")["$[]"](r),d(n["$key?"]("subs"))?d(a=n["$[]"]("subs"))?(p("default",o=a)?this.default_subs=n["$[]"]("default_subs"):p(y("Array"),o)?(this.default_subs=a.$drop(0),this.attributes.$delete("subs")):(this.default_subs=v,this.attributes["$[]="]("subs",a.$to_s())),this.$commit_subs()):(this.default_subs=[],this.attributes.$delete("subs")):this.default_subs=v,d((l=n["$[]"]("source"))["$nil_or_empty?"]()))?this.lines=[]:p(y("String"),l)?this.lines=s("Helpers").$prepare_source_string(l):this.lines=l.$drop(0)},-3),f(n,"$content",function t(){var e=t.$$p||v,r=v,n=v,i=v,o=v;switch(t.$$p=null,this.content_model){case"compound":return h(this,_(this,"content",t,!1,!0),"content",[],e);case"simple":return this.$apply_subs(this.lines.$join(s("LF")),this.subs);case"verbatim":case"raw":if(d(m((r=this.$apply_subs(this.lines,this.subs)).$size(),2))){if(d(n=r["$[]"](0)))return n;return""}for(;d(d(n=i=r["$[]"](0))?i.$rstrip()["$empty?"]():n);)r.$shift();for(;d(d(n=o=r["$[]"](-1))?o.$rstrip()["$empty?"]():n);)r.$pop();return r.$join(s("LF"));default:return g(this.content_model,"empty")||this.$logger().$warn("unknown content model '"+this.content_model+"' for block: "+this),v}}),f(n,"$source",function(){return this.lines.$join(s("LF"))}),f(n,"$to_s",function(){var t=v;return t=g(this.content_model,"compound")?"blocks: "+this.blocks.$size():"lines: "+this.lines.$size(),"#<"+this.$class()+"@"+this.$object_id()+" {context: "+this.context.$inspect()+", content_model: "+this.content_model.$inspect()+", style: "+this.style.$inspect()+", "+t+"}>"})},Opal.modules["asciidoctor/callouts"]=function(t){var e,r,n=t.module,i=t.klass,s=t.def,o=t.hash2,a=t.rb_plus,l=t.truthy,$=t.rb_le,u=t.rb_minus,c=t.send,h=t.eqeq,_=t.rb_lt,d=[],p=t.nil;return t.add_stubs("next_list,<<,current_list,to_i,generate_next_callout_id,+,<=,size,[],-,chop,join,map,==,<,private,generate_callout_id"),(r=(e=i([n(d[0],"Asciidoctor")].concat(d)[0],null,"Callouts")).$$prototype).co_index=r.lists=r.list_index=p,s(e,"$initialize",function(){return this.lists=[],this.list_index=0,this.$next_list()}),s(e,"$register",function(t){var e=p;return this.$current_list()["$<<"](o(["ordinal","id"],{ordinal:t.$to_i(),id:e=this.$generate_next_callout_id()})),this.co_index=a(this.co_index,1),e}),s(e,"$read_next_id",function(){var t=p,e=p;return t=p,e=this.$current_list(),l($(this.co_index,e.$size()))&&(t=e["$[]"](u(this.co_index,1))["$[]"]("id")),this.co_index=a(this.co_index,1),t}),s(e,"$callout_ids",function(t){return c(this.$current_list(),"map",[],function(e){return(null==e&&(e=p),h(e["$[]"]("ordinal"),t))?""+e["$[]"]("id")+" ":""}).$join().$chop()}),s(e,"$current_list",function(){return this.lists["$[]"](u(this.list_index,1))}),s(e,"$next_list",function(){return this.list_index=a(this.list_index,1),l(_(this.lists.$size(),this.list_index))&&this.lists["$<<"]([]),this.co_index=1,p}),s(e,"$rewind",function(){return this.list_index=1,this.co_index=1,p}),e.$private(),s(e,"$generate_next_callout_id",function(){return this.$generate_callout_id(this.list_index,this.co_index)}),s(e,"$generate_callout_id",function(t,e){return"CO"+t+"-"+e})},Opal.modules["asciidoctor/converter/composite"]=function(t){var e,r,n,i,s=t.module,o=t.klass,a=t.slice,l=t.extract_kwargs,$=t.ensure_kwargs,u=t.send,c=t.truthy,h=t.def,_=t.thrower,d=[],p=t.nil,f=t.$$$;return t.add_stubs("attr_reader,each,respond_to?,composed,init_backend_traits,backend_traits,new,[]=,find_converter,convert,converter_for,node_name,[],handles?,raise"),e=[s(d[0],"Asciidoctor")].concat(d),(i=(n=o((r=t.$r(e))("Converter"),f(r("Converter"),"Base"),"CompositeConverter")).$$prototype).converter_cache=i.converters=p,n.$attr_reader("converters"),h(n,"$initialize",function(t,e,r){var n,i,s;return n=a(arguments,1),null==(s=$(l(n)).$$smap.backend_traits_source)&&(s=p),this.backend=t,u(this.converters=n,"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return(null==e&&(e=p),c(e["$respond_to?"]("composed")))?e.$composed(r):p},{$$s:this}),c(s)&&this.$init_backend_traits(s.$backend_traits()),this.converter_cache=u(f("Hash"),"new",[],function t(e,r){var n,i=null==t.$$s?this:t.$$s;return null==e&&(e=p),null==r&&(r=p),u(e,"[]=",n=[r,i.$find_converter(r)]),n[n.length-1]},{$$s:this})},-2),h(n,"$convert",function(t,e,r){var n=p;return null==e&&(e=p),null==r&&(r=p),this.$converter_for(e=c(n=e)?n:t.$node_name()).$convert(t,e,r)},-2),h(n,"$converter_for",function(t){return this.converter_cache["$[]"](t)}),h(n,"$find_converter",function(t){try{var e=_("return");return u(this.converters,"each",[],function(r){if(null==r&&(r=p),!c(r["$handles?"](t)))return p;e.$throw(r)},{$$ret:e}),this.$raise("Could not find a converter to handle transform: "+t)}catch(t){if(t===e)return t.$v;throw t}})},Opal.modules["asciidoctor/converter"]=function(t){var e,r,n,i,s,o,a,l,$,u,c,h,_,d,p,f,m,g,b,v,y,x,k,w,A,E,S=t.module,C=t.hash2,O=t.def,R=t.return_val,I=t.truthy,T=t.eqeq,z=t.defs,F=t.send,N=t.alias,L=t.slice,D=t.to_a,q=t.extract_kwargs,B=t.ensure_kwargs,M=t.eqeqeq,j=t.Class,P=t.klass,U=t.class_variable_set,H=t.class_variable_get,Y=t.rb_plus,G=t.gvars,W=[],K=t.nil,X=t.$$$;return t.add_stubs("autoload,attr_reader,raise,class,[],sub,slice,length,==,[]=,backend_traits,derive_backend_traits,register,map,to_s,new,create,default,each,default=,registry,for,===,supports_templates?,merge,private,include,delete,clear,send,extend,private_class_method,node_name,+,name,receiver,warn,logger,respond_to?,content"),r=(e=[S(W[0],"Asciidoctor")].concat(W))[0],i=[n=S(r,"Converter")].concat(e),s=t.$r(i),n.$autoload("CompositeConverter","asciidoctor/converter/composite"),n.$attr_reader("backend"),O(n,"$initialize",function(t,e){return null==e&&(e=C([],{})),this.backend=t},-2),O(n,"$convert",function(t,e,r){return null==this.backend&&(this.backend=K),null==e&&(e=K),null==r&&(r=K),this.$raise(X("NotImplementedError"),""+this.$class()+" (backend: "+this.backend+") must implement the #convert method")},-2),O(n,"$handles?",R(!0)),z(n,"$derive_backend_traits",function(t,e){var r=K,n=K,i=K;return(null==e&&(e=K),I(t))?(I(r=s("DEFAULT_EXTENSIONS")["$[]"](e=I(n=e)?n:t.$sub(s("TrailingDigitsRx"),"")))?i=r.$slice(1,r.$length()):r="."+(i=e),T(i,"html"))?C(["basebackend","filetype","htmlsyntax","outfilesuffix"],{basebackend:e,filetype:i,htmlsyntax:"html",outfilesuffix:r}):C(["basebackend","filetype","outfilesuffix"],{basebackend:e,filetype:i,outfilesuffix:r}):C([],{})},-2),a=[o=S(i[0],"BackendTraits")].concat(i),l=t.$r(a),O(o,"$basebackend",function(t){var e;return(null==t&&(t=K),I(t))?(e=["basebackend",t],F(this.$backend_traits(t),"[]=",e),e[e.length-1]):this.$backend_traits()["$[]"]("basebackend")},-1),O(o,"$filetype",function(t){var e;return(null==t&&(t=K),I(t))?(e=["filetype",t],F(this.$backend_traits(),"[]=",e),e[e.length-1]):this.$backend_traits()["$[]"]("filetype")},-1),O(o,"$htmlsyntax",function(t){var e;return(null==t&&(t=K),I(t))?(e=["htmlsyntax",t],F(this.$backend_traits(),"[]=",e),e[e.length-1]):this.$backend_traits()["$[]"]("htmlsyntax")},-1),O(o,"$outfilesuffix",function(t){var e;return(null==t&&(t=K),I(t))?(e=["outfilesuffix",t],F(this.$backend_traits(),"[]=",e),e[e.length-1]):this.$backend_traits()["$[]"]("outfilesuffix")},-1),O(o,"$supports_templates",function(t){var e;return null==t&&(t=!0),e=["supports_templates",t],F(this.$backend_traits(),"[]=",e),e[e.length-1]},-1),O(o,"$supports_templates?",function(){return this.$backend_traits()["$[]"]("supports_templates")}),O(o,"$init_backend_traits",function(t){var e=K;return null==t&&(t=K),this.backend_traits=I(e=t)?e:C([],{})},-1),O(o,"$backend_traits",function(t){var e=K;return null==this.backend_traits&&(this.backend_traits=K),null==this.backend&&(this.backend=K),null==t&&(t=K),this.backend_traits=I(e=this.backend_traits)?e:l("Converter").$derive_backend_traits(this.backend,t)},-1),N(o,"backend_info","backend_traits"),z(o,"$derive_backend_traits",function(t,e){return null==e&&(e=K),l("Converter").$derive_backend_traits(t,e)},-2),u=[$=S(i[0],"Config")].concat(i),c=t.$r(u),O($,"$register_for",function(t){var e;return e=L(arguments),F(c("Converter"),"register",[this].concat(D(F(e,"map",[],function(t){return null==t&&(t=K),t.$to_s()}))))},-1),_=[h=S(i[0],"Factory")].concat(i),d=t.$r(_),z(h,"$new",function(t,e){var r,n,i,s;return(r=L(arguments),n=B(n=q(r)),r.length>0&&(i=r.shift()),null==i&&(i=K),null==(s=n.$$smap.proxy_default)&&(s=!0),I(s))?d("DefaultFactoryProxy").$new(i):d("CustomFactory").$new(i)},-1),z(h,"$default",function(t){return L(arguments),d("Converter")},-1),z(h,"$create",function(t,e){return null==e&&(e=C([],{})),this.$default().$create(t,e)},-2),O(h,"$register",function(t,e){var r;return r=L(arguments,1),F(r,"each",[],function e(r){var n,i=null==e.$$s?this:e.$$s;return(null==r&&(r=K),T(r,"*"))?(n=[t],F(i.$registry(),"default=",n)):(n=[r,t],F(i.$registry(),"[]=",n)),n[n.length-1]},{$$s:this})},-2),O(h,"$for",function(t){return this.$registry()["$[]"](t)}),O(h,"$create",function(t,e){var r=K,n=K,i=K;return(null==e&&(e=C([],{})),I(r=this.$for(t)))?(M(j,r)&&(r=r.$new(t,e)),I(n=e["$[]"]("template_dirs"))&&M(d("BackendTraits"),r)&&I(r["$supports_templates?"]()))?d("CompositeConverter").$new(t,d("TemplateConverter").$new(t,n,e),r,C(["backend_traits_source"],{backend_traits_source:r})):r:I(n=e["$[]"]("template_dirs"))?I(i=e["$[]"]("delegate_backend"))&&I(r=this.$for(i))?(M(j,r)&&(r=r.$new(i,e)),d("CompositeConverter").$new(t,d("TemplateConverter").$new(t,n,e),r,C(["backend_traits_source"],{backend_traits_source:r}))):d("TemplateConverter").$new(t,n,e):K},-2),O(h,"$converters",function(){return this.$registry().$merge()}),h.$private(),O(h,"$registry",function(){return this.$raise(X("NotImplementedError"),""+d("Factory")+" subclass "+this.$class()+" must implement the #registry method")}),f=[p=P(i[0],null,"CustomFactory")].concat(i),m=t.$r(f),p.$include(m("Factory")),O(p,"$initialize",function(t){return(null==t&&(t=K),I(t))?(t["$default="](t.$delete("*")),this.registry=t):this.registry=C([],{})},-1),O(p,"$unregister_all",function(){var t;return t=[K],F(this.$registry().$clear(),"default=",t),t[t.length-1]}),p.$private(),p.$attr_reader("registry"),b=[g=S(i[0],"DefaultFactory")].concat(i),v=t.$r(b),g.$include(v("Factory")),g.$private(),U(b[0],"@@registry",C([],{})),O(g,"$registry",function(){return H(b[0],"@@registry",!1)}),x=[y=P(i[0],s("CustomFactory"),"DefaultFactoryProxy")].concat(i),k=t.$r(x),y.$include(k("DefaultFactory")),z(n,"$included",function(t){return t.$send("include",s("BackendTraits")),t.$extend(s("Config"))}),n.$private_class_method("included"),A=[w=P(i[0],null,"Base")].concat(i),E=t.$r(A),w.$$prototype.backend=K,w.$include(E("Logging")),w.$include(E("Converter")),O(w,"$convert",function(e,r,n){var i=K;null==G["!"]&&(G["!"]=K),null==r&&(r=e.$node_name()),null==n&&(n=K);try{if(I(n))return this.$send(Y("convert_",r),e,n);return this.$send(Y("convert_",r),e)}catch(e){if(t.rescue(e,[E("StandardError")]))try{return M(X("NoMethodError"),i=G["!"])&&T(i.$receiver(),this)&&T(i.$name().$to_s(),r)||this.$raise(),this.$logger().$warn("missing convert handler for "+i.$name()+" node in "+this.backend+" backend ("+this.$class()+")"),K}finally{t.pop_exception()}else throw e}},-2),O(w,"$handles?",function(t){return this["$respond_to?"]("convert_"+t)}),O(w,"$content_only",function(t){return t.$content()}),O(w,"$skip",R(K)),n.$extend(s("DefaultFactory"))},Opal.modules["asciidoctor/document"]=function(t){var e,r,n,i,s,o,a,l,$,u,c=t.module,h=t.klass,_=t.const_set,d=t.send,p=t.alias,f=t.truthy,m=t.def,g=t.hash2,b=t.not,v=t.to_ary,y=t.return_ivar,x=t.send2,k=t.find_super,w=t.rb_minus,A=t.eqeq,E=t.eqeqeq,S=t.hash,C=t.rb_ge,O=t.rb_plus,R=t.neqeq,I=t.thrower,T=t.rb_gt,z=t.rb_lt,F=t.gvars,N=t.to_a,L=[],D=t.nil,q=t.$$$;return t.add_stubs("new,target,attr_reader,nil?,<<,[],[]=,main,include?,strip,squeeze,gsub,!,empty?,rpartition,attr_accessor,catalog,delete,base_dir,options,merge,instance_variable_get,attributes,safe,compat_mode,outfilesuffix,sourcemap,path_resolver,converter,extensions,syntax_highlighter,each,end_with?,start_with?,slice,-,length,chop,==,downcase,===,extname,value_for_name,key?,freeze,attribute_undefined,attribute_missing,update,&,keys,name_for_value,expand_path,pwd,to_s,>=,+,abs,to_i,delete_if,update_doctype_attributes,cursor,parse,restore_attributes,update_backend_attributes,fetch,fill_datetime_attributes,activate,groups,create,to_proc,preprocessors?,preprocessors,process_method,tree_processors?,tree_processors,!=,counter,nil_or_empty?,attribute_locked?,nextval,value,save_to,increment_and_store_counter,register,tap,xreftext,>,source,source_lines,doctitle,sectname=,title=,first_section,title,reftext,<,find,context,header?,assign_numeral,clear_playback_attributes,save_attributes,name,negate,rewind,replace,apply_attribute_value_subs,delete?,start,doctype,content_model,warn,logger,content,convert,postprocessors?,postprocessors,record,write,respond_to?,chomp,class,write_alternate_pages,map,split,resolve_docinfo_subs,normalize_system_path,read_asset,apply_subs,docinfo_processors?,join,concat,compact,docinfo_processors,object_id,inspect,size,private,=~,resolve_pass_subs,apply_header_subs,limit_bytesize,bytesize,valid_encoding?,byteslice,resolve_subs,utc,at,Integer,now,index,strftime,year,utc_offset,partition,create_converter,basebackend,filetype,htmlsyntax,derive_backend_traits,raise"),e=[c(L[0],"Asciidoctor")].concat(L),r=t.$r(e),i=[n=h(e[0],r("AbstractBlock"),"Document")].concat(e),s=t.$r(i),(o=n.$$prototype).attributes=o.safe=o.sourcemap=o.reader=o.base_dir=o.parsed=o.parent_document=o.extensions=o.options=o.counters=o.catalog=o.reftexts=o.next_section_index=o.header=o.blocks=o.header_attributes=o.attributes_modified=o.backend=o.attribute_overrides=o.timings=o.converter=o.outfilesuffix=o.docinfo_processor_extensions=o.document=o.max_attribute_value_size=o.id=o.doctype=D,_(i[0],"ImageReference",d(q("Struct"),"new",["target","imagesdir"],function t(){return p(null==t.$$s?this:t.$$s,"to_s","target")},{$$s:n})),_(i[0],"Footnote",q("Struct").$new("index","id","text")),(a=h(i[0],null,"AttributeEntry")).$attr_reader("name","value","negate"),m(a,"$initialize",function(t,e,r){return null==r&&(r=D),this.name=t,this.value=e,this.negate=f(r["$nil?"]())?e["$nil?"]():r},-3),m(a,"$save_to",function(t){var e,r=D;return(f(r=t["$[]"]("attribute_entries"))?r:(d(t,"[]=",e=["attribute_entries",[]]),e[e.length-1]))["$<<"](this),this}),$=[l=h(i[0],null,"Title")].concat(i),u=t.$r($),l.$$prototype.subtitle=D,l.$attr_reader("main"),p(l,"title","main"),l.$attr_reader("subtitle"),l.$attr_reader("combined"),m(l,"$initialize",function(t,e){var r,n=D,i=D;return null==e&&(e=g([],{})),f(this.sanitized=e["$[]"]("sanitize"))&&f(t["$include?"]("<"))&&(t=t.$gsub(u("XmlSanitizeRx"),"").$squeeze(" ").$strip()),f((n=f(i=e["$[]"]("separator"))?i:":")["$empty?"]())||b(t["$include?"](n=""+n+" "))?(this.main=t,this.subtitle=D):(r=v(t.$rpartition(n)),this.main=null==r[0]?D:r[0],null==r[1]||r[1],this.subtitle=null==r[2]?D:r[2]),this.combined=t},-2),m(l,"$sanitized?",y("sanitized")),m(l,"$subtitle?",function(){return!!f(this.subtitle)}),m(l,"$to_s",y("combined")),_(i[0],"Author",q("Struct").$new("name","firstname","middlename","lastname","initials","email")),n.$attr_reader("safe"),n.$attr_reader("compat_mode"),n.$attr_reader("backend"),n.$attr_reader("doctype"),n.$attr_accessor("sourcemap"),n.$attr_reader("catalog"),p(n,"references","catalog"),n.$attr_reader("counters"),n.$attr_reader("header"),n.$attr_reader("base_dir"),n.$attr_reader("options"),n.$attr_reader("outfilesuffix"),n.$attr_reader("parent_document"),n.$attr_reader("reader"),n.$attr_reader("path_resolver"),n.$attr_reader("converter"),n.$attr_reader("syntax_highlighter"),n.$attr_reader("extensions"),m(n,"$initialize",function e(r,n){e.$$p;var i,o,a,l,$=D,u=D,c=D,h=D,_=D,p=D,m=D,v=D,y=D,R=D,I=D,T=D,z=D,F=D,N=D,L=D,B=D,M=D;return(e.$$p=null,null==r&&(r=D),null==n&&(n=g([],{})),x(this,k(this,"initialize",e,!1,!0),"initialize",[this,"document"],null),f($=n.$delete("parent"))?(this.parent_document=$,f(u=n["$[]"]("base_dir"))||n["$[]="]("base_dir",$.$base_dir()),f($.$options()["$[]"]("catalog_assets"))&&n["$[]="]("catalog_assets",!0),f($.$options()["$[]"]("to_dir"))&&n["$[]="]("to_dir",$.$options()["$[]"]("to_dir")),this.catalog=$.$catalog().$merge(g(["footnotes"],{footnotes:[]})),this.attribute_overrides=c=$.$instance_variable_get("@attribute_overrides").$merge($.$attributes()),c.$delete("compat-mode"),h=c.$delete("doctype"),c.$delete("notitle"),c.$delete("showtitle"),c.$delete("toc"),this.attributes["$[]="]("toc-placement",f(u=c.$delete("toc-placement"))?u:"auto"),c.$delete("toc-position"),this.safe=$.$safe(),f(this.compat_mode=$.$compat_mode())&&this.attributes["$[]="]("compat-mode",""),this.outfilesuffix=$.$outfilesuffix(),this.sourcemap=$.$sourcemap(),this.timings=D,this.path_resolver=$.$path_resolver(),this.converter=$.$converter(),_=D,this.extensions=$.$extensions(),this.syntax_highlighter=$.$syntax_highlighter()):(this.parent_document=D,this.catalog=g(["ids","refs","footnotes","links","images","callouts","includes"],{ids:g([],{}),refs:g([],{}),footnotes:[],links:[],images:[],callouts:s("Callouts").$new(),includes:g([],{})}),this.attribute_overrides=c=g([],{}),d(f(u=n["$[]"]("attributes"))?u:g([],{}),"each",[],function(t,e){var r;return null==t&&(t=D),null==e&&(e=D),f(t["$end_with?"]("@"))?(t=f(t["$start_with?"]("!"))?(r=[t.$slice(1,w(t.$length(),2)),!1])[0]:f(t["$end_with?"]("!@"))?(r=[t.$slice(0,w(t.$length(),2)),!1])[0]:(r=[t.$chop(),""+e+"@"])[0],e=r[1]):f(t["$start_with?"]("!"))?(t=(r=[t.$slice(1,t.$length()),!A(e,"@")&&D])[0],e=r[1]):f(t["$end_with?"]("!"))&&(t=(r=[t.$chop(),!A(e,"@")&&D])[0],e=r[1]),r=[t.$downcase(),e],d(c,"[]=",r),r[r.length-1]}),E(q("String"),p=n["$[]"]("to_file"))&&c["$[]="]("outfilesuffix",s("Helpers").$extname(p)),b(m=n["$[]"]("safe"))?this.safe=q(s("SafeMode"),"SECURE"):E(q("Integer"),m)?this.safe=m:this.safe=function(){try{return s("SafeMode").$value_for_name(m)}catch(e){if(t.rescue(e,[s("StandardError")]))try{return q(s("SafeMode"),"SECURE")}finally{t.pop_exception()}else throw e}}(),v=n.$delete("input_mtime"),this.compat_mode=c["$key?"]("compat-mode"),this.sourcemap=n["$[]"]("sourcemap"),this.timings=n.$delete("timings"),this.path_resolver=s("PathResolver").$new(),_=f((i=q("::","Asciidoctor","skip_raise"))&&q(i,"Extensions","skip_raise")?"constant":D)||f(n["$key?"]("extensions"))?q(q("Asciidoctor"),"Extensions"):D,this.extensions=D,f(n["$key?"]("header_footer"))&&b(n["$key?"]("standalone"))&&n["$[]="]("standalone",n["$[]"]("header_footer"))),this.parsed=this.reftexts=this.header=this.header_attributes=D,this.counters=g([],{}),this.attributes_modified=q("Set").$new(),this.docinfo_processor_extensions=g([],{}),y=n["$[]"]("standalone"),(this.options=n).$freeze(),R=this.attributes,f($)||(R["$[]="]("attribute-undefined",s("Compliance").$attribute_undefined()),R["$[]="]("attribute-missing",s("Compliance").$attribute_missing()),R.$update(s("DEFAULT_ATTRIBUTES"))),f(y)?(c["$[]="]("embedded",D),R["$[]="]("copycss",""),R["$[]="]("iconfont-remote",""),R["$[]="]("stylesheet",""),R["$[]="]("webfonts","")):(c["$[]="]("embedded",""),f(c["$key?"]("showtitle"))&&A(c.$keys()["$&"](["notitle","showtitle"])["$[]"](-1),"showtitle")?c["$[]="]("notitle",S(D,"",!1,"@","@",!1)["$[]"](c["$[]"]("showtitle"))):f(c["$key?"]("notitle"))?c["$[]="]("showtitle",S(D,"",!1,"@","@",!1)["$[]"](c["$[]"]("notitle"))):R["$[]="]("notitle","")),c["$[]="]("asciidoctor",""),c["$[]="]("asciidoctor-version",q(q("Asciidoctor"),"VERSION")),c["$[]="]("safe-mode-name",I=s("SafeMode").$name_for_value(this.safe)),c["$[]="]("safe-mode-"+I,""),c["$[]="]("safe-mode-level",this.safe),f(u=c["$[]"]("max-include-depth"))||c["$[]="]("max-include-depth",64),f(u=c["$[]"]("allow-uri-read"))||c["$[]="]("allow-uri-read",D),f(c["$key?"]("numbered"))&&c["$[]="]("sectnums",c.$delete("numbered")),f(c["$key?"]("hardbreaks"))&&c["$[]="]("hardbreaks-option",c.$delete("hardbreaks")),f(T=n["$[]"]("base_dir"))?this.base_dir=(o=["docdir",q("File").$expand_path(T)],d(c,"[]=",o),o[o.length-1]):f(c["$[]"]("docdir"))?this.base_dir=c["$[]"]("docdir"):this.base_dir=(o=["docdir",q("Dir").$pwd()],d(c,"[]=",o),o[o.length-1]),f(z=n["$[]"]("backend"))&&c["$[]="]("backend",z.$to_s()),f(F=n["$[]"]("doctype"))&&c["$[]="]("doctype",F.$to_s()),f(C(this.safe,q(s("SafeMode"),"SERVER")))?(f(u=c["$[]"]("copycss"))||c["$[]="]("copycss",D),f(u=c["$[]"]("source-highlighter"))||c["$[]="]("source-highlighter",D),f(u=c["$[]"]("backend"))||c["$[]="]("backend",s("DEFAULT_BACKEND")),b($)&&f(c["$key?"]("docfile"))&&c["$[]="]("docfile",c["$[]"]("docfile")["$[]"](t.Range.$new(O(c["$[]"]("docdir").$length(),1),-1,!1))),c["$[]="]("docdir",""),f(u=c["$[]"]("user-home"))||c["$[]="]("user-home","."),f(C(this.safe,q(s("SafeMode"),"SECURE")))&&(f(c["$key?"]("max-attribute-value-size"))||c["$[]="]("max-attribute-value-size",4096),f(c["$key?"]("linkcss"))||c["$[]="]("linkcss",""),f(u=c["$[]"]("icons"))||c["$[]="]("icons",D))):f(u=c["$[]"]("user-home"))||c["$[]="]("user-home",s("USER_HOME")),this.max_attribute_value_size=f(N=f(u=c["$[]"]("max-attribute-value-size"))?u:(d(c,"[]=",o=["max-attribute-value-size",D]),o[o.length-1]))?N.$to_i().$abs():D,d(c,"delete_if",[],function(t,e){var r,n=D;return null==t&&(t=D),null==e&&(e=D),f(e)?(E(q("String"),e)&&f(e["$end_with?"]("@"))&&(e=(r=[e.$chop(),!0])[0],n=r[1]),R["$[]="](t,e)):(R.$delete(t),n=e["$=="](!1)),n}),f($))?(this.backend=R["$[]"]("backend"),A(this.doctype=(d(R,"[]=",o=["doctype",h]),o[o.length-1]),s("DEFAULT_DOCTYPE"))||this.$update_doctype_attributes(s("DEFAULT_DOCTYPE")),this.reader=s("Reader").$new(r,n["$[]"]("cursor")),f(this.sourcemap)&&(this.source_location=this.reader.$cursor()),s("Parser").$parse(this.reader,this),this.$restore_attributes(),this.parsed=!0):(this.backend=D,A(L=f(u=R["$[]"]("backend"))?u:s("DEFAULT_BACKEND"),"manpage")?this.doctype=(o=["doctype",(d(c,"[]=",a=["doctype","manpage"]),a[a.length-1])],d(R,"[]=",o),o[o.length-1]):this.doctype=f(u=R["$[]"]("doctype"))?u:(o=["doctype",s("DEFAULT_DOCTYPE")],d(R,"[]=",o),o[o.length-1]),this.$update_backend_attributes(L,!0),f(u=R["$[]"]("stylesdir"))||R["$[]="]("stylesdir","."),f(u=R["$[]"]("iconsdir"))||R["$[]="]("iconsdir",""+R.$fetch("imagesdir","./images")+"/icons"),this.$fill_datetime_attributes(R,v),f(_)&&(f(B=n["$[]"]("extension_registry"))?(E(q(s("Extensions"),"Registry"),B)||f((l=q("::","AsciidoctorJ","skip_raise"))&&(a=q(l,"Extensions","skip_raise"))&&(o=q(a,"ExtensionRegistry","skip_raise"))?"constant":D)&&E(q(q(q("AsciidoctorJ"),"Extensions"),"ExtensionRegistry"),B))&&(this.extensions=B.$activate(this)):f((M=n["$[]"]("extensions"))["$nil?"]())?f(s("Extensions").$groups()["$empty?"]())||(this.extensions=q(s("Extensions"),"Registry").$new().$activate(this)):E(q("Proc"),M)&&(this.extensions=d(s("Extensions"),"create",[],M.$to_proc()).$activate(this))),this.reader=s("PreprocessorReader").$new(this,r,q(s("Reader"),"Cursor").$new(R["$[]"]("docfile"),this.base_dir),g(["normalize"],{normalize:!0})),f(this.sourcemap))?this.source_location=this.reader.$cursor():D},-1),m(n,"$parse",function(t){var e=D,r=D;return(null==t&&(t=D),f(this.parsed))?this:(e=this,f(t)&&(this.reader=s("PreprocessorReader").$new(e,t,q(s("Reader"),"Cursor").$new(this.attributes["$[]"]("docfile"),this.base_dir),g(["normalize"],{normalize:!0})),f(this.sourcemap)&&(this.source_location=this.reader.$cursor())),f(r=f(this.parent_document)?D:this.extensions)&&f(r["$preprocessors?"]())&&d(r.$preprocessors(),"each",[],function t(r){var n=null==t.$$s?this:t.$$s,i=D;return null==n.reader&&(n.reader=D),null==r&&(r=D),n.reader=f(i=r.$process_method()["$[]"](e,n.reader))?i:n.reader},{$$s:this}),s("Parser").$parse(this.reader,e,g(["header_only"],{header_only:this.options["$[]"]("parse_header_only")})),this.$restore_attributes(),f(r)&&f(r["$tree_processors?"]())&&d(r.$tree_processors(),"each",[],function(t){var r=D;return(null==t&&(t=D),f(r=t.$process_method()["$[]"](e))&&E(s("Document"),r)&&R(r,e))?e=r:D}),this.parsed=!0,e)},-1),m(n,"$parsed?",y("parsed")),m(n,"$counter",function(t,e){var r,n=D,i=D,o=D;return(null==e&&(e=D),f(this.parent_document))?this.parent_document.$counter(t,e):(r=f(i=this["$attribute_locked?"](t))&&f(n=this.counters["$[]"](t))||b((n=this.attributes["$[]"](t))["$nil_or_empty?"]())?[t,s("Helpers").$nextval(n)]:f(e)?[t,A(e,e.$to_i().$to_s())?e.$to_i():e]:[t,1],d(this.counters,"[]=",r),o=r[r.length-1],f(i)||this.attributes["$[]="](t,o),o)},-2),m(n,"$increment_and_store_counter",function(t,e){return s("AttributeEntry").$new(t,this.$counter(t)).$save_to(e.$attributes()).$value()}),p(n,"counter_increment","increment_and_store_counter"),m(n,"$register",function(t,e){var r=D,n=D,i=D;switch(t){case"ids":return this.$register("refs",[r=e["$[]"](0),s("Inline").$new(this,"anchor",e["$[]"](1),g(["type","id"],{type:"ref",id:r}))]);case"refs":return f((n=this.catalog["$[]"]("refs"))["$[]"](e["$[]"](0)))||n["$[]="](e["$[]"](0),i=e["$[]"](1)),i;case"footnotes":return this.catalog["$[]"](t)["$<<"](e);default:if(f(this.options["$[]"]("catalog_assets")))return this.catalog["$[]"](t)["$<<"](A(t,"images")?s("ImageReference").$new(e,this.attributes["$[]"]("imagesdir")):e);return D}}),m(n,"$resolve_id",function(t){var e=this,r=D,n=D;return f(e.reftexts)?e.reftexts["$[]"](t):f(e.parsed)?d(e.reftexts=g([],{}),"tap",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.catalog&&(r.catalog=D),null==e&&(e=D),d(r.catalog["$[]"]("refs"),"each",[],function(t,r){var n,i=D;return(null==t&&(t=D),null==r&&(r=D),f(i=e["$[]"](r.$xreftext())))?i:(n=[r.$xreftext(),t],d(e,"[]=",n),n[n.length-1])})},{$$s:e})["$[]"](t):(r=D,e.reftexts=n=g([],{}),function(){try{var i=I("break");d(e.catalog["$[]"]("refs"),"each",[],function(e,s){var o,a=D,l=D;return(null==e&&(e=D),null==s&&(s=D),A(a=s.$xreftext(),t)&&(r=e,i.$throw()),f(l=n["$[]"](a)))?l:(o=[a,e],d(n,"[]=",o),o[o.length-1])})}catch(t){if(t===i)return t.$v;throw t}}(),e.reftexts=D,r)}),m(n,"$sections?",function(){return T(this.next_section_index,0)}),m(n,"$footnotes?",function(){return!f(this.catalog["$[]"]("footnotes")["$empty?"]())}),m(n,"$footnotes",function(){return this.catalog["$[]"]("footnotes")}),m(n,"$callouts",function(){return this.catalog["$[]"]("callouts")}),m(n,"$nested?",function(){return!!f(this.parent_document)}),m(n,"$embedded?",function(){return this.attributes["$key?"]("embedded")}),m(n,"$extensions?",function(){return!!f(this.extensions)}),m(n,"$source",function(){return f(this.reader)?this.reader.$source():D}),m(n,"$source_lines",function(){return f(this.reader)?this.reader.$source_lines():D}),m(n,"$basebackend?",function(t){return this.attributes["$[]"]("basebackend")["$=="](t)}),m(n,"$title",function(){return this.$doctitle()}),m(n,"$title=",function(t){var e,r=D;return f(r=this.header)||(r=this.header=s("Section").$new(this,0))["$sectname="]("header"),d(r,"title=",e=[t]),e[e.length-1]}),m(n,"$doctitle",function(t){var e=D,r=D,n=D,i=D;if(null==t&&(t=g([],{})),!f(e=this.attributes["$[]"]("title"))){if(f(r=this.$first_section()))e=r.$title();else if(b(f(n=t["$[]"]("use_fallback"))?e=this.attributes["$[]"]("untitled-label"):n))return D}return f(i=t["$[]"]("partition"))?s("Title").$new(e,t.$merge(g(["separator"],{separator:A(i,!0)?this.attributes["$[]"]("title-separator"):i}))):f(t["$[]"]("sanitize"))&&f(e["$include?"]("<"))?e.$gsub(s("XmlSanitizeRx"),"").$squeeze(" ").$strip():e},-1),p(n,"name","doctitle"),m(n,"$xreftext",function(t){var e=D;return(null==t&&(t=D),f(e=this.$reftext())&&b(e["$empty?"]()))?e:this.$title()},-1),m(n,"$author",function(){return this.attributes["$[]"]("author")}),m(n,"$authors",function(){var t=D,e=D,r=D,n=D,i=D;if(!f((t=this.attributes)["$key?"]("author")))return[];if(e=[s("Author").$new(t["$[]"]("author"),t["$[]"]("firstname"),t["$[]"]("middlename"),t["$[]"]("lastname"),t["$[]"]("authorinitials"),t["$[]"]("email"))],f(T(r=f(n=t["$[]"]("authorcount"))?n:0,1)))for(i=1;f(z(i,r));)i=O(i,1),e["$<<"](s("Author").$new(t["$[]"]("author_"+i),t["$[]"]("firstname_"+i),t["$[]"]("middlename_"+i),t["$[]"]("lastname_"+i),t["$[]"]("authorinitials_"+i),t["$[]"]("email_"+i)));return e}),m(n,"$revdate",function(){return this.attributes["$[]"]("revdate")}),m(n,"$notitle",function(){return this.attributes["$key?"]("notitle")}),m(n,"$noheader",function(){return this.attributes["$key?"]("noheader")}),m(n,"$nofooter",function(){return this.attributes["$key?"]("nofooter")}),m(n,"$first_section",function(){var t=D;return f(t=this.header)?t:d(this.blocks,"find",[],function(t){return null==t&&(t=D),t.$context()["$=="]("section")})}),m(n,"$header?",function(){return!!f(this.header)}),p(n,"has_header?","header?"),m(n,"$<<",function t(e){var r=t.$$p||D;return t.$$p=null,A(e.$context(),"section")&&this.$assign_numeral(e),x(this,k(this,"<<",t,!1,!0),"<<",[e],r)}),m(n,"$finalize_header",function(t,e){return null==e&&(e=!0),this.$clear_playback_attributes(t),this.$save_attributes(),f(e)||t["$[]="]("invalid-header",!0),t},-2),m(n,"$playback_attributes",function(t){return f(t["$key?"]("attribute_entries"))?d(t["$[]"]("attribute_entries"),"each",[],function t(e){var r=null==t.$$s?this:t.$$s,n=D;return(null==r.attributes&&(r.attributes=D),null==e&&(e=D),n=e.$name(),f(e.$negate()))?(r.attributes.$delete(n),A(n,"compat-mode"))?r.compat_mode=!1:D:(r.attributes["$[]="](n,e.$value()),A(n,"compat-mode"))?r.compat_mode=!0:D},{$$s:this}):D}),m(n,"$restore_attributes",function(){return f(this.parent_document)||this.catalog["$[]"]("callouts").$rewind(),this.attributes.$replace(this.header_attributes)}),m(n,"$set_attribute",function(t,e){var r=D;if(null==e&&(e=""),f(this["$attribute_locked?"](t)))return D;if(f(e["$empty?"]())||(e=this.$apply_attribute_value_subs(e)),f(this.header_attributes))this.attributes["$[]="](t,e);else{switch(t){case"backend":this.$update_backend_attributes(e,f(r=this.attributes_modified["$delete?"]("htmlsyntax"))?e["$=="](this.backend):r);break;case"doctype":this.$update_doctype_attributes(e);break;default:this.attributes["$[]="](t,e)}this.attributes_modified["$<<"](t)}return e},-2),m(n,"$delete_attribute",function(t){return!f(this["$attribute_locked?"](t))&&(this.attributes.$delete(t),this.attributes_modified["$<<"](t),!0)}),m(n,"$attribute_locked?",function(t){return this.attribute_overrides["$key?"](t)}),m(n,"$set_header_attribute",function(t,e,r){var n=D,i=D;return null==e&&(e=""),null==r&&(r=!0),n=f(i=this.header_attributes)?i:this.attributes,!(A(r,!1)&&f(n["$key?"](t)))&&(n["$[]="](t,e),!0)},-2),m(n,"$convert",function(t){var e,r=D,n=D,i=D,o=D,a=D;return null==t&&(t=g([],{})),f(this.timings)&&this.timings.$start("convert"),f(this.parsed)||this.$parse(),f(C(this.safe,q(s("SafeMode"),"SERVER")))||f(t["$empty?"]())||(f((e=["outfile",t["$[]"]("outfile")],d(this.attributes,"[]=",e),e[e.length-1]))||this.attributes.$delete("outfile"),f((e=["outdir",t["$[]"]("outdir")],d(this.attributes,"[]=",e),e[e.length-1]))||this.attributes.$delete("outdir")),A(this.$doctype(),"inline")?f(r=f(n=this.blocks["$[]"](0))?n:this.header)&&(A(r.$content_model(),"compound")||A(r.$content_model(),"empty")?this.$logger().$warn("no inline candidate; use the inline doctype to convert a single paragragh, verbatim, or raw block"):i=r.$content()):(o=f(t["$key?"]("standalone"))?f(t["$[]"]("standalone"))?"document":"embedded":f(t["$key?"]("header_footer"))?f(t["$[]"]("header_footer"))?"document":"embedded":f(this.options["$[]"]("standalone"))?"document":"embedded",i=this.converter.$convert(this,o)),!f(this.parent_document)&&f(a=this.extensions)&&f(a["$postprocessors?"]())&&d(a.$postprocessors(),"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=D),i=e.$process_method()["$[]"](r,i)},{$$s:this}),f(this.timings)&&this.timings.$record("convert"),i},-1),p(n,"render","convert"),m(n,"$write",function(t,e){return f(this.timings)&&this.timings.$start("write"),E(s("Writer"),this.converter)?this.converter.$write(t,e):(f(e["$respond_to?"]("write"))?f(t["$nil_or_empty?"]())||(e.$write(t.$chomp()),e.$write(s("LF"))):q("File").$write(e,t,g(["mode"],{mode:s("FILE_WRITE_MODE")})),A(this.backend,"manpage")&&E(q("String"),e)&&f(this.converter.$class()["$respond_to?"]("write_alternate_pages"))&&this.converter.$class().$write_alternate_pages(this.attributes["$[]"]("mannames"),this.attributes["$[]"]("manvolnum"),e)),f(this.timings)&&this.timings.$record("write"),D}),m(n,"$content",function t(){var e=t.$$p||D;return t.$$p=null,this.attributes.$delete("title"),x(this,k(this,"content",t,!1,!0),"content",[],e)}),m(n,"$docinfo",function(t,e){var r,n=D,i=D,o=D,a=D,l=D,$=D,u=D,c=D,h=D,_=D;return(null==t&&(t="head"),null==e&&(e=D),f(z(this.$safe(),q(s("SafeMode"),"SECURE")))&&(A(t,"head")||(n="-"+t),e=f(i=e)?i:this.outfilesuffix,o=f((o=this.attributes["$[]"]("docinfo"))["$nil_or_empty?"]())?f(this.attributes["$key?"]("docinfo2"))?["private","shared"]:f(this.attributes["$key?"]("docinfo1"))?["shared"]:f(o)?["private"]:D:d(o.$split(","),"map",[],function(t){return null==t&&(t=D),t.$strip()}),f(o)&&(a=[],l=(r=["docinfo"+n+e,this.attributes["$[]"]("docinfodir"),this.$resolve_docinfo_subs()])[0],$=r[1],u=r[2],!f(o["$&"](["shared","shared-"+t])["$empty?"]())&&(c=this.$normalize_system_path(l,$),f(h=this.$read_asset(c,g(["normalize"],{normalize:!0})))&&a["$<<"](this.$apply_subs(h,u))),!(f(this.attributes["$[]"]("docname")["$nil_or_empty?"]())||f(o["$&"](["private","private-"+t])["$empty?"]()))&&(c=this.$normalize_system_path(""+this.attributes["$[]"]("docname")+"-"+l,$),f(_=this.$read_asset(c,g(["normalize"],{normalize:!0})))&&a["$<<"](this.$apply_subs(_,u))))),f(this.extensions)&&f(this["$docinfo_processors?"](t)))?(f(i=a)?i:[]).$concat(d(this.docinfo_processor_extensions["$[]"](t),"map",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=D),e.$process_method()["$[]"](r)},{$$s:this}).$compact()).$join(s("LF")):f(a)?a.$join(s("LF")):""},-1),m(n,"$docinfo_processors?",function(t){var e;return(null==t&&(t="head"),f(this.docinfo_processor_extensions["$key?"](t)))?this.docinfo_processor_extensions["$[]"](t)["$!="](!1):f(this.extensions)&&f(this.document.$extensions()["$docinfo_processors?"](t))?(e=[t,this.document.$extensions().$docinfo_processors(t)],d(this.docinfo_processor_extensions,"[]=",e),e[e.length-1])["$!"]()["$!"]():(e=[t,!1],d(this.docinfo_processor_extensions,"[]=",e),e[e.length-1])},-1),m(n,"$to_s",function(){var t=D;return"#<"+this.$class()+"@"+this.$object_id()+" {doctype: "+this.$doctype().$inspect()+", doctitle: "+(f(t=this.header)?this.header.$title():t).$inspect()+", blocks: "+this.blocks.$size()+"}>"}),n.$private(),m(n,"$apply_attribute_value_subs",function(t){var e;return(f(s("AttributeEntryPassMacroRx")["$=~"](t))?(t=(e=F["~"])===D?D:e["$[]"](2),f((e=F["~"])===D?D:e["$[]"](1))&&(t=this.$apply_subs(t,this.$resolve_pass_subs((e=F["~"])===D?D:e["$[]"](1))))):t=this.$apply_header_subs(t),f(this.max_attribute_value_size))?this.$limit_bytesize(t,this.max_attribute_value_size):t}),m(n,"$limit_bytesize",function(t,e){if(f(T(t.$bytesize(),e)))for(;!f((t=t.$byteslice(0,e))["$valid_encoding?"]());)e=w(e,1);return t}),m(n,"$resolve_docinfo_subs",function(){return f(this.attributes["$key?"]("docinfosubs"))?this.$resolve_subs(this.attributes["$[]"]("docinfosubs"),"block",D,"docinfo"):["attributes"]}),m(n,"$create_converter",function(t,e){var r=D,n=D,i=D,o=D,a=D;return(r=g(["document","htmlsyntax"],{document:this,htmlsyntax:this.attributes["$[]"]("htmlsyntax")}),f(n=f(i=(o=this.options)["$[]"]("template_dirs"))?i:o["$[]"]("template_dir"))&&(r["$[]="]("template_dirs",[].concat(N(n))),r["$[]="]("template_cache",o.$fetch("template_cache",!0)),r["$[]="]("template_engine",o["$[]"]("template_engine")),r["$[]="]("template_engine_options",o["$[]"]("template_engine_options")),r["$[]="]("eruby",o["$[]"]("eruby")),r["$[]="]("safe",this.safe),f(e)&&r["$[]="]("delegate_backend",e)),f(a=o["$[]"]("converter")))?q(s("Converter"),"CustomFactory").$new(S(t,a)).$create(t,r):o.$fetch("converter_factory",s("Converter")).$create(t,r)}),m(n,"$clear_playback_attributes",function(t){return t.$delete("attribute_entries")}),m(n,"$save_attributes",function(){var t=D,e=D,r=D,n=D,i=D,o=D,a=D,l=D,$=D,u=D,c=D,h=D,_=D,p=D;if(f((e=this.attributes)["$key?"]("doctitle"))||b(t=this.$doctitle())||e["$[]="]("doctitle",t),this.id=f(r=this.id)?r:e["$[]"]("css-signature"),f(n=f(e.$delete("toc2"))?"left":e["$[]"]("toc"))&&(i=f(o=e.$fetch("toc-placement","macro"))&&R(o,"auto")?o:e["$[]"]("toc-position"),!(f(n["$empty?"]())&&f(i["$nil_or_empty?"]())))){switch(a="left",l="toc2",$=f(i["$nil_or_empty?"]())?f(n["$empty?"]())?a:n:i,e["$[]="]("toc",""),e["$[]="]("toc-placement","auto"),$){case"left":case"<":case"&lt;":e["$[]="]("toc-position","left");break;case"right":case">":case"&gt;":e["$[]="]("toc-position","right");break;case"top":case"^":e["$[]="]("toc-position","top");break;case"bottom":case"v":e["$[]="]("toc-position","bottom");break;case"preamble":case"macro":e["$[]="]("toc-position","content"),e["$[]="]("toc-placement",$),l=D;break;default:e.$delete("toc-position"),l=D}f(l)&&(f(r=e["$[]"]("toc-class"))||e["$[]="]("toc-class",l))}if(f(u=e["$[]"]("icons"))&&b(e["$key?"]("icontype")))switch(u){case"":case"font":break;default:e["$[]="]("icons",""),A(u,"image")||e["$[]="]("icontype",u)}return f(this.compat_mode=e["$key?"]("compat-mode"))&&f(e["$key?"]("language"))&&e["$[]="]("source-language",e["$[]"]("language")),f(this.parent_document)||(A(c=e["$[]"]("basebackend"),"html")?f(h=e["$[]"]("source-highlighter"))&&b(e["$[]"](""+h+"-unavailable"))&&(f(_=this.options["$[]"]("syntax_highlighter_factory"))?this.syntax_highlighter=_.$create(h,this.backend,g(["document"],{document:this})):f(p=this.options["$[]"]("syntax_highlighters"))?this.syntax_highlighter=q(s("SyntaxHighlighter"),"DefaultFactoryProxy").$new(p).$create(h,this.backend,g(["document"],{document:this})):this.syntax_highlighter=s("SyntaxHighlighter").$create(h,this.backend,g(["document"],{document:this}))):A(c,"docbook")&&(f(this["$attribute_locked?"]("toc"))||f(this.attributes_modified["$include?"]("toc"))||e["$[]="]("toc",""),f(this["$attribute_locked?"]("sectnums"))||f(this.attributes_modified["$include?"]("sectnums"))||e["$[]="]("sectnums","")),this.outfilesuffix=e["$[]"]("outfilesuffix"),d(s("FLEXIBLE_ATTRIBUTES"),"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return(null==r.attribute_overrides&&(r.attribute_overrides=D),null==e&&(e=D),f(r.attribute_overrides["$key?"](e))&&f(r.attribute_overrides["$[]"](e)))?r.attribute_overrides.$delete(e):D},{$$s:this})),this.header_attributes=e.$merge()}),m(n,"$fill_datetime_attributes",function(t,e){var r,n=D,i=D,s=D,o=D,a=D,l=D,$=D,u=D;return n=f(q("ENV")["$key?"]("SOURCE_DATE_EPOCH"))?i=q("Time").$at(this.$Integer(q("ENV")["$[]"]("SOURCE_DATE_EPOCH"))).$utc():q("Time").$now(),f(s=t["$[]"]("localdate"))?f(o=t["$[]"]("localyear"))||t["$[]="]("localyear",A(s.$index("-"),4)?s.$slice(0,4):D):(d(t,"[]=",r=["localdate",n.$strftime("%F")]),s=r[r.length-1],f(o=t["$[]"]("localyear"))||t["$[]="]("localyear",n.$year().$to_s())),a=f(o=t["$[]"]("localtime"))?o:(d(t,"[]=",r=["localtime",n.$strftime("%T "+(A(n.$utc_offset(),0)?"UTC":"%z"))]),r[r.length-1]),f(o=t["$[]"]("localdatetime"))||t["$[]="]("localdatetime",""+s+" "+a),e=f(o=f(l=i)?l:e)?o:n,f($=t["$[]"]("docdate"))?f(o=t["$[]"]("docyear"))||t["$[]="]("docyear",A($.$index("-"),4)?$.$slice(0,4):D):(d(t,"[]=",r=["docdate",e.$strftime("%F")]),$=r[r.length-1],f(o=t["$[]"]("docyear"))||t["$[]="]("docyear",e.$year().$to_s())),u=f(o=t["$[]"]("doctime"))?o:(d(t,"[]=",r=["doctime",e.$strftime("%T "+(A(e.$utc_offset(),0)?"UTC":"%z"))]),r[r.length-1]),f(o=t["$[]"]("docdatetime"))||t["$[]="]("docdatetime",""+$+" "+u),D}),m(n,"$update_backend_attributes",function(t,e){var r,n=D,i=D,o=D,a=D,l=D,$=D,u=D,c=D,h=D,_=D,p=D,m=D,g=D,b=D;return(null==e&&(e=D),f(e)||R(t,this.backend))?(n=this.backend,i=(o=this.attributes)["$[]"]("basebackend"),a=this.doctype,f(t["$include?"](":"))&&(l=null==(r=v(t.$partition(":")))[0]?D:r[0],null==r[1]||r[1],t=null==r[2]?D:r[2]),f(t["$start_with?"]("xhtml"))?(o["$[]="]("htmlsyntax","xml"),t=t.$slice(1,t.$length())):f(t["$start_with?"]("html"))&&(f($=o["$[]"]("htmlsyntax"))||o["$[]="]("htmlsyntax","html")),t=f($=s("BACKEND_ALIASES")["$[]"](t))?$:t,f(l)&&(t=(r=[l,t])[0],u=r[1]),f(a)?(f(n)&&(o.$delete("backend-"+n),o.$delete("backend-"+n+"-doctype-"+a)),o["$[]="]("backend-"+t+"-doctype-"+a,""),o["$[]="]("doctype-"+a,"")):f(n)&&o.$delete("backend-"+n),o["$[]="]("backend-"+t,""),this.backend=(d(o,"[]=",r=["backend",t]),r[r.length-1]),E(q(s("Converter"),"BackendTraits"),c=this.$create_converter(t,u))?(h=c.$basebackend(),_=c.$filetype(),f(p=c.$htmlsyntax())&&o["$[]="]("htmlsyntax",p),f(e)?f($=o["$[]"]("outfilesuffix"))||o["$[]="]("outfilesuffix",c.$outfilesuffix()):f(this["$attribute_locked?"]("outfilesuffix"))||o["$[]="]("outfilesuffix",c.$outfilesuffix())):f(c)?(h=(m=s("Converter").$derive_backend_traits(t))["$[]"]("basebackend"),_=m["$[]"]("filetype"),f(e)?f($=o["$[]"]("outfilesuffix"))||o["$[]="]("outfilesuffix",m["$[]"]("outfilesuffix")):f(this["$attribute_locked?"]("outfilesuffix"))||o["$[]="]("outfilesuffix",m["$[]"]("outfilesuffix"))):this.$raise(q("NotImplementedError"),"asciidoctor: FAILED: missing converter for backend '"+t+"'. Processing aborted."),this.converter=c,f(g=o["$[]"]("filetype"))&&o.$delete("filetype-"+g),o["$[]="]("filetype",_),o["$[]="]("filetype-"+_,""),f(b=s("DEFAULT_PAGE_WIDTHS")["$[]"](h))?o["$[]="]("pagewidth",b):o.$delete("pagewidth"),R(h,i)&&(f(a)?(f(i)&&(o.$delete("basebackend-"+i),o.$delete("basebackend-"+i+"-doctype-"+a)),o["$[]="]("basebackend-"+h+"-doctype-"+a,"")):f(i)&&o.$delete("basebackend-"+i),o["$[]="]("basebackend-"+h,""),o["$[]="]("basebackend",h)),t):D},-2),m(n,"$update_doctype_attributes",function(t){var e,r=D,n=D,i=D,s=D;return f(t)&&R(t,this.doctype)?(n=(e=[this.backend,(r=this.attributes)["$[]"]("basebackend"),this.doctype])[0],i=e[1],f(s=e[2])?(r.$delete("doctype-"+s),f(n)&&(r.$delete("backend-"+n+"-doctype-"+s),r["$[]="]("backend-"+n+"-doctype-"+t,"")),f(i)&&(r.$delete("basebackend-"+i+"-doctype-"+s),r["$[]="]("basebackend-"+i+"-doctype-"+t,""))):(f(n)&&r["$[]="]("backend-"+n+"-doctype-"+t,""),f(i)&&r["$[]="]("basebackend-"+i+"-doctype-"+t,"")),r["$[]="]("doctype-"+t,""),this.doctype=(d(r,"[]=",e=["doctype",t]),e[e.length-1])):D})},Opal.modules["asciidoctor/inline"]=function(t){var e,r,n,i,s=t.module,o=t.klass,a=t.hash2,l=t.send2,$=t.find_super,u=t.def,c=t.return_val,h=t.alias,_=t.truthy,d=[],p=t.nil;return t.add_stubs("attr_accessor,attr_reader,[],convert,converter,attr,==,apply_reftext_subs,reftext"),e=[s(d[0],"Asciidoctor")].concat(d),r=t.$r(e),(i=(n=o(e[0],r("AbstractNode"),"Inline")).$$prototype).text=i.type=p,n.$attr_accessor("text"),n.$attr_reader("type"),n.$attr_accessor("target"),u(n,"$initialize",function t(e,r,n,i){return t.$$p,t.$$p=null,null==n&&(n=p),null==i&&(i=a([],{})),l(this,$(this,"initialize",t,!1,!0),"initialize",[e,r,i],null),this.node_name="inline_"+r,this.text=n,this.id=i["$[]"]("id"),this.type=i["$[]"]("type"),this.target=i["$[]"]("target")},-3),u(n,"$block?",c(!1)),u(n,"$inline?",c(!0)),u(n,"$convert",function(){return this.$converter().$convert(this)}),h(n,"render","convert"),u(n,"$alt",function(){var t=p;return _(t=this.$attr("alt"))?t:""}),u(n,"$reftext?",function(){var t=p,e=p;return _(t=this.text)?_(e=this.type["$=="]("ref"))?e:this.type["$=="]("bibref"):t}),u(n,"$reftext",function(){var t=p;return _(t=this.text)?this.$apply_reftext_subs(t):p}),u(n,"$xreftext",function(t){return null==t&&(t=p),this.$reftext()},-1)},Opal.modules["asciidoctor/list"]=function(t){var e,r,n,i,s,o,a,l,$=t.module,u=t.klass,c=t.alias,h=t.hash2,_=t.send2,d=t.find_super,p=t.def,f=t.truthy,m=t.eqeq,g=[],b=t.nil;return t.add_stubs("blocks,blocks?,==,next_list,callouts,convert,class,object_id,inspect,size,items,parent,attr_accessor,level,drop,nil_or_empty?,apply_subs,attr_writer,empty?,===,[],outline?,!,simple?,source,shift,context"),e=[$(g[0],"Asciidoctor")].concat(g),r=t.$r(e),(i=(n=u(e[0],r("AbstractBlock"),"List")).$$prototype).context=i.document=i.style=b,c(n,"items","blocks"),c(n,"content","blocks"),c(n,"items?","blocks?"),p(n,"$initialize",function t(e,r,n){var i=t.$$p||b;return t.$$p=null,null==n&&(n=h([],{})),_(this,d(this,"initialize",t,!1,!0),"initialize",[e,r,n],i)},-3),p(n,"$outline?",function(){var t=b;return f(t=this.context["$=="]("ulist"))?t:this.context["$=="]("olist")}),p(n,"$convert",function t(){var e=t.$$p||b,r=b;return(t.$$p=null,m(this.context,"colist"))?(r=_(this,d(this,"convert",t,!1,!0),"convert",[],e),this.document.$callouts().$next_list(),r):_(this,d(this,"convert",t,!1,!0),"convert",[],e)}),c(n,"render","convert"),p(n,"$to_s",function(){return"#<"+this.$class()+"@"+this.$object_id()+" {context: "+this.context.$inspect()+", style: "+this.style.$inspect()+", items: "+this.$items().$size()+"}>"}),o=[s=u(e[0],r("AbstractBlock"),"ListItem")].concat(e),a=t.$r(o),(l=s.$$prototype).text=l.subs=l.blocks=b,c(s,"list","parent"),s.$attr_accessor("marker"),p(s,"$initialize",function t(e,r){return t.$$p,t.$$p=null,null==r&&(r=b),_(this,d(this,"initialize",t,!1,!0),"initialize",[e,"list_item"],null),this.text=r,this.level=e.$level(),this.subs=a("NORMAL_SUBS").$drop(0)},-2),p(s,"$text?",function(){return!f(this.text["$nil_or_empty?"]())}),p(s,"$text",function(){var t=b;return f(t=this.text)?this.$apply_subs(this.text,this.subs):t}),s.$attr_writer("text"),p(s,"$simple?",function(){var t=b,e=b,r=b,n=b;return f(t=this.blocks["$empty?"]())?t:f(e=f(r=this.blocks.$size()["$=="](1))?a("List")["$==="](n=this.blocks["$[]"](0)):r)?n["$outline?"]():e}),p(s,"$compound?",function(){return this["$simple?"]()["$!"]()}),p(s,"$fold_first",function(){return this.text=f(this.text["$nil_or_empty?"]())?this.blocks.$shift().$source():""+this.text+a("LF")+this.blocks.$shift().$source(),b}),p(s,"$to_s",function(){var t=b;return"#<"+this.$class()+"@"+this.$object_id()+" {list_context: "+this.$parent().$context().$inspect()+", text: "+this.text.$inspect()+", blocks: "+(f(t=this.blocks)?t:[]).$size()+"}>"})},Opal.modules["asciidoctor/parser"]=function(t){var e,r,n,i,s=t.module,o=t.klass,a=t.const_set,l=t.send,$=t.truthy,u=t.hash2,c=t.to_ary,h=t.defs,_=t.eqeq,d=t.not,p=t.gvars,f=t.neqeq,m=t.rb_plus,g=t.rb_lt,b=t.rb_gt,v=t.to_a,y=t.eqeqeq,x=t.rb_minus,k=t.rb_times,w=t.thrower,A=[],E=t.nil,S=t.$$$;return t.add_stubs("include,new,proc,start_with?,match?,is_delimited_block?,private_class_method,parse_document_header,[],has_more_lines?,next_section,assign_numeral,<<,blocks,skip_blank_lines,parse_block_metadata_lines,attributes,is_next_line_doctitle?,[]=,finalize_header,nil_or_empty?,title=,sourcemap,cursor,parse_section_title,id=,include?,sub_specialchars,sub_attributes,source_location=,header,attribute_locked?,id,clear,delete,instance_variable_get,parse_header_metadata,==,!,register,process_authors,update,doctype,parse_manpage_header,=~,downcase,error,logger,message_with_context,cursor_at_line,backend,save,is_next_line_section?,initialize_section,join,map,read_lines_until,lstrip,split,title,restore_save,discard_save,header?,empty?,context,!=,attr?,attr,key?,document,+,level,special,sectname,to_i,<,>,warn,next_block,blocks?,style,style=,parent=,content_model,content_model=,lines,subs,size,context=,shift,unwrap_standalone_preamble,source_location,merge,fetch,parse_block_metadata_line,extensions,block_macros?,mark,read_line,terminator,to_s,masq,to_sym,registered_for_block?,debug?,debug,cursor_at_mark,strict_verbatim_paragraphs,unshift_line,markdown_syntax,keys,chr,uniform?,length,end_with?,parse_attributes,attribute_missing,tr,basename,assign_caption,registered_for_block_macro?,config,process_method,replace,parse_callout_list,callouts,===,parse_list,parse_description_list,underline_style_section_titles,is_section_title?,peek_line,atx_section_title?,generate_id,level=,read_paragraph_lines,adjust_indentation!,map!,slice,pop,build_block,apply_subs,chop,catalog_inline_anchors,rekey,index,strip,-,parse_table,each,raise,title?,update_attributes,commit_subs,sub?,catalog_callouts,source,remove_sub,block_terminates_paragraph,to_proc,nil?,parse_blocks,parse_list_item,items,scan,gsub,count,advance,dup,match,callout_ids,next_list,catalog_inline_anchor,marker=,catalog_inline_biblio_anchor,set_option,text=,resolve_ordered_list_marker,read_lines_for_list_item,skip_line_comments,unshift_lines,fold_first,text?,is_sibling_list_item?,concat,find,casecmp,sectname=,special=,numbered=,numbered,lineno,peek_lines,setext_section_title?,abs,cursor_at_prev_line,process_attribute_entries,next_line_empty?,apply_header_subs,rstrip,each_with_index,compact,to_h,squeeze,to_a,parse_style_attribute,process_attribute_entry,skip_comment_lines,store_attribute,sanitize_attribute_name,set_attribute,save_to,delete_attribute,ord,int_to_roman,resolve_list_marker,parse_colspecs,create_columns,has_header_option=,format,starts_with_delimiter?,close_open_cell,parse_cellspec,delimiter,match_delimiter,pre_match,post_match,buffer_has_unclosed_quotes?,skip_past_delimiter,buffer=,buffer,skip_past_escaped_delimiter,keep_cell_open,push_cellspec,close_cell,cell_open?,columns,assign_column_widths,partition_header_footer,upto,partition,shorthand_property_syntax,each_char,yield_buffered_attribute,any?,*,each_byte,%"),n=[r=o((e=[s(A[0],"Asciidoctor")].concat(A))[0],null,"Parser")].concat(e),i=t.$r(n),r.$include(i("Logging")),a(n[0],"BlockMatchData",i("Struct").$new("context","masq","tip","terminator")),a(n[0],"TAB","	"),a(n[0],"TabIndentRx",/^\t+/),a(n[0],"StartOfBlockProc",l(r,"proc",[],function t(e){var r=null==t.$$s?this:t.$$s,n=E,s=E;return(null==e&&(e=E),$(n=$(s=e["$start_with?"]("["))?i("BlockAttributeLineRx")["$match?"](e):s))?n:r["$is_delimited_block?"](e)},{$$s:r})),a(n[0],"StartOfListProc",l(r,"proc",[],function(t){return null==t&&(t=E),i("AnyListRx")["$match?"](t)})),a(n[0],"StartOfBlockOrListProc",l(r,"proc",[],function t(e){var r=null==t.$$s?this:t.$$s,n=E,s=E,o=E;return(null==e&&(e=E),$(n=$(s=r["$is_delimited_block?"](e))?s:$(o=e["$start_with?"]("["))?i("BlockAttributeLineRx")["$match?"](e):o))?n:i("AnyListRx")["$match?"](e)},{$$s:r})),a(n[0],"NoOp",E),a(n[0],"AuthorKeys",["author","authorinitials","firstname","middlename","lastname","email"]),a(n[0],"TableCellHorzAlignments",u(["<",">","^"],{"<":"left",">":"right","^":"center"})),a(n[0],"TableCellVertAlignments",u(["<",">","^"],{"<":"top",">":"bottom","^":"middle"})),a(n[0],"TableCellStyles",u(["d","s","e","m","h","l","a"],{d:"none",s:"strong",e:"emphasis",m:"monospaced",h:"header",l:"literal",a:"asciidoc"})),r.$private_class_method("new"),h(r,"$parse",function(t,e,r){var n,i=E,s=E,o=E;if(null==r&&(r=u([],{})),i=this.$parse_document_header(t,e,s=r["$[]"]("header_only")),!$(s))for(;$(t["$has_more_lines?"]());)o=null==(n=c(this.$next_section(t,e,i)))[0]?E:n[0],i=null==n[1]?E:n[1],$(o)&&(e.$assign_numeral(o),e.$blocks()["$<<"](o));return e},-3),h(r,"$parse_document_header",function(t,e,r){var n,s,o=E,a=E,h=E,p=E,f=E,m=E,g=E,b=E,v=E,y=E,x=E,k=E,w=E,A=E,S=E;return(null==r&&(r=!1),o=$(t.$skip_blank_lines())?this.$parse_block_metadata_lines(t,e):u([],{}),a=e.$attributes(),$(h=this["$is_next_line_doctitle?"](t,o,a["$[]"]("leveloffset")))&&$(o["$[]"]("title")))?(a["$[]="]("authorcount",0),e.$finalize_header(o,!1)):($((p=a["$[]"]("doctitle"))["$nil_or_empty?"]())||e["$title="](f=p),$(h)?($(e.$sourcemap())&&(m=t.$cursor()),s=[null==(n=c(this.$parse_section_title(t,e)))[0]?E:n[0]],l(e,"id=",s),s[s.length-1],null==n[1]||n[1],g=null==n[2]?E:n[2],null==n[3]||n[3],b=null==n[4]?E:n[4],$(f)?g=E:(e["$title="](g),$((l(a,"[]=",n=["doctitle",f=e.$sub_specialchars(g)]),n[n.length-1])["$include?"](i("ATTR_REF_HEAD")))&&a["$[]="]("doctitle",f=e.$sub_attributes(f,u(["attribute_missing"],{attribute_missing:"skip"})))),$(m)&&e.$header()["$source_location="](m),$(b)||$(e["$attribute_locked?"]("compat-mode"))||a["$[]="]("compat-mode",""),$(v=o["$[]"]("separator"))&&!$(e["$attribute_locked?"]("title-separator"))&&a["$[]="]("title-separator",v),$(y=o["$[]"]("id"))?e["$id="](y):y=e.$id(),$(x=o["$[]"]("role"))&&a["$[]="]("role",x),$(k=o["$[]"]("reftext"))&&a["$[]="]("reftext",k),o.$clear(),(w=e.$instance_variable_get("@attributes_modified")).$delete("doctitle"),this.$parse_header_metadata(t,e,E),$(w["$include?"]("doctitle"))?$((p=a["$[]"]("doctitle"))["$nil_or_empty?"]())||_(p,f)?a["$[]="]("doctitle",f):e["$title="](p):d(g)&&w["$<<"]("doctitle"),$(y)&&e.$register("refs",[y,e])):$(A=a["$[]"]("author"))?(S=this.$process_authors(A,!0,!1),$(a["$[]"]("authorinitials"))&&S.$delete("authorinitials"),a.$update(S)):$(A=a["$[]"]("authors"))?(S=this.$process_authors(A,!0),a.$update(S)):a["$[]="]("authorcount",0),_(e.$doctype(),"manpage")&&this.$parse_manpage_header(t,e,o,r),e.$finalize_header(o))},-3),h(r,"$parse_manpage_header",function(t,e,r,n){var s,o=E,a=E,c=E,h=E,d=E,f=E,m=E,g=E,b=E,v=E,y=E,x=E;return null==n&&(n=!1),$(i("ManpageTitleVolnumRx")["$=~"]((o=e.$attributes())["$[]"]("doctitle")))?(o["$[]="]("manvolnum",a=(s=p["~"])===E?E:s["$[]"](2)),o["$[]="]("mantitle",($((c=(s=p["~"])===E?E:s["$[]"](1))["$include?"](i("ATTR_REF_HEAD")))?e.$sub_attributes(c):c).$downcase())):(this.$logger().$error(this.$message_with_context("non-conforming manpage title",u(["source_location"],{source_location:t.$cursor_at_line(1)}))),o["$[]="]("mantitle",$(h=$(d=o["$[]"]("doctitle"))?d:o["$[]"]("docname"))?h:"command"),o["$[]="]("manvolnum",a="1")),$(f=o["$[]"]("manname"))&&$(o["$[]"]("manpurpose"))?($(h=o["$[]"]("manname-title"))||o["$[]="]("manname-title","Name"),o["$[]="]("mannames",[f]),_(e.$backend(),"manpage")&&(o["$[]="]("docname",f),o["$[]="]("outfilesuffix","."+a))):!$(n)&&(t.$skip_blank_lines(),t.$save(),r.$update(this.$parse_block_metadata_lines(t,e)),$(m=this["$is_next_line_section?"](t,u([],{})))?_(m,1)?(g=this.$initialize_section(t,e,u([],{})),b=l(t.$read_lines_until(u(["break_on_blank_lines","skip_line_comments"],{break_on_blank_lines:!0,skip_line_comments:!0})),"map",[],function(t){return null==t&&(t=E),t.$lstrip()}).$join(" "),$(i("ManpageNamePurposeRx")["$=~"](b))?($((f=(s=p["~"])===E?E:s["$[]"](1))["$include?"](i("ATTR_REF_HEAD")))&&(f=e.$sub_attributes(f)),$(f["$include?"](","))?f=(v=l(f.$split(","),"map",[],function(t){return null==t&&(t=E),t.$lstrip()}))["$[]"](0):v=[f],$((y=(s=p["~"])===E?E:s["$[]"](2))["$include?"](i("ATTR_REF_HEAD")))&&(y=e.$sub_attributes(y)),$(h=o["$[]"]("manname-title"))||o["$[]="]("manname-title",g.$title()),$(g.$id())&&o["$[]="]("manname-id",g.$id()),o["$[]="]("manname",f),o["$[]="]("mannames",v),o["$[]="]("manpurpose",y),_(e.$backend(),"manpage")&&(o["$[]="]("docname",f),o["$[]="]("outfilesuffix","."+a))):x="non-conforming name section body"):x="name section must be at level 1":x="name section expected",$(x)?(t.$restore_save(),this.$logger().$error(this.$message_with_context(x,u(["source_location"],{source_location:t.$cursor()}))),o["$[]="]("manname",f=$(h=o["$[]"]("docname"))?h:"command"),o["$[]="]("mannames",[f]),_(e.$backend(),"manpage")&&(o["$[]="]("docname",f),o["$[]="]("outfilesuffix","."+a))):t.$discard_save()),E},-4),h(r,"$next_section",function(t,e,r){var n,s=E,o=E,a=E,h=E,p=E,v=E,y=E,x=E,k=E,w=E,A=E,S=E,C=E,O=E,R=E,I=E,T=E,z=E,F=E,N=E;for(null==r&&(r=u([],{})),s=o=a=!1,_(e.$context(),"document")&&$(e.$blocks()["$empty?"]())&&($(h=e["$header?"]())||$(r.$delete("invalid-header"))||d(this["$is_next_line_section?"](t,r)))?(p=(v=e).$doctype()["$=="]("book"),($(h)||$(p)&&f(r["$[]"](1),"abstract"))&&(s=o=i("Block").$new(e,"preamble",u(["content_model"],{content_model:"compound"})),$(p)&&$(e["$attr?"]("preface-title"))&&s["$title="](e.$attr("preface-title")),e.$blocks()["$<<"](s)),y=e,x=0,$(e.$attributes()["$key?"]("fragment"))?k=-1:$(p)?(k=(n=[1,0])[0],w=n[1]):k=1):(p=(v=e.$document()).$doctype()["$=="]("book"),y=this.$initialize_section(t,e,r),r=$(A=r["$[]"]("title"))?u(["title"],{title:A}):u([],{}),k=m(x=y.$level(),1),_(x,0)?a=p:_(x,1)&&$(y.$special())&&!(_(S=y.$sectname(),"appendix")||_(S,"preface")||_(S,"abstract"))&&(k=E)),t.$skip_blank_lines();$(t["$has_more_lines?"]());){if(this.$parse_block_metadata_lines(t,v,r),$(C=this["$is_next_line_section?"](t,r))){if($(v["$attr?"]("leveloffset"))&&$(g(C=m(C,v.$attr("leveloffset").$to_i()),0))&&(C=0),$(b(C,x)))$(k)?_(C,k)||$(w)&&_(C,w)||$(g(k,0))||(O=$(w)?"expected levels "+w+" or "+k:"expected level "+k,this.$logger().$warn(this.$message_with_context("section title out of sequence: "+O+", got level "+C,u(["source_location"],{source_location:t.$cursor()})))):this.$logger().$error(this.$message_with_context(""+S+" sections do not support nested sections",u(["source_location"],{source_location:t.$cursor()}))),R=null==(n=c(this.$next_section(t,y,r)))[0]?E:n[0],r=null==n[1]?E:n[1],y.$assign_numeral(R),y.$blocks()["$<<"](R);else if(_(C,0)&&_(y,v))$(p)||this.$logger().$error(this.$message_with_context("level 0 sections can only be used when doctype is book",u(["source_location"],{source_location:t.$cursor()}))),R=null==(n=c(this.$next_section(t,y,r)))[0]?E:n[0],r=null==n[1]?E:n[1],y.$assign_numeral(R),y.$blocks()["$<<"](R);else break}else I=t.$cursor(),$(T=this.$next_block(t,$(z=o)?z:y,r,u(["parse_metadata"],{parse_metadata:!1})))&&($(a)&&(d(y["$blocks?"]())?f(T.$style(),"partintro")?_(T.$style(),"open")&&_(T.$context(),"open")?T["$style="]("partintro"):(T["$parent="](o=i("Block").$new(y,"open",u(["content_model"],{content_model:"compound"}))),o["$style="]("partintro"),y.$blocks()["$<<"](o)):_(T.$content_model(),"simple")&&(T["$content_model="]("compound"),T["$<<"](i("Block").$new(T,"paragraph",u(["source","subs"],{source:T.$lines(),subs:T.$subs()}))),T.$lines().$clear(),T.$subs().$clear()):_(y.$blocks().$size(),1)&&(F=y.$blocks()["$[]"](0),d(o)&&_(F.$content_model(),"compound")?this.$logger().$error(this.$message_with_context("illegal block content outside of partintro block",u(["source_location"],{source_location:I}))):f(F.$content_model(),"compound")&&(T["$parent="](o=i("Block").$new(y,"open",u(["content_model"],{content_model:"compound"}))),_(F.$style(),(l(o,"style=",n=["partintro"]),n[n.length-1]))&&(F["$context="]("paragraph"),F["$style="](E)),y.$blocks().$shift(),o["$<<"](F),y.$blocks()["$<<"](o)))),($(z=o)?z:y).$blocks()["$<<"](T),r.$clear());if($(z=t.$skip_blank_lines()));else break}if($(a))$(y["$blocks?"]())&&_(y.$blocks()["$[]"](-1).$context(),"section")||this.$logger().$error(this.$message_with_context("invalid part, must have at least one section (e.g., chapter, appendix, etc.)",u(["source_location"],{source_location:t.$cursor()})));else if($(s)){if($(s["$blocks?"]())){if($(p)||$(v.$blocks()["$[]"](1))||d(i("Compliance").$unwrap_standalone_preamble()))$(v.$sourcemap())&&s["$source_location="](s.$blocks()["$[]"](0).$source_location());else for(v.$blocks().$shift();$(N=s.$blocks().$shift());)v["$<<"](N)}else v.$blocks().$shift()}return[_(y,e)?E:y,r.$merge()]},-3),h(r,"$next_block",function(t,e,r,n){var s,o,a=E,h=E,k=E,w=E,A=E,S=E,C=E,O=E,R=E,I=E,T=E,z=E,F=E,N=E,L=E,D=E,q=E,B=E,M=E,j=E,P=E,U=E,H=E,Y=E,G=E,W=E,K=E,X=E,V=E,J=E,Z=E,Q=E,tt=E,te=E,tr=E,tn=E,ti=E,ts=E,to=E,ta=E,tl=E,t$=E,tu=E,tc=E,th=E,t_=E,td=E,tp=E,tf=E;if(null==p["~"]&&(p["~"]=E),null==r&&(r=u([],{})),null==n&&(n=u([],{})),!$(a=t.$skip_blank_lines()))return E;if($(h=n["$[]"]("text_only"))&&$(b(a,0))&&(n.$delete("text_only"),h=E),k=e.$document(),$(n.$fetch("parse_metadata",!0))){for(;$(this.$parse_block_metadata_line(t,k,r,n));)if(t.$shift(),!$(w=t.$skip_blank_lines()))return E}if($(A=k.$extensions())&&(S=(s=[A["$blocks?"](),A["$block_macros?"]()])[0],C=s[1]),t.$mark(),O=(s=[t.$read_line(),k.$attributes(),r["$[]"](1)])[0],R=s[1],I=s[2],T=z=F=N=E,$(L=this["$is_delimited_block?"](O,!0))&&(z=F=L.$context(),N=L.$terminator(),$(I)?_(I,z.$to_s())||($(L.$masq()["$include?"](I))?z=I.$to_sym():$(L.$masq()["$include?"]("admonition"))&&$(i("ADMONITION_STYLES")["$include?"](I))?z="admonition":$(S)&&$(A["$registered_for_block?"](I,z))?z=I.$to_sym():($(this.$logger()["$debug?"]())&&this.$logger().$debug(this.$message_with_context("unknown style for "+z+" block: "+I,u(["source_location"],{source_location:t.$cursor_at_mark()}))),I=z.$to_s())):(s=["style",z.$to_s()],l(r,"[]=",s),I=s[s.length-1])),!$(L))for(;$(!0);){if($(I)&&$(i("Compliance").$strict_verbatim_paragraphs())&&$(i("VERBATIM_STYLES")["$include?"](I))){z=I.$to_sym(),t.$unshift_line(O);break}if($(h))D=O["$start_with?"](" ",i("TAB"));else if(q=i("Compliance").$markdown_syntax(),$(O["$start_with?"](" "))){if(D=(s=[!0," "])[0],B=s[1],$(q)&&$(l(O.$lstrip(),"start_with?",v(i("MARKDOWN_THEMATIC_BREAK_CHARS").$keys())))&&$(i("MarkdownThematicBreakRx")["$match?"](O))){T=i("Block").$new(e,"thematic_break",u(["content_model"],{content_model:"empty"}));break}}else if($(O["$start_with?"](i("TAB"))))D=(s=[!0,i("TAB")])[0],B=s[1];else{if(D=(s=[!1,O.$chr()])[0],B=s[1],M=$(q)?i("HYBRID_LAYOUT_BREAK_CHARS"):i("LAYOUT_BREAK_CHARS"),$(M["$key?"](B))&&$($(q)?i("ExtLayoutBreakRx")["$match?"](O):$(w=this["$uniform?"](O,B,j=O.$length()))?b(j,2):w)){T=i("Block").$new(e,M["$[]"](B),u(["content_model"],{content_model:"empty"}));break}if($(O["$end_with?"]("]"))&&$(O["$include?"]("::"))){if((_(B,"i")||$(O["$start_with?"]("video:","audio:")))&&$(i("BlockMediaMacroRx")["$=~"](O))){if(P=(s=[((o=p["~"])===E?E:o["$[]"](1)).$to_sym(),(o=p["~"])===E?E:o["$[]"](2),(o=p["~"])===E?E:o["$[]"](3)])[0],U=s[1],H=s[2],T=i("Block").$new(e,P,u(["content_model"],{content_model:"empty"})),$(H)){switch(P){case"video":Y=["poster","width","height"];break;case"audio":Y=[];break;default:Y=["alt","width","height"]}T.$parse_attributes(H,Y,u(["sub_input","into"],{sub_input:!0,into:r}))}if($(r["$key?"]("style"))&&r.$delete("style"),$(U["$include?"](i("ATTR_REF_HEAD")))){if($((G=T.$sub_attributes(U))["$empty?"]())&&_($(w=R["$[]"]("attribute-missing"))?w:i("Compliance").$attribute_missing(),"drop-line")&&$(T.$sub_attributes(m(U," "),u(["attribute_missing","drop_line_severity"],{attribute_missing:"drop-line",drop_line_severity:"ignore"}))["$empty?"]()))return r.$clear(),E;U=G}_(P,"image")&&(k.$register("images",U),r["$[]="]("imagesdir",R["$[]"]("imagesdir")),$(w=r["$[]"]("alt"))||r["$[]="]("alt",$(W=I)?W:(s=["default-alt",i("Helpers").$basename(U,!0).$tr("_-"," ")],l(r,"[]=",s),s[s.length-1])),$((K=r.$delete("scaledwidth"))["$nil_or_empty?"]())||r["$[]="]("scaledwidth",$(i("TrailingDigitsRx")["$match?"](K))?""+K+"%":K),$(r["$[]"]("title"))&&(T["$title="](X=r.$delete("title")),T.$assign_caption(r.$delete("caption"),"figure"))),r["$[]="]("target",U);break}if(_(B,"t")&&$(O["$start_with?"]("toc:"))&&$(i("BlockTocMacroRx")["$=~"](O))){T=i("Block").$new(e,"toc",u(["content_model"],{content_model:"empty"})),$((s=p["~"])===E?E:s["$[]"](1))&&T.$parse_attributes((s=p["~"])===E?E:s["$[]"](1),[],u(["into"],{into:r}));break}if($($(C)?$(w=$(W=i("CustomBlockMacroRx")["$=~"](O))?V=A["$registered_for_block_macro?"]((s=p["~"])===E?E:s["$[]"](1)):W)?w:J=this.$logger()["$debug?"]():$(w=this.$logger()["$debug?"]())?J=i("CustomBlockMacroRx")["$=~"](O):w)){if($(J))this.$logger().$debug(this.$message_with_context("unknown name for block macro: "+((s=p["~"])===E?E:s["$[]"](1)),u(["source_location"],{source_location:t.$cursor_at_mark()})));else{if(Z=(s=p["~"])===E?E:s["$[]"](3),$((U=(s=p["~"])===E?E:s["$[]"](2))["$include?"](i("ATTR_REF_HEAD")))){if($((G=e.$sub_attributes(U))["$empty?"]())&&_($(w=R["$[]"]("attribute-missing"))?w:i("Compliance").$attribute_missing(),"drop-line")&&$(e.$sub_attributes(m(U," "),u(["attribute_missing","drop_line_severity"],{attribute_missing:"drop-line",drop_line_severity:"ignore"}))["$empty?"]()))return r.$clear(),E;U=G}if(_((Q=V.$config())["$[]"]("content_model"),"attributes")?$(Z)&&k.$parse_attributes(Z,$(w=$(W=Q["$[]"]("positional_attrs"))?W:Q["$[]"]("pos_attrs"))?w:[],u(["sub_input","into"],{sub_input:!0,into:r})):r["$[]="]("text",$(w=Z)?w:""),$(tt=Q["$[]"]("default_attrs"))&&l(r,"update",[tt],function(t,e){return null==t&&(t=E),null==e&&(e=E),e}),!($(T=V.$process_method()["$[]"](e,U,r))&&f(T,e)))return r.$clear(),E;r.$replace(T.$attributes());break}}}}if(d(D)&&_(B=$(w=B)?w:O.$chr(),"<")&&$(i("CalloutListRx")["$=~"](O))){t.$unshift_line(O),T=this.$parse_callout_list(t,p["~"],e,k.$callouts()),r["$[]="]("style","arabic");break}if($(i("UnorderedListRx")["$match?"](O))){t.$unshift_line(O),d(I)&&y(i("Section"),e)&&_(e.$sectname(),"bibliography")&&r["$[]="]("style",I="bibliography"),T=this.$parse_list(t,"ulist",e,I);break}if($(i("OrderedListRx")["$match?"](O))){t.$unshift_line(O),$((T=this.$parse_list(t,"olist",e,I)).$style())&&r["$[]="]("style",T.$style());break}if(($(O["$include?"]("::"))||$(O["$include?"](";;")))&&$(i("DescriptionListRx")["$=~"](O))){t.$unshift_line(O),T=this.$parse_description_list(t,p["~"],e);break}else if((_(I,"float")||_(I,"discrete"))&&$($(i("Compliance").$underline_style_section_titles())?this["$is_section_title?"](O,t.$peek_line()):$(w=D["$!"]())?this["$atx_section_title?"](O):w)){t.$unshift_line(O),te=null==(s=c(o=this.$parse_section_title(t,k,r["$[]"]("id"))))[0]?E:s[0],tr=null==s[1]?E:s[1],X=null==s[2]?E:s[2],tn=null==s[3]?E:s[3],$(tr)&&r["$[]="]("reftext",tr),(T=i("Block").$new(e,"floating_title",u(["content_model"],{content_model:"empty"})))["$title="](X),r.$delete("title"),T["$id="]($(w=te)?w:$(R["$key?"]("sectids"))?i("Section").$generate_id(T.$title(),k):E),T["$level="](tn);break}else if($(I)&&f(I,"normal")){if($(i("PARAGRAPH_STYLES")["$include?"](I))){z=I.$to_sym(),F="paragraph",t.$unshift_line(O);break}if($(i("ADMONITION_STYLES")["$include?"](I))){z="admonition",F="paragraph",t.$unshift_line(O);break}if($(S)&&$(A["$registered_for_block?"](I,"paragraph"))){z=I.$to_sym(),F="paragraph",t.$unshift_line(O);break}$(this.$logger()["$debug?"]())&&this.$logger().$debug(this.$message_with_context("unknown style for paragraph: "+I,u(["source_location"],{source_location:t.$cursor_at_mark()}))),I=E}if(t.$unshift_line(O),$(D)&&d(I))ti=this.$read_paragraph_lines(t,ts=_(a,0)?n["$[]"]("list_type"):E,u(["skip_line_comments"],{skip_line_comments:h})),this["$adjust_indentation!"](ti),T=$(h)||_(ts,"dlist")?i("Block").$new(e,"paragraph",u(["content_model","source","attributes"],{content_model:"simple",source:ti,attributes:r})):i("Block").$new(e,"literal",u(["content_model","source","attributes"],{content_model:"verbatim",source:ti,attributes:r}));else{if(ti=this.$read_paragraph_lines(t,$(w=a["$=="](0))?n["$[]"]("list_type"):w,u(["skip_line_comments"],{skip_line_comments:!0})),$(h))$(D)&&_(I,"normal")&&this["$adjust_indentation!"](ti),T=i("Block").$new(e,"paragraph",u(["content_model","source","attributes"],{content_model:"simple",source:ti,attributes:r}));else if($(i("ADMONITION_STYLE_HEADS")["$include?"](B))&&$(O["$include?"](":"))&&$(i("AdmonitionParagraphRx")["$=~"](O)))ti["$[]="](0,(s=p["~"])===E?E:s.$post_match()),r["$[]="]("name",to=(s=["style",(o=p["~"])===E?E:o["$[]"](1)],l(r,"[]=",s),s[s.length-1]).$downcase()),r["$[]="]("textlabel",$(w=r.$delete("caption"))?w:R["$[]"](""+to+"-caption")),T=i("Block").$new(e,"admonition",u(["content_model","source","attributes"],{content_model:"simple",source:ti,attributes:r}));else if($(q)&&_(B,">")&&$(O["$start_with?"]("> "))){if(l(ti,"map!",[],function(t){return(null==t&&(t=E),_(t,">"))?t.$slice(1,t.$length()):$(t["$start_with?"]("> "))?t.$slice(2,t.$length()):t}),$(ti["$[]"](-1)["$start_with?"]("-- "))&&(ta=(ta=ti.$pop()).$slice(3,ta.$length()),!$(ti["$empty?"]())))for(;$(ti["$[]"](-1)["$empty?"]());)ti.$pop();r["$[]="]("style","quote"),T=this.$build_block("quote","compound",!1,e,i("Reader").$new(ti),r),$(ta)&&(tl=null==(s=c(o=T.$apply_subs(ta).$split(", ",2)))[0]?E:s[0],t$=null==s[1]?E:s[1],$(tl)&&r["$[]="]("attribution",tl),$(t$)&&r["$[]="]("citetitle",t$))}else if(_(B,'"')&&$(b(ti.$size(),1))&&$(ti["$[]"](-1)["$start_with?"]("-- "))&&$(ti["$[]"](-2)["$end_with?"]('"'))){for(ti["$[]="](0,O.$slice(1,O.$length())),ta=(ta=ti.$pop()).$slice(3,ta.$length());$(ti["$[]"](-1)["$empty?"]());)ti.$pop();ti["$<<"](ti.$pop().$chop()),r["$[]="]("style","quote"),tl=null==(s=c(o=(T=i("Block").$new(e,"quote",u(["content_model","source","attributes"],{content_model:"simple",source:ti,attributes:r}))).$apply_subs(ta).$split(", ",2)))[0]?E:s[0],t$=null==s[1]?E:s[1],$(tl)&&r["$[]="]("attribution",tl),$(t$)&&r["$[]="]("citetitle",t$)}else $(D)&&_(I,"normal")&&this["$adjust_indentation!"](ti),T=i("Block").$new(e,"paragraph",u(["content_model","source","attributes"],{content_model:"simple",source:ti,attributes:r}));this.$catalog_inline_anchors(ti.$join(i("LF")),T,k,t)}break}if(!$(T))switch(z){case"listing":case"source":(_(z,"source")||d(r["$[]"](1))&&$(tu=$(W=r["$[]"](2))?W:R["$[]"]("source-language")))&&($(tu)?(r["$[]="]("style","source"),r["$[]="]("language",tu),i("AttributeList").$rekey(r,[E,E,"linenums"])):(i("AttributeList").$rekey(r,[E,"language","linenums"]),!$(r["$key?"]("language"))&&$(R["$key?"]("source-language"))&&r["$[]="]("language",R["$[]"]("source-language"))),!$(r["$key?"]("linenums"))&&($(r["$[]"]("linenums-option"))||$(R["$[]"]("source-linenums-option")))&&r["$[]="]("linenums",""),!$(r["$key?"]("indent"))&&$(R["$key?"]("source-indent"))&&r["$[]="]("indent",R["$[]"]("source-indent"))),T=this.$build_block("listing","verbatim",N,e,t,r);break;case"fenced_code":r["$[]="]("style","source"),$(b(j=O.$length(),3))&&($(tc=(tu=O.$slice(3,j)).$index(","))?$(b(tc,0))?(tu=tu.$slice(0,tc).$strip(),$(g(tc,x(j,4)))&&r["$[]="]("linenums","")):$(b(j,4))&&r["$[]="]("linenums",""):tu=tu.$lstrip()),$(tu["$nil_or_empty?"]())?$(R["$key?"]("source-language"))&&r["$[]="]("language",R["$[]"]("source-language")):r["$[]="]("language",tu),!$(r["$key?"]("linenums"))&&($(r["$[]"]("linenums-option"))||$(R["$[]"]("source-linenums-option")))&&r["$[]="]("linenums",""),!$(r["$key?"]("indent"))&&$(R["$key?"]("source-indent"))&&r["$[]="]("indent",R["$[]"]("source-indent")),N=N.$slice(0,3),T=this.$build_block("listing","verbatim",N,e,t,r);break;case"table":th=t.$cursor(),t_=i("Reader").$new(t.$read_lines_until(u(["terminator","skip_line_comments","context","cursor"],{terminator:N,skip_line_comments:!0,context:"table",cursor:"at_mark"})),th),!$(N["$start_with?"]("|","!"))&&($(W=r["$[]"]("format"))||r["$[]="]("format",$(N["$start_with?"](","))?"csv":"dsv")),T=this.$parse_table(t_,e,r);break;case"sidebar":T=this.$build_block(z,"compound",N,e,t,r);break;case"admonition":r["$[]="]("name",to=I.$downcase()),r["$[]="]("textlabel",$(W=r.$delete("caption"))?W:R["$[]"](""+to+"-caption")),T=this.$build_block(z,"compound",N,e,t,r);break;case"open":case"abstract":case"partintro":T=this.$build_block("open","compound",N,e,t,r);break;case"literal":T=this.$build_block(z,"verbatim",N,e,t,r);break;case"example":$(r["$[]"]("collapsible-option"))&&r["$[]="]("caption",""),T=this.$build_block(z,"compound",N,e,t,r);break;case"quote":case"verse":i("AttributeList").$rekey(r,[E,"attribution","citetitle"]),T=this.$build_block(z,_(z,"verse")?"verbatim":"compound",N,e,t,r);break;case"stem":case"latexmath":case"asciimath":_(z,"stem")&&r["$[]="]("style",i("STEM_TYPE_ALIASES")["$[]"]($(W=r["$[]"](2))?W:R["$[]"]("stem"))),T=this.$build_block("stem","raw",N,e,t,r);break;case"pass":T=this.$build_block(z,"raw",N,e,t,r);break;case"comment":return this.$build_block(z,"skip",N,e,t,r),r.$clear(),E;default:if($(S)&&$(V=A["$registered_for_block?"](z,F))){if(_(td=(Q=V.$config())["$[]"]("content_model"),"skip")||($((tp=$(W=Q["$[]"]("positional_attrs"))?W:Q["$[]"]("pos_attrs"))["$nil_or_empty?"]())||i("AttributeList").$rekey(r,m([E],tp)),$(tt=Q["$[]"]("default_attrs"))&&l(tt,"each",[],function(t,e){var n;return(null==t&&(t=E),null==e&&(e=E),$(W=r["$[]"](t)))?W:(l(r,"[]=",n=[t,e]),n[n.length-1])}),r["$[]="]("cloaked-context",F)),!$(T=this.$build_block(z,td,N,e,t,r,u(["extension"],{extension:V}))))return r.$clear(),E}else this.$raise("Unsupported block type "+z+" at "+t.$cursor())}return $(k.$sourcemap())&&T["$source_location="](t.$cursor_at_mark()),$(r["$[]"]("title"))&&(T["$title="](X=r.$delete("title")),$(i("CAPTION_ATTRIBUTE_NAMES")["$[]"](T.$context()))&&T.$assign_caption(r.$delete("caption"))),T["$style="](r["$[]"]("style")),$(tf=$(w=T.$id())?w:(l(T,"id=",s=[r["$[]"]("id")]),s[s.length-1]))&&($($(X)?X["$include?"](i("ATTR_REF_HEAD")):T["$title?"]())&&T.$title(),$(k.$register("refs",[tf,T]))||this.$logger().$warn(this.$message_with_context("id assigned to block already in use: "+tf,u(["source_location"],{source_location:t.$cursor_at_mark()})))),$(r["$empty?"]())||T.$update_attributes(r),T.$commit_subs(),$(T["$sub?"]("callouts"))&&!$(this.$catalog_callouts(T.$source(),k))&&T.$remove_sub("callouts"),T},-3),h(r,"$read_paragraph_lines",function(t,e,r){return null==r&&(r=u([],{})),r["$[]="]("break_on_blank_lines",!0),r["$[]="]("break_on_list_continuation",!0),r["$[]="]("preserve_last_line",!0),l(t,"read_lines_until",[r],($(e)?$(i("Compliance").$block_terminates_paragraph())?i("StartOfBlockOrListProc"):i("StartOfListProc"):$(i("Compliance").$block_terminates_paragraph())?i("StartOfBlockProc"):i("NoOp")).$to_proc())},-3),h(r,"$is_delimited_block?",function(t,e){var r,n=E,s=E,o=E,a=E,l=E;if(null==e&&(e=E),!($(b(n=t.$length(),1))&&$(i("DELIMITED_BLOCK_HEADS")["$[]"](t.$slice(0,2)))))return E;if(_(n,2))s=t,o=2;else if($(g(n,5))?(s=t,o=n):s=t.$slice(0,o=4),$(i("Compliance").$markdown_syntax())&&$(s["$start_with?"]("`"))){if(_(o,4)){if(_(s,"````")||f(s=s.$chop(),"```"))return E;t=s,n=o=3}else if(f(s,"```"))return E}else if(_(o,3))return E;return(a=null==(r=c(i("DELIMITED_BLOCKS")["$[]"](s)))[0]?E:r[0],l=null==r[1]?E:r[1],$(a)&&(_(n,o)||$(this["$uniform?"](t.$slice(1,n),i("DELIMITED_BLOCK_TAILS")["$[]"](s),x(n,1)))))?!$(e)||i("BlockMatchData").$new(a,l,s,t):E},-2),h(r,"$build_block",function(t,e,r,n,s,o,a){var l,c=E,h=E,p=E,m=E,g=E,v=E,x=E,k=E,w=E,A=E,S=E;switch(null==a&&(a=u([],{})),e){case"skip":c=(l=[!0,"simple"])[0],h=l[1];break;case"raw":c=(l=[!1,"simple"])[0],h=l[1];break;default:c=(l=[!1,e])[0],h=l[1]}switch($(r["$nil?"]())?(_(h,"verbatim")?p=s.$read_lines_until(u(["break_on_blank_lines","break_on_list_continuation"],{break_on_blank_lines:!0,break_on_list_continuation:!0})):(_(e,"compound")&&(e="simple"),p=this.$read_paragraph_lines(s,!1,u(["skip_line_comments","skip_processing"],{skip_line_comments:!0,skip_processing:c}))),m=E):f(h,"compound")?(p=s.$read_lines_until(u(["terminator","skip_processing","context","cursor"],{terminator:r,skip_processing:c,context:t,cursor:"at_mark"})),m=E):_(r,!1)?(p=E,m=s):(p=E,g=s.$cursor(),m=i("Reader").$new(s.$read_lines_until(u(["terminator","skip_processing","context","cursor"],{terminator:r,skip_processing:c,context:t,cursor:"at_mark"})),g)),e){case"verbatim":v=($(x=o["$[]"]("tabsize"))?x:n.$document().$attributes()["$[]"]("tabsize")).$to_i(),$(k=o["$[]"]("indent"))?this["$adjust_indentation!"](p,k.$to_i(),v):$(b(v,0))&&this["$adjust_indentation!"](p,-1,v);break;case"skip":return E}if($(w=a["$[]"]("extension"))){if(o.$delete("style"),!($(A=w.$process_method()["$[]"](n,$(S=m)?S:i("Reader").$new(p),o.$merge()))&&f(A,n)))return E;o.$replace(A.$attributes()),_(A.$content_model(),"compound")&&y(i("Block"),A)&&d((p=A.$lines())["$empty?"]())&&(e="compound",m=i("Reader").$new(p))}else A=i("Block").$new(n,t,u(["content_model","source","attributes"],{content_model:e,source:p,attributes:o}));return _(e,"compound")&&this.$parse_blocks(m,A),A},-7),h(r,"$parse_blocks",function(t,e,r){var n=E,i=E,s=E;if(null==r&&(r=E),$(r))for(;$($(n=$(i=s=this.$next_block(t,e,r.$merge()))?e.$blocks()["$<<"](s):i)?n:t["$has_more_lines?"]()););else for(;$($(n=$(i=s=this.$next_block(t,e))?e.$blocks()["$<<"](s):i)?n:t["$has_more_lines?"]()););return E},-3),h(r,"$parse_list",function(t,e,r,n){var s,o=E,a=E,l=E,u=E;for(null==p["~"]&&(p["~"]=E),o=i("List").$new(r,e),a=i("ListRxMap")["$[]"](e);$($(l=t["$has_more_lines?"]())?a["$=~"](t.$peek_line()):l);)if($(u=this.$parse_list_item(t,o,p["~"],(s=p["~"])===E?E:s["$[]"](1),n))&&o.$items()["$<<"](u),$(l=t.$skip_blank_lines()));else break;return o}),h(r,"$catalog_callouts",function(t,e){var r=E,n=E;return r=!1,n=0,$(t["$include?"]("<"))&&l(t,"scan",[i("CalloutScanRx")],function(){var t;return $(((t=p["~"])===E?E:t["$[]"](0))["$start_with?"]("\\"))||e.$callouts().$register(_((t=p["~"])===E?E:t["$[]"](2),".")?(n=m(n,1)).$to_s():(t=p["~"])===E?E:t["$[]"](2)),r=!0}),r}),h(r,"$catalog_inline_anchor",function(t,e,r,n,s){return null==s&&(s=r.$document()),$(e)&&$(e["$include?"](i("ATTR_REF_HEAD")))&&(e=s.$sub_attributes(e)),$(s.$register("refs",[t,i("Inline").$new(r,"anchor",e,u(["type","id"],{type:"ref",id:t}))]))||(y(i("Reader"),n)&&(n=n.$cursor()),this.$logger().$warn(this.$message_with_context("id assigned to anchor already in use: "+t,u(["source_location"],{source_location:n})))),E},-5),h(r,"$catalog_inline_anchors",function(t,e,r,n){return($(t["$include?"]("[["))||$(t["$include?"]("or:")))&&l(t,"scan",[i("InlineAnchorScanRx")],function t(){var s,o=null==t.$$s?this:t.$$s,a=E,l=E,c=E,h=E;if($(a=(s=p["~"])===E?E:s["$[]"](1))){if($(l=(s=p["~"])===E?E:s["$[]"](2))&&$(l["$include?"](i("ATTR_REF_HEAD")))&&$((l=r.$sub_attributes(l))["$empty?"]()))return E}else a=(s=p["~"])===E?E:s["$[]"](3),$(l=(s=p["~"])===E?E:s["$[]"](4))&&($(l["$include?"]("]"))?$((l=l.$gsub("\\]","]"))["$include?"](i("ATTR_REF_HEAD")))&&(l=r.$sub_attributes(l)):$(l["$include?"](i("ATTR_REF_HEAD")))&&$((l=r.$sub_attributes(l))["$empty?"]())&&(l=E));return $(r.$register("refs",[a,i("Inline").$new(e,"anchor",l,u(["type","id"],{type:"ref",id:a}))]))?E:(c=n.$cursor_at_mark(),$(b(h=m(((s=p["~"])===E?E:s.$pre_match()).$count(i("LF")),$(((s=p["~"])===E?E:s["$[]"](0))["$start_with?"](i("LF")))?1:0),0))&&(c=c.$dup()).$advance(h),o.$logger().$warn(o.$message_with_context("id assigned to anchor already in use: "+a,u(["source_location"],{source_location:c}))))},{$$s:this}),E}),h(r,"$catalog_inline_biblio_anchor",function(t,e,r,n){var s=E;return $(r.$document().$register("refs",[t,i("Inline").$new(r,"anchor",$(s=e)?"["+e+"]":s,u(["type","id"],{type:"bibref",id:t}))]))||this.$logger().$warn(this.$message_with_context("id assigned to bibliography anchor already in use: "+t,u(["source_location"],{source_location:n.$cursor()}))),E}),h(r,"$parse_description_list",function(t,e,r){var n=E,s=E,o=E,a=E,l=E;for(null==p["~"]&&(p["~"]=E),n=i("List").$new(r,"dlist"),s=i("DescriptionListSiblingRx")["$[]"](e["$[]"](2)),n.$items()["$<<"](o=this.$parse_list_item(t,n,e,s));$($(a=t["$has_more_lines?"]())?s["$=~"](t.$peek_line()):a);)l=this.$parse_list_item(t,n,p["~"],s),$(o["$[]"](1))?n.$items()["$<<"](o=l):(o["$[]"](0)["$<<"](l["$[]"](0)["$[]"](0)),o["$[]="](1,l["$[]"](1)));return n}),h(r,"$parse_callout_list",function(t,e,r,n){var s=E,o=E,a=E,l=E,c=E,h=E,d=E,p=E;for(s=i("List").$new(r,"colist"),o=1,a=0;$($(l=e)?l:$(c=e=i("CalloutListRx").$match(t.$peek_line()))?t.$mark():c);)_(h=e["$[]"](1),".")&&(h=(a=m(a,1)).$to_s()),_(h,o.$to_s())||this.$logger().$warn(this.$message_with_context("callout list item index: expected "+o+", got "+h,u(["source_location"],{source_location:t.$cursor_at_mark()}))),$(d=this.$parse_list_item(t,s,e,"<1>"))&&(s.$items()["$<<"](d),$((p=n.$callout_ids(s.$items().$size()))["$empty?"]())?this.$logger().$warn(this.$message_with_context("no callout found for <"+s.$items().$size()+">",u(["source_location"],{source_location:t.$cursor_at_mark()}))):d.$attributes()["$[]="]("coids",p)),o=m(o,1),e=E;return n.$next_list(),s}),h(r,"$parse_list_item",function(t,e,r,n,s){var o,a=E,l=E,h=E,f=E,m=E,g=E,b=E,v=E,y=E,k=E,w=E,A=E,S=E,C=E,O=E,R=E,I=E,T=E,z=E,F=E;if(null==s&&(s=E),_(a=e.$context(),"dlist"))l=!0,h=i("ListItem").$new(e,f=r["$[]"](1)),$(f["$start_with?"]("[["))&&$(i("LeadingInlineAnchorRx")["$=~"](f))&&this.$catalog_inline_anchor((o=p["~"])===E?E:o["$[]"](1),$(m=(o=p["~"])===E?E:o["$[]"](2))?m:((o=p["~"])===E?E:o.$post_match()).$lstrip(),h,t),$(g=r["$[]"](3))&&(b=!0),v=i("ListItem").$new(e,g),$(e.$document().$sourcemap())&&(h["$source_location="](t.$cursor()),$(b)?v["$source_location="](h.$source_location()):y=!0);else switch(b=!0,v=i("ListItem").$new(e,g=r["$[]"](2)),$(e.$document().$sourcemap())&&v["$source_location="](t.$cursor()),a){case"ulist":v["$marker="](n),$(g["$start_with?"]("["))&&($(s)&&_(s,"bibliography")?$(i("InlineBiblioAnchorRx")["$=~"](g))&&this.$catalog_inline_biblio_anchor((o=p["~"])===E?E:o["$[]"](1),(o=p["~"])===E?E:o["$[]"](2),v,t):$(g["$start_with?"]("[["))?$(i("LeadingInlineAnchorRx")["$=~"](g))&&this.$catalog_inline_anchor((o=p["~"])===E?E:o["$[]"](1),(o=p["~"])===E?E:o["$[]"](2),v,t):$(g["$start_with?"]("[ ] ","[x] ","[*] "))&&(e.$set_option("checklist"),v.$attributes()["$[]="]("checkbox",""),$(g["$start_with?"]("[ "))||v.$attributes()["$[]="]("checked",""),v["$text="](g.$slice(4,g.$length()))));break;case"olist":n=null==(o=c(this.$resolve_ordered_list_marker(n,k=e.$items().$size(),!0,t)))[0]?E:o[0],w=null==o[1]?E:o[1],v["$marker="](n),_(k,0)&&d(s)&&e["$style="]($(A=w)?A:($(S=i("ORDERED_LIST_STYLES")["$[]"](x(n.$length(),1)))?S:"arabic").$to_s()),$(g["$start_with?"]("[["))&&$(i("LeadingInlineAnchorRx")["$=~"](g))&&this.$catalog_inline_anchor((o=p["~"])===E?E:o["$[]"](1),(o=p["~"])===E?E:o["$[]"](2),v,t);break;default:v["$marker="](n),$(g["$start_with?"]("[["))&&$(i("LeadingInlineAnchorRx")["$=~"](g))&&this.$catalog_inline_anchor((o=p["~"])===E?E:o["$[]"](1),(o=p["~"])===E?E:o["$[]"](2),v,t)}if(t.$shift(),C=t.$cursor(),$((O=i("Reader").$new(this.$read_lines_for_list_item(t,a,n,b),C))["$has_more_lines?"]())){for($(y)&&v["$source_location="](C),R=O.$skip_line_comments(),!$(I=O.$peek_line())||($(R["$empty?"]())||O.$unshift_lines(R),$(I["$empty?"]())||(T=!0,$(l)||(b=E))),$(z=this.$next_block(O,v,u([],{}),u(["text_only","list_type"],{text_only:!$(b)||E,list_type:a})))&&v.$blocks()["$<<"](z);$(O["$has_more_lines?"]());)$(z=this.$next_block(O,v,u([],{}),u(["list_type"],{list_type:a})))&&v.$blocks()["$<<"](z);$(T)&&$(F=v.$blocks()["$[]"](0))&&_(F.$context(),"paragraph")&&v.$fold_first()}return $(l)?[[h],$(v["$text?"]())||$(v["$blocks?"]())?v:E]:v},-5),h(r,"$read_lines_for_list_item",function(t,e,r,n){var s,o=E,a=E,c=E,h=E,m=E,g=E,b=E,v=E,y=E,x=E,k=E,w=E,A=E,S=E,C=E;for(null==r&&(r=E),null==n&&(n=!0),o=[],a="inactive",c=!1,h=E,m=e["$=="]("dlist");$(t["$has_more_lines?"]())&&(g=t.$read_line(),!$(this["$is_sibling_list_item?"](g,e,r)));){if(_(b=$(o["$empty?"]())?E:o["$[]"](-1),i("LIST_CONTINUATION"))&&(_(a,"inactive")&&(a="active",n=!0,$(c)||o["$[]="](-1,"")),_(g,i("LIST_CONTINUATION")))){f(a,"frozen")&&(a="frozen",o["$<<"](g)),g=E;continue}if($(v=this["$is_delimited_block?"](g,!0))){if(!_(a,"active"))break;o["$<<"](g),o.$concat(t.$read_lines_until(u(["terminator","read_last_line","context"],{terminator:v.$terminator(),read_last_line:!0,context:E}))),a="inactive"}else if($(m)&&f(a,"active")&&$(g["$start_with?"]("["))&&$(i("BlockAttributeLineRx")["$match?"](g))){for(y=[g];$(x=t.$peek_line());){if($(this["$is_delimited_block?"](x)))k=!0;else if($(x["$empty?"]())||$(x["$start_with?"]("["))&&$(i("BlockAttributeLineRx")["$match?"](x))){y["$<<"](t.$read_line());continue}else $(i("AnyListRx")["$match?"](x))&&d(this["$is_sibling_list_item?"](x,e,r))?o.$concat(y):k=!0;break}if($(k)){t.$unshift_lines(y);break}}else if(_(a,"active")&&d(g["$empty?"]()))$(i("LiteralParagraphRx")["$match?"](g))?(t.$unshift_line(g),$(m)?o.$concat(l(t,"read_lines_until",[u(["preserve_last_line","break_on_blank_lines","break_on_list_continuation"],{preserve_last_line:!0,break_on_blank_lines:!0,break_on_list_continuation:!0})],function t(n){var i=null==t.$$s?this:t.$$s;return null==n&&(n=E),i["$is_sibling_list_item?"](n,e,r)},{$$s:this})):o.$concat(t.$read_lines_until(u(["preserve_last_line","break_on_blank_lines","break_on_list_continuation"],{preserve_last_line:!0,break_on_blank_lines:!0,break_on_list_continuation:!0}))),a="inactive"):_(w=g.$chr(),".")&&$(i("BlockTitleRx")["$match?"](g))||_(w,"[")&&$(i("BlockAttributeLineRx")["$match?"](g))||_(w,":")&&$(i("AttributeEntryRx")["$match?"](g))?o["$<<"](g):($(A=l($(c)?["dlist"]:i("NESTABLE_LIST_CONTEXTS"),"find",[],function(t){return null==t&&(t=E),i("ListRxMap")["$[]"](t)["$match?"](g)}))&&(c=!0,_(A,"dlist")&&$(((s=p["~"])===E?E:s["$[]"](3))["$nil_or_empty?"]())&&(n=!1)),o["$<<"](g),a="inactive");else if($(b)&&$(b["$empty?"]())){if($(g["$empty?"]())&&(!$(g=$(S=t.$skip_blank_lines())?t.$read_line():S)||$(this["$is_sibling_list_item?"](g,e,r))))break;if(_(g,i("LIST_CONTINUATION")))h=o.$size(),o["$<<"](g);else if($(n)){if($(this["$is_sibling_list_item?"](g,e,r)))break;if($(A=l(i("NESTABLE_LIST_CONTEXTS"),"find",[],function(t){return null==t&&(t=E),i("ListRxMap")["$[]"](t)["$=~"](g)})))o["$<<"](g),c=!0,_(A,"dlist")&&$(((s=p["~"])===E?E:s["$[]"](3))["$nil_or_empty?"]())&&(n=!1);else if($(i("LiteralParagraphRx")["$match?"](g)))t.$unshift_line(g),$(m)?o.$concat(l(t,"read_lines_until",[u(["preserve_last_line","break_on_blank_lines","break_on_list_continuation"],{preserve_last_line:!0,break_on_blank_lines:!0,break_on_list_continuation:!0})],function t(n){var i=null==t.$$s?this:t.$$s;return null==n&&(n=E),i["$is_sibling_list_item?"](n,e,r)},{$$s:this})):o.$concat(t.$read_lines_until(u(["preserve_last_line","break_on_blank_lines","break_on_list_continuation"],{preserve_last_line:!0,break_on_blank_lines:!0,break_on_list_continuation:!0})));else break}else $(c)||o.$pop(),o["$<<"](g),n=!0}else $(g["$empty?"]())||(n=!0),$(A=l($(c)?["dlist"]:i("NESTABLE_LIST_CONTEXTS"),"find",[],function(t){return null==t&&(t=E),i("ListRxMap")["$[]"](t)["$=~"](g)}))&&(c=!0,_(A,"dlist")&&$(((s=p["~"])===E?E:s["$[]"](3))["$nil_or_empty?"]())&&(n=!1)),o["$<<"](g);g=E}for($(g)&&t.$unshift_line(g),$(h)&&o["$[]="](h,"");!$(o["$empty?"]());)if($((C=o["$[]"](-1))["$empty?"]()))o.$pop();else{_(C,i("LIST_CONTINUATION"))&&o.$pop();break}return o},-3),h(r,"$initialize_section",function(t,e,r){var n,s,o=E,a=E,h=E,p=E,f=E,m=E,g=E,v=E,y=E,k=E,w=E,A=E,S=E,C=E,O=E,R=E,I=E;return null==r&&(r=u([],{})),a=(h=(o=e.$document()).$doctype())["$=="]("book"),$(o.$sourcemap())&&(p=t.$cursor()),f=r["$[]"](1),m=null==(n=c(s=this.$parse_section_title(t,o,r["$[]"]("id"))))[0]?E:n[0],g=null==n[1]?E:n[1],v=null==n[2]?E:n[2],y=null==n[3]?E:n[3],k=null==n[4]?E:n[4],$(f)?$(a)&&_(f,"abstract")?(w=(n=["chapter",1])[0],y=n[1]):$(f["$start_with?"]("sect"))&&$(i("SectionLevelStyleRx")["$match?"](f))?w="section":(w=(n=[f,!0])[0],A=n[1],_(y,0)&&(y=1),S=w["$=="]("appendix")):$(a)?w=_(y,0)?"part":$(b(y,1))?"section":"chapter":_(h,"manpage")&&_(v.$casecmp("synopsis"),0)?(w=(n=["synopsis",!0])[0],A=n[1]):w="section",$(g)&&r["$[]="]("reftext",g),l(C=i("Section").$new(e,y),"id=",s=[(n=[m,v,w,p])[0]]),s[s.length-1],l(C,"title=",s=[n[1]]),s[s.length-1],l(C,"sectname=",s=[n[2]]),s[s.length-1],l(C,"source_location=",s=[n[3]]),s[s.length-1],$(A)?(C["$special="](!0),$(S)?C["$numbered="](!0):_(o.$attributes()["$[]"]("sectnums"),"all")&&C["$numbered="](!($(a)&&_(y,1))||"chapter")):$(o.$attributes()["$[]"]("sectnums"))&&$(b(y,0))?C["$numbered="](!$(C.$special())||$(O=e.$numbered())||O):$(a)&&_(y,0)&&$(o.$attributes()["$[]"]("partnums"))&&C["$numbered="](!0),$(R=$(O=C.$id())?O:(n=[$(o.$attributes()["$key?"]("sectids"))?I=i("Section").$generate_id(C.$title(),o):E],l(C,"id=",n),n[n.length-1]))&&($(I)||d(v["$include?"](i("ATTR_REF_HEAD")))||C.$title(),$(o.$register("refs",[R,C]))||this.$logger().$warn(this.$message_with_context("id assigned to section already in use: "+R,u(["source_location"],{source_location:t.$cursor_at_line(x(t.$lineno(),$(k)?1:2))})))),C.$update_attributes(r),t.$skip_blank_lines(),C},-3),h(r,"$is_next_line_section?",function(t,e){var r=E,n=E,s=E;return $(r=e["$[]"](1))&&(_(r,"discrete")||_(r,"float"))?E:$(i("Compliance").$underline_style_section_titles())?(n=t.$peek_lines(2,$(s=r)?r["$=="]("comment"):s),this["$is_section_title?"]($(s=n["$[]"](0))?s:"",n["$[]"](1))):this["$atx_section_title?"]($(s=t.$peek_line())?s:"")}),h(r,"$is_next_line_doctitle?",function(t,e,r){var n=E,i=E;return $(r)?$(n=i=this["$is_next_line_section?"](t,e))?m(i,r.$to_i())["$=="](0):n:this["$is_next_line_section?"](t,e)["$=="](0)}),h(r,"$is_section_title?",function(t,e){var r=E;return(null==e&&(e=E),$(r=this["$atx_section_title?"](t)))?r:$(e["$nil_or_empty?"]())?E:this["$setext_section_title?"](t,e)},-2),h(r,"$atx_section_title?",function(t){var e,r=E;return $($(i("Compliance").$markdown_syntax())?$(r=t["$start_with?"]("=","#"))?i("ExtAtxSectionTitleRx")["$=~"](t):r:$(r=t["$start_with?"]("="))?i("AtxSectionTitleRx")["$=~"](t):r)?x(((e=p["~"])===E?E:e["$[]"](1)).$length(),1):E}),h(r,"$setext_section_title?",function(t,e){var r=E,n=E,s=E;return $(n=i("SETEXT_SECTION_LEVELS")["$[]"](s=e.$chr()))&&$(this["$uniform?"](e,s,r=e.$length()))&&$(i("SetextSectionTitleRx")["$match?"](t))&&$(g(x(t.$length(),r).$abs(),2))?n:E}),h(r,"$parse_section_title",function(t,e,r){var n,s,o=E,a=E,l=E,u=E,c=E,h=E,_=E,f=E,b=E;return null==r&&(r=E),o=E,a=t.$read_line(),$($(i("Compliance").$markdown_syntax())?$(l=a["$start_with?"]("=","#"))?i("ExtAtxSectionTitleRx")["$=~"](a):l:$(l=a["$start_with?"]("="))?i("AtxSectionTitleRx")["$=~"](a):l)?(u=(n=[x(((s=p["~"])===E?E:s["$[]"](1)).$length(),1),(s=p["~"])===E?E:s["$[]"](2),!0])[0],c=n[1],h=n[2],!$(r)&&$(c["$end_with?"]("]]"))&&$(i("InlineSectionAnchorRx")["$=~"](c))&&d((n=p["~"])===E?E:n["$[]"](1))&&(c=(n=[c.$slice(0,x(c.$length(),((s=p["~"])===E?E:s["$[]"](0)).$length())),(s=p["~"])===E?E:s["$[]"](2),(s=p["~"])===E?E:s["$[]"](3)])[0],r=n[1],o=n[2])):$(i("Compliance").$underline_style_section_titles())&&$(b=t.$peek_line(!0))&&$(u=i("SETEXT_SECTION_LEVELS")["$[]"](f=b.$chr()))&&$(this["$uniform?"](b,f,_=b.$length()))&&$(c=$(l=i("SetextSectionTitleRx")["$=~"](a))?(n=p["~"])===E?E:n["$[]"](1):l)&&$(g(x(a.$length(),_).$abs(),2))?(h=!1,!$(r)&&$(c["$end_with?"]("]]"))&&$(i("InlineSectionAnchorRx")["$=~"](c))&&d((n=p["~"])===E?E:n["$[]"](1))&&(c=(n=[c.$slice(0,x(c.$length(),((s=p["~"])===E?E:s["$[]"](0)).$length())),(s=p["~"])===E?E:s["$[]"](2),(s=p["~"])===E?E:s["$[]"](3)])[0],r=n[1],o=n[2]),t.$shift()):this.$raise("Unrecognized section at "+t.$cursor_at_prev_line()),$(e["$attr?"]("leveloffset"))&&$(g(u=m(u,e.$attr("leveloffset").$to_i()),0))&&(u=0),[r,o,c,u,h]},-3),h(r,"$parse_header_metadata",function(t,e,r){var n,s=E,o=E,a=E,c=E,h=E,p=E,g=E,v=E,y=E,x=E,k=E,w=E,A=E,S=E,C=E,O=E,R=E,I=E,T=E;if(null==e&&(e=E),null==r&&(r=!0),s=$(o=e)?e.$attributes():o,this.$process_attribute_entries(t,e),$(t["$has_more_lines?"]())&&d(t["$next_line_empty?"]())?(a=(c=this.$process_authors(t.$read_line())).$delete("authorcount"),$(e)&&$(b((l(s,"[]=",n=["authorcount",a]),n[n.length-1]),0))&&(l(c,"each",[],function(t,r){var n;return(null==t&&(t=E),null==r&&(r=E),$(s["$key?"](t)))?E:(n=[t,e.$apply_header_subs(r)],l(s,"[]=",n),n[n.length-1])}),h=s["$[]"]("author"),p=s["$[]"]("authorinitials"),g=s["$[]"]("authors")),c["$[]="]("authorcount",a),this.$process_attribute_entries(t,e),$(t["$has_more_lines?"]())&&d(t["$next_line_empty?"]())&&(v=t.$read_line(),$(y=i("RevisionInfoLineRx").$match(v))?(x=u([],{}),$(y["$[]"](1))&&x["$[]="]("revnumber",y["$[]"](1).$rstrip()),$((k=y["$[]"](2).$strip())["$empty?"]())||(d(y["$[]"](1))&&$(k["$start_with?"]("v"))?x["$[]="]("revnumber",k.$slice(1,k.$length())):x["$[]="]("revdate",k)),$(y["$[]"](3))&&x["$[]="]("revremark",y["$[]"](3).$rstrip()),$(e)&&d(x["$empty?"]())&&l(x,"each",[],function(t,r){var n;return(null==t&&(t=E),null==r&&(r=E),$(s["$key?"](t)))?E:(n=[t,e.$apply_header_subs(r)],l(s,"[]=",n),n[n.length-1])})):t.$unshift_line(v)),this.$process_attribute_entries(t,e),t.$skip_blank_lines()):c=u([],{}),$(e)){if($(s["$key?"]("author"))&&f(w=s["$[]"]("author"),h))A=this.$process_authors(w,!0,!1),f(s["$[]"]("authorinitials"),p)&&A.$delete("authorinitials");else if($(s["$key?"]("authors"))&&f(w=s["$[]"]("authors"),g))A=this.$process_authors(w,!0);else{for(S=(n=[[],1,"author_1",!1,!1])[0],C=n[1],O=n[2],R=n[3],I=n[4];$(s["$key?"](O));)_(T=s["$[]"](O),c["$[]"](O))?(S["$<<"](E),I=!0):(S["$<<"](T),R=!0),O="author_"+(C=m(C,1));$(R)?($(I)&&l(S,"each_with_index",[],function(t,e){var r,n=E;return(null==t&&(t=E),null==e&&(e=E),$(t))?E:(r=[e,l([c["$[]"]("firstname_"+(n=m(e,1))),c["$[]"]("middlename_"+n),c["$[]"]("lastname_"+n)].$compact(),"map",[],function(t){return null==t&&(t=E),t.$tr(" ","_")}).$join(" ")],l(S,"[]=",r),r[r.length-1])}),A=this.$process_authors(S,!0,!1)):A=u(["authorcount"],{authorcount:0})}_(A["$[]"]("authorcount"),0)?$(a)?A=E:s["$[]="]("authorcount",0):(s.$update(A),d(s["$key?"]("email"))&&$(s["$key?"]("email_1"))&&s["$[]="]("email",s["$[]"]("email_1")))}return $(r)?c.$merge(x.$to_h(),A.$to_h()):E},-2),h(r,"$process_authors",function(t,e,r){var n=E,s=E;return null==e&&(e=!1),null==r&&(r=!0),n=u([],{}),s=0,l($(r)&&$(t["$include?"](";"))?t.$split(i("AuthorDelimiterRx")):[].concat(v(t)),"each",[],function(t){var r,o=E,a=E,c=E,h=E,p=E,f=E,g=E;return(null==t&&(t=E),$(t["$empty?"]()))?E:((o=u([],{}),_(s=m(s,1),1)?l(i("AuthorKeys"),"each",[],function(t){var e;return null==t&&(t=E),e=[t.$to_sym(),t],l(o,"[]=",e),e[e.length-1]}):l(i("AuthorKeys"),"each",[],function(t){var e;return null==t&&(t=E),e=[t.$to_sym(),""+t+"_"+s],l(o,"[]=",e),e[e.length-1]}),$(e)?($(t["$include?"]("<"))&&(n["$[]="](o["$[]"]("author"),t.$tr("_"," ")),t=t.$gsub(i("XmlSanitizeRx"),"")),_((a=t.$split(E,3)).$size(),3)&&a["$<<"](a.$pop().$squeeze(" "))):$(c=i("AuthorInfoLineRx").$match(t))&&(a=c.$to_a()).$shift(),$(a)?(r=[o["$[]"]("firstname"),p=a["$[]"](0).$tr("_"," ")],l(n,"[]=",r),h=r[r.length-1],n["$[]="](o["$[]"]("authorinitials"),p.$chr()),$(a["$[]"](1))&&($(a["$[]"](2))?(n["$[]="](o["$[]"]("middlename"),f=a["$[]"](1).$tr("_"," ")),n["$[]="](o["$[]"]("lastname"),g=a["$[]"](2).$tr("_"," ")),h=m(m(m(m(p," "),f)," "),g),n["$[]="](o["$[]"]("authorinitials"),""+p.$chr()+f.$chr()+g.$chr())):(n["$[]="](o["$[]"]("lastname"),g=a["$[]"](1).$tr("_"," ")),h=m(m(p," "),g),n["$[]="](o["$[]"]("authorinitials"),""+p.$chr()+g.$chr()))),$(n["$[]"](o["$[]"]("author")))||n["$[]="](o["$[]"]("author"),h),$(e)||d(a["$[]"](3))||n["$[]="](o["$[]"]("email"),a["$[]"](3))):(n["$[]="](o["$[]"]("author"),(r=[o["$[]"]("firstname"),p=t.$squeeze(" ").$strip()],l(n,"[]=",r),r[r.length-1])),n["$[]="](o["$[]"]("authorinitials"),p.$chr())),_(s,1))?r=["authors",n["$[]"](o["$[]"]("author"))]:(_(s,2)&&l(i("AuthorKeys"),"each",[],function(t){var e;return(null==t&&(t=E),$(n["$key?"](t)))?(e=[""+t+"_1",n["$[]"](t)],l(n,"[]=",e),e[e.length-1]):E}),r=["authors",""+n["$[]"]("authors")+", "+n["$[]"](o["$[]"]("author"))]),l(n,"[]=",r),r[r.length-1])}),n["$[]="]("authorcount",s),n},-2),h(r,"$parse_block_metadata_lines",function(t,e,r,n){for(null==r&&(r=u([],{})),null==n&&(n=u([],{}));$(this.$parse_block_metadata_line(t,e,r,n));)if(t.$shift(),$(t.$skip_blank_lines()));else break;return r},-3),h(r,"$parse_block_metadata_line",function(t,e,r,n){var s,o=E,a=E,l=E,c=E,h=E,f=E;if(null==p["~"]&&(p["~"]=E),null==n&&(n=u([],{})),$(a=t.$peek_line())&&$($(n["$[]"]("text_only"))?a["$start_with?"]("[","/"):o=a["$start_with?"]("[",".","/",":"))){if($(a["$start_with?"]("["))){if($(a["$start_with?"]("[["))){if($(a["$end_with?"]("]]"))&&$(i("BlockAnchorRx")["$=~"](a)))return r["$[]="]("id",(s=p["~"])===E?E:s["$[]"](1)),$(l=(s=p["~"])===E?E:s["$[]"](2))&&r["$[]="]("reftext",$(l["$include?"](i("ATTR_REF_HEAD")))?e.$sub_attributes(l):l),!0}else if($(a["$end_with?"]("]"))&&$(i("BlockAttributeListRx")["$=~"](a)))return c=r["$[]"](1),$(e.$parse_attributes((s=p["~"])===E?E:s["$[]"](1),[],u(["sub_input","sub_result","into"],{sub_input:!0,sub_result:!0,into:r}))["$[]"](1))&&r["$[]="](1,$(h=this.$parse_style_attribute(r,t))?h:c),!0}else if($(o)&&$(a["$start_with?"]("."))){if($(i("BlockTitleRx")["$=~"](a)))return r["$[]="]("title",(s=p["~"])===E?E:s["$[]"](1)),!0}else if(d(o)||$(a["$start_with?"]("/"))){if($(a["$start_with?"]("//"))){if(_(a,"//"))return!0;if($(o)&&$(this["$uniform?"](a,"/",f=a.$length()))){if(!_(f,3))return t.$read_lines_until(u(["terminator","skip_first_line","preserve_last_line","skip_processing","context"],{terminator:a,skip_first_line:!0,preserve_last_line:!0,skip_processing:!0,context:"comment"})),!0}else if(!$(a["$start_with?"]("///")))return!0}}else if($(o)&&$(a["$start_with?"](":"))&&$(i("AttributeEntryRx")["$=~"](a)))return this.$process_attribute_entry(t,e,r,p["~"]),!0}return E},-4),h(r,"$process_attribute_entries",function(t,e,r){for(null==r&&(r=E),t.$skip_comment_lines();$(this.$process_attribute_entry(t,e,r));)t.$shift(),t.$skip_comment_lines()},-3),h(r,"$process_attribute_entry",function(t,e,r,n){var s,o=E,a=E,l=E,u=E,c=E,h=E;if(null==r&&(r=E),null==n&&(n=E),!($(n)||$(n=$(t["$has_more_lines?"]())?i("AttributeEntryRx").$match(t.$peek_line()):E)))return E;if($((o=n["$[]"](2))["$nil_or_empty?"]()))o="";else if($(o["$end_with?"](i("LINE_CONTINUATION"),i("LINE_CONTINUATION_LEGACY"))))for(a=(s=[o.$slice(x(o.$length(),2),2),o.$slice(0,x(o.$length(),2)).$rstrip()])[0],o=s[1];$($(l=t.$advance())?(u=$(c=t.$peek_line())?c:"")["$empty?"]()["$!"]():l)&&($(h=(u=u.$lstrip())["$end_with?"](a))&&(u=u.$slice(0,x(u.$length(),2)).$rstrip()),o=""+o+($(o["$end_with?"](i("HARD_LINE_BREAK")))?i("LF"):" ")+u,$(h)););return this.$store_attribute(n["$[]"](1),o,e,r),!0},-3),h(r,"$store_attribute",function(t,e,r,n){var s=E;return null==r&&(r=E),null==n&&(n=E),$(t["$end_with?"]("!"))?(t=t.$chop(),e=E):$(t["$start_with?"]("!"))&&(t=t.$slice(1,t.$length()),e=E),_(t=this.$sanitize_attribute_name(t),"numbered")?t="sectnums":_(t,"hardbreaks")?t="hardbreaks-option":_(t,"showtitle")&&this.$store_attribute("notitle",$(e)?E:"",r,n),$(r)?$(e)?(_(t,"leveloffset")&&($(e["$start_with?"]("+"))?e=m(r.$attr("leveloffset",0).$to_i(),e.$slice(1,e.$length()).$to_i()).$to_s():$(e["$start_with?"]("-"))&&(e=x(r.$attr("leveloffset",0).$to_i(),e.$slice(1,e.$length()).$to_i()).$to_s())),$(s=r.$set_attribute(t,e))&&(e=s,$(n)&&S(i("Document"),"AttributeEntry").$new(t,e).$save_to(n))):$(r.$delete_attribute(t))&&$(n)&&S(i("Document"),"AttributeEntry").$new(t,e).$save_to(n):$(n)&&S(i("Document"),"AttributeEntry").$new(t,e).$save_to(n),[t,e]},-3),h(r,"$resolve_list_marker",function(t,e,r,n,i){switch(null==r&&(r=0),null==n&&(n=!1),null==i&&(i=E),t){case"ulist":return e;case"olist":return this.$resolve_ordered_list_marker(e,r,n,i)["$[]"](0);default:return"<1>"}},-3),h(r,"$resolve_ordered_list_marker",function(t,e,r,n){var s=E,o=E,a=E;if(null==e&&(e=0),null==r&&(r=!1),null==n&&(n=E),$(t["$start_with?"](".")))return[t];switch(s=l(i("ORDERED_LIST_STYLES"),"find",[],function(e){return null==e&&(e=E),i("OrderedListMarkerRxMap")["$[]"](e)["$match?"](t)})){case"arabic":$(r)&&(o=m(e,1),a=t.$to_i()),t="1.";break;case"loweralpha":$(r)&&(o=m("a"["$[]"](0).$ord(),e).$chr(),a=t.$chop()),t="a.";break;case"upperalpha":$(r)&&(o=m("A"["$[]"](0).$ord(),e).$chr(),a=t.$chop()),t="A.";break;case"lowerroman":$(r)&&(o=i("Helpers").$int_to_roman(m(e,1)).$downcase(),a=t.$chop()),t="i)";break;case"upperroman":$(r)&&(o=i("Helpers").$int_to_roman(m(e,1)),a=t.$chop()),t="I)"}return $(r)&&f(o,a)&&this.$logger().$warn(this.$message_with_context("list item index: expected "+o+", got "+a,u(["source_location"],{source_location:n.$cursor()}))),[t,s]},-2),h(r,"$is_sibling_list_item?",function(t,e,r){var n,s=E;return y(S("Regexp"),r)?r["$match?"](t):$(s=i("ListRxMap")["$[]"](e)["$=~"](t))?r["$=="](this.$resolve_list_marker(e,(n=p["~"])===E?E:n["$[]"](1))):s}),h(r,"$parse_table",function(t,e,r){var n,s,o=E,a=E,u=E,h=E,p=E,f=E,g=E,v=E,x=E,k=E,w=E,A=E,C=E,O=E,R=E,I=E,T=E,z=E;for(o=i("Table").$new(e,r),$(r["$key?"]("cols"))&&d((a=this.$parse_colspecs(r["$[]"]("cols")))["$empty?"]())&&(o.$create_columns(a),u=!0),h=$(p=t.$skip_blank_lines())?p:0,$(r["$[]"]("header-option"))?o["$has_header_option="](!0):_(h,0)&&d(r["$[]"]("noheader-option"))&&(o["$has_header_option="]("implicit"),f=!0),v=(n=[(g=S(i("Table"),"ParserContext").$new(t,o,r)).$format(),-1,E])[0],x=n[1],k=n[2];$(w=t.$read_line());){for($(A=b(x=m(x,1),0))&&$(w["$empty?"]())?(w=E,$(k)&&(k=m(k,1))):_(v,"psv")&&($(g["$starts_with_delimiter?"](w))?(w=w.$slice(1,w.$length()),g.$close_open_cell(),$(k)&&(k=E)):(C=null==(n=c(s=this.$parse_cellspec(w,"start",g.$delimiter())))[0]?E:n[0],w=null==n[1]?E:n[1],$(C)?(g.$close_open_cell(C),$(k)&&(k=E)):$(k)&&_(k,x)&&o["$has_header_option="](f=k=E))),!$(A)&&(t.$mark(),$(f)&&($(t["$has_more_lines?"]())&&$(t.$peek_line()["$empty?"]())?k=1:o["$has_header_option="](f=E))),n=!1;n||$(!0);)if(n=!1,$(w)&&$(O=g.$match_delimiter(w))){if(R=(s=[O.$pre_match(),O.$post_match()])[0],I=s[1],y("csv",p=v)){if($(g["$buffer_has_unclosed_quotes?"](R))){if(g.$skip_past_delimiter(R),$((w=I)["$empty?"]()))break;n=!0;continue}g["$buffer="](""+g.$buffer()+R)}else if(y("dsv",p)){if($(R["$end_with?"]("\\"))){if(g.$skip_past_escaped_delimiter(R),$((w=I)["$empty?"]())){g["$buffer="](""+g.$buffer()+i("LF")),g.$keep_cell_open();break}n=!0;continue}g["$buffer="](""+g.$buffer()+R)}else{if($(R["$end_with?"]("\\"))){if(g.$skip_past_escaped_delimiter(R),$((w=I)["$empty?"]())){g["$buffer="](""+g.$buffer()+i("LF")),g.$keep_cell_open();break}n=!0;continue}C=null==(s=c(this.$parse_cellspec(R)))[0]?E:s[0],T=null==s[1]?E:s[1],g.$push_cellspec(C),g["$buffer="](""+g.$buffer()+T)}$((w=I)["$empty?"]())&&(w=E),g.$close_cell()}else{switch(g["$buffer="](""+g.$buffer()+w+i("LF")),v){case"csv":$(g["$buffer_has_unclosed_quotes?"]())?($(k)&&_(x,0)&&o["$has_header_option="](f=k=E),g.$keep_cell_open()):g.$close_cell(!0);break;case"dsv":g.$close_cell(!0);break;default:g.$keep_cell_open()}break}if($(g["$cell_open?"]()))$(t["$has_more_lines?"]())||g.$close_cell(!0);else if($(p=t.$skip_blank_lines()));else break}return _($(p=(z=o.$attributes())["$[]"]("colcount"))?p:(l(z,"[]=",n=["colcount",o.$columns().$size()]),n[n.length-1]),0)||$(u)||o.$assign_column_widths(),$(f)&&o["$has_header_option="](!0),o.$partition_header_footer(r),o}),h(r,"$parse_colspecs",function(t){var e=E;return($(t["$include?"](" "))&&(t=t.$delete(" ")),_(t,t.$to_i().$to_s()))?l(S("Array"),"new",[t.$to_i()],function(){return u(["width"],{width:1})}):(e=[],l($(t["$include?"](","))?t.$split(",",-1):t.$split(";",-1),"each",[],function(t){var r,n=E,s=E,o=E,a=E,h=E;return(null==t&&(t=E),$(t["$empty?"]()))?e["$<<"](u(["width"],{width:1})):$(n=i("ColumnSpecRx").$match(t))?(s=u([],{}),$(n["$[]"](2))&&(o=null==(r=c(n["$[]"](2).$split(".")))[0]?E:r[0],a=null==r[1]?E:r[1],d(o["$nil_or_empty?"]())&&$(i("TableCellHorzAlignments")["$key?"](o))&&s["$[]="]("halign",i("TableCellHorzAlignments")["$[]"](o)),d(a["$nil_or_empty?"]())&&$(i("TableCellVertAlignments")["$key?"](a))&&s["$[]="]("valign",i("TableCellVertAlignments")["$[]"](a))),$(h=n["$[]"](3))?s["$[]="]("width",_(h,"~")?-1:h.$to_i()):s["$[]="]("width",1),$(n["$[]"](4))&&$(i("TableCellStyles")["$key?"](n["$[]"](4)))&&s["$[]="]("style",i("TableCellStyles")["$[]"](n["$[]"](4))),$(n["$[]"](1)))?l(1,"upto",[n["$[]"](1).$to_i()],function(){return e["$<<"](s.$merge())}):e["$<<"](s):E}),e)}),h(r,"$parse_cellspec",function(t,e,r){var n,s=E,o=E,a=E,l=E,h=E,p=E;if(null==e&&(e="end"),null==r&&(r=E),s=(n=[E,""])[0],o=n[1],_(e,"start")){if(!$(t["$include?"](r))||(a=null==(n=c(t.$partition(r)))[0]?E:n[0],null==n[1]||n[1],o=null==n[2]?E:n[2],!$(s=i("CellSpecStartRx").$match(a))))return[E,t];if($(s["$[]"](0)["$empty?"]()))return[u([],{}),o]}else{if(!$(s=i("CellSpecEndRx").$match(t)))return[u([],{}),t];if($(s["$[]"](0).$lstrip()["$empty?"]()))return[u([],{}),t.$rstrip()];o=s.$pre_match()}if(l=u([],{}),$(s["$[]"](1)))switch(h=null==(n=c(s["$[]"](1).$split(".")))[0]?E:n[0],p=null==n[1]?E:n[1],h=$(h["$nil_or_empty?"]())?1:h.$to_i(),p=$(p["$nil_or_empty?"]())?1:p.$to_i(),s["$[]"](2)){case"+":_(h,1)||l["$[]="]("colspan",h),_(p,1)||l["$[]="]("rowspan",p);break;case"*":_(h,1)||l["$[]="]("repeatcol",h)}return $(s["$[]"](3))&&(h=null==(n=c(s["$[]"](3).$split(".")))[0]?E:n[0],p=null==n[1]?E:n[1],d(h["$nil_or_empty?"]())&&$(i("TableCellHorzAlignments")["$key?"](h))&&l["$[]="]("halign",i("TableCellHorzAlignments")["$[]"](h)),d(p["$nil_or_empty?"]())&&$(i("TableCellVertAlignments")["$key?"](p))&&l["$[]="]("valign",i("TableCellVertAlignments")["$[]"](p))),$(s["$[]"](4))&&$(i("TableCellStyles")["$key?"](s["$[]"](4)))&&l["$[]="]("style",i("TableCellStyles")["$[]"](s["$[]"](4))),[l,o]},-2),h(r,"$parse_style_attribute",function(t,e){var r,n=E,s=E,o=E,a=E,c=E,h=E;return(null==e&&(e=E),$(n=t["$[]"](1))&&d(n["$include?"](" "))&&$(i("Compliance").$shorthand_property_syntax())&&(s=E,o="",a=u([],{}),l(n,"each_char",[],function t(r){var n=null==t.$$s?this:t.$$s;switch(null==r&&(r=E),r){case".":return n.$yield_buffered_attribute(a,s,o,e),o="",s="role";case"#":return n.$yield_buffered_attribute(a,s,o,e),o="",s="id";case"%":return n.$yield_buffered_attribute(a,s,o,e),o="",s="option";default:return o=m(o,r)}},{$$s:this}),$(s)))?(this.$yield_buffered_attribute(a,s,o,e),$(c=a["$[]"]("style"))&&t["$[]="]("style",c),$(a["$key?"]("id"))&&t["$[]="]("id",a["$[]"]("id")),$(a["$key?"]("role"))&&t["$[]="]("role",$((h=t["$[]"]("role"))["$nil_or_empty?"]())?a["$[]"]("role").$join(" "):""+h+" "+a["$[]"]("role").$join(" ")),$(a["$key?"]("option"))&&l(a["$[]"]("option"),"each",[],function(e){var r;return null==e&&(e=E),l(t,"[]=",r=[""+e+"-option",""]),r[r.length-1]}),c):(l(t,"[]=",r=["style",n]),r[r.length-1])},-2),h(r,"$yield_buffered_attribute",function(t,e,r,n){var i,s=E;return $(e)?$(r["$empty?"]())?$(n)?this.$logger().$warn(this.$message_with_context("invalid empty "+e+" detected in style attribute",u(["source_location"],{source_location:n.$cursor_at_prev_line()}))):this.$logger().$warn("invalid empty "+e+" detected in style attribute"):_(e,"id")?($(t["$key?"]("id"))&&($(n)?this.$logger().$warn(this.$message_with_context("multiple ids detected in style attribute",u(["source_location"],{source_location:n.$cursor_at_prev_line()}))):this.$logger().$warn("multiple ids detected in style attribute")),t["$[]="](e,r)):($(s=t["$[]"](e))?s:(l(t,"[]=",i=[e,[]]),i[i.length-1]))["$<<"](r):$(r["$empty?"]())||t["$[]="]("style",r),E}),h(r,"$adjust_indentation!",function(t,e,r){var n=E,s=E,o=E;return null==e&&(e=0),null==r&&(r=0),$(t["$empty?"]())||($(b(r,0))&&$(l(t,"any?",[],function(t){return null==t&&(t=E),t["$include?"](i("TAB"))}))&&(n=k(" ",r),l(t,"map!",[],function(t){var e=E,s=E,o=E,a=E,u=E;return(null==t&&(t=E),$(t["$empty?"]())||$((e=t.$index(i("TAB")))["$nil?"]()))?t:_(e,0)&&(s=0,function(){try{var e=w("break");l(t,"each_byte",[],function(t){return null==t&&(t=E),_(t,9)||e.$throw(),s=m(s,1)})}catch(t){if(t===e)return t.$v;throw t}}(),!$((t=""+k(n,s)+t.$slice(s,t.$length()))["$include?"](i("TAB"))))?t:(o=0,a=0,u="",l(t,"each_char",[],function(t){var e=E,s=E;return null==t&&(t=E),_(t,i("TAB"))?_((e=m(a,o))["$%"](r),0)?(o=m(o,x(r,1)),u=m(u,n)):(_(s=x(r,e["$%"](r)),1)||(o=m(o,x(s,1))),u=m(u,k(" ",s))):u=m(u,t),a=m(a,1)}),u)})),$(g(e,0))||(s=E,function(){try{var e=w("break");l(t,"each",[],function(t){var r=E;return(null==t&&(t=E),$(t["$empty?"]()))?E:(_(r=x(t.$length(),t.$lstrip().$length()),0)&&(s=E,e.$throw()),$(s)&&$(g(s,r)))?E:s=r})}catch(t){if(t===e)return t.$v;throw t}}(),_(e,0)?$(s)&&l(t,"map!",[],function(t){return(null==t&&(t=E),$(t["$empty?"]()))?t:t.$slice(s,t.$length())}):(o=k(" ",e),$(s)?l(t,"map!",[],function(t){return(null==t&&(t=E),$(t["$empty?"]()))?t:m(o,t.$slice(s,t.$length()))}):l(t,"map!",[],function(t){return(null==t&&(t=E),$(t["$empty?"]()))?t:m(o,t)})))),E},-2),h(r,"$uniform?",function(t,e,r){return t.$count(e)["$=="](r)}),h(r,"$sanitize_attribute_name",function(t){return t.$gsub(i("InvalidAttributeNameCharsRx"),"").$downcase()})},Opal.modules["asciidoctor/path_resolver"]=function(t){var e,r,n,i,s,o=t.module,a=t.klass,l=t.const_set,$=t.truthy,u=t.hash2,c=t.def,h=t.eqeq,_=t.alias,d=t.rb_plus,p=t.to_ary,f=t.send,m=t.not,g=t.neqeq,b=t.rb_gt,v=t.gvars,y=[],x=t.nil,k=t.$$$;return t.add_stubs("include,attr_accessor,root?,posixify,expand_path,pwd,start_with?,==,match?,absolute_path?,+,length,descends_from?,slice,to_s,relative_path_from,new,include?,tr,partition_path,each,pop,<<,join_path,[],web_root?,unc?,index,split,delete,[]=,join,raise,!,fetch,warn,logger,empty?,nil_or_empty?,chomp,!=,>,size,extract_uri_prefix,end_with?,gsub,private,=~"),n=[r=a((e=[o(y[0],"Asciidoctor")].concat(y))[0],null,"PathResolver")].concat(e),i=t.$r(n),(s=r.$$prototype).file_separator=s._partition_path_web=s._partition_path_sys=s.working_dir=x,r.$include(i("Logging")),l(n[0],"DOT","."),l(n[0],"DOT_DOT",".."),l(n[0],"DOT_SLASH","./"),l(n[0],"SLASH","/"),l(n[0],"BACKSLASH","\\"),l(n[0],"DOUBLE_SLASH","//"),l(n[0],"URI_CLASSLOADER","uri:classloader:"),l(n[0],"WindowsRootRx",/^(?:[a-zA-Z]:)?[\\\/]/),r.$attr_accessor("file_separator"),r.$attr_accessor("working_dir"),c(r,"$initialize",function(t,e){var r=x,n=x;return null==t&&(t=x),null==e&&(e=x),this.file_separator=$(r=$(n=t)?n:k(k("File"),"ALT_SEPARATOR"))?r:k(k("File"),"SEPARATOR"),this.working_dir=$(e)?$(this["$root?"](e))?this.$posixify(e):k("File").$expand_path(e):k("Dir").$pwd(),this._partition_path_sys=u([],{}),this._partition_path_web=u([],{})},-1),c(r,"$absolute_path?",function(t){var e=x,r=x;return $(e=t["$start_with?"](i("SLASH")))?e:$(r=this.file_separator["$=="](i("BACKSLASH")))?i("WindowsRootRx")["$match?"](t):r}),h(i("RUBY_ENGINE"),"opal")&&h(k("JAVASCRIPT_IO_MODULE"),"xmlhttprequest")?c(r,"$root?",function(t){var e=x;return $(e=this["$absolute_path?"](t))?e:t["$start_with?"]("file://","http://","https://")}):h(k("RUBY_ENGINE"),"jruby")?c(r,"$root?",function(t){var e=x;return $(e=this["$absolute_path?"](t))?e:t["$start_with?"](i("URI_CLASSLOADER"))}):_(r,"root?","absolute_path?"),c(r,"$unc?",function(t){return t["$start_with?"](i("DOUBLE_SLASH"))}),c(r,"$web_root?",function(t){return t["$start_with?"](i("SLASH"))}),c(r,"$descends_from?",function(t,e){var r=x;return h(e,t)?0:h(e,i("SLASH"))?$(r=t["$start_with?"](i("SLASH")))?1:r:$(r=t["$start_with?"](d(e,i("SLASH"))))?d(e.$length(),1):r}),c(r,"$relative_path",function(e,r){var n=x;if(!$(this["$root?"](e)))return e;if($(n=this["$descends_from?"](e,r)))return e.$slice(n,e.$length());try{return i("Pathname").$new(e).$relative_path_from(i("Pathname").$new(r)).$to_s()}catch(r){if(t.rescue(r,[i("StandardError")]))try{return e}finally{t.pop_exception()}else throw r}}),c(r,"$posixify",function(t){return $(t)?h(this.file_separator,i("BACKSLASH"))&&$(t["$include?"](i("BACKSLASH")))?t.$tr(i("BACKSLASH"),i("SLASH")):t:""}),_(r,"posixfy","posixify"),c(r,"$expand_path",function(t){var e,r=x,n=x,s=x;return(r=null==(e=p(this.$partition_path(t)))[0]?x:e[0],n=null==e[1]?x:e[1],$(t["$include?"](i("DOT_DOT"))))?(s=[],f(r,"each",[],function(t){return(null==t&&(t=x),h(t,i("DOT_DOT")))?s.$pop():s["$<<"](t)}),this.$join_path(s,n)):this.$join_path(r,n)}),c(r,"$partition_path",function(t,e){var r,n=x,s=x,o=x,a=x,l=x;return(null==e&&(e=x),$(n=(s=$(e)?this._partition_path_web:this._partition_path_sys)["$[]"](t)))?n:(o=this.$posixify(t),$(e)?$(this["$web_root?"](o))?a=i("SLASH"):$(o["$start_with?"](i("DOT_SLASH")))&&(a=i("DOT_SLASH")):$(this["$root?"](o))?a=$(this["$unc?"](o))?i("DOUBLE_SLASH"):$(o["$start_with?"](i("SLASH")))?i("SLASH"):$(o["$start_with?"](i("URI_CLASSLOADER")))?o.$slice(0,i("URI_CLASSLOADER").$length()):o.$slice(0,d(o.$index(i("SLASH")),1)):$(o["$start_with?"](i("DOT_SLASH")))&&(a=i("DOT_SLASH")),(l=($(a)?o.$slice(a.$length(),o.$length()):o).$split(i("SLASH"))).$delete(i("DOT")),f(s,"[]=",r=[t,[l,a]]),r[r.length-1])},-2),c(r,"$join_path",function(t,e){return(null==e&&(e=x),$(e))?""+e+t.$join(i("SLASH")):t.$join(i("SLASH"))},-2),c(r,"$system_path",function(t,e,r,n){var s,o=x,a=x,l=x,c=x,_=x,v=x,y=x,w=x,A=x,E=x,S=x;if(null==e&&(e=x),null==r&&(r=x),null==n&&(n=u([],{})),$(r)&&($(this["$root?"](r))||this.$raise(k("SecurityError"),"Jail is not an absolute path: "+r),r=this.$posixify(r)),$(t)){if($(this["$root?"](t))){if(o=this.$expand_path(t),$(r)&&m(this["$descends_from?"](o,r))){if($(n.$fetch("recover",!0)))return this.$logger().$warn(""+($(a=n["$[]"]("target_name"))?a:"path")+" is outside of jail; recovering automatically"),l=null==(s=p(this.$partition_path(o)))[0]?x:s[0],c=null==(s=p(this.$partition_path(r)))[0]?x:s[0],_=null==s[1]?x:s[1],this.$join_path(d(c,l),_);this.$raise(k("SecurityError"),""+($(a=n["$[]"]("target_name"))?a:"path")+" "+t+" is outside of jail: "+r+" (disallowed in safe mode)")}return o}l=null==(s=p(this.$partition_path(t)))[0]?x:s[0]}else l=[];if($(l["$empty?"]())){if($(e["$nil_or_empty?"]()))return $(a=r)?a:this.working_dir;if($(this["$root?"](e))){if(!$(r))return this.$expand_path(e);e=this.$posixify(e)}else l=null==(s=p(this.$partition_path(e)))[0]?x:s[0],e=$(a=r)?a:this.working_dir}else $(e["$nil_or_empty?"]())?e=$(a=r)?a:this.working_dir:$(this["$root?"](e))?$(r)&&(e=this.$posixify(e)):e=""+($(a=r)?a:this.working_dir).$chomp("/")+"/"+e;return($(r)&&$(v=this["$descends_from?"](e,r)["$!"]())&&h(this.file_separator,i("BACKSLASH"))?(y=null==(s=p(this.$partition_path(e)))[0]?x:s[0],w=null==s[1]?x:s[1],c=null==(s=p(this.$partition_path(r)))[0]?x:s[0],g(w,_=null==s[1]?x:s[1])&&($(n.$fetch("recover",!0))?(this.$logger().$warn("start path for "+($(a=n["$[]"]("target_name"))?a:"path")+" is outside of jail root; recovering automatically"),y=c,v=!1):this.$raise(k("SecurityError"),"start path for "+($(a=n["$[]"]("target_name"))?a:"path")+" "+e+" refers to location outside jail root: "+r+" (disallowed in safe mode)"))):(y=null==(s=p(this.$partition_path(e)))[0]?x:s[0],_=null==s[1]?x:s[1]),$((A=d(y,l))["$include?"](i("DOT_DOT")))&&(E=(s=[A,[]])[0],A=s[1],$(r)?($(c)||(c=null==(s=p(this.$partition_path(r)))[0]?x:s[0]),S=!1,f(E,"each",[],function e(s){var o=null==e.$$s?this:e.$$s;return(null==s&&(s=x),h(s,i("DOT_DOT")))?$(b(A.$size(),c.$size()))?A.$pop():$(n.$fetch("recover",!0))?$(S)?x:(o.$logger().$warn(""+($(a=n["$[]"]("target_name"))?a:"path")+" has illegal reference to ancestor of jail; recovering automatically"),S=!0):o.$raise(k("SecurityError"),""+($(a=n["$[]"]("target_name"))?a:"path")+" "+t+" refers to location outside jail: "+r+" (disallowed in safe mode)"):A["$<<"](s)},{$$s:this})):f(E,"each",[],function(t){return(null==t&&(t=x),h(t,i("DOT_DOT")))?A.$pop():A["$<<"](t)})),$(v))?(o=this.$join_path(A,_),$(this["$descends_from?"](o,r)))?o:$(n.$fetch("recover",!0))?(this.$logger().$warn(""+($(a=n["$[]"]("target_name"))?a:"path")+" is outside of jail; recovering automatically"),$(c)||(c=null==(s=p(this.$partition_path(r)))[0]?x:s[0]),this.$join_path(d(c,l),_)):this.$raise(k("SecurityError"),""+($(a=n["$[]"]("target_name"))?a:"path")+" "+t+" is outside of jail: "+r+" (disallowed in safe mode)"):this.$join_path(A,_)},-2),c(r,"$web_path",function(t,e){var r,n=x,s=x,o=x,a=x,l=x;return(null==e&&(e=x),t=this.$posixify(t),$((e=this.$posixify(e))["$nil_or_empty?"]())||$(this["$web_root?"](t))||(t=null==(r=p(this.$extract_uri_prefix(""+e+($(e["$end_with?"](i("SLASH")))?"":i("SLASH"))+t)))[0]?x:r[0],n=null==r[1]?x:r[1]),s=null==(r=p(this.$partition_path(t,!0)))[0]?x:r[0],o=null==r[1]?x:r[1],a=[],f(s,"each",[],function(t){return(null==t&&(t=x),h(t,i("DOT_DOT")))?$(a["$empty?"]())?$(o)&&g(o,i("DOT_SLASH"))?x:a["$<<"](t):h(a["$[]"](-1),i("DOT_DOT"))?a["$<<"](t):a.$pop():a["$<<"](t)}),$((l=this.$join_path(a,o))["$include?"](" "))&&(l=l.$gsub(" ","%20")),$(n))?""+n+l:l},-2),r.$private(),c(r,"$extract_uri_prefix",function(t){var e;return $(t["$include?"](":"))&&$(i("UriSniffRx")["$=~"](t))?[t.$slice(((e=v["~"])===x?x:e["$[]"](0)).$length(),t.$length()),(e=v["~"])===x?x:e["$[]"](0)]:t})},Opal.modules["asciidoctor/reader"]=function(t){var e,r,n,i,s,o,a,l,$,u,c,h,_=t.module,d=t.klass,p=t.def,f=t.rb_plus,m=t.alias,g=t.hash2,b=t.not,v=t.eqeqeq,y=t.to_ary,x=t.truthy,k=t.rb_gt,w=t.send,A=t.rb_minus,E=t.thrower,S=t.eqeq,C=t.rb_times,O=t.neqeq,R=t.to_a,I=t.assign_ivar_val,T=t.send2,z=t.find_super,F=t.rb_ge,N=t.gvars,L=t.rb_lt,D=t.hash,q=[],B=t.nil,M=t.$$$;return t.add_stubs("include,attr_reader,+,line_info,attr_accessor,!,===,split,file,dir,dirname,path,basename,lineno,reverse,prepare_lines,empty?,nil_or_empty?,peek_line,[],>,slice,length,process_line,times,shift,read_line,<<,-,unshift_all,has_more_lines?,read_lines,join,unshift,unshift_line,unshift_lines,replace_next_line,start_with?,==,*,read_lines_until,size,clear,cursor,[]=,fetch,!=,cursor_at_mark,warn,logger,message_with_context,pop,push,respond_to?,reverse_each,new,tap,each,instance_variables,instance_variable_get,drop,instance_variable_set,class,object_id,inspect,private,prepare_source_array,prepare_source_string,chomp,valid_encoding?,to_s,raise,to_i,attributes,catalog,pop_include,parse,path=,dup,end_with?,keys,rindex,rootname,key?,attr,reverse!,>=,exceeds_max_depth?,nil?,include_processors?,extensions,extensions?,include_processors,map,skip_front_matter!,adjust_indentation!,include?,=~,preprocess_conditional_directive,preprocess_include_directive,downcase,error,none?,any?,all?,strip,send,resolve_expr_val,rstrip,sub_attributes,attribute_missing,info,parse_attributes,find,handles?,instance,process_method,safe,resolve_include_path,method,split_delimited_value,partition,<,to_a,uniq,sort,call,each_line,infinite?,push_include,delete,first,values,value?,create_include_cursor,delete_at,keep_if,read,uriish?,attr?,require_library,normalize_system_path,file?,relative_path,path_resolver,base_dir,to_f"),e=[_(q[0],"Asciidoctor")].concat(q),r=t.$r(e),i=[n=d(e[0],null,"Reader")].concat(e),s=t.$r(i),(o=n.$$prototype).file=o.lines=o.look_ahead=o.unescape_next_line=o.lineno=o.process_lines=o.dir=o.path=o.mark=o.source_lines=o.saved=B,n.$include(s("Logging")),(l=(a=d(i[0],null,"Cursor")).$$prototype).lineno=l.path=B,a.$attr_reader("file","dir","path","lineno"),p(a,"$initialize",function(t,e,r,n){var i;return null==e&&(e=B),null==r&&(r=B),null==n&&(n=1),i=[t,e,r,n],this.file=i[0],this.dir=i[1],this.path=i[2],this.lineno=i[3],i},-2),p(a,"$advance",function(t){return this.lineno=f(this.lineno,t)}),p(a,"$line_info",function(){return""+this.path+": line "+this.lineno}),m(a,"to_s","line_info"),n.$attr_reader("file"),n.$attr_reader("dir"),n.$attr_reader("path"),n.$attr_reader("lineno"),n.$attr_reader("source_lines"),n.$attr_accessor("process_lines"),n.$attr_accessor("unterminated"),p(n,"$initialize",function(t,e,r){var n,i=B;return null==t&&(t=B),null==e&&(e=B),null==r&&(r=g([],{})),b(e)?(this.file=B,this.dir=".",this.path="<stdin>",this.lineno=1):v(M("String"),e)?(this.file=e,n=y(M("File").$split(this.file)),this.dir=null==n[0]?B:n[0],this.path=null==n[1]?B:n[1],this.lineno=1):(x(this.file=e.$file())?(this.dir=x(i=e.$dir())?i:M("File").$dirname(this.file),this.path=x(i=e.$path())?i:M("File").$basename(this.file)):(this.dir=x(i=e.$dir())?i:".",this.path=x(i=e.$path())?i:"<stdin>"),this.lineno=x(i=e.$lineno())?i:1),this.lines=(this.source_lines=this.$prepare_lines(t,r)).$reverse(),this.mark=B,this.look_ahead=0,this.process_lines=!0,this.unescape_next_line=!1,this.unterminated=B,this.saved=B},-1),p(n,"$has_more_lines?",function(){return!x(this.lines["$empty?"]())||(this.look_ahead=0,!1)}),p(n,"$empty?",function(){return!!x(this.lines["$empty?"]())&&(this.look_ahead=0,!0)}),m(n,"eof?","empty?"),p(n,"$next_line_empty?",function(){return this.$peek_line()["$nil_or_empty?"]()}),p(n,"$peek_line",function(t){var e=B,r=B;for(null==t&&(t=!1);x(!0);){if(e=this.lines["$[]"](-1),x(t)||x(k(this.look_ahead,0)))return x(this.unescape_next_line)?e.$slice(1,e.$length()):e;if(!x(e))return this.look_ahead=0,B;if(x(r=this.$process_line(e)))return r}},-1),p(n,"$peek_lines",function(t,e){var r=this,n=B,i=B,o=B;return null==t&&(t=B),null==e&&(e=!1),n=r.look_ahead,i=[],function(){try{var n=E("break");w(x(o=t)?o:s("MAX_INT"),"times",[],function t(){var r=null==t.$$s?this:t.$$s,s=B;if(null==r.lineno&&(r.lineno=B),x(s=x(e)?r.$shift():r.$read_line()))return i["$<<"](s);x(e)&&(r.lineno=A(r.lineno,1)),n.$throw()},{$$s:r})}catch(t){if(t===n)return t.$v;throw t}}(),!x(i["$empty?"]())&&(r.$unshift_all(i),x(e)&&(r.look_ahead=n)),i},-1),p(n,"$read_line",function(){return x(k(this.look_ahead,0))||x(this["$has_more_lines?"]())?this.$shift():B}),p(n,"$read_lines",function(){var t=B;for(t=[];x(this["$has_more_lines?"]());)t["$<<"](this.$shift());return t}),m(n,"readlines","read_lines"),p(n,"$read",function(){return this.$read_lines().$join(s("LF"))}),p(n,"$advance",function(){return!!x(this.$shift())}),p(n,"$unshift_line",function(t){return this.$unshift(t),B}),m(n,"restore_line","unshift_line"),p(n,"$unshift_lines",function(t){return this.$unshift_all(t)}),m(n,"restore_lines","unshift_lines"),p(n,"$replace_next_line",function(t){return this.$shift(),this.$unshift(t),!0}),m(n,"replace_line","replace_next_line"),p(n,"$skip_blank_lines",function(){var t=B,e=B;if(x(this["$empty?"]()))return B;for(t=0;x(e=this.$peek_line());){if(!x(e["$empty?"]()))return t;this.$shift(),t=f(t,1)}}),p(n,"$skip_comment_lines",function(){var t=B,e=B,r=B;if(x(this["$empty?"]()))return B;for(;x(x(t=e=this.$peek_line())?e["$empty?"]()["$!"]():t);)if(x(e["$start_with?"]("//"))){if(x(e["$start_with?"]("///"))){if(x(k(r=e.$length(),3))&&S(e,C("/",r)))this.$read_lines_until(g(["terminator","skip_first_line","read_last_line","skip_processing","context"],{terminator:e,skip_first_line:!0,read_last_line:!0,skip_processing:!0,context:"comment"}));else break}else this.$shift()}else break;return B}),p(n,"$skip_line_comments",function(){var t=B,e=B,r=B;if(x(this["$empty?"]()))return[];for(t=[];x(x(e=r=this.$peek_line())?r["$empty?"]()["$!"]():e);)if(x(r["$start_with?"]("//")))t["$<<"](this.$shift());else break;return t}),p(n,"$terminate",function(){return this.lineno=f(this.lineno,this.lines.$size()),this.lines.$clear(),this.look_ahead=0,B}),p(n,"$read_lines_until",function e(r){var n,i=e.$$p||B,o=B,a=B,l=B,$=B,u=B,c=B,h=B,_=B,d=B,p=B,f=B,m=B,v=B,y=B,k=B,E=B;for(e.$$p=null,null==r&&(r=g([],{})),o=[],x(this.process_lines)&&x(r["$[]"]("skip_processing"))&&(this.process_lines=!1,a=!0),x(l=r["$[]"]("terminator"))?($=x(u=r["$[]"]("cursor"))?u:this.$cursor(),c=!1,h=!1):(c=r["$[]"]("break_on_blank_lines"),h=r["$[]"]("break_on_list_continuation")),_=r["$[]"]("skip_line_comments"),d=p=B,x(r["$[]"]("skip_first_line"))&&this.$shift();x(f=this.$read_line());){if(x(x(l)?f["$=="](l):x(u=x(m=x(v=c)?f["$empty?"]():v)?m:x(v=x(y=x(k=h)?d:k)?f["$=="](s("LIST_CONTINUATION")):y)?(w(r,"[]=",n=["preserve_last_line",!0]),n[n.length-1]):v)?u:x(m=i!==B)?t.yield1(i,f):m)){x(r["$[]"]("read_last_line"))&&o["$<<"](f),x(r["$[]"]("preserve_last_line"))&&(this.$unshift(f),p=!0);break}x(_)&&x(f["$start_with?"]("//"))&&b(f["$start_with?"]("///"))||(o["$<<"](f),d=!0)}return x(a)&&(this.process_lines=!0,x(p)&&b(l)&&(this.look_ahead=A(this.look_ahead,1))),x(l)&&O(l,f)&&x(E=r.$fetch("context",l))&&(S($,"at_mark")&&($=this.$cursor_at_mark()),this.$logger().$warn(this.$message_with_context("unterminated "+E+" block",g(["source_location"],{source_location:$}))),this.unterminated=!0),o},-1),p(n,"$shift",function(){return this.lineno=f(this.lineno,1),S(this.look_ahead,0)||(this.look_ahead=A(this.look_ahead,1)),this.lines.$pop()}),p(n,"$unshift",function(t){return this.lineno=A(this.lineno,1),this.look_ahead=f(this.look_ahead,1),this.lines.$push(t),B}),p(n,"$unshift_all",S(M("RUBY_ENGINE"),"jruby")?function(t){return this.lineno=A(this.lineno,t.$size()),this.look_ahead=f(this.look_ahead,t.$size()),x(t["$respond_to?"]("reverse"))?w(this.lines,"push",R(t.$reverse())):w(t,"reverse_each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.lines&&(r.lines=B),null==e&&(e=B),r.lines.$push(e)},{$$s:this}),B}:function(t){return this.lineno=A(this.lineno,t.$size()),this.look_ahead=f(this.look_ahead,t.$size()),w(this.lines,"push",R(t.$reverse())),B}),p(n,"$cursor",function(){return s("Cursor").$new(this.file,this.dir,this.path,this.lineno)}),p(n,"$cursor_at_line",function(t){return s("Cursor").$new(this.file,this.dir,this.path,t)}),p(n,"$cursor_at_mark",function(){return x(this.mark)?w(s("Cursor"),"new",R(this.mark)):this.$cursor()}),p(n,"$cursor_before_mark",function(){var t,e=B,r=B,n=B,i=B;return x(this.mark)?(e=null==(t=y(this.mark))[0]?B:t[0],r=null==t[1]?B:t[1],n=null==t[2]?B:t[2],i=null==t[3]?B:t[3],s("Cursor").$new(e,r,n,A(i,1))):s("Cursor").$new(this.file,this.dir,this.path,A(this.lineno,1))}),p(n,"$cursor_at_prev_line",function(){return s("Cursor").$new(this.file,this.dir,this.path,A(this.lineno,1))}),p(n,"$mark",function(){return this.mark=[this.file,this.dir,this.path,this.lineno]}),p(n,"$line_info",function(){return""+this.path+": line "+this.lineno}),p(n,"$lines",function(){return this.lines.$reverse()}),p(n,"$string",function(){return this.lines.$reverse().$join(s("LF"))}),p(n,"$source",function(){return this.source_lines.$join(s("LF"))}),p(n,"$save",function(){return this.saved=w(g([],{}),"tap",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=B),w(r.$instance_variables(),"each",[],function t(r){var n,i=null==t.$$s?this:t.$$s,s=B;return(null==r&&(r=B),S(r,"@saved")||S(r,"@source_lines"))?B:(n=[r,v(M("Array"),s=i.$instance_variable_get(r))?s.$drop(0):s],w(e,"[]=",n),n[n.length-1])},{$$s:r})},{$$s:this}),B}),p(n,"$restore_save",function(){return x(this.saved)?(w(this.saved,"each",[],function t(e,r){var n=null==t.$$s?this:t.$$s;return null==e&&(e=B),null==r&&(r=B),n.$instance_variable_set(e,r)},{$$s:this}),this.saved=B):B}),p(n,"$discard_save",I("saved",B)),p(n,"$to_s",function(){return"#<"+this.$class()+"@"+this.$object_id()+" {path: "+this.path.$inspect()+", line: "+this.lineno+"}>"}),n.$private(),p(n,"$prepare_lines",function(e,r){var n=B;null==r&&(r=g([],{}));try{if(x(n=r["$[]"]("normalize"))){if(v(M("Array"),e))return s("Helpers").$prepare_source_array(e,n["$!="]("chomp"));return s("Helpers").$prepare_source_string(e,n["$!="]("chomp"))}if(v(M("Array"),e))return e.$drop(0);if(x(e))return e.$chomp().$split(s("LF"),-1);return[]}catch(r){if(t.rescue(r,[s("StandardError")]))try{if(x((v(M("Array"),e)?e.$join():e.$to_s())["$valid_encoding?"]()))return this.$raise();return this.$raise(M("ArgumentError"),"source is either binary or contains invalid Unicode data")}finally{t.pop_exception()}else throw r}},-2),p(n,"$process_line",function(t){return x(this.process_lines)&&(this.look_ahead=f(this.look_ahead,1)),t}),u=[$=d(e[0],r("Reader"),"PreprocessorReader")].concat(e),c=t.$r(u),(h=$.$$prototype).include_stack=h.lines=h.file=h.dir=h.path=h.lineno=h.maxdepth=h.process_lines=h.includes=h.document=h.unescape_next_line=h.include_processor_extensions=h.look_ahead=h.skipping=h.conditional_stack=B,$.$attr_reader("include_stack"),p($,"$initialize",function t(e,r,n,i){t.$$p;var s=B,o=B;return t.$$p=null,null==r&&(r=B),null==n&&(n=B),null==i&&(i=g([],{})),this.document=e,T(this,z(this,"initialize",t,!1,!0),"initialize",[r,n,i],null),x(k(s=(x(o=e.$attributes()["$[]"]("max-include-depth"))?o:64).$to_i(),0))?this.maxdepth=g(["abs","curr","rel"],{abs:s,curr:s,rel:s}):this.maxdepth=B,this.include_stack=[],this.includes=e.$catalog()["$[]"]("includes"),this.skipping=!1,this.conditional_stack=[],this.include_processor_extensions=B},-2),p($,"$has_more_lines?",function(){return!!x(this.$peek_line())}),p($,"$empty?",function(){return!x(this.$peek_line())}),m($,"eof?","empty?"),p($,"$peek_line",function t(e){var r=t.$$p||B,n=B;return(t.$$p=null,null==e&&(e=!1),x(n=T(this,z(this,"peek_line",t,!1,!0),"peek_line",[e],r)))?n:x(this.include_stack["$empty?"]())?B:(this.$pop_include(),this.$peek_line(e))},-1),p($,"$push_include",function(t,e,r,n,i){var s=B,o=B,a=B,l=B,$=B,u=B;return null==e&&(e=B),null==r&&(r=B),null==n&&(n=1),null==i&&(i=g([],{})),this.include_stack["$<<"]([this.lines,this.file,this.dir,this.path,this.lineno,this.maxdepth,this.process_lines]),x(this.file=e)?(v(M("String"),e)?this.dir=M("File").$dirname(e):x(c("RUBY_ENGINE_OPAL"))?this.dir=M("URI").$parse(M("File").$dirname(e=e.$to_s())):((this.dir=e.$dup())["$path="](S(s=M("File").$dirname(e.$path()),"/")?"":s),e=e.$to_s()),this.path=r=x(o=r)?o:M("File").$basename(e),x(this.process_lines=w(e,"end_with?",R(c("ASCIIDOC_EXTENSIONS").$keys())))&&(x(o=this.includes["$[]"](r.$slice(0,r.$rindex("."))))||this.includes["$[]="](r.$slice(0,r.$rindex(".")),!x(i["$[]"]("partial-option"))||B))):(this.dir=".",this.process_lines=!0,x(this.path=r)?x(o=this.includes["$[]"](c("Helpers").$rootname(r)))||this.includes["$[]="](c("Helpers").$rootname(r),!x(i["$[]"]("partial-option"))||B):this.path="<stdin>"),this.lineno=n,x(this.maxdepth)&&x(i["$key?"]("depth"))&&(x(k(a=i["$[]"]("depth").$to_i(),0))?(x(k(l=f(this.include_stack.$size(),a),$=this.maxdepth["$[]"]("abs")))&&(l=a=$),this.maxdepth=g(["abs","curr","rel"],{abs:$,curr:l,rel:a})):this.maxdepth=g(["abs","curr","rel"],{abs:this.maxdepth["$[]"]("abs"),curr:this.include_stack.$size(),rel:0})),x((this.lines=this.$prepare_lines(t,g(["normalize","condense","indent"],{normalize:x(o=this.process_lines)?o:"chomp",condense:!1,indent:i["$[]"]("indent")})))["$empty?"]())?this.$pop_include():(x(i["$key?"]("leveloffset"))?(this.lines=f(f([x(u=this.document.$attr("leveloffset"))?":leveloffset: "+u:":leveloffset!:",""],this.lines.$reverse()),["",":leveloffset: "+i["$[]"]("leveloffset")]),this.lineno=A(this.lineno,2)):this.lines["$reverse!"](),this.look_ahead=0),this},-2),p($,"$include_depth",function(){return this.include_stack.$size()}),p($,"$exceeds_max_depth?",function(){var t=B,e=B;return x(t=x(e=this.maxdepth)?F(this.include_stack.$size(),this.maxdepth["$[]"]("curr")):e)?this.maxdepth["$[]"]("rel"):t}),m($,"exceeded_max_depth?","exceeds_max_depth?"),p($,"$shift",function t(){var e=t.$$p||B,r=B;return(t.$$p=null,x(this.unescape_next_line))?(this.unescape_next_line=!1,(r=T(this,z(this,"shift",t,!1,!0),"shift",[],e)).$slice(1,r.$length())):T(this,z(this,"shift",t,!1,!0),"shift",[],e)}),p($,"$include_processors?",function(){return x(this.include_processor_extensions["$nil?"]())?x(this.document["$extensions?"]())&&x(this.document.$extensions()["$include_processors?"]())?(this.include_processor_extensions=this.document.$extensions().$include_processors())["$!"]()["$!"]():this.include_processor_extensions=!1:this.include_processor_extensions["$!="](!1)}),p($,"$create_include_cursor",function(t,e,r){var n=B;return v(M("String"),t)?n=M("File").$dirname(t):x(c("RUBY_ENGINE_OPAL"))?n=M("File").$dirname(t=t.$to_s()):(n=S(n=M("File").$dirname(t.$path()),"")?"/":n,t=t.$to_s()),c("Cursor").$new(t,n,e,r)}),p($,"$to_s",function(){return"#<"+this.$class()+"@"+this.$object_id()+" {path: "+this.path.$inspect()+", line: "+this.lineno+", include depth: "+this.include_stack.$size()+", include stack: ["+w(this.include_stack,"map",[],function(t){return null==t&&(t=B),t.$to_s()}).$join(", ")+"]}>"}),$.$private(),p($,"$prepare_lines",function t(e,r){var n=t.$$p||B,i=B,s=B,o=B,a=B;if(t.$$p=null,null==r&&(r=g([],{})),i=T(this,z(this,"prepare_lines",t,!1,!0),"prepare_lines",[e,r],n),x(this.document)&&x(this.document.$attributes()["$[]"]("skip-front-matter"))&&x(s=this["$skip_front_matter!"](i))&&this.document.$attributes()["$[]="]("front-matter",s.$join(c("LF"))),x(r.$fetch("condense",!0)))for(;x(x(o=a=i["$[]"](-1))?a["$empty?"]():o);)i.$pop();return x(r["$[]"]("indent"))&&c("Parser")["$adjust_indentation!"](i,r["$[]"]("indent").$to_i(),this.document.$attr("tabsize").$to_i()),i},-2),p($,"$process_line",function(t){var e;return x(this.process_lines)?x(t["$empty?"]())?(this.look_ahead=f(this.look_ahead,1),t):x(t["$end_with?"]("]"))&&b(t["$start_with?"]("["))&&x(t["$include?"]("::"))?x(t["$include?"]("if"))&&x(c("ConditionalDirectiveRx")["$=~"](t))?S((e=N["~"])===B?B:e["$[]"](1),"\\")?(this.unescape_next_line=!0,this.look_ahead=f(this.look_ahead,1),t.$slice(1,t.$length())):x(this.$preprocess_conditional_directive((e=N["~"])===B?B:e["$[]"](2),(e=N["~"])===B?B:e["$[]"](3),(e=N["~"])===B?B:e["$[]"](4),(e=N["~"])===B?B:e["$[]"](5)))?(this.$shift(),B):(this.look_ahead=f(this.look_ahead,1),t):x(this.skipping)?(this.$shift(),B):x(t["$start_with?"]("inc","\\inc"))&&x(c("IncludeDirectiveRx")["$=~"](t))?S((e=N["~"])===B?B:e["$[]"](1),"\\")?(this.unescape_next_line=!0,this.look_ahead=f(this.look_ahead,1),t.$slice(1,t.$length())):x(this.$preprocess_include_directive((e=N["~"])===B?B:e["$[]"](2),(e=N["~"])===B?B:e["$[]"](3)))?B:(this.look_ahead=f(this.look_ahead,1),t):(this.look_ahead=f(this.look_ahead,1),t):x(this.skipping)?(this.$shift(),B):(this.look_ahead=f(this.look_ahead,1),t):t}),p($,"$preprocess_conditional_directive",function(e,r,n,i){var s,o=this,a=B,l=B,$=B,u=B,h=B,_=B;if(x(a=r["$empty?"]())||(r=r.$downcase()),S(e,"endif"))return x(i)?o.$logger().$error(o.$message_with_context("malformed preprocessor directive - text not permitted: endif::"+r+"["+i+"]",g(["source_location"],{source_location:o.$cursor()}))):x(o.conditional_stack["$empty?"]())?o.$logger().$error(o.$message_with_context("unmatched preprocessor directive: endif::"+r+"[]",g(["source_location"],{source_location:o.$cursor()}))):x(a)||S(r,(l=o.conditional_stack["$[]"](-1))["$[]"]("target"))?(o.conditional_stack.$pop(),o.skipping=!x(o.conditional_stack["$empty?"]())&&o.conditional_stack["$[]"](-1)["$[]"]("skipping")):o.$logger().$error(o.$message_with_context("mismatched preprocessor directive: endif::"+r+"[], expected endif::"+l["$[]"]("target")+"[]",g(["source_location"],{source_location:o.$cursor()}))),!0;if(x(o.skipping))$=!1;else switch(e){case"ifdef":if(x(a))return o.$logger().$error(o.$message_with_context("malformed preprocessor directive - missing target: ifdef::["+i+"]",g(["source_location"],{source_location:o.$cursor()}))),!0;switch(n){case",":$=w(r.$split(",",-1),"none?",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.document&&(r.document=B),null==e&&(e=B),r.document.$attributes()["$key?"](e)},{$$s:o});break;case"+":$=w(r.$split("+",-1),"any?",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.document&&(r.document=B),null==e&&(e=B),r.document.$attributes()["$key?"](e)["$!"]()},{$$s:o});break;default:$=o.document.$attributes()["$key?"](r)["$!"]()}break;case"ifndef":if(x(a))return o.$logger().$error(o.$message_with_context("malformed preprocessor directive - missing target: ifndef::["+i+"]",g(["source_location"],{source_location:o.$cursor()}))),!0;switch(n){case",":$=w(r.$split(",",-1),"any?",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.document&&(r.document=B),null==e&&(e=B),r.document.$attributes()["$key?"](e)},{$$s:o});break;case"+":$=w(r.$split("+",-1),"all?",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.document&&(r.document=B),null==e&&(e=B),r.document.$attributes()["$key?"](e)},{$$s:o});break;default:$=o.document.$attributes()["$key?"](r)}break;case"ifeval":if(!x(a))return o.$logger().$error(o.$message_with_context("malformed preprocessor directive - target not permitted: ifeval::"+r+"["+i+"]",g(["source_location"],{source_location:o.$cursor()}))),!0;if(!(x(i)&&x(c("EvalExpressionRx")["$=~"](i.$strip()))))return o.$logger().$error(o.$message_with_context("malformed preprocessor directive - "+(x(i)?"invalid expression":"missing expression")+": ifeval::["+i+"]",g(["source_location"],{source_location:o.$cursor()}))),!0;u=(s=N["~"])===B?B:s["$[]"](1),h=(s=N["~"])===B?B:s["$[]"](2),_=(s=N["~"])===B?B:s["$[]"](3),$=function(){try{if(x(o.$resolve_expr_val(u).$send(h,o.$resolve_expr_val(_))))return!1;return!0}catch(e){if(t.rescue(e,[c("StandardError")]))try{return!0}finally{t.pop_exception()}else throw e}}()}return S(e,"ifeval")||b(i)?(x($)&&(o.skipping=!0),o.conditional_stack["$<<"](g(["target","skip","skipping"],{target:r,skip:$,skipping:o.skipping}))):!(x(o.skipping)||x($))&&(o.$replace_next_line(i.$rstrip()),o.$unshift(""),x(i["$start_with?"]("include::"))&&(o.look_ahead=A(o.look_ahead,1))),!0}),p($,"$preprocess_include_directive",function(e,r){var n,i=B,s=B,o=B,a=B,l=B,$=B,u=B,h=B,_=B,d=B,p=B,m=B,C=B,R=B,I=B,T=B,z=B,q=B,j=B,P=B,U=B,H=B,Y=B,G=B,W=B,K=B,X=B;if(i=this.document,x((s=e)["$include?"](c("ATTR_REF_HEAD")))&&x((s=i.$sub_attributes(e,g(["attribute_missing"],{attribute_missing:S(o=x(a=i.$attributes()["$[]"]("attribute-missing"))?a:c("Compliance").$attribute_missing(),"warn")?"drop-line":o})))["$empty?"]()))return S(o,"drop-line")&&x(i.$sub_attributes(f(e," "),g(["attribute_missing","drop_line_severity"],{attribute_missing:"drop-line",drop_line_severity:"ignore"}))["$empty?"]())?(w(this.$logger(),"info",[],function t(){var n=null==t.$$s?this:t.$$s;return n.$message_with_context("include dropped due to missing attribute: include::"+e+"["+r+"]",g(["source_location"],{source_location:n.$cursor()}))},{$$s:this}),this.$shift(),!0):x(i.$parse_attributes(r,[],g(["sub_input"],{sub_input:!0}))["$[]"]("optional-option"))?(w(this.$logger(),"info",[],function t(){var n=null==t.$$s?this:t.$$s;return n.$message_with_context("optional include dropped "+(S(o,"warn")&&x(i.$sub_attributes(f(e," "),g(["attribute_missing","drop_line_severity"],{attribute_missing:"drop-line",drop_line_severity:"ignore"}))["$empty?"]())?"due to missing attribute":"because resolved target is blank")+": include::"+e+"["+r+"]",g(["source_location"],{source_location:n.$cursor()}))},{$$s:this}),this.$shift(),!0):(this.$logger().$warn(this.$message_with_context("include dropped "+(S(o,"warn")&&x(i.$sub_attributes(f(e," "),g(["attribute_missing","drop_line_severity"],{attribute_missing:"drop-line",drop_line_severity:"ignore"}))["$empty?"]())?"due to missing attribute":"because resolved target is blank")+": include::"+e+"["+r+"]",g(["source_location"],{source_location:this.$cursor()}))),this.$replace_next_line("Unresolved directive in "+this.path+" - include::"+e+"["+r+"]"));if(x(this["$include_processors?"]())&&x(l=w(this.include_processor_extensions,"find",[],function(t){return null==t&&(t=B),t.$instance()["$handles?"](s)})))return this.$shift(),l.$process_method()["$[]"](i,this,s,i.$parse_attributes(r,[],g(["sub_input"],{sub_input:!0}))),!0;if(x(F(i.$safe(),M(c("SafeMode"),"SECURE"))))return this.$replace_next_line("link:"+s+"[role=include]");if(!x(this.maxdepth))return B;if(x(F(this.include_stack.$size(),this.maxdepth["$[]"]("curr"))))return this.$logger().$error(this.$message_with_context("maximum include depth of "+this.maxdepth["$[]"]("rel")+" exceeded",g(["source_location"],{source_location:this.$cursor()}))),B;switch($=i.$parse_attributes(r,[],g(["sub_input"],{sub_input:!0})),u=null==(n=y(this.$resolve_include_path(s,r,$)))[0]?B:n[0],h=null==n[1]?B:n[1],_=null==n[2]?B:n[2],h){case"file":d=M("File").$method("open"),p=c("FILE_READ_MODE");break;case"uri":d=M("OpenURI").$method("open_uri"),p=c("URI_READ_MODE");break;default:return u}if(!x(c("RUBY_ENGINE_OPAL"))&&x(m=$["$[]"]("encoding"))&&x(function(){try{return M("Encoding").$find(m)}catch(e){if(t.rescue(e,[c("StandardError")]))try{return B}finally{t.pop_exception()}else throw e}}())&&((C=p.$split(":"))["$[]="](1,m),p=C.$join(":")),R=I=B,x(r)&&(x($["$key?"]("lines"))?(R=[],w(this.$split_delimited_value($["$[]"]("lines")),"each",[],function(e){var r,n=B,i=B;return(null==e&&(e=B),x(e["$include?"]("..")))?(n=null==(r=y(e.$partition("..")))[0]?B:r[0],null==r[1]||r[1],i=null==r[2]?B:r[2],R=f(R,x(i["$empty?"]())||x(L(i=i.$to_i(),0))?[n.$to_i(),M(M("Float"),"INFINITY")]:t.Range.$new(n.$to_i(),i,!1).$to_a())):R["$<<"](e.$to_i())}),R=x(R["$empty?"]())?B:R.$sort().$uniq()):x($["$key?"]("tag"))?x((T=$["$[]"]("tag"))["$empty?"]())||S(T,"!")||(I=x(T["$start_with?"]("!"))?D(T.$slice(1,T.$length()),!1):D(T,!0)):x($["$key?"]("tags"))&&(I=g([],{}),w(this.$split_delimited_value($["$[]"]("tags")),"each",[],function(t){var e;return(null==t&&(t=B),x(t["$empty?"]())||S(t,"!"))?B:(x(t["$start_with?"]("!"))?(e=[t.$slice(1,t.$length()),!1],w(I,"[]=",e)):w(I,"[]=",e=[t,!0]),e[e.length-1])}),x(I["$empty?"]())&&(I=B))),x(R)){z=(n=[[],B,0])[0],q=n[1],j=n[2];try{w(d,"call",[u,p],function(t){var e=B;return null==t&&(t=B),e=B,function(){try{var r=E("break");return w(t,"each_line",[],function(t){var n=B;return(null==t&&(t=B),j=f(j,1),x(e)||v(M("Float"),n=R["$[]"](0))&&x(e=n["$infinite?"]()))?(q=x(a=q)?a:j,z["$<<"](t)):(S(n,j)&&(q=x(a=q)?a:j,z["$<<"](t),R.$shift()),x(R["$empty?"]()))?void r.$throw():B})}catch(t){if(t===r)return t.$v;throw t}}()})}catch(e){if(t.rescue(e,[c("StandardError")]))try{return this.$logger().$error(this.$message_with_context("include "+h+" not readable: "+u,g(["source_location"],{source_location:this.$cursor()}))),this.$replace_next_line("Unresolved directive in "+this.path+" - include::"+s+"["+r+"]")}finally{t.pop_exception()}else throw e}this.$shift(),x(q)&&($["$[]="]("partial-option",""),this.$push_include(z,u,_,q,$))}else if(x(I)){z=(n=[[],B,0,[],M("Set").$new(),B])[0],q=n[1],j=n[2],P=n[3],U=n[4],H=n[5],x(I["$key?"]("**"))?(Y=G=I.$delete("**"),x(I["$key?"]("*"))?W=I.$delete("*"):b(Y)&&S(I.$values().$first(),!1)&&(W=!0)):x(I["$key?"]("*"))?S(I.$keys().$first(),"*")?Y=G=(W=I.$delete("*"))["$!"]():(Y=G=!1,W=I.$delete("*")):Y=G=I["$value?"](!0)["$!"]();try{w(d,"call",[u,p],function t(e){var r=null==t.$$s?this:t.$$s,n=B,i=B;return null==e&&(e=B),n="::",i="[]",w(e,"each_line",[],function t(e){var r,o,l=null==t.$$s?this:t.$$s,$=B,_=B,d=B;if(null==e&&(e=B),j=f(j,1),x(e["$include?"](n))&&x(e["$include?"](i))&&x(c("TagDirectiveRx")["$=~"](e)))return($=(r=N["~"])===B?B:r["$[]"](2),x((r=N["~"])===B?B:r["$[]"](1)))?S($,H)?(P.$pop(),o=x(P["$empty?"]())?[B,G]:P["$[]"](-1),r=y(o),H=null==r[0]?B:r[0],Y=null==r[1]?B:r[1],o):x(I["$key?"]($))?(_=l.$create_include_cursor(u,s,j),x(d=w(P,"rindex",[],function(t){return null==t&&(t=B),t["$=="]($)},{$$has_trailing_comma_in_args:!0})))?(S(d,0)?P.$shift():P.$delete_at(d),l.$logger().$warn(l.$message_with_context("mismatched end tag (expected '"+H+"' but found '"+$+"') at line "+j+" of include "+h+": "+u,g(["source_location","include_location"],{source_location:l.$cursor(),include_location:_})))):l.$logger().$warn(l.$message_with_context("unexpected end tag '"+$+"' at line "+j+" of include "+h+": "+u,g(["source_location","include_location"],{source_location:l.$cursor(),include_location:_}))):B:x(I["$key?"]($))?(x(Y=I["$[]"]($))&&U["$<<"]($),P["$<<"]([H=$,Y,j])):b(W["$nil?"]())?(Y=!(x(H)&&b(Y))&&W,P["$<<"]([H=$,Y,j])):B;return x(Y)?(q=x(a=q)?a:j,z["$<<"](e)):B},{$$s:r})},{$$s:this})}catch(e){if(t.rescue(e,[c("StandardError")]))try{return this.$logger().$error(this.$message_with_context("include "+h+" not readable: "+u,g(["source_location"],{source_location:this.$cursor()}))),this.$replace_next_line("Unresolved directive in "+this.path+" - include::"+s+"["+r+"]")}finally{t.pop_exception()}else throw e}x(P["$empty?"]())||w(P,"each",[],function t(e,r,n){var i=null==t.$$s?this:t.$$s;return null==e&&(e=B),null==r&&(r=B),null==n&&(n=B),i.$logger().$warn(i.$message_with_context("detected unclosed tag '"+e+"' starting at line "+n+" of include "+h+": "+u,g(["source_location","include_location"],{source_location:i.$cursor(),include_location:i.$create_include_cursor(u,s,n)})))},{$$s:this}),x((K=A(w(I,"keep_if",[],function(t,e){return null==t&&(t=B),null==e&&(e=B),e}).$keys(),U.$to_a()))["$empty?"]())||this.$logger().$warn(this.$message_with_context("tag"+(x(k(K.$size(),1))?"s":"")+" '"+K.$join(", ")+"' not found in include "+h+": "+u,g(["source_location"],{source_location:this.$cursor()}))),this.$shift(),x(q)&&(x(G)&&O(W,!1)&&x(I["$empty?"]())||$["$[]="]("partial-option",""),this.$push_include(z,u,_,q,$))}else{X=B;try{X=w(d,"call",[u,p],function(t){return null==t&&(t=B),t.$read()}),this.$shift()}catch(e){if(t.rescue(e,[c("StandardError")]))try{return this.$logger().$error(this.$message_with_context("include "+h+" not readable: "+u,g(["source_location"],{source_location:this.$cursor()}))),this.$replace_next_line("Unresolved directive in "+this.path+" - include::"+s+"["+r+"]")}finally{t.pop_exception()}else throw e}this.$push_include(X,u,_,1,$)}return!0}),p($,"$resolve_include_path",function(t,e,r){var n,i=B,s=B,o=B;return(i=this.document,x(c("Helpers")["$uriish?"](t))||x(v(M("String"),this.dir)?B:t=""+this.dir+"/"+t))?x(i["$attr?"]("allow-uri-read"))?(x(i["$attr?"]("cache-uri"))?x((n=M("::","OpenURI","skip_raise"))&&M(n,"Cache","skip_raise")?"constant":B)||c("Helpers").$require_library("open-uri/cached","open-uri-cached"):b(c("RUBY_ENGINE_OPAL"))&&M("OpenURI"),[M("URI").$parse(t),"uri",t]):this.$replace_next_line("link:"+t+"[role=include]"):(s=i.$normalize_system_path(t,this.dir,B,g(["target_name"],{target_name:"include file"})),x(M("File")["$file?"](s)))?(o=i.$path_resolver().$relative_path(s,i.$base_dir()),[s,"file",o]):x(r["$[]"]("optional-option"))?(w(this.$logger(),"info",[],function t(){var e=null==t.$$s?this:t.$$s;return e.$message_with_context("optional include dropped because include file not found: "+s,g(["source_location"],{source_location:e.$cursor()}))},{$$s:this}),this.$shift(),!0):(this.$logger().$error(this.$message_with_context("include file not found: "+s,g(["source_location"],{source_location:this.$cursor()}))),this.$replace_next_line("Unresolved directive in "+this.path+" - include::"+t+"["+e+"]"))}),p($,"$pop_include",function(){var t;return x(this.include_stack["$empty?"]())||(t=y(this.include_stack.$pop()),this.lines=null==t[0]?B:t[0],this.file=null==t[1]?B:t[1],this.dir=null==t[2]?B:t[2],this.path=null==t[3]?B:t[3],this.lineno=null==t[4]?B:t[4],this.maxdepth=null==t[5]?B:t[5],this.process_lines=null==t[6]?B:t[6],this.look_ahead=0),B}),p($,"$split_delimited_value",function(t){return x(t["$include?"](","))?t.$split(","):t.$split(";")}),p($,"$skip_front_matter!",function(t,e){var r=B,n=B,i=B,s=B,o=B;if(null==e&&(e=!0),!S(r=t["$[]"](0),"---"))return B;for(n=t.$drop(0),t.$shift(),i=[],x(e)&&(this.lineno=f(this.lineno,1));!x(x(s=o=t["$empty?"]())?s:t["$[]"](0)["$=="](r));)i["$<<"](t.$shift()),x(e)&&(this.lineno=f(this.lineno,1));return x(o)?(w(t,"unshift",R(n)),x(e)&&(this.lineno=A(this.lineno,n.$size())),B):(t.$shift(),x(e)&&(this.lineno=f(this.lineno,1)),i)},-2),p($,"$resolve_expr_val",function(t){var e=B;return(x(t["$start_with?"]('"'))&&x(t["$end_with?"]('"'))||x(t["$start_with?"]("'"))&&x(t["$end_with?"]("'"))?(e=!0,t=t.$slice(1,A(t.$length(),1))):e=!1,x(t["$include?"](c("ATTR_REF_HEAD")))&&(t=this.document.$sub_attributes(t,g(["attribute_missing"],{attribute_missing:"drop"}))),x(e))?t:x(t["$empty?"]())?B:!!S(t,"true")||!S(t,"false")&&(x(t.$rstrip()["$empty?"]())?" ":x(t["$include?"]("."))?t.$to_f():t.$to_i())})},Opal.modules["asciidoctor/section"]=function(t){var e,r,n,i,s,o,a=t.module,l=t.klass,$=t.hash2,u=t.send2,c=t.find_super,h=t.eqeqeq,_=t.truthy,d=t.rb_plus,p=t.def,f=t.alias,m=t.rb_gt,g=t.eqeq,b=t.not,v=t.send,y=t.defs,x=[],k=t.nil;return t.add_stubs("attr_accessor,attr_reader,===,+,level,special,title,generate_id,>,==,sectnum,!,empty?,reftext,sub_placeholder,sub_quotes,compat_mode,[],attributes,context,assign_numeral,class,object_id,inspect,size,[]=,chr,length,gsub,downcase,delete,tr_s,end_with?,chop,start_with?,slice,key?,catalog,unique_id_start_index"),e=[a(x[0],"Asciidoctor")].concat(x),r=t.$r(e),i=[n=l(e[0],r("AbstractBlock"),"Section")].concat(e),s=t.$r(i),(o=n.$$prototype).document=o.next_section_index=o.parent=o.level=o.numeral=o.numbered=o.sectname=o.title=o.blocks=k,n.$attr_accessor("index"),n.$attr_accessor("sectname"),n.$attr_accessor("special"),n.$attr_accessor("numbered"),n.$attr_reader("caption"),p(n,"$initialize",function t(e,r,n,i){t.$$p;var o,a=k;return t.$$p=null,null==e&&(e=k),null==r&&(r=k),null==n&&(n=!1),null==i&&(i=$([],{})),u(this,c(this,"initialize",t,!1,!0),"initialize",[e,"section",i],null),o=h(s("Section"),e)?[_(a=r)?a:d(e.$level(),1),e.$special()]:[_(a=r)?a:1,!1],this.level=o[0],this.special=o[1],this.numbered=n,this.index=0},-1),f(n,"name","title"),p(n,"$generate_id",function(){return s("Section").$generate_id(this.$title(),this.document)}),p(n,"$sections?",function(){return m(this.next_section_index,0)}),p(n,"$sectnum",function(t,e){var r=k;return(null==t&&(t="."),null==e&&(e=k),e=_(r=e)?r:g(e,!1)?"":t,_(m(this.level,1))&&h(s("Section"),this.parent))?""+this.parent.$sectnum(t,t)+this.numeral+e:""+this.numeral+e},-1),p(n,"$xreftext",function(t){var e=k,r=k,n=k,i=k;if(null==t&&(t=k),_(e=this.$reftext())&&b(e["$empty?"]()))return e;if(!_(t))return this.$title();if(_(this.numbered))switch(t){case"full":if(n=g(r=this.sectname,"chapter")||g(r,"appendix")?this.$sub_placeholder(this.$sub_quotes("_%s_"),this.$title()):this.$sub_placeholder(this.$sub_quotes(_(this.document.$compat_mode())?"``%s''":'"`%s`"'),this.$title()),_(i=this.document.$attributes()["$[]"](""+r+"-refsig")))return""+i+" "+this.$sectnum(".",",")+" "+n;return""+this.$sectnum(".",",")+" "+n;case"short":if(_(i=this.document.$attributes()["$[]"](""+this.sectname+"-refsig")))return""+i+" "+this.$sectnum(".","");return this.$sectnum(".","");default:if(g(r=this.sectname,"chapter")||g(r,"appendix"))return this.$sub_placeholder(this.$sub_quotes("_%s_"),this.$title());return this.$title()}else if(g(r=this.sectname,"chapter")||g(r,"appendix"))return this.$sub_placeholder(this.$sub_quotes("_%s_"),this.$title());else return this.$title()},-1),p(n,"$<<",function t(e){var r=t.$$p||k;return t.$$p=null,g(e.$context(),"section")&&this.$assign_numeral(e),u(this,c(this,"<<",t,!1,!0),"<<",[e],r)}),p(n,"$to_s",function t(){var e=t.$$p||k,r=k;return(t.$$p=null,_(this.title))?(r=_(this.numbered)?""+this.$sectnum()+" "+this.title:this.title,"#<"+this.$class()+"@"+this.$object_id()+" {level: "+this.level+", title: "+r.$inspect()+", blocks: "+this.blocks.$size()+"}>"):u(this,c(this,"to_s",t,!1,!0),"to_s",[],e)}),y(n,"$generate_id",function(t,e){var r,n=k,i=k,o=k,a=k,l=k,$=k,u=k,c=k,h=k,p=k;if(i=_(o=(n=e.$attributes())["$[]"]("idprefix"))?o:"_",_(a=n["$[]"]("idseparator"))?(g(a.$length(),1)||b(l=a["$empty?"]())&&_((v(n,"[]=",r=["idseparator",a.$chr()]),a=r[r.length-1])))&&($=g(a,"-")||g(a,".")?" .-":" "+a+".-"):(a=(r=["_"," _.-"])[0],$=r[1]),u=""+i+t.$downcase().$gsub(s("InvalidSectionIdCharsRx"),""),_(l)?u=u.$delete(" "):(_((u=u.$tr_s($,a))["$end_with?"](a))&&(u=u.$chop()),_(i["$empty?"]())&&_(u["$start_with?"](a))&&(u=u.$slice(1,u.$length()))),!_(e.$catalog()["$[]"]("refs")["$key?"](u)))return u;for(c=e.$catalog()["$[]"]("refs"),h=s("Compliance").$unique_id_start_index();_(c["$[]"](p=""+u+a+h));)h=d(h,1);return p})},Opal.modules["asciidoctor/stylesheets"]=function(t){var e,r,n,i,s=t.module,o=t.klass,a=t.const_set,l=t.return_ivar,$=t.defs,u=t.def,c=t.truthy,h=t.hash2,_=[],d=t.nil,p=t.$$$;return t.add_stubs("join,new,rstrip,read,primary_stylesheet_data,write,primary_stylesheet_name,stylesheet_basename,for,read_stylesheet,coderay_stylesheet_data,coderay_stylesheet_name,pygments_stylesheet_data,pygments_stylesheet_name"),n=[r=o((e=[s(_[0],"Asciidoctor")].concat(_))[0],null,"Stylesheets")].concat(e),i=t.$r(n),r.$$prototype.primary_stylesheet_data=d,a(n[0],"DEFAULT_STYLESHEET_NAME","asciidoctor.css"),a(n[0],"STYLESHEETS_DIR",p("File").$join(i("DATA_DIR"),"stylesheets")),r.__instance__=r.$new(),$(r,"$instance",l("__instance__")),u(r,"$primary_stylesheet_name",function(){return i("DEFAULT_STYLESHEET_NAME")}),u(r,"$primary_stylesheet_data",function(){var t=d;return this.primary_stylesheet_data=c(t=this.primary_stylesheet_data)?t:p("File").$read(p("File").$join(i("STYLESHEETS_DIR"),"asciidoctor-default.css"),h(["mode"],{mode:i("FILE_READ_MODE")})).$rstrip()}),u(r,"$embed_primary_stylesheet",function(){return"<style>\n"+this.$primary_stylesheet_data()+"\n</style>"}),u(r,"$write_primary_stylesheet",function(t){return null==t&&(t="."),p("File").$write(p("File").$join(t,this.$primary_stylesheet_name()),this.$primary_stylesheet_data(),h(["mode"],{mode:i("FILE_WRITE_MODE")}))},-1),u(r,"$coderay_stylesheet_name",function(){return i("SyntaxHighlighter").$for("coderay").$stylesheet_basename()}),u(r,"$coderay_stylesheet_data",function(){return i("SyntaxHighlighter").$for("coderay").$read_stylesheet()}),u(r,"$embed_coderay_stylesheet",function(){return"<style>\n"+this.$coderay_stylesheet_data()+"\n</style>"}),u(r,"$write_coderay_stylesheet",function(t){return null==t&&(t="."),p("File").$write(p("File").$join(t,this.$coderay_stylesheet_name()),this.$coderay_stylesheet_data(),h(["mode"],{mode:i("FILE_WRITE_MODE")}))},-1),u(r,"$pygments_stylesheet_name",function(t){return null==t&&(t=d),i("SyntaxHighlighter").$for("pygments").$stylesheet_basename(t)},-1),u(r,"$pygments_stylesheet_data",function(t){return null==t&&(t=d),i("SyntaxHighlighter").$for("pygments").$read_stylesheet(t)},-1),u(r,"$embed_pygments_stylesheet",function(t){return null==t&&(t=d),"<style>\n"+this.$pygments_stylesheet_data(t)+"\n</style>"},-1),u(r,"$write_pygments_stylesheet",function(t,e){return null==t&&(t="."),null==e&&(e=d),p("File").$write(p("File").$join(t,this.$pygments_stylesheet_name(e)),this.$pygments_stylesheet_data(e),h(["mode"],{mode:i("FILE_WRITE_MODE")}))},-1)},Opal.modules["asciidoctor/table"]=function(t){var e,r,n,i,s,o,a,l,$,u,c,h,_,d,p,f,m,g=t.module,b=t.klass,v=t.const_set,y=t.def,x=t.alias,k=t.hash2,w=t.send2,A=t.find_super,E=t.truthy,S=t.rb_lt,C=t.rb_gt,O=t.eqeq,R=t.rb_times,I=t.rb_divide,T=t.send,z=t.rb_plus,F=t.rb_minus,N=t.return_val,L=t.to_a,D=t.gvars,q=t.neqeq,B=t.return_ivar,M=t.to_ary,j=t.regexp,P=t.not,U=t.thrower,H=[],Y=t.nil,G=t.$$$;return t.add_stubs("attr_accessor,send,attr_reader,new,[],<,>,to_i,==,[]=,attributes,truncate,*,/,to_f,empty?,body,each,<<,size,+,assign_column_widths,warn,logger,-,update_attributes,assign_width,round,head=,map,shift,reinitialize,nil?,unshift,foot=,pop,parent,sourcemap,dup,header_row?,table,style,merge,delete,start_with?,rstrip,slice,length,advance,lstrip,strip,split,include?,readlines,catalog_inline_anchor,=~,apply_subs,attr_writer,convert,text,!=,file,lineno,include,to_set,mark,key?,nested?,document,error,message_with_context,cursor_at_prev_line,nil_or_empty?,escape,columns,match,chop,end_with?,gsub,!,push_cellspec,cell_open?,close_cell,take_cellspec,squeeze,upto,times,cursor_before_mark,rowspan,activate_rowspan,colspan,end_of_row?,close_row,private,rows,effective_column_visits"),e=[g(H[0],"Asciidoctor")].concat(H),r=t.$r(e),i=[n=b(e[0],r("AbstractBlock"),"Table")].concat(e),s=t.$r(i),(o=n.$$prototype).attributes=o.document=o.rows=o.has_header_option=o.columns=Y,v(i[0],"DEFAULT_PRECISION",4),(l=(a=b(i[0],null,"Rows")).$$prototype).head=l.body=l.foot=Y,a.$attr_accessor("head","foot","body"),y(a,"$initialize",function(t,e,r){return null==t&&(t=[]),null==e&&(e=[]),null==r&&(r=[]),this.head=t,this.foot=e,this.body=r},-1),x(a,"[]","send"),y(a,"$by_section",function(){return[["head",this.head],["body",this.body],["foot",this.foot]]}),y(a,"$to_h",function(){return k(["head","body","foot"],{head:this.head,body:this.body,foot:this.foot})}),n.$attr_accessor("columns"),n.$attr_accessor("rows"),n.$attr_accessor("has_header_option"),n.$attr_reader("caption"),y(n,"$initialize",function t(e,r){t.$$p;var n,i=Y,o=Y,a=Y;return(t.$$p=null,w(this,A(this,"initialize",t,!1,!0),"initialize",[e,"table"],null),this.rows=s("Rows").$new(),this.columns=[],this.has_header_option=!1,E(i=r["$[]"]("width"))?(E(C(o=i.$to_i(),100))||E(S(o,1)))&&!(O(o,0)&&(O(i,"0")||O(i,"0%")))&&(o=100):o=100,this.attributes["$[]="]("tablepcwidth",o),E(this.document.$attributes()["$[]"]("pagewidth"))&&this.attributes["$[]="]("tableabswidth",O(a=R(I(o,100),this.document.$attributes()["$[]"]("pagewidth").$to_f()).$truncate(s("DEFAULT_PRECISION")),a.$to_i())?a.$to_i():a),E(r["$[]"]("rotate-option")))?(n=["orientation","landscape"],T(this.attributes,"[]=",n),n[n.length-1]):Y}),y(n,"$header_row?",function(){var t=Y;return E(t=this.has_header_option)&&E(this.rows.$body()["$empty?"]())?t:Y}),y(n,"$create_columns",function(t){var e=Y,r=Y,n=Y,i=Y;return e=[],r=Y,n=0,T(t,"each",[],function t(i){var o=null==t.$$s?this:t.$$s,a=Y,l=Y;return(null==i&&(i=Y),a=i["$[]"]("width"),e["$<<"](s("Column").$new(o,e.$size(),i)),E(S(a,0)))?(r=E(l=r)?l:[])["$<<"](e["$[]"](-1)):n=z(n,a)},{$$s:this}),E(C(i=(this.columns=e).$size(),0))&&(this.attributes["$[]="]("colcount",i),E(C(n,0))||E(r)||(n=Y),this.$assign_column_widths(n,r)),Y}),y(n,"$assign_column_widths",function(t,e){var r=Y,n=Y,i=Y,o=Y,a=Y;return null==t&&(t=Y),null==e&&(e=Y),r=s("DEFAULT_PRECISION"),n=i=0,E(t)?(E(e)&&(E(C(t,100))?(o=0,this.$logger().$warn("total column width must not exceed 100% when using autowidth columns; got "+t+"%")):(O((o=I(F(100,t),e.$size()).$truncate(r)).$to_i(),o)&&(o=o.$to_i()),t=100),a=k(["width","autowidth-option"],{width:o,"autowidth-option":""}),T(e,"each",[],function(t){return null==t&&(t=Y),t.$update_attributes(a)})),T(this.columns,"each",[],function(e){return null==e&&(e=Y),n=z(n,i=e.$assign_width(Y,t,r))})):(O((i=I(100,this.columns.$size()).$truncate(r)).$to_i(),i)&&(i=i.$to_i()),T(this.columns,"each",[],function(t){return null==t&&(t=Y),n=z(n,t.$assign_width(i,Y,r))})),O(n,100)||this.columns["$[]"](-1).$assign_width(z(F(100,n),i).$round(r),Y,r),Y},-1),y(n,"$partition_header_footer",function(t){var e,r=Y,n=Y;return e=["rowcount",(n=this.rows.$body()).$size()],T(this.attributes,"[]=",e),E(C(r=e[e.length-1],0))&&(E(this.has_header_option)?(this.rows["$head="]([T(n.$shift(),"map",[],function(t){return null==t&&(t=Y),t.$reinitialize(!0)})]),r=F(r,1)):E(this.has_header_option["$nil?"]())&&(this.has_header_option=!1,n.$unshift(T(n.$shift(),"map",[],function(t){return null==t&&(t=Y),t.$reinitialize(!1)})))),E(C(r,0))&&E(t["$[]"]("footer-option"))&&this.rows["$foot="]([n.$pop()]),Y}),($=b(r("Table"),r("AbstractNode"),"Column")).$$prototype.attributes=Y,$.$attr_accessor("style"),y($,"$initialize",function t(e,r,n){return t.$$p,t.$$p=null,null==n&&(n=k([],{})),w(this,A(this,"initialize",t,!1,!0),"initialize",[e,"table_column"],null),this.style=n["$[]"]("style"),n["$[]="]("colnumber",z(r,1)),E(n["$[]"]("width"))||n["$[]="]("width",1),E(n["$[]"]("halign"))||n["$[]="]("halign","left"),E(n["$[]"]("valign"))||n["$[]="]("valign","top"),this.$update_attributes(n)},-3),x($,"table","parent"),y($,"$assign_width",function(t,e,r){var n,i=Y;return E(e)&&O((t=I(R(this.attributes["$[]"]("width").$to_f(),100),e).$truncate(r)).$to_i(),t)&&(t=t.$to_i()),E(this.$parent().$attributes()["$[]"]("tableabswidth"))&&this.attributes["$[]="]("colabswidth",O(i=R(I(t,100),this.$parent().$attributes()["$[]"]("tableabswidth")).$truncate(r),i.$to_i())?i.$to_i():i),n=["colpcwidth",t],T(this.attributes,"[]=",n),n[n.length-1]}),y($,"$block?",N(!1)),y($,"$inline?",N(!1)),c=[u=b(r("Table"),r("AbstractBlock"),"Cell")].concat(e),h=t.$r(c),(_=u.$$prototype).document=_.reinitialize_args=_.attributes=_.cursor=_.text=_.subs=_.style=_.inner_document=_.source_location=_.colspan=_.rowspan=Y,v(c[0],"DOUBLE_LF",R(h("LF"),2)),u.$attr_accessor("colspan"),u.$attr_accessor("rowspan"),x(u,"column","parent"),u.$attr_reader("inner_document"),y(u,"$initialize",function t(e,r,n,i){t.$$p;var s,o=Y,a=Y,l=Y,$=Y,u=Y,c=Y,_=Y,d=Y,p=Y,f=Y,m=Y,g=Y,b=Y;if(t.$$p=null,null==n&&(n=k([],{})),null==i&&(i=k([],{})),w(this,A(this,"initialize",t,!1,!0),"initialize",[e,"table_cell"],null),this.cursor=this.reinitialize_args=Y,E(this.document.$sourcemap())&&(this.source_location=i["$[]"]("cursor").$dup()),E(e)&&(E(o=e.$table()["$header_row?"]())?O(o,"implicit")&&E(a=E(l=e.$style())?l:E($=n)?n["$[]"]("style"):$)&&((O(a,"asciidoc")||O(a,"literal"))&&(this.reinitialize_args=[e,r,E(l=n)?n.$merge():l,i]),a=Y):a=e.$style(),this.$update_attributes(e.$attributes())),E(n))switch(E(n["$empty?"]())?this.colspan=this.rowspan=Y:(s=[n.$delete("colspan"),n.$delete("rowspan")],this.colspan=s[0],this.rowspan=s[1],E(o)||(a=E(l=n["$[]"]("style"))?l:a),this.$update_attributes(n)),a){case"asciidoc":if(u=!0,c=i["$[]"]("cursor"),E((r=r.$rstrip())["$start_with?"](h("LF")))){for(_=1;E((r=r.$slice(1,r.$length()))["$start_with?"](h("LF")));)_=z(_,1);c.$advance(_)}else r=r.$lstrip();break;case"literal":for(d=!0,r=r.$rstrip();E(r["$start_with?"](h("LF")));)r=r.$slice(1,r.$length());break;default:p=!0,r=E(r)?r.$strip():""}else this.colspan=this.rowspan=Y,O(a,"asciidoc")&&(u=!0,c=i["$[]"]("cursor"));return E(u)?(f=this.document.$attributes().$delete("doctitle"),!E((m=r.$split(h("LF"),-1))["$empty?"]())&&E((g=m["$[]"](0))["$include?"]("::"))&&(b=h("PreprocessorReader").$new(this.document,[g]).$readlines(),O(g,b["$[]"](0))&&E(S(b.$size(),2))||(m.$shift(),E(b["$empty?"]())||T(m,"unshift",L(b)))),this.inner_document=h("Document").$new(m,k(["standalone","parent","cursor"],{standalone:!1,parent:this.document,cursor:c})),E(f["$nil?"]())||this.document.$attributes()["$[]="]("doctitle",f),this.subs=Y):E(d)?(this.content_model="verbatim",this.subs=h("BASIC_SUBS")):(E(p)&&(E(o)?this.cursor=i["$[]"]("cursor"):this.$catalog_inline_anchor(r,i["$[]"]("cursor"))),this.content_model="simple",this.subs=h("NORMAL_SUBS")),this.text=r,this.style=a},-3),y(u,"$reinitialize",function(t){if(E(t))this.reinitialize_args=Y;else{if(E(this.reinitialize_args))return T(G(h("Table"),"Cell"),"new",L(this.reinitialize_args));this.style=this.attributes["$[]"]("style")}return E(this.cursor)&&this.$catalog_inline_anchor(),this}),y(u,"$catalog_inline_anchor",function(t,e){var r;return(null==t&&(t=this.text),null==e&&(e=Y),E(e)||(e=(r=[this.cursor,Y])[0],this.cursor=r[1]),E(t["$start_with?"]("[["))&&E(h("LeadingInlineAnchorRx")["$=~"](t)))?h("Parser").$catalog_inline_anchor((r=D["~"])===Y?Y:r["$[]"](1),(r=D["~"])===Y?Y:r["$[]"](2),this,e,this.document):Y},-1),y(u,"$text",function(){return this.$apply_subs(this.text,this.subs)}),u.$attr_writer("text"),y(u,"$content",function(){var t=Y,e=Y;return O(t=this.style,"asciidoc")?this.inner_document.$convert():E(this.text["$include?"](h("DOUBLE_LF")))?T(this.$text().$split(h("BlankLineRx")),"map",[],function e(r){var n=null==e.$$s?this:e.$$s;return(null==r&&(r=Y),E(t)&&q(t,"header"))?h("Inline").$new(n.$parent(),"quoted",r,k(["type"],{type:t})).$convert():r},{$$s:this}):E((e=this.$text())["$empty?"]())?[]:E(t)&&q(t,"header")?[h("Inline").$new(this.$parent(),"quoted",e,k(["type"],{type:t})).$convert()]:[e]}),y(u,"$lines",function(){return this.text.$split(h("LF"))}),y(u,"$source",B("text")),y(u,"$file",function(){var t=Y;return E(t=this.source_location)?this.source_location.$file():t}),y(u,"$lineno",function(){var t=Y;return E(t=this.source_location)?this.source_location.$lineno():t}),y(u,"$to_s",function t(){var e=t.$$p||Y,r=Y;return t.$$p=null,""+w(this,A(this,"to_s",t,!1,!0),"to_s",[],e)+" - [text: "+this.text+", colspan: "+(E(r=this.colspan)?r:1)+", rowspan: "+(E(r=this.rowspan)?r:1)+", attributes: "+this.attributes+"]"}),p=[d=b(r("Table"),null,"ParserContext")].concat(e),f=t.$r(p),(m=d.$$prototype).delimiter=m.delimiter_rx=m.buffer=m.cellspecs=m.cell_open=m.format=m.start_cursor_data=m.reader=m.table=m.current_row=m.colcount=m.column_visits=m.active_rowspans=m.linenum=Y,d.$include(f("Logging")),v(p[0],"FORMATS",["psv","csv","dsv","tsv"].$to_set()),v(p[0],"DELIMITERS",k(["psv","csv","dsv","tsv","!sv"],{psv:["|",/\|/],csv:[",",/,/],dsv:[":",/:/],tsv:["	",/\t/],"!sv":["!",/!/]})),d.$attr_accessor("table"),d.$attr_accessor("format"),d.$attr_reader("colcount"),d.$attr_accessor("buffer"),d.$attr_reader("delimiter"),d.$attr_reader("delimiter_re"),y(d,"$initialize",function(t,e,r){var n,i=Y,s=Y;return null==r&&(r=k([],{})),this.start_cursor_data=(this.reader=t).$mark(),this.table=e,E(r["$key?"]("format"))?E(f("FORMATS")["$include?"](i=r["$[]"]("format")))?O(i,"tsv")?this.format="csv":O(this.format=i,"psv")&&E(e.$document()["$nested?"]())&&(i="!sv"):(this.$logger().$error(this.$message_with_context("illegal table format: "+i,k(["source_location"],{source_location:t.$cursor_at_prev_line()}))),n=["psv",E(e.$document()["$nested?"]())?"!sv":"psv"],this.format=n[0],i=n[1]):(n=["psv",E(e.$document()["$nested?"]())?"!sv":"psv"],this.format=n[0],i=n[1]),E(r["$key?"]("separator"))?E((s=r["$[]"]("separator"))["$nil_or_empty?"]())?(n=M(f("DELIMITERS")["$[]"](i)),this.delimiter=null==n[0]?Y:n[0],this.delimiter_rx=null==n[1]?Y:n[1]):O(s,"\\t")?(n=M(f("DELIMITERS")["$[]"]("tsv")),this.delimiter=null==n[0]?Y:n[0],this.delimiter_rx=null==n[1]?Y:n[1]):(n=[s,j([G("Regexp").$escape(s)])],this.delimiter=n[0],this.delimiter_rx=n[1]):(n=M(f("DELIMITERS")["$[]"](i)),this.delimiter=null==n[0]?Y:n[0],this.delimiter_rx=null==n[1]?Y:n[1]),this.colcount=E(e.$columns()["$empty?"]())?-1:e.$columns().$size(),this.buffer="",this.cellspecs=[],this.cell_open=!1,this.active_rowspans=[0],this.column_visits=0,this.current_row=[],this.linenum=-1},-3),y(d,"$starts_with_delimiter?",function(t){return t["$start_with?"](this.delimiter)}),y(d,"$match_delimiter",function(t){return this.delimiter_rx.$match(t)}),y(d,"$skip_past_delimiter",function(t){return this.buffer=""+this.buffer+t+this.delimiter,Y}),y(d,"$skip_past_escaped_delimiter",function(t){return this.buffer=""+this.buffer+t.$chop()+this.delimiter,Y}),y(d,"$buffer_has_unclosed_quotes?",function(t,e){var r=Y,n=Y,i=Y,s=Y;return null==t&&(t=Y),null==e&&(e='"'),!!O(r=E(t)?z(this.buffer,t).$strip():this.buffer.$strip(),e)||!!E(r["$start_with?"](e))&&((n=z(e,e),E(i=r["$end_with?"](e))&&E(r["$end_with?"](n))||E(r["$start_with?"](n)))?E(s=(r=r.$gsub(n,""))["$start_with?"](e))?r["$end_with?"](e)["$!"]():s:i["$!"]())},-1),y(d,"$take_cellspec",function(){return this.cellspecs.$shift()}),y(d,"$push_cellspec",function(t){var e=Y;return null==t&&(t=k([],{})),this.cellspecs["$<<"](E(e=t)?e:k([],{})),Y},-1),y(d,"$keep_cell_open",function(){return this.cell_open=!0,Y}),y(d,"$mark_cell_closed",function(){return this.cell_open=!1,Y}),y(d,"$cell_open?",B("cell_open")),y(d,"$cell_closed?",function(){return this.cell_open["$!"]()}),y(d,"$close_open_cell",function(t){return null==t&&(t=k([],{})),this.$push_cellspec(t),E(this["$cell_open?"]())&&this.$close_cell(!0),this.$advance(),Y},-1),y(d,"$close_cell",function(t){try{var e=U("return"),r=Y,n=Y,i=Y,s=Y,o=Y;return null==t&&(t=!1),O(this.format,"psv")?(r=this.buffer,this.buffer="",E(n=this.$take_cellspec())?i=E(s=n.$delete("repeatcol"))?s:1:(this.$logger().$error(this.$message_with_context("table missing leading separator; recovering automatically",k(["source_location"],{source_location:T(G(f("Reader"),"Cursor"),"new",L(this.start_cursor_data))}))),n=k([],{}),i=1)):(r=this.buffer.$strip(),this.buffer="",n=Y,i=1,O(this.format,"csv")&&P(r["$empty?"]())&&E(r["$include?"](o='"'))&&(E(r["$start_with?"](o))&&E(r["$end_with?"](o))?E(r=r.$slice(1,F(r.$length(),2)))?r=r.$strip().$squeeze(o):(this.$logger().$error(this.$message_with_context("unclosed quote in CSV data; setting cell to empty",k(["source_location"],{source_location:this.reader.$cursor_at_prev_line()}))),r=""):r=r.$squeeze(o))),T(1,"upto",[i],function o(a){var l=null==o.$$s?this:o.$$s,$=Y,u=Y,c=Y,h=Y;return(null==l.colcount&&(l.colcount=Y),null==l.table&&(l.table=Y),null==l.current_row&&(l.current_row=Y),null==l.reader&&(l.reader=Y),null==l.column_visits&&(l.column_visits=Y),null==l.linenum&&(l.linenum=Y),null==a&&(a=Y),O(l.colcount,-1)?(l.table.$columns()["$<<"]($=G(f("Table"),"Column").$new(l.table,F(z(l.table.$columns().$size(),a),1))),E(n)&&E(n["$key?"]("colspan"))&&E(C(u=F(n["$[]"]("colspan").$to_i(),1),0))&&(c=l.table.$columns().$size(),T(u,"times",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.table&&(r.table=Y),null==e&&(e=Y),r.table.$columns()["$<<"](G(f("Table"),"Column").$new(r.table,z(c,e)))},{$$s:l}))):E($=l.table.$columns()["$[]"](l.current_row.$size()))||(l.$logger().$error(l.$message_with_context("dropping cell because it exceeds specified number of columns",k(["source_location"],{source_location:l.reader.$cursor_before_mark()}))),e.$throw()),h=G(f("Table"),"Cell").$new($,r,n,k(["cursor"],{cursor:l.reader.$cursor_before_mark()})),l.reader.$mark(),P(h.$rowspan())||O(h.$rowspan(),1)||l.$activate_rowspan(h.$rowspan(),E(s=h.$colspan())?s:1),l.column_visits=z(l.column_visits,E(s=h.$colspan())?s:1),l.current_row["$<<"](h),E(l["$end_of_row?"]())&&(q(l.colcount,-1)||E(C(l.linenum,0))||E(t)&&O(a,i)))?l.$close_row():Y},{$$s:this,$$ret:e}),this.cell_open=!1,Y}catch(t){if(t===e)return t.$v;throw t}},-1),d.$private(),y(d,"$close_row",function(){return this.table.$rows().$body()["$<<"](this.current_row),O(this.colcount,-1)&&(this.colcount=this.column_visits),this.column_visits=0,this.current_row=[],this.active_rowspans.$shift(),E(this.active_rowspans["$[]"](0))||this.active_rowspans["$[]="](0,0),Y}),y(d,"$activate_rowspan",function(t,e){return T(1,"upto",[F(t,1)],function t(r){var n,i=null==t.$$s?this:t.$$s,s=Y;return null==i.active_rowspans&&(i.active_rowspans=Y),null==r&&(r=Y),n=[r,z(E(s=i.active_rowspans["$[]"](r))?s:0,e)],T(i.active_rowspans,"[]=",n),n[n.length-1]},{$$s:this}),Y}),y(d,"$end_of_row?",function(){var t=Y;return E(t=this.colcount["$=="](-1))?t:this.$effective_column_visits()["$=="](this.colcount)}),y(d,"$effective_column_visits",function(){return z(this.column_visits,this.active_rowspans["$[]"](0))}),y(d,"$advance",function(){return this.linenum=z(this.linenum,1)})},Opal.modules["asciidoctor/writer"]=function(t){var e,r,n,i,s,o,a,l,$=t.module,u=t.truthy,c=t.rb_plus,h=t.hash2,_=t.def,d=t.return_val,p=[],f=t.nil,m=t.$$$;return t.add_stubs("respond_to?,write,+,chomp,include"),r=(e=[$(p[0],"Asciidoctor")].concat(p))[0],i=[n=$(r,"Writer")].concat(e),s=t.$r(i),_(n,"$write",function(t,e){return u(e["$respond_to?"]("write"))?e.$write(c(t.$chomp(),s("LF"))):m("File").$write(e,t,h(["mode"],{mode:s("FILE_WRITE_MODE")})),f}),a=[o=$(e[0],"VoidWriter")].concat(e),l=t.$r(a),o.$include(l("Writer")),_(o,"$write",d(f))},Opal.modules["asciidoctor/load"]=function(t){var e,r,n,i,s,o=t.module,a=t.hash2,l=t.truthy,$=t.neqeq,u=t.not,c=t.eqeqeq,h=t.send,_=t.to_ary,d=t.rb_plus,p=t.eqeq,f=t.def,m=[],g=t.nil,b=t.$$$;return t.add_stubs("merge,[],start,!=,logger,key?,logger=,new,!,===,dup,tap,each,partition,[]=,split,gsub,+,respond_to?,keys,raise,join,ancestors,class,==,at,to_i,mtime,absolute_path,path,dirname,basename,extname,read,rewind,drop,record,parse,exception,message,set_backtrace,backtrace,stack_trace=,stack_trace,open,load"),r=[e=o(m[0],"Asciidoctor")].concat(m),i=[n=t.get_singleton_class(e)].concat(r),s=t.$r(i),f(n,"$load",function(e,r){var n,i,o,f=g,m=g,v=g,y=g,x=g,k=g,w=g,A=g,E=g,S=g;null==r&&(r=a([],{}));try{if(r=r.$merge(),l(f=r["$[]"]("timings"))&&f.$start("read"),l(r["$key?"]("logger"))&&$(m=r["$[]"]("logger"),s("LoggerManager").$logger())&&s("LoggerManager")["$logger="](l(v=m)?v:s("NullLogger").$new()),u(y=r["$[]"]("attributes"))?y=a([],{}):c(b("Hash"),y)?y=y.$merge():l((i=b("::","Java","skip_raise"))&&(n=b(i,"JavaUtil","skip_raise"))&&b(n,"Map","skip_raise")?"constant":g)&&c(b(b(b("Java"),"JavaUtil"),"Map"),y)?y=y.$dup():c(b("Array"),y)?y=h(a([],{}),"tap",[],function(t){return null==t&&(t=g),h(y,"each",[],function(e){var r,n,i=g,s=g;return null==e&&(e=g),n=e.$partition("="),r=_(n),i=null==r[0]?g:r[0],null==r[1]||r[1],s=null==r[2]?g:r[2],r=[i,s],h(t,"[]=",r),r[r.length-1]})}):c(b("String"),y)?y=h(a([],{}),"tap",[],function(t){return null==t&&(t=g),h(y.$gsub(s("SpaceDelimiterRx"),d("\\1",s("NULL"))).$gsub(s("EscapedSpaceRx"),"\\1").$split(s("NULL")),"each",[],function(e){var r,n,i=g,s=g;return null==e&&(e=g),n=e.$partition("="),r=_(n),i=null==r[0]?g:r[0],null==r[1]||r[1],s=null==r[2]?g:r[2],r=[i,s],h(t,"[]=",r),r[r.length-1]})}):l(y["$respond_to?"]("keys"))&&l(y["$respond_to?"]("[]"))?y=h(a([],{}),"tap",[],function(t){return null==t&&(t=g),h(y.$keys(),"each",[],function(e){var r;return null==e&&(e=g),r=[e,y["$[]"](e)],h(t,"[]=",r),r[r.length-1]})}):this.$raise(b("ArgumentError"),"illegal type for attributes option: "+y.$class().$ancestors().$join(" < ")),c(b("File"),e))r["$[]="]("input_mtime",p(s("RUBY_ENGINE"),"jruby")?b("Time").$at(e.$mtime().$to_i()):e.$mtime()),y["$[]="]("docfile",x=b("File").$absolute_path(e.$path())),y["$[]="]("docdir",b("File").$dirname(x)),y["$[]="]("docname",s("Helpers").$basename(x,(o=["docfilesuffix",s("Helpers").$extname(x)],h(y,"[]=",o),o[o.length-1]))),k=e.$read();else if(l(e["$respond_to?"]("read"))){try{e.$rewind()}catch(e){if(t.rescue(e,[s("StandardError")]))t.pop_exception();else throw e}k=e.$read()}else c(b("String"),e)?k=e:c(b("Array"),e)?k=e.$drop(0):l(e)&&this.$raise(b("ArgumentError"),"unsupported input type: "+e.$class());return l(f)&&(f.$record("read"),f.$start("parse")),r["$[]="]("attributes",y),w=p(r["$[]"]("parse"),!1)?s("Document").$new(k,r):s("Document").$new(k,r).$parse(),l(f)&&f.$record("parse"),w}catch(e){if(t.rescue(e,[s("StandardError")])){A=e;try{try{E="asciidoctor: FAILED: "+(l(v=y["$[]"]("docfile"))?v:"<stdin>")+": Failed to load AsciiDoc document",l(A["$respond_to?"]("exception"))?(S=A.$exception(""+E+" - "+A.$message())).$set_backtrace(A.$backtrace()):(S=A.$class().$new(E,A))["$stack_trace="](A.$stack_trace())}catch(e){if(t.rescue(e,[s("StandardError")]))try{S=A}finally{t.pop_exception()}else throw e}return this.$raise(S)}finally{t.pop_exception()}}else throw e}},-2),f(n,"$load_file",function(t,e){return null==e&&(e=a([],{})),h(b("File"),"open",[t,s("FILE_READ_MODE")],function t(r){var n=null==t.$$s?this:t.$$s;return null==r&&(r=g),n.$load(r,e)},{$$s:this})},-2)},Opal.modules["asciidoctor/convert"]=function(t){var e,r,n,i,s,o=t.module,a=t.hash2,l=t.eqeqeq,$=t.truthy,u=t.eqeq,c=t.rb_ge,h=t.not,_=t.rb_lt,d=t.neqeq,p=t.def,f=t.send,m=t.alias,g=[],b=t.nil,v=t.$$$;return t.add_stubs("delete,merge,===,absolute_path,path,load,respond_to?,[]=,key?,fetch,[],dirname,expand_path,join,attributes,outfilesuffix,==,raise,pwd,>=,safe,normalize_system_path,mkdir_p,directory?,!,convert,write,attr,uriish?,basebackend?,attr?,<,include?,syntax_highlighter,write_stylesheet?,write_primary_stylesheet,instance,to_s,read_asset,file?,!=,write_stylesheet,open,convert_file"),r=[e=o(g[0],"Asciidoctor")].concat(g),i=[n=t.get_singleton_class(e)].concat(r),s=t.$r(i),p(n,"$convert",function(t,e){var r=b,n=b,i=b,o=b,p=b,f=b,m=b,g=b,y=b,x=b,k=b,w=b,A=b,E=b,S=b,C=b,O=b,R=b,I=b,T=b,z=b,F=b,N=b,L=b;if(null==e&&(e=a([],{})),(e=e.$merge()).$delete("parse"),r=e.$delete("to_dir"),n=e.$delete("mkdirs"),l(!0,i=o=e.$delete("to_file"))||l(b,i))!$(p=r)&&l(v("File"),t)&&(f=v("File").$absolute_path(t.$path())),o=b;else if(l(!1,i))o=b;else{if(l("/dev/null",i))return this.$load(t,e);$(m=o["$respond_to?"]("write"))||e["$[]="]("to_file",p=o)}return(!$(e["$key?"]("standalone"))&&($(f)||$(p)?e["$[]="]("standalone",e.$fetch("header_footer",!0)):$(e["$key?"]("header_footer"))&&e["$[]="]("standalone",e["$[]"]("header_footer"))),$(f)?e["$[]="]("to_dir",g=v("File").$dirname(f)):$(p)&&($(r)?$(o)?e["$[]="]("to_dir",v("File").$dirname(v("File").$expand_path(o,r))):e["$[]="]("to_dir",v("File").$expand_path(r)):$(o)&&e["$[]="]("to_dir",v("File").$dirname(v("File").$expand_path(o)))),y=this.$load(t,e),$(f)?u(x=v("File").$join(g,""+y.$attributes()["$[]"]("docname")+y.$outfilesuffix()),f)&&this.$raise(v("IOError"),"input file and output file cannot be the same: "+x):$(p)?(k=$(e["$key?"]("base_dir"))?v("File").$expand_path(e["$[]"]("base_dir")):v("Dir").$pwd(),w=$(c(y.$safe(),v(s("SafeMode"),"SAFE")))?k:b,$(r)?(g=y.$normalize_system_path(r,k,w,a(["target_name","recover"],{target_name:"to_dir",recover:!1})),$(o)?(x=y.$normalize_system_path(o,g,b,a(["target_name","recover"],{target_name:"to_dir",recover:!1})),g=v("File").$dirname(x)):x=v("File").$join(g,""+y.$attributes()["$[]"]("docname")+y.$outfilesuffix())):$(o)&&(x=y.$normalize_system_path(o,k,w,a(["target_name","recover"],{target_name:"to_dir",recover:!1})),g=v("File").$dirname(x)),l(v("File"),t)&&u(x,v("File").$absolute_path(t.$path()))&&this.$raise(v("IOError"),"input file and output file cannot be the same: "+x),$(n)?s("Helpers").$mkdir_p(g):$(v("File")["$directory?"](g))||this.$raise(v("IOError"),"target directory does not exist: "+r+" (hint: set :mkdirs option)")):(x=o,g=b),A=$(x)&&h(m)?y.$convert(a(["outfile","outdir"],{outfile:x,outdir:g})):y.$convert(),$(x))?(y.$write(A,x),h(m)&&$(_(y.$safe(),v(s("SafeMode"),"SECURE")))&&$(y["$attr?"]("linkcss"))&&$(y["$attr?"]("copycss"))&&$(y["$basebackend?"]("html"))&&h($(i=E=y.$attr("stylesdir"))?s("Helpers")["$uriish?"](E):i)&&($(S=y.$attr("stylesheet"))&&($(s("DEFAULT_STYLESHEET_KEYS")["$include?"](S))?C=!0:h(s("Helpers")["$uriish?"](S))&&(O=!0)),R=$(i=I=y.$syntax_highlighter())?I["$write_stylesheet?"](y):i,($(C)||$(O)||$(R))&&(T=y.$normalize_system_path(E,g,$(c(y.$safe(),v(s("SafeMode"),"SAFE")))?g:b),$(n)?s("Helpers").$mkdir_p(T):$(v("File")["$directory?"](T))||this.$raise(v("IOError"),"target stylesheet directory does not exist: "+T+" (hint: set :mkdirs option)"),$(C)?s("Stylesheets").$instance().$write_primary_stylesheet(T):$(O)&&d(z=u(z=y.$attr("copycss"),"")||u(z,!0)?y.$normalize_system_path(S):y.$normalize_system_path(z.$to_s()),F=y.$normalize_system_path(S,T,$(c(y.$safe(),v(s("SafeMode"),"SAFE")))?g:b))&&$(N=y.$read_asset(z,a(["warn_on_failure","label"],{warn_on_failure:v("File")["$file?"](F)["$!"](),label:"stylesheet"})))&&(d(L=v("File").$dirname(F),T)&&h(v("File")["$directory?"](L))&&($(n)?s("Helpers").$mkdir_p(L):this.$raise(v("IOError"),"target stylesheet directory does not exist: "+L+" (hint: set :mkdirs option)")),v("File").$write(F,N,a(["mode"],{mode:s("FILE_WRITE_MODE")}))),$(R)&&I.$write_stylesheet(y,T))),y):A},-2),p(n,"$convert_file",function(t,e){return null==e&&(e=a([],{})),f(v("File"),"open",[t,s("FILE_READ_MODE")],function t(r){var n=null==t.$$s?this:t.$$s;return null==r&&(r=b),n.$convert(r,e)},{$$s:this})},-2),m(n,"render","convert"),m(n,"render_file","convert_file")},Opal.modules["asciidoctor/syntax_highlighter/highlightjs"]=function(t){var e,r,n,i,s,o=t.module,a=t.klass,l=t.slice,$=t.send2,u=t.find_super,c=t.to_a,h=t.def,_=t.hash2,d=t.send,p=t.truthy,f=t.return_val,m=t.eqeq,g=[],b=t.nil,v=t.$$$;return t.add_stubs("register_for,merge,proc,[]=,attr,[],==,attr?,join,map,split,lstrip"),e=[o(g[0],"Asciidoctor")].concat(g),i=[n=a((r=t.$r(e))("SyntaxHighlighter"),v(r("SyntaxHighlighter"),"Base"),"HighlightJsAdapter")].concat(e),s=t.$r(i),n.$register_for("highlightjs","highlight.js"),h(n,"$initialize",function t(e){var r,n=t.$$p||b;return t.$$p=null,r=l(arguments),$(this,u(this,"initialize",t,!1,!0),"initialize",c(r),n),this.name=this.pre_class="highlightjs"},-1),h(n,"$format",function t(e,r,n){return t.$$p,t.$$p=null,$(this,u(this,"format",t,!1,!0),"format",[e,r,n.$merge(_(["transform"],{transform:d(this,"proc",[],function(t,e){var n,i=b;return null==t&&(t=b),null==e&&(e=b),d(e,"[]=",n=["class","language-"+(p(i=r)?i:"none")+" hljs"]),n[n.length-1]})}))],null)}),h(n,"$docinfo?",f(!0)),h(n,"$docinfo",function(t,e,r){var n=b;return(n=e.$attr("highlightjsdir",""+r["$[]"]("cdn_base_url")+"/highlight.js/"+s("HIGHLIGHT_JS_VERSION")),m(t,"head"))?'<link rel="stylesheet" href="'+n+"/styles/"+e.$attr("highlightjs-theme","github")+'.min.css"'+r["$[]"]("self_closing_tag_slash")+">":'<script src="'+n+'/highlight.min.js"></script>\n'+(p(e["$attr?"]("highlightjs-languages"))?d(e.$attr("highlightjs-languages").$split(","),"map",[],function(t){return null==t&&(t=b),'<script src="'+n+"/languages/"+t.$lstrip()+'.min.js"></script>\n'}).$join():"")+"<script>\nif (!hljs.initHighlighting.called) {\n  hljs.initHighlighting.called = true\n  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })\n}\n</script>"})},Opal.modules["asciidoctor/syntax_highlighter"]=function(t){var e,r,n,i,s,o,a,l,$,u,c,h,_,d,p,f,m,g,b,v,y,x,k,w=t.module,A=t.hash2,E=t.def,S=t.return_val,C=t.defs,O=t.slice,R=t.send,I=t.to_a,T=t.truthy,z=t.eqeqeq,F=t.Class,N=t.klass,L=t.class_variable_set,D=t.class_variable_get,q=t.top,B=[],M=t.nil,j=t.$$$;return t.add_stubs("attr_reader,raise,class,extend,private_class_method,register,map,to_s,each,[]=,registry,[],for,===,new,name,private,include,delete,join,content"),r=(e=[w(B[0],"Asciidoctor")].concat(B))[0],i=[n=w(r,"SyntaxHighlighter")].concat(e),s=t.$r(i),n.$attr_reader("name"),E(n,"$initialize",function(t,e,r){return null==e&&(e="html5"),null==r&&(r=A([],{})),this.name=this.pre_class=t},-2),E(n,"$docinfo?",S(M)),E(n,"$docinfo",function(t,e,r){return this.$raise(j("NotImplementedError"),""+s("SyntaxHighlighter")+" subclass "+this.$class()+" must implement the #docinfo method since #docinfo? returns true")}),E(n,"$highlight?",S(M)),E(n,"$highlight",function(t,e,r,n){return this.$raise(j("NotImplementedError"),""+s("SyntaxHighlighter")+" subclass "+this.$class()+" must implement the #highlight method since #highlight? returns true")}),E(n,"$format",function(t,e,r){return this.$raise(j("NotImplementedError"),""+s("SyntaxHighlighter")+" subclass "+this.$class()+" must implement the #format method")}),E(n,"$write_stylesheet?",S(M)),E(n,"$write_stylesheet",function(t,e){return this.$raise(j("NotImplementedError"),""+s("SyntaxHighlighter")+" subclass "+this.$class()+" must implement the #write_stylesheet method since #write_stylesheet? returns true")}),C(n,"$included",function(t){return t.$extend(s("Config"))}),n.$private_class_method("included"),a=[o=w(i[0],"Config")].concat(i),l=t.$r(a),E(o,"$register_for",function(t){var e;return e=O(arguments),R(l("SyntaxHighlighter"),"register",[this].concat(I(R(e,"map",[],function(t){return null==t&&(t=M),t.$to_s()}))))},-1),u=[$=w(i[0],"Factory")].concat(i),c=t.$r(u),E($,"$register",function(t,e){var r;return r=O(arguments,1),R(r,"each",[],function e(r){var n,i=null==e.$$s?this:e.$$s;return null==r&&(r=M),n=[r,t],R(i.$registry(),"[]=",n),n[n.length-1]},{$$s:this})},-2),E($,"$for",function(t){return this.$registry()["$[]"](t)}),E($,"$create",function(t,e,r){var n=M;return(null==e&&(e="html5"),null==r&&(r=A([],{})),T(n=this.$for(t)))?(z(F,n)&&(n=n.$new(t,e,r)),T(n.$name())||this.$raise(j("NameError"),""+n.$class()+" must specify a value for `name'"),n):M},-2),$.$private(),E($,"$registry",function(){return this.$raise(j("NotImplementedError"),""+c("Factory")+" subclass "+this.$class()+" must implement the #registry method")}),_=[h=N(i[0],null,"CustomFactory")].concat(i),d=t.$r(_),h.$include(d("Factory")),E(h,"$initialize",function(t){var e=M;return null==t&&(t=M),this.registry=T(e=t)?e:A([],{})},-1),h.$private(),h.$attr_reader("registry"),f=[p=w(i[0],"DefaultFactory")].concat(i),m=t.$r(f),p.$include(m("Factory")),L(f[0],"@@registry",A([],{})),p.$private(),E(p,"$registry",function(){return D(f[0],"@@registry",!1)}),b=[g=N(i[0],s("CustomFactory"),"DefaultFactoryProxy")].concat(i),v=t.$r(b),g.$include(v("DefaultFactory")),x=[y=N(i[0],null,"Base")].concat(i),k=t.$r(x),y.$$prototype.pre_class=M,y.$include(k("SyntaxHighlighter")),E(y,"$format",function(t,e,r){var n=M,i=M,s=M,o=M;return(n=T(r["$[]"]("nowrap"))?""+this.pre_class+" highlight nowrap":""+this.pre_class+" highlight",T(i=r["$[]"]("transform")))?(i["$[]"](s=A(["class"],{class:n}),o=T(e)?A(["data-lang"],{"data-lang":e}):A([],{})),T(e=o.$delete("data-lang"))&&o["$[]="]("data-lang",e),"<pre"+R(s,"map",[],function(t,e){return null==t&&(t=M),null==e&&(e=M)," "+t+'="'+e+'"'}).$join()+"><code"+R(o,"map",[],function(t,e){return null==t&&(t=M),null==e&&(e=M)," "+t+'="'+e+'"'}).$join()+">"+t.$content()+"</code></pre>"):'<pre class="'+n+'"><code'+(T(e)?' data-lang="'+e+'"':"")+">"+t.$content()+"</code></pre>"}),n.$extend(s("DefaultFactory")),q.$require("asciidoctor/syntax_highlighter.rb/../syntax_highlighter/highlightjs"),M},Opal.modules["asciidoctor/timings"]=function(t){var e,r,n,i,s,o,a,l,$,u=t.module,c=t.klass,h=t.hash2,_=t.def,d=t.send,p=t.rb_minus,f=t.slice,m=t.rb_plus,g=t.truthy,b=t.rb_gt,v=t.gvars,y=t.eqeq,x=t.const_set,k=[],w=t.nil,A=t.$$$;return t.add_stubs("[]=,now,-,delete,reduce,+,[],>,time,puts,sprintf,to_f,read_parse,convert,read_parse_convert,private,==,const_defined?,clock_gettime"),a=[r=c((e=[u(k[0],"Asciidoctor")].concat(k))[0],null,"Timings")].concat(e),l=t.$r(a),(($=r.$$prototype).timers=$.log=w,_(r,"$initialize",function(){return this.log=h([],{}),this.timers=h([],{})}),_(r,"$start",function(t){var e;return e=[t,this.$now()],d(this.timers,"[]=",e),e[e.length-1]}),_(r,"$record",function(t){var e;return e=[t,p(this.$now(),this.timers.$delete(t))],d(this.log,"[]=",e),e[e.length-1]}),_(r,"$time",function(t){var e,r=w;return(e=f(arguments),r=d(e,"reduce",[0],function t(e,r){var n=null==t.$$s?this:t.$$s,i=w;return null==n.log&&(n.log=w),null==e&&(e=w),null==r&&(r=w),m(e,g(i=n.log["$[]"](r))?i:0)},{$$s:this}),g(b(r,0)))?r:w},-1),_(r,"$read",function(){return this.$time("read")}),_(r,"$parse",function(){return this.$time("parse")}),_(r,"$read_parse",function(){return this.$time("read","parse")}),_(r,"$convert",function(){return this.$time("convert")}),_(r,"$read_parse_convert",function(){return this.$time("read","parse","convert")}),_(r,"$write",function(){return this.$time("write")}),_(r,"$total",function(){return this.$time("read","parse","convert","write")}),_(r,"$print_report",function(t,e){return null==v.stdout&&(v.stdout=w),null==t&&(t=v.stdout),null==e&&(e=w),g(e)&&t.$puts("Input file: "+e),t.$puts("  Time to read and parse source: "+this.$sprintf("%05.5f",this.$read_parse().$to_f())),t.$puts("  Time to convert document: "+this.$sprintf("%05.5f",this.$convert().$to_f())),t.$puts("  Total time (read, parse and convert): "+this.$sprintf("%05.5f",this.$read_parse_convert().$to_f()))},-1),r.$private(),g(A("Process")["$const_defined?"]("CLOCK_MONOTONIC",!1))&&y((n=A("::","Process","skip_raise"))&&(i=n)&&(s=i)&&((o=s.$clock_gettime)&&!o.$$stub||s["$respond_to_missing?"]("clock_gettime"))?"method":w,"method"))?(x(a[0],"CLOCK_ID",A(A("Process"),"CLOCK_MONOTONIC")),_(r,"$now",function(){return A("Process").$clock_gettime(l("CLOCK_ID"))})):_(r,"$now",function(){return A("Time").$now()})},Opal.modules["asciidoctor/converter/html5"]=function(t){var e,r,n,i,s,o,a=t.module,l=t.klass,$=t.const_set,u=t.hash2,c=t.regexp,h=t.eqeq,_=t.def,d=t.send2,p=t.find_super,f=t.truthy,m=t.send,g=t.rb_gt,b=t.rb_plus,v=t.not,y=t.neqeq,x=t.rb_le,k=t.rb_lt,w=t.to_ary,A=t.rb_times,E=t.rb_minus,S=t.gvars,C=t.return_val,O=t.alias,R=t.eqeqeq,I=t.slice,T=t.to_a,z=[],F=t.nil,N=t.$$$;return t.add_stubs("register_for,default=,==,[],init_backend_traits,node_name,convert_inline_quoted,convert_paragraph,convert_inline_anchor,convert_section,convert_listing,convert_literal,convert_ulist,convert_olist,convert_dlist,convert_admonition,convert_colist,convert_embedded,convert_example,convert_floating_title,convert_image,convert_inline_break,convert_inline_button,convert_inline_callout,convert_inline_footnote,convert_inline_image,convert_inline_indexterm,convert_inline_kbd,convert_inline_menu,convert_open,convert_page_break,convert_preamble,convert_quote,convert_sidebar,convert_stem,convert_table,convert_thematic_break,convert_verse,convert_video,convert_document,convert_toc,convert_pass,convert_audio,empty?,attr,attr?,<<,include?,sub_replacements,gsub,extname,slice,length,doctitle,normalize_web_path,primary_stylesheet_data,instance,read_contents,syntax_highlighter,size,docinfo,id,sections?,doctype,role?,role,join,noheader,convert,converter,generate_manname_section,header?,notitle,title,header,each,authors,>,name,email,sub_macros,+,downcase,concat,content,!,footnotes?,footnotes,index,text,nofooter,docinfo?,[]=,delete_at,inspect,!=,to_i,attributes,document,sections,level,caption,captioned_title,<=,numbered,<,sectname,sectnum,convert_outline,title?,icon_uri,compact,media_uri,option?,append_boolean_attribute,style,items,blocks?,text?,chomp,safe,read_svg_contents,alt,image_uri,encode_attribute_value,append_link_constraint_attrs,highlight?,to_sym,format,*,-,count,end_with?,start_with?,list_marker_keyword,parent,warn,logger,context,error,content_only,new,columns,to_h,rows,colspan,rowspan,unshift,shift,split,pop,nil_or_empty?,type,===,catalog,get_root_document,xreftext,target,reftext,chop,sub,match,private,upcase,nested?,parent_document,handles?,to_s,send"),e=[a(z[0],"Asciidoctor")].concat(z),i=[n=l((r=t.$r(e))("Converter"),N(r("Converter"),"Base"),"Html5Converter")].concat(e),s=t.$r(i),(o=n.$$prototype).void_element_slash=o.xml_mode=o.refs=o.resolving_xref=F,n.$register_for("html5"),$(i[0],"QUOTE_TAGS",u(["monospaced","emphasis","strong","double","single","mark","superscript","subscript","asciimath","latexmath"],{monospaced:["<code>","</code>",!0],emphasis:["<em>","</em>",!0],strong:["<strong>","</strong>",!0],double:["&#8220;","&#8221;"],single:["&#8216;","&#8217;"],mark:["<mark>","</mark>",!0],superscript:["<sup>","</sup>",!0],subscript:["<sub>","</sub>",!0],asciimath:["\\$","\\$"],latexmath:["\\(","\\)"]}))["$default="](["",""]),$(i[0],"DropAnchorRx",/<(?:a\b[^>]*|\/a)>/),$(i[0],"StemBreakRx",/ *\\\n(?:\\?\n)*|\n\n+/),$(i[0],"SvgPreambleRx",c(["^",s("CC_ALL"),"*?(?=<svg[\\s>])"])),$(i[0],"SvgStartTagRx",/^<svg(?:\s[^>]*)?>/),$(i[0],"DimensionAttributeRx",c(["\\s(?:width|height|style)=([\"'])",s("CC_ANY"),"*?\\1"])),_(n,"$initialize",function(t,e){var r=F;return null==e&&(e=u([],{})),this.backend=t,h(e["$[]"]("htmlsyntax"),"xml")?(r="xml",this.xml_mode=!0,this.void_element_slash="/"):(r="html",this.xml_mode=F,this.void_element_slash=""),this.$init_backend_traits(u(["basebackend","filetype","htmlsyntax","outfilesuffix","supports_templates"],{basebackend:"html",filetype:"html",htmlsyntax:r,outfilesuffix:".html",supports_templates:!0}))},-2),_(n,"$convert",function t(e,r,n){var i=t.$$p||F;switch(t.$$p=null,null==r&&(r=e.$node_name()),null==n&&(n=F),r){case"inline_quoted":return this.$convert_inline_quoted(e);case"paragraph":return this.$convert_paragraph(e);case"inline_anchor":return this.$convert_inline_anchor(e);case"section":return this.$convert_section(e);case"listing":return this.$convert_listing(e);case"literal":return this.$convert_literal(e);case"ulist":return this.$convert_ulist(e);case"olist":return this.$convert_olist(e);case"dlist":return this.$convert_dlist(e);case"admonition":return this.$convert_admonition(e);case"colist":return this.$convert_colist(e);case"embedded":return this.$convert_embedded(e);case"example":return this.$convert_example(e);case"floating_title":return this.$convert_floating_title(e);case"image":return this.$convert_image(e);case"inline_break":return this.$convert_inline_break(e);case"inline_button":return this.$convert_inline_button(e);case"inline_callout":return this.$convert_inline_callout(e);case"inline_footnote":return this.$convert_inline_footnote(e);case"inline_image":return this.$convert_inline_image(e);case"inline_indexterm":return this.$convert_inline_indexterm(e);case"inline_kbd":return this.$convert_inline_kbd(e);case"inline_menu":return this.$convert_inline_menu(e);case"open":return this.$convert_open(e);case"page_break":return this.$convert_page_break(e);case"preamble":return this.$convert_preamble(e);case"quote":return this.$convert_quote(e);case"sidebar":return this.$convert_sidebar(e);case"stem":return this.$convert_stem(e);case"table":return this.$convert_table(e);case"thematic_break":return this.$convert_thematic_break(e);case"verse":return this.$convert_verse(e);case"video":return this.$convert_video(e);case"document":return this.$convert_document(e);case"toc":return this.$convert_toc(e);case"pass":return this.$convert_pass(e);case"audio":return this.$convert_audio(e);default:return d(this,p(this,"convert",t,!1,!0),"convert",[e,r,n],i)}},-2),_(n,"$convert_document",function(t){var e=F,r=F,n=F,i=F,o=F,a=F,l=F,$=F,c=F,_=F,d=F,p=F,y=F,x=F,k=F,w=F,A=F,E=F,S=F,C=F,O=F,R=F,I=F,T=F,z=F;return e="<br"+(r=this.void_element_slash)+">",f((n=t.$attr("asset-uri-scheme","https"))["$empty?"]())||(n=""+n+":"),i=""+n+"//cdnjs.cloudflare.com/ajax/libs",o=t["$attr?"]("linkcss"),a=f(t["$attr?"]("max-width"))?' style="max-width: '+t.$attr("max-width")+';"':"",l=["<!DOCTYPE html>"],$=f(t["$attr?"]("nolang"))?"":' lang="'+t.$attr("lang","en")+'"',l["$<<"]("<html"+(f(this.xml_mode)?' xmlns="http://www.w3.org/1999/xhtml"':"")+$+">"),l["$<<"]('<head>\n<meta charset="'+t.$attr("encoding","UTF-8")+'"'+r+'>\n<meta http-equiv="X-UA-Compatible" content="IE=edge"'+r+'>\n<meta name="viewport" content="width=device-width, initial-scale=1.0"'+r+'>\n<meta name="generator" content="Asciidoctor '+t.$attr("asciidoctor-version")+'"'+r+">"),f(t["$attr?"]("app-name"))&&l["$<<"]('<meta name="application-name" content="'+t.$attr("app-name")+'"'+r+">"),f(t["$attr?"]("description"))&&l["$<<"]('<meta name="description" content="'+t.$attr("description")+'"'+r+">"),f(t["$attr?"]("keywords"))&&l["$<<"]('<meta name="keywords" content="'+t.$attr("keywords")+'"'+r+">"),f(t["$attr?"]("authors"))&&l["$<<"]('<meta name="author" content="'+(f((c=t.$sub_replacements(t.$attr("authors")))["$include?"]("<"))?c.$gsub(s("XmlSanitizeRx"),""):c)+'"'+r+">"),f(t["$attr?"]("copyright"))&&l["$<<"]('<meta name="copyright" content="'+t.$attr("copyright")+'"'+r+">"),f(t["$attr?"]("favicon"))&&(f((_=t.$attr("favicon"))["$empty?"]())?(_="favicon.ico",d="image/x-icon"):d=f(p=s("Helpers").$extname(_,F))?h(p,".ico")?"image/x-icon":"image/"+p.$slice(1,p.$length()):"image/x-icon",l["$<<"]('<link rel="icon" type="'+d+'" href="'+_+'"'+r+">")),l["$<<"]("<title>"+t.$doctitle(u(["sanitize","use_fallback"],{sanitize:!0,use_fallback:!0}))+"</title>"),f(s("DEFAULT_STYLESHEET_KEYS")["$include?"](t.$attr("stylesheet")))?(f(y=t.$attr("webfonts"))&&l["$<<"]('<link rel="stylesheet" href="'+n+"//fonts.googleapis.com/css?family="+(f(y["$empty?"]())?"Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700":y)+'"'+r+">"),f(o)?l["$<<"]('<link rel="stylesheet" href="'+t.$normalize_web_path(s("DEFAULT_STYLESHEET_NAME"),t.$attr("stylesdir",""),!1)+'"'+r+">"):l["$<<"]("<style>\n"+s("Stylesheets").$instance().$primary_stylesheet_data()+"\n</style>")):f(t["$attr?"]("stylesheet"))&&(f(o)?l["$<<"]('<link rel="stylesheet" href="'+t.$normalize_web_path(t.$attr("stylesheet"),t.$attr("stylesdir",""))+'"'+r+">"):l["$<<"]("<style>\n"+t.$read_contents(t.$attr("stylesheet"),u(["start","warn_on_failure","label"],{start:t.$attr("stylesdir"),warn_on_failure:!0,label:"stylesheet"}))+"\n</style>")),f(t["$attr?"]("icons","font"))&&(f(t["$attr?"]("iconfont-remote"))?l["$<<"]('<link rel="stylesheet" href="'+t.$attr("iconfont-cdn",""+i+"/font-awesome/"+s("FONT_AWESOME_VERSION")+"/css/font-awesome.min.css")+'"'+r+">"):(x=""+t.$attr("iconfont-name","font-awesome")+".css",l["$<<"]('<link rel="stylesheet" href="'+t.$normalize_web_path(x,t.$attr("stylesdir",""),!1)+'"'+r+">"))),f(k=t.$syntax_highlighter())&&l["$<<"](w=l.$size()),f((A=t.$docinfo())["$empty?"]())||l["$<<"](A),l["$<<"]("</head>"),E=f(t.$id())?' id="'+t.$id()+'"':"",C=f(S=t["$sections?"]())&&f(t["$attr?"]("toc-class"))&&f(t["$attr?"]("toc"))&&f(t["$attr?"]("toc-placement","auto"))?[t.$doctype(),t.$attr("toc-class"),"toc-"+t.$attr("toc-position","header")]:[t.$doctype()],f(t["$role?"]())&&C["$<<"](t.$role()),l["$<<"]("<body"+E+' class="'+C.$join(" ")+'">'),f((A=t.$docinfo("header"))["$empty?"]())||l["$<<"](A),f(t.$noheader())||(l["$<<"]('<div id="header"'+a+">"),h(t.$doctype(),"manpage")?(l["$<<"]("<h1>"+t.$doctitle()+" Manual Page</h1>"),f(S)&&f(t["$attr?"]("toc"))&&f(t["$attr?"]("toc-placement","auto"))&&l["$<<"]('<div id="toc" class="'+t.$attr("toc-class","toc")+'">\n<div id="toctitle">'+t.$attr("toc-title")+"</div>\n"+t.$converter().$convert(t,"outline")+"\n</div>"),f(t["$attr?"]("manpurpose"))&&l["$<<"](this.$generate_manname_section(t))):(f(t["$header?"]())&&(f(t.$notitle())||l["$<<"]("<h1>"+t.$header().$title()+"</h1>"),O=[],R=1,m(t.$authors(),"each",[],function(r){return null==r&&(r=F),O["$<<"]('<span id="author'+(f(g(R,1))?R:"")+'" class="author">'+t.$sub_replacements(r.$name())+"</span>"+e),f(r.$email())&&O["$<<"]('<span id="email'+(f(g(R,1))?R:"")+'" class="email">'+t.$sub_macros(r.$email())+"</span>"+e),R=b(R,1)}),f(t["$attr?"]("revnumber"))&&O["$<<"]('<span id="revnumber">'+(f(I=t.$attr("version-label"))?I:"").$downcase()+" "+t.$attr("revnumber")+(f(t["$attr?"]("revdate"))?",":"")+"</span>"),f(t["$attr?"]("revdate"))&&O["$<<"]('<span id="revdate">'+t.$attr("revdate")+"</span>"),f(t["$attr?"]("revremark"))&&O["$<<"](""+e+'<span id="revremark">'+t.$attr("revremark")+"</span>"),f(O["$empty?"]())||(l["$<<"]('<div class="details">'),l.$concat(O),l["$<<"]("</div>"))),f(S)&&f(t["$attr?"]("toc"))&&f(t["$attr?"]("toc-placement","auto"))&&l["$<<"]('<div id="toc" class="'+t.$attr("toc-class","toc")+'">\n<div id="toctitle">'+t.$attr("toc-title")+"</div>\n"+t.$converter().$convert(t,"outline")+"\n</div>")),l["$<<"]("</div>")),l["$<<"]('<div id="content"'+a+">\n"+t.$content()+"\n</div>"),f(t["$footnotes?"]())&&v(t["$attr?"]("nofootnotes"))&&(l["$<<"]('<div id="footnotes"'+a+">\n<hr"+r+">"),m(t.$footnotes(),"each",[],function(t){return null==t&&(t=F),l["$<<"]('<div class="footnote" id="_footnotedef_'+t.$index()+'">\n<a href="#_footnoteref_'+t.$index()+'">'+t.$index()+"</a>. "+t.$text()+"\n</div>")}),l["$<<"]("</div>")),f(t.$nofooter())||(l["$<<"]('<div id="footer"'+a+">"),l["$<<"]('<div id="footer-text">'),f(t["$attr?"]("revnumber"))&&l["$<<"](""+t.$attr("version-label")+" "+t.$attr("revnumber")+e),f(t["$attr?"]("last-update-label"))&&v(t["$attr?"]("reproducible"))&&l["$<<"](""+t.$attr("last-update-label")+" "+t.$attr("docdatetime")),l["$<<"]("</div>"),l["$<<"]("</div>")),f(k)&&(f(k["$docinfo?"]("head"))?l["$[]="](w,k.$docinfo("head",t,u(["cdn_base_url","linkcss","self_closing_tag_slash"],{cdn_base_url:i,linkcss:o,self_closing_tag_slash:r}))):l.$delete_at(w),f(k["$docinfo?"]("footer"))&&l["$<<"](k.$docinfo("footer",t,u(["cdn_base_url","linkcss","self_closing_tag_slash"],{cdn_base_url:i,linkcss:o,self_closing_tag_slash:r})))),f(t["$attr?"]("stem"))&&(f((T=t.$attr("eqnums","none"))["$empty?"]())&&(T="AMS"),z=' equationNumbers: { autoNumber: "'+T+'" } ',l["$<<"]('<script type="text/x-mathjax-config">\nMathJax.Hub.Config({\n  messageStyle: "none",\n  tex2jax: {\n    inlineMath: ['+s("INLINE_MATH_DELIMITERS")["$[]"]("latexmath").$inspect()+"],\n    displayMath: ["+s("BLOCK_MATH_DELIMITERS")["$[]"]("latexmath").$inspect()+'],\n    ignoreClass: "nostem|nolatexmath"\n  },\n  asciimath2jax: {\n    delimiters: ['+s("BLOCK_MATH_DELIMITERS")["$[]"]("asciimath").$inspect()+'],\n    ignoreClass: "nostem|noasciimath"\n  },\n  TeX: {'+z+'}\n})\nMathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {\n  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {\n    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {\n      data.math.root.display = "block"\n    }\n    return data\n  })\n})\n</script>\n<script src="'+i+"/mathjax/"+s("MATHJAX_VERSION")+'/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>')),f((A=t.$docinfo("footer"))["$empty?"]())||l["$<<"](A),l["$<<"]("</body>"),l["$<<"]("</html>"),l.$join(s("LF"))}),_(n,"$convert_embedded",function(t){var e=F,r=F,n=F;return e=[],h(t.$doctype(),"manpage")?(f(t.$notitle())||(r=f(t.$id())?' id="'+t.$id()+'"':"",e["$<<"]("<h1"+r+">"+t.$doctitle()+" Manual Page</h1>")),f(t["$attr?"]("manpurpose"))&&e["$<<"](this.$generate_manname_section(t))):f(t["$header?"]())&&v(t.$notitle())&&(r=f(t.$id())?' id="'+t.$id()+'"':"",e["$<<"]("<h1"+r+">"+t.$header().$title()+"</h1>")),f(t["$sections?"]())&&f(t["$attr?"]("toc"))&&y(n=t.$attr("toc-placement"),"macro")&&y(n,"preamble")&&e["$<<"]('<div id="toc" class="toc">\n<div id="toctitle">'+t.$attr("toc-title")+"</div>\n"+t.$converter().$convert(t,"outline")+"\n</div>"),e["$<<"](t.$content()),f(t["$footnotes?"]())&&v(t["$attr?"]("nofootnotes"))&&(e["$<<"]('<div id="footnotes">\n<hr'+this.void_element_slash+">"),m(t.$footnotes(),"each",[],function(t){return null==t&&(t=F),e["$<<"]('<div class="footnote" id="_footnotedef_'+t.$index()+'">\n<a href="#_footnoteref_'+t.$index()+'">'+t.$index()+"</a>. "+t.$text()+"\n</div>")}),e["$<<"]("</div>")),e.$join(s("LF"))}),_(n,"$convert_outline",function(t,e){var r=F,n=F,i=F,o=F,a=F,l=F;return(null==e&&(e=u([],{})),f(t["$sections?"]()))?(r=f(n=e["$[]"]("sectnumlevels"))?n:(f(i=t.$document().$attributes()["$[]"]("sectnumlevels"))?i:3).$to_i(),o=f(n=e["$[]"]("toclevels"))?n:(f(i=t.$document().$attributes()["$[]"]("toclevels"))?i:2).$to_i(),l=['<ul class="sectlevel'+(a=t.$sections())["$[]"](0).$level()+'">'],m(a,"each",[],function e(n){var i=null==e.$$s?this:e.$$s,a=F,$=F,c=F,_=F;if(null==n&&(n=F),a=n.$level(),f(n.$caption()))$=n.$captioned_title();else if(f(n.$numbered())&&f(x(a,r))){if(f(k(a,2))&&h(t.$document().$doctype(),"book"))switch(n.$sectname()){case"chapter":$=(f(c=t.$document().$attributes()["$[]"]("chapter-signifier"))?""+c+" ":"")+n.$sectnum()+" "+n.$title();break;case"part":$=(f(c=t.$document().$attributes()["$[]"]("part-signifier"))?""+c+" ":"")+n.$sectnum(F,":")+" "+n.$title();break;default:$=""+n.$sectnum()+" "+n.$title()}else $=""+n.$sectnum()+" "+n.$title()}else $=n.$title();return(f($["$include?"]("<a"))&&($=$.$gsub(s("DropAnchorRx"),"")),f(k(a,o))&&f(_=i.$convert_outline(n,u(["toclevels","sectnumlevels"],{toclevels:o,sectnumlevels:r}))))?(l["$<<"]('<li><a href="#'+n.$id()+'">'+$+"</a>"),l["$<<"](_),l["$<<"]("</li>")):l["$<<"]('<li><a href="#'+n.$id()+'">'+$+"</a></li>")},{$$s:this}),l["$<<"]("</ul>"),l.$join(s("LF"))):F},-2),_(n,"$convert_section",function(t){var e=F,r=F,n=F,i=F,s=F,o=F,a=F,l=F;if(e=t.$document().$attributes(),r=t.$level(),f(t.$caption()))n=t.$captioned_title();else if(f(t.$numbered())&&f(x(r,(f(i=e["$[]"]("sectnumlevels"))?i:3).$to_i()))){if(f(k(r,2))&&h(t.$document().$doctype(),"book"))switch(t.$sectname()){case"chapter":n=(f(s=e["$[]"]("chapter-signifier"))?""+s+" ":"")+t.$sectnum()+" "+t.$title();break;case"part":n=(f(s=e["$[]"]("part-signifier"))?""+s+" ":"")+t.$sectnum(F,":")+" "+t.$title();break;default:n=""+t.$sectnum()+" "+t.$title()}else n=""+t.$sectnum()+" "+t.$title()}else n=t.$title();return(f(t.$id())?(o=' id="'+(a=t.$id())+'"',f(e["$[]"]("sectlinks"))&&(n='<a class="link" href="#'+a+'">'+n+"</a>"),f(e["$[]"]("sectanchors"))&&(n=h(e["$[]"]("sectanchors"),"after")?""+n+'<a class="anchor" href="#'+a+'"></a>':'<a class="anchor" href="#'+a+'"></a>'+n)):o="",h(r,0))?"<h1"+o+' class="sect0'+(f(l=t.$role())?" "+l:"")+'">'+n+"</h1>\n"+t.$content():'<div class="sect'+r+(f(l=t.$role())?" "+l:"")+'">\n<h'+b(r,1)+o+">"+n+"</h"+b(r,1)+">\n"+(h(r,1)?'<div class="sectionbody">\n'+t.$content()+"\n</div>":t.$content())+"\n</div>"}),_(n,"$convert_admonition",function(t){var e=F,r=F,n=F,i=F,s=F;return e=f(t.$id())?' id="'+t.$id()+'"':"",r=t.$attr("name"),n=f(t["$title?"]())?'<div class="title">'+t.$title()+"</div>\n":"",i=f(t.$document()["$attr?"]("icons"))?f(t.$document()["$attr?"]("icons","font"))&&v(t["$attr?"]("icon"))?'<i class="fa icon-'+r+'" title="'+t.$attr("textlabel")+'"></i>':'<img src="'+t.$icon_uri(r)+'" alt="'+t.$attr("textlabel")+'"'+this.void_element_slash+">":'<div class="title">'+t.$attr("textlabel")+"</div>","<div"+e+' class="admonitionblock '+r+(f(s=t.$role())?" "+s:"")+'">\n<table>\n<tr>\n<td class="icon">\n'+i+'\n</td>\n<td class="content">\n'+n+t.$content()+"\n</td>\n</tr>\n</table>\n</div>"}),_(n,"$convert_audio",function(t){var e=F,r=F,n=F,i=F,s=F,o=F,a=F,l=F;return e=this.xml_mode,r=f(t.$id())?' id="'+t.$id()+'"':"",n=' class="'+["audioblock",t.$role()].$compact().$join(" ")+'"',i=f(t["$title?"]())?'<div class="title">'+t.$title()+"</div>\n":"",s=t.$attr("start"),o=t.$attr("end"),a=f(s)||f(o)?"#t="+(f(l=s)?l:"")+(f(o)?","+o:""):"","<div"+r+n+">\n"+i+'<div class="content">\n<audio src="'+t.$media_uri(t.$attr("target"))+a+'"'+(f(t["$option?"]("autoplay"))?this.$append_boolean_attribute("autoplay",e):"")+(f(t["$option?"]("nocontrols"))?"":this.$append_boolean_attribute("controls",e))+(f(t["$option?"]("loop"))?this.$append_boolean_attribute("loop",e):"")+">\nYour browser does not support the audio tag.\n</audio>\n</div>\n</div>"}),_(n,"$convert_colist",function(t){var e,r=F,n=F,i=F,o=F,a=F;return r=[],n=f(t.$id())?' id="'+t.$id()+'"':"",i=' class="'+["colist",t.$style(),t.$role()].$compact().$join(" ")+'"',r["$<<"]("<div"+n+i+">"),f(t["$title?"]())&&r["$<<"]('<div class="title">'+t.$title()+"</div>"),f(t.$document()["$attr?"]("icons"))?(r["$<<"]("<table>"),o=(e=[t.$document()["$attr?"]("icons","font"),0])[0],a=e[1],m(t.$items(),"each",[],function e(n){var i=null==e.$$s?this:e.$$s,l=F;return null==i.void_element_slash&&(i.void_element_slash=F),null==n&&(n=F),a=b(a,1),l=f(o)?'<i class="conum" data-value="'+a+'"></i><b>'+a+"</b>":'<img src="'+t.$icon_uri("callouts/"+a)+'" alt="'+a+'"'+i.void_element_slash+">",r["$<<"]("<tr>\n<td>"+l+"</td>\n<td>"+n.$text()+(f(n["$blocks?"]())?b(s("LF"),n.$content()):"")+"</td>\n</tr>")},{$$s:this}),r["$<<"]("</table>")):(r["$<<"]("<ol>"),m(t.$items(),"each",[],function(t){return null==t&&(t=F),r["$<<"]("<li>\n<p>"+t.$text()+"</p>"+(f(t["$blocks?"]())?b(s("LF"),t.$content()):"")+"\n</li>")}),r["$<<"]("</ol>")),r["$<<"]("</div>"),r.$join(s("LF"))}),_(n,"$convert_dlist",function(t){var e=F,r=F,n=F,i=F,o=F,a=F,l=F;switch(e=[],r=f(t.$id())?' id="'+t.$id()+'"':"",t.$style()){case"qanda":n=["qlist","qanda",t.$role()];break;case"horizontal":n=["hdlist",t.$role()];break;default:n=["dlist",t.$style(),t.$role()]}switch(i=' class="'+n.$compact().$join(" ")+'"',e["$<<"]("<div"+r+i+">"),f(t["$title?"]())&&e["$<<"]('<div class="title">'+t.$title()+"</div>"),t.$style()){case"qanda":e["$<<"]("<ol>"),m(t.$items(),"each",[],function(t,r){return null==t&&(t=F),null==r&&(r=F),e["$<<"]("<li>"),m(t,"each",[],function(t){return null==t&&(t=F),e["$<<"]("<p><em>"+t.$text()+"</em></p>")}),f(r)&&(f(r["$text?"]())&&e["$<<"]("<p>"+r.$text()+"</p>"),f(r["$blocks?"]())&&e["$<<"](r.$content())),e["$<<"]("</li>")}),e["$<<"]("</ol>");break;case"horizontal":o=this.void_element_slash,e["$<<"]("<table>"),(f(t["$attr?"]("labelwidth"))||f(t["$attr?"]("itemwidth")))&&(e["$<<"]("<colgroup>"),a=f(t["$attr?"]("labelwidth"))?' style="width: '+t.$attr("labelwidth").$chomp("%")+'%;"':"",e["$<<"]("<col"+a+o+">"),a=f(t["$attr?"]("itemwidth"))?' style="width: '+t.$attr("itemwidth").$chomp("%")+'%;"':"",e["$<<"]("<col"+a+o+">"),e["$<<"]("</colgroup>")),m(t.$items(),"each",[],function(r,n){var i=F;return null==r&&(r=F),null==n&&(n=F),e["$<<"]("<tr>"),e["$<<"]('<td class="hdlist1'+(f(t["$option?"]("strong"))?" strong":"")+'">'),i=!0,m(r,"each",[],function(t){return null==t&&(t=F),f(i)||e["$<<"]("<br"+o+">"),e["$<<"](t.$text()),i=F}),e["$<<"]("</td>"),e["$<<"]('<td class="hdlist2">'),f(n)&&(f(n["$text?"]())&&e["$<<"]("<p>"+n.$text()+"</p>"),f(n["$blocks?"]())&&e["$<<"](n.$content())),e["$<<"]("</td>"),e["$<<"]("</tr>")}),e["$<<"]("</table>");break;default:e["$<<"]("<dl>"),l=f(t.$style())?"":' class="hdlist1"',m(t.$items(),"each",[],function(t,r){return(null==t&&(t=F),null==r&&(r=F),m(t,"each",[],function(t){return null==t&&(t=F),e["$<<"]("<dt"+l+">"+t.$text()+"</dt>")}),f(r))?(e["$<<"]("<dd>"),f(r["$text?"]())&&e["$<<"]("<p>"+r.$text()+"</p>"),f(r["$blocks?"]())&&e["$<<"](r.$content()),e["$<<"]("</dd>")):F}),e["$<<"]("</dl>")}return e["$<<"]("</div>"),e.$join(s("LF"))}),_(n,"$convert_example",function(t){var e=F,r=F,n=F,i=F,s=F;return(e=f(t.$id())?' id="'+t.$id()+'"':"",f(t["$option?"]("collapsible")))?(r=f(t.$role())?' class="'+t.$role()+'"':"",n=f(t["$title?"]())?'<summary class="title">'+t.$title()+"</summary>":'<summary class="title">Details</summary>',"<details"+e+r+(f(t["$option?"]("open"))?" open":"")+">\n"+n+'\n<div class="content">\n'+t.$content()+"\n</div>\n</details>"):(i=f(t["$title?"]())?'<div class="title">'+t.$captioned_title()+"</div>\n":"","<div"+e+' class="exampleblock'+(f(s=t.$role())?" "+s:"")+'">\n'+i+'<div class="content">\n'+t.$content()+"\n</div>\n</div>")}),_(n,"$convert_floating_title",function(t){var e=F,r=F;return"<"+(e="h"+b(t.$level(),1))+(f(t.$id())?' id="'+t.$id()+'"':"")+' class="'+[t.$style(),t.$role()].$compact().$join(" ")+'">'+t.$title()+"</"+e+">"}),_(n,"$convert_image",function(t){var e=F,r=F,n=F,i=F,o=F,a=F,l=F,$=F,u=F;return e=t.$attr("target"),r=f(t["$attr?"]("width"))?' width="'+t.$attr("width")+'"':"",n=f(t["$attr?"]("height"))?' height="'+t.$attr("height")+'"':"",(f(t["$attr?"]("format","svg"))||f(e["$include?"](".svg")))&&f(k(t.$document().$safe(),N(s("SafeMode"),"SECURE")))?f(t["$option?"]("inline"))?i=f(o=this.$read_svg_contents(t,e))?o:'<span class="alt">'+t.$alt()+"</span>":f(t["$option?"]("interactive"))?(a=f(t["$attr?"]("fallback"))?'<img src="'+t.$image_uri(t.$attr("fallback"))+'" alt="'+this.$encode_attribute_value(t.$alt())+'"'+r+n+this.void_element_slash+">":'<span class="alt">'+t.$alt()+"</span>",i='<object type="image/svg+xml" data="'+t.$image_uri(e)+'"'+r+n+">"+a+"</object>"):i='<img src="'+t.$image_uri(e)+'" alt="'+this.$encode_attribute_value(t.$alt())+'"'+r+n+this.void_element_slash+">":i='<img src="'+t.$image_uri(e)+'" alt="'+this.$encode_attribute_value(t.$alt())+'"'+r+n+this.void_element_slash+">",f(t["$attr?"]("link"))&&(i='<a class="image" href="'+t.$attr("link")+'"'+this.$append_link_constraint_attrs(t).$join()+">"+i+"</a>"),l=f(t.$id())?' id="'+t.$id()+'"':"",$=["imageblock"],f(t["$attr?"]("float"))&&$["$<<"](t.$attr("float")),f(t["$attr?"]("align"))&&$["$<<"]("text-"+t.$attr("align")),f(t.$role())&&$["$<<"](t.$role()),"<div"+l+(' class="'+$.$join(" "))+'">\n<div class="content">\n'+i+"\n</div>"+(f(t["$title?"]())?'\n<div class="title">'+t.$captioned_title()+"</div>":"")+"\n</div>"}),_(n,"$convert_listing",function(t){var e=F,r=F,n=F,i=F,s=F,o=F,a=F,l=F,$=F,c=F,_=F;return e=f(r=t["$option?"]("nowrap"))?r:t.$document()["$attr?"]("prewrap")["$!"](),h(t.$style(),"source")?(n=t.$attr("language"),f(i=t.$document().$syntax_highlighter())?(s=f(i["$highlight?"]())?u(["css_mode","style"],{css_mode:(f(r=(o=t.$document().$attributes())["$[]"](""+i.$name()+"-css"))?r:"class").$to_sym(),style:o["$[]"](""+i.$name()+"-style")}):u([],{}))["$[]="]("nowrap",e):(a='<pre class="highlight'+(f(e)?" nowrap":"")+'"><code'+(f(n)?' class="language-'+n+'" data-lang="'+n+'"':"")+">",l="</code></pre>")):(a="<pre"+(f(e)?' class="nowrap"':"")+">",l="</pre>"),$=f(t.$id())?' id="'+t.$id()+'"':"",c=f(t["$title?"]())?'<div class="title">'+t.$captioned_title()+"</div>\n":"","<div"+$+' class="listingblock'+(f(_=t.$role())?" "+_:"")+'">\n'+c+'<div class="content">\n'+(f(i)?i.$format(t,n,s):b(b(a,t.$content()),l))+"\n</div>\n</div>"}),_(n,"$convert_literal",function(t){var e=F,r=F,n=F,i=F,s=F;return e=f(t.$id())?' id="'+t.$id()+'"':"",r=f(t["$title?"]())?'<div class="title">'+t.$title()+"</div>\n":"",n=f(i=t.$document()["$attr?"]("prewrap")["$!"]())?i:t["$option?"]("nowrap"),"<div"+e+' class="literalblock'+(f(s=t.$role())?" "+s:"")+'">\n'+r+'<div class="content">\n<pre'+(f(n)?' class="nowrap"':"")+">"+t.$content()+"</pre>\n</div>\n</div>"}),_(n,"$convert_stem",function(t){var e,r=F,n=F,i=F,o=F,a=F,l=F,$=F,u=F;return r=f(t.$id())?' id="'+t.$id()+'"':"",n=f(t["$title?"]())?'<div class="title">'+t.$title()+"</div>\n":"",o=null==(e=w(s("BLOCK_MATH_DELIMITERS")["$[]"](i=t.$style().$to_sym())))[0]?F:e[0],a=null==e[1]?F:e[1],f(l=t.$content())?(h(i,"asciimath")&&f(l["$include?"](s("LF")))&&($=""+s("LF")+"<br"+this.void_element_slash+">",l=m(l,"gsub",[s("StemBreakRx")],function(){var t;return""+a+A($,E(((t=S["~"])===F?F:t["$[]"](0)).$count(s("LF")),1))+s("LF")+o})),f(l["$start_with?"](o))&&f(l["$end_with?"](a))||(l=""+o+l+a)):l="","<div"+r+' class="stemblock'+(f(u=t.$role())?" "+u:"")+'">\n'+n+'<div class="content">\n'+l+"\n</div>\n</div>"}),_(n,"$convert_olist",function(t){var e=F,r=F,n=F,i=F,o=F,a=F,l=F;return e=[],r=f(t.$id())?' id="'+t.$id()+'"':"",n=' class="'+["olist",t.$style(),t.$role()].$compact().$join(" ")+'"',e["$<<"]("<div"+r+n+">"),f(t["$title?"]())&&e["$<<"]('<div class="title">'+t.$title()+"</div>"),i=f(o=t.$list_marker_keyword())?' type="'+o+'"':"",a=f(t["$attr?"]("start"))?' start="'+t.$attr("start")+'"':"",l=f(t["$option?"]("reversed"))?this.$append_boolean_attribute("reversed",this.xml_mode):"",e["$<<"]('<ol class="'+t.$style()+'"'+i+a+l+">"),m(t.$items(),"each",[],function(t){return null==t&&(t=F),f(t.$id())?e["$<<"]('<li id="'+t.$id()+'"'+(f(t.$role())?' class="'+t.$role()+'"':"")+">"):f(t.$role())?e["$<<"]('<li class="'+t.$role()+'">'):e["$<<"]("<li>"),e["$<<"]("<p>"+t.$text()+"</p>"),f(t["$blocks?"]())&&e["$<<"](t.$content()),e["$<<"]("</li>")}),e["$<<"]("</ol>"),e["$<<"]("</div>"),e.$join(s("LF"))}),_(n,"$convert_open",function(t){var e=F,r=F,n=F,i=F;return h(e=t.$style(),"abstract")?h(t.$parent(),t.$document())&&h(t.$document().$doctype(),"book")?(this.$logger().$warn("abstract block cannot be used in a document without a title when doctype is book. Excluding block content."),""):(r=f(t.$id())?' id="'+t.$id()+'"':"",n=f(t["$title?"]())?'<div class="title">'+t.$title()+"</div>\n":"","<div"+r+' class="quoteblock abstract'+(f(i=t.$role())?" "+i:"")+'">\n'+n+"<blockquote>\n"+t.$content()+"\n</blockquote>\n</div>"):h(e,"partintro")&&(f(g(t.$level(),0))||y(t.$parent().$context(),"section")||y(t.$document().$doctype(),"book"))?(this.$logger().$error("partintro block can only be used when doctype is book and must be a child of a book part. Excluding block content."),""):(r=f(t.$id())?' id="'+t.$id()+'"':"",n=f(t["$title?"]())?'<div class="title">'+t.$title()+"</div>\n":"","<div"+r+' class="openblock'+(f(e)&&y(e,"open")?" "+e:"")+(f(i=t.$role())?" "+i:"")+'">\n'+n+'<div class="content">\n'+t.$content()+"\n</div>\n</div>")}),_(n,"$convert_page_break",C('<div style="page-break-after: always;"></div>')),_(n,"$convert_paragraph",function(t){var e=F;return(e=f(t.$role())?(f(t.$id())?' id="'+t.$id()+'"':"")+' class="paragraph '+t.$role()+'"':f(t.$id())?' id="'+t.$id()+'" class="paragraph"':' class="paragraph"',f(t["$title?"]()))?"<div"+e+'>\n<div class="title">'+t.$title()+"</div>\n<p>"+t.$content()+"</p>\n</div>":"<div"+e+">\n<p>"+t.$content()+"</p>\n</div>"}),O(n,"convert_pass","content_only"),_(n,"$convert_preamble",function(t){var e=F,r=F;return r=f((e=t.$document())["$attr?"]("toc-placement","preamble"))&&f(e["$sections?"]())&&f(e["$attr?"]("toc"))?'\n<div id="toc" class="'+e.$attr("toc-class","toc")+'">\n<div id="toctitle">'+e.$attr("toc-title")+"</div>\n"+e.$converter().$convert(e,"outline")+"\n</div>":"",'<div id="preamble">\n<div class="sectionbody">\n'+t.$content()+"\n</div>"+r+"\n</div>"}),_(n,"$convert_quote",function(t){var e=F,r=F,n=F,i=F,s=F,o=F,a=F;return e=f(t.$id())?' id="'+t.$id()+'"':"",r=' class="'+["quoteblock",t.$role()].$compact().$join(" ")+'"',n=f(t["$title?"]())?'\n<div class="title">'+t.$title()+"</div>":"",i=f(t["$attr?"]("attribution"))?t.$attr("attribution"):F,s=f(t["$attr?"]("citetitle"))?t.$attr("citetitle"):F,f(i)||f(s)?(o=f(s)?"<cite>"+s+"</cite>":"",a='\n<div class="attribution">\n'+(f(i)?"&#8212; "+i+(f(s)?"<br"+this.void_element_slash+">\n":""):"")+o+"\n</div>"):a="","<div"+e+r+">"+n+"\n<blockquote>\n"+t.$content()+"\n</blockquote>"+a+"\n</div>"}),_(n,"$convert_thematic_break",function(t){return"<hr"+this.void_element_slash+">"}),_(n,"$convert_sidebar",function(t){var e=F,r=F,n=F;return e=f(t.$id())?' id="'+t.$id()+'"':"",r=f(t["$title?"]())?'<div class="title">'+t.$title()+"</div>\n":"","<div"+e+' class="sidebarblock'+(f(n=t.$role())?" "+n:"")+'">\n<div class="content">\n'+r+t.$content()+"\n</div>\n</div>"}),_(n,"$convert_table",function(t){var e=F,r=F,n=F,i=F,o=F,a=F,l=F,$=F,u=F,c=F,_=F;return e=[],r=f(t.$id())?' id="'+t.$id()+'"':"",h(n=t.$attr("frame","all","table-frame"),"topbot")&&(n="ends"),i=["tableblock","frame-"+n,"grid-"+t.$attr("grid","all","table-grid")],f(o=t.$attr("stripes",F,"table-stripes"))&&i["$<<"]("stripes-"+o),a="",f(l=t["$option?"]("autowidth"))&&v(t["$attr?"]("width"))?i["$<<"]("fit-content"):h($=t.$attr("tablepcwidth"),100)?i["$<<"]("stretch"):a=' style="width: '+$+'%;"',f(t["$attr?"]("float"))&&i["$<<"](t.$attr("float")),f(u=t.$role())&&i["$<<"](u),c=' class="'+i.$join(" ")+'"',e["$<<"]("<table"+r+c+a+">"),f(t["$title?"]())&&e["$<<"]('<caption class="title">'+t.$captioned_title()+"</caption>"),f(g(t.$attr("rowcount"),0))&&(_=this.void_element_slash,e["$<<"]("<colgroup>"),f(l)?e=b(e,s("Array").$new(t.$columns().$size(),"<col"+_+">")):m(t.$columns(),"each",[],function(t){return null==t&&(t=F),e["$<<"](f(t["$option?"]("autowidth"))?"<col"+_+">":'<col style="width: '+t.$attr("colpcwidth")+'%;"'+_+">")}),e["$<<"]("</colgroup>"),m(t.$rows().$to_h(),"each",[],function(r,n){return(null==r&&(r=F),null==n&&(n=F),f(n["$empty?"]()))?F:(e["$<<"]("<t"+r+">"),m(n,"each",[],function(n){return null==n&&(n=F),e["$<<"]("<tr>"),m(n,"each",[],function(n){var i=F,s=F,o=F,a=F,l=F,$=F;if(null==n&&(n=F),h(r,"head"))i=n.$text();else switch(n.$style()){case"asciidoc":i='<div class="content">'+n.$content()+"</div>";break;case"literal":i='<div class="literal"><pre>'+n.$text()+"</pre></div>";break;default:i=f((i=n.$content())["$empty?"]())?"":'<p class="tableblock">'+i.$join('</p>\n<p class="tableblock">')+"</p>"}return s=h(r,"head")||h(n.$style(),"header")?"th":"td",o=' class="tableblock halign-'+n.$attr("halign")+" valign-"+n.$attr("valign")+'"',a=f(n.$colspan())?' colspan="'+n.$colspan()+'"':"",l=f(n.$rowspan())?' rowspan="'+n.$rowspan()+'"':"",$=f(t.$document()["$attr?"]("cellbgcolor"))?' style="background-color: '+t.$document().$attr("cellbgcolor")+';"':"",e["$<<"]("<"+s+o+a+l+$+">"+i+"</"+s+">")}),e["$<<"]("</tr>")}),e["$<<"]("</t"+r+">"))})),e["$<<"]("</table>"),e.$join(s("LF"))}),_(n,"$convert_toc",function(t){var e=F,r=F,n=F,i=F,s=F;return f((e=t.$document())["$attr?"]("toc-placement","macro"))&&f(e["$sections?"]())&&f(e["$attr?"]("toc"))?(f(t.$id())?(r=' id="'+t.$id()+'"',n=' id="'+t.$id()+'title"'):(r=' id="toc"',n=' id="toctitle"'),i=f(t["$title?"]())?t.$title():e.$attr("toc-title"),s=f(t["$attr?"]("levels"))?t.$attr("levels").$to_i():F,"<div"+r+' class="'+(f(t["$role?"]())?t.$role():e.$attr("toc-class","toc"))+'">\n<div'+n+' class="title">'+i+"</div>\n"+e.$converter().$convert(e,"outline",u(["toclevels"],{toclevels:s}))+"\n</div>"):"<!-- toc disabled -->"}),_(n,"$convert_ulist",function(t){var e=F,r=F,n=F,i=F,o=F,a=F,l=F;return e=[],r=f(t.$id())?' id="'+t.$id()+'"':"",n=["ulist",t.$style(),t.$role()].$compact(),i=o="",f(a=t["$option?"]("checklist"))?(n.$unshift(n.$shift(),"checklist"),l=' class="checklist"',f(t["$option?"]("interactive"))?f(this.xml_mode)?(i='<input type="checkbox" data-item-complete="1" checked="checked"/> ',o='<input type="checkbox" data-item-complete="0"/> '):(i='<input type="checkbox" data-item-complete="1" checked> ',o='<input type="checkbox" data-item-complete="0"> '):f(t.$document()["$attr?"]("icons","font"))?(i='<i class="fa fa-check-square-o"></i> ',o='<i class="fa fa-square-o"></i> '):(i="&#10003; ",o="&#10063; ")):l=f(t.$style())?' class="'+t.$style()+'"':"",e["$<<"]("<div"+r+' class="'+n.$join(" ")+'">'),f(t["$title?"]())&&e["$<<"]('<div class="title">'+t.$title()+"</div>"),e["$<<"]("<ul"+l+">"),m(t.$items(),"each",[],function(t){return null==t&&(t=F),f(t.$id())?e["$<<"]('<li id="'+t.$id()+'"'+(f(t.$role())?' class="'+t.$role()+'"':"")+">"):f(t.$role())?e["$<<"]('<li class="'+t.$role()+'">'):e["$<<"]("<li>"),f(a)&&f(t["$attr?"]("checkbox"))?e["$<<"]("<p>"+(f(t["$attr?"]("checked"))?i:o)+t.$text()+"</p>"):e["$<<"]("<p>"+t.$text()+"</p>"),f(t["$blocks?"]())&&e["$<<"](t.$content()),e["$<<"]("</li>")}),e["$<<"]("</ul>"),e["$<<"]("</div>"),e.$join(s("LF"))}),_(n,"$convert_verse",function(t){var e=F,r=F,n=F,i=F,s=F,o=F,a=F;return e=f(t.$id())?' id="'+t.$id()+'"':"",r=' class="'+["verseblock",t.$role()].$compact().$join(" ")+'"',n=f(t["$title?"]())?'\n<div class="title">'+t.$title()+"</div>":"",i=f(t["$attr?"]("attribution"))?t.$attr("attribution"):F,s=f(t["$attr?"]("citetitle"))?t.$attr("citetitle"):F,f(i)||f(s)?(o=f(s)?"<cite>"+s+"</cite>":"",a='\n<div class="attribution">\n'+(f(i)?"&#8212; "+i+(f(s)?"<br"+this.void_element_slash+">\n":""):"")+o+"\n</div>"):a="","<div"+e+r+">"+n+'\n<pre class="content">'+t.$content()+"</pre>"+a+"\n</div>"}),_(n,"$convert_video",function(t){var e,r=F,n=F,i=F,s=F,o=F,a=F,l=F,$=F,u=F,c=F,h=F,_=F,d=F,p=F,m=F,g=F,b=F,v=F,y=F,x=F,k=F,A=F,E=F,S=F,C=F,O=F,R=F,I=F,T=F,z=F,N=F,L=F,D=F,q=F,B=F,M=F;switch(r=this.xml_mode,n=f(t.$id())?' id="'+t.$id()+'"':"",i=["videoblock"],f(t["$attr?"]("float"))&&i["$<<"](t.$attr("float")),f(t["$attr?"]("align"))&&i["$<<"]("text-"+t.$attr("align")),f(t.$role())&&i["$<<"](t.$role()),s=' class="'+i.$join(" ")+'"',o=f(t["$title?"]())?'\n<div class="title">'+t.$title()+"</div>":"",a=f(t["$attr?"]("width"))?' width="'+t.$attr("width")+'"':"",l=f(t["$attr?"]("height"))?' height="'+t.$attr("height")+'"':"",t.$attr("poster")){case"vimeo":return f(($=t.$document().$attr("asset-uri-scheme","https"))["$empty?"]())||($=""+$+":"),u=f(t["$attr?"]("start"))?"#at="+t.$attr("start"):"",c=["?"],h=null==(e=w(t.$attr("target").$split("/",2)))[0]?F:e[0],d=f(_=f(p=_=null==e[1]?F:e[1])?p:t.$attr("hash"))?""+(f(p=c.$pop())?p:"&amp;")+"h="+_:"","<div"+n+s+">"+o+'\n<div class="content">\n<iframe'+a+l+' src="'+$+"//player.vimeo.com/video/"+h+d+(m=f(t["$option?"]("autoplay"))?""+(f(p=c.$pop())?p:"&amp;")+"autoplay=1":"")+(g=f(t["$option?"]("loop"))?""+(f(p=c.$pop())?p:"&amp;")+"loop=1":"")+(f(t["$option?"]("muted"))?""+(f(p=c.$pop())?p:"&amp;")+"muted=1":"")+u+'" frameborder="0"'+(f(t["$option?"]("nofullscreen"))?"":this.$append_boolean_attribute("allowfullscreen",r))+"></iframe>\n</div>\n</div>";case"youtube":return f(($=t.$document().$attr("asset-uri-scheme","https"))["$empty?"]())||($=""+$+":"),b=f(t["$option?"]("related"))?1:0,v=f(t["$attr?"]("start"))?"&amp;start="+t.$attr("start"):"",y=f(t["$attr?"]("end"))?"&amp;end="+t.$attr("end"):"",m=f(t["$option?"]("autoplay"))?"&amp;autoplay=1":"",g=f(x=t["$option?"]("loop"))?"&amp;loop=1":"",k=f(t["$option?"]("muted"))?"&amp;mute=1":"",A=f(t["$option?"]("nocontrols"))?"&amp;controls=0":"",f(t["$option?"]("nofullscreen"))?(E="&amp;fs=0",S=""):(E="",S=this.$append_boolean_attribute("allowfullscreen",r)),C=f(t["$option?"]("modest"))?"&amp;modestbranding=1":"",O=f(t["$attr?"]("theme"))?"&amp;theme="+t.$attr("theme"):"",R=f(t["$attr?"]("lang"))?"&amp;hl="+t.$attr("lang"):"",h=null==(e=w(t.$attr("target").$split("/",2)))[0]?F:e[0],f(I=f(p=I=null==e[1]?F:e[1])?p:t.$attr("list"))?T="&amp;list="+I:(h=null==(e=w(h.$split(",",2)))[0]?F:e[0],T=f(z=f(p=z=null==e[1]?F:e[1])?p:t.$attr("playlist"))?"&amp;playlist="+h+","+z:f(x)?"&amp;playlist="+h:""),"<div"+n+s+">"+o+'\n<div class="content">\n<iframe'+a+l+' src="'+$+"//www.youtube.com/embed/"+h+"?rel="+b+v+y+m+g+k+A+T+E+C+O+R+'" frameborder="0"'+S+"></iframe>\n</div>\n</div>";default:return N=f((L=t.$attr("poster"))["$nil_or_empty?"]())?"":' poster="'+t.$media_uri(L)+'"',D=f((L=t.$attr("preload"))["$nil_or_empty?"]())?"":' preload="'+L+'"',q=t.$attr("start"),B=t.$attr("end"),M=f(q)||f(B)?"#t="+(f(p=q)?p:"")+(f(B)?","+B:""):"","<div"+n+s+">"+o+'\n<div class="content">\n<video src="'+t.$media_uri(t.$attr("target"))+M+'"'+a+l+N+(f(t["$option?"]("autoplay"))?this.$append_boolean_attribute("autoplay",r):"")+(f(t["$option?"]("muted"))?this.$append_boolean_attribute("muted",r):"")+(f(t["$option?"]("nocontrols"))?"":this.$append_boolean_attribute("controls",r))+(f(t["$option?"]("loop"))?this.$append_boolean_attribute("loop",r):"")+D+">\nYour browser does not support the video tag.\n</video>\n</div>\n</div>"}}),_(n,"$convert_inline_anchor",function(t){var e=F,r=F,n=F,i=F,o=F,a=F,l=F,$=F,u=F;switch(t.$type()){case"xref":return f(e=t.$attributes()["$[]"]("path"))?(r=this.$append_link_constraint_attrs(t,f(t.$role())?[' class="'+t.$role()+'"']:[]).$join(),n=f(i=t.$text())?i:e):(r=f(t.$role())?' class="'+t.$role()+'"':"",f(n=t.$text())||(R(s("AbstractNode"),o=f(i=(this.refs=f(a=this.refs)?a:t.$document().$catalog()["$[]"]("refs"))["$[]"](l=t.$attributes()["$[]"]("refid")))?i:f(l["$nil_or_empty?"]())?$=this.$get_root_document(t):F)?f(this.resolving_xref=f(i=this.resolving_xref)?i:u=!0)&&f(u)?(f(n=o.$xreftext(t.$attr("xrefstyle",F,!0)))?f(n["$include?"]("<a"))&&(n=n.$gsub(s("DropAnchorRx"),"")):n=f($)?"[^top]":"["+l+"]",this.resolving_xref=F):n=f($)?"[^top]":"["+l+"]":n="["+l+"]")),'<a href="'+t.$target()+'"'+r+">"+n+"</a>";case"ref":return'<a id="'+t.$id()+'"></a>';case"link":return r=f(t.$id())?[' id="'+t.$id()+'"']:[],f(t.$role())&&r["$<<"](' class="'+t.$role()+'"'),f(t["$attr?"]("title"))&&r["$<<"](' title="'+t.$attr("title")+'"'),'<a href="'+t.$target()+'"'+this.$append_link_constraint_attrs(t,r).$join()+">"+t.$text()+"</a>";case"bibref":return'<a id="'+t.$id()+'"></a>['+(f(i=t.$reftext())?i:t.$id())+"]";default:return this.$logger().$warn("unknown anchor type: "+t.$type().$inspect()),F}}),_(n,"$convert_inline_break",function(t){return""+t.$text()+"<br"+this.void_element_slash+">"}),_(n,"$convert_inline_button",function(t){return'<b class="button">'+t.$text()+"</b>"}),_(n,"$convert_inline_callout",function(t){var e=F;return f(t.$document()["$attr?"]("icons","font"))?'<i class="conum" data-value="'+t.$text()+'"></i><b>('+t.$text()+")</b>":f(t.$document()["$attr?"]("icons"))?'<img src="'+t.$icon_uri("callouts/"+t.$text())+'" alt="'+t.$text()+'"'+this.void_element_slash+">":R(N("Array"),e=t.$attributes()["$[]"]("guard"))?'&lt;!--<b class="conum">('+t.$text()+")</b>--&gt;":""+e+'<b class="conum">('+t.$text()+")</b>"}),_(n,"$convert_inline_footnote",function(t){var e=F;return f(e=t.$attr("index"))?h(t.$type(),"xref")?'<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_'+e+'" title="View footnote.">'+e+"</a>]</sup>":'<sup class="footnote"'+(f(t.$id())?' id="_footnote_'+t.$id()+'"':"")+'>[<a id="_footnoteref_'+e+'" class="footnote" href="#_footnotedef_'+e+'" title="View footnote.">'+e+"</a>]</sup>":h(t.$type(),"xref")?'<sup class="footnoteref red" title="Unresolved footnote reference.">['+t.$text()+"]</sup>":F}),_(n,"$convert_inline_image",function(t){var e=F,r=F,n=F,i=F,o=F,a=F,l=F,$=F,u=F,c=F;return e=t.$target(),h(r=f(n=t.$type())?n:"image","icon")?h(i=t.$document().$attr("icons"),"font")?(o="fa fa-"+e,f(t["$attr?"]("size"))&&(o=""+o+" fa-"+t.$attr("size")),f(t["$attr?"]("flip"))?o=""+o+" fa-flip-"+t.$attr("flip"):f(t["$attr?"]("rotate"))&&(o=""+o+" fa-rotate-"+t.$attr("rotate")),l='<i class="'+o+'"'+(a=f(t["$attr?"]("title"))?' title="'+t.$attr("title")+'"':"")+"></i>"):f(i)?(a=f(t["$attr?"]("width"))?' width="'+t.$attr("width")+'"':"",f(t["$attr?"]("height"))&&(a=""+a+' height="'+t.$attr("height")+'"'),f(t["$attr?"]("title"))&&(a=""+a+' title="'+t.$attr("title")+'"'),l='<img src="'+t.$icon_uri(e)+'" alt="'+this.$encode_attribute_value(t.$alt())+'"'+a+this.void_element_slash+">"):l="["+t.$alt()+"&#93;":(a=f(t["$attr?"]("width"))?' width="'+t.$attr("width")+'"':"",f(t["$attr?"]("height"))&&(a=""+a+' height="'+t.$attr("height")+'"'),f(t["$attr?"]("title"))&&(a=""+a+' title="'+t.$attr("title")+'"'),(f(t["$attr?"]("format","svg"))||f(e["$include?"](".svg")))&&f(k(t.$document().$safe(),N(s("SafeMode"),"SECURE")))?f(t["$option?"]("inline"))?l=f(n=this.$read_svg_contents(t,e))?n:'<span class="alt">'+t.$alt()+"</span>":f(t["$option?"]("interactive"))?($=f(t["$attr?"]("fallback"))?'<img src="'+t.$image_uri(t.$attr("fallback"))+'" alt="'+this.$encode_attribute_value(t.$alt())+'"'+a+this.void_element_slash+">":'<span class="alt">'+t.$alt()+"</span>",l='<object type="image/svg+xml" data="'+t.$image_uri(e)+'"'+a+">"+$+"</object>"):l='<img src="'+t.$image_uri(e)+'" alt="'+this.$encode_attribute_value(t.$alt())+'"'+a+this.void_element_slash+">":l='<img src="'+t.$image_uri(e)+'" alt="'+this.$encode_attribute_value(t.$alt())+'"'+a+this.void_element_slash+">"),f(t["$attr?"]("link"))&&(l='<a class="image" href="'+t.$attr("link")+'"'+this.$append_link_constraint_attrs(t).$join()+">"+l+"</a>"),u=r,f(c=t.$role())?u=f(t["$attr?"]("float"))?""+u+" "+t.$attr("float")+" "+c:""+u+" "+c:f(t["$attr?"]("float"))&&(u=""+u+" "+t.$attr("float")),'<span class="'+u+'">'+l+"</span>"}),_(n,"$convert_inline_indexterm",function(t){return h(t.$type(),"visible")?t.$text():""}),_(n,"$convert_inline_kbd",function(t){var e=F;return h((e=t.$attr("keys")).$size(),1)?"<kbd>"+e["$[]"](0)+"</kbd>":'<span class="keyseq"><kbd>'+e.$join("</kbd>+<kbd>")+"</kbd></span>"}),_(n,"$convert_inline_menu",function(t){var e=F,r=F,n=F,i=F,s=F;return(r="</b>"+(e=f(t.$document()["$attr?"]("icons","font"))?'&#160;<i class="fa fa-angle-right caret"></i> ':'&#160;<b class="caret">&#8250;</b> ')+'<b class="submenu">',n=t.$attr("menu"),f((i=t.$attr("submenus"))["$empty?"]()))?f(s=t.$attr("menuitem"))?'<span class="menuseq"><b class="menu">'+n+"</b>"+e+'<b class="menuitem">'+s+"</b></span>":'<b class="menuref">'+n+"</b>":'<span class="menuseq"><b class="menu">'+n+"</b>"+e+'<b class="submenu">'+i.$join(r)+"</b>"+e+'<b class="menuitem">'+t.$attr("menuitem")+"</b></span>"}),_(n,"$convert_inline_quoted",function(t){var e,r=F,n=F,i=F,o=F;return(r=null==(e=w(s("QUOTE_TAGS")["$[]"](t.$type())))[0]?F:e[0],n=null==e[1]?F:e[1],i=null==e[2]?F:e[2],f(t.$id()))?(o=f(t.$role())?' class="'+t.$role()+'"':"",f(i))?""+r.$chop()+' id="'+t.$id()+'"'+o+">"+t.$text()+n:'<span id="'+t.$id()+'"'+o+">"+r+t.$text()+n+"</span>":f(t.$role())?f(i)?""+r.$chop()+' class="'+t.$role()+'">'+t.$text()+n:'<span class="'+t.$role()+'">'+r+t.$text()+n+"</span>":""+r+t.$text()+n}),_(n,"$read_svg_contents",function(e,r){var n=F,i=F,o=F,a=F;if(f(n=e.$read_contents(r,u(["start","normalize","label","warn_if_empty"],{start:e.$document().$attr("imagesdir"),normalize:!0,label:"SVG",warn_if_empty:!0})))){if(f(n["$empty?"]()))return F;f(n["$start_with?"]("<svg"))||(n=n.$sub(s("SvgPreambleRx"),"")),i=o=a=F,m(["width","height"],"each",[],function(t){var r=F,l=F;if(null==t&&(t=F),!f(e["$attr?"](t)))return F;if(!f(o)){if(h(a=f(r=a)?r:f(l=n.$match(s("SvgStartTagRx")))?l:"no_match","no_match"))return F;o=(i=a["$[]"](0)).$gsub(s("DimensionAttributeRx"),"")}return o=""+o.$chop()+" "+t+'="'+e.$attr(t)+'">'}),f(o)&&(n=""+o+n["$[]"](t.Range.$new(i.$length(),-1,!1)))}return n}),n.$private(),_(n,"$append_boolean_attribute",function(t,e){return f(e)?" "+t+'="'+t+'"':" "+t}),_(n,"$append_link_constraint_attrs",function(t,e){var r=F,n=F;return null==e&&(e=[]),f(t["$option?"]("nofollow"))&&(r="nofollow"),f(n=t.$attributes()["$[]"]("window"))?(e["$<<"](' target="'+n+'"'),(h(n,"_blank")||f(t["$option?"]("noopener")))&&e["$<<"](f(r)?' rel="'+r+' noopener"':' rel="noopener"')):f(r)&&e["$<<"](' rel="'+r+'"'),e},-2),_(n,"$encode_attribute_value",function(t){return f(t["$include?"]('"'))?t.$gsub('"',"&quot;"):t}),_(n,"$generate_manname_section",function(t){var e=F,r=F,n=F,i=F;return e=t.$attr("manname-title","Name"),f(n=t.$sections()["$[]"](0))&&h(r=n.$title(),r.$upcase())&&(e=e.$upcase()),"<h2"+(f(i=t.$attr("manname-id"))?' id="'+i+'"':"")+">"+e+'</h2>\n<div class="sectionbody">\n<p>'+t.$attr("mannames").$join(", ")+" - "+t.$attr("manpurpose")+"</p>\n</div>"}),_(n,"$get_root_document",function(t){for(;f((t=t.$document())["$nested?"]());)t=t.$parent_document();return t}),_(n,"$method_missing",function t(e,r){var n,i=t.$$p||F,s=F;return(t.$$p=null,n=I(arguments,1),v((s=e.$to_s())["$start_with?"]("convert_"))&&f(this["$handles?"](s)))?m(this,"send",["convert_"+s].concat(T(n))):d(this,p(this,"method_missing",t,!1,!0),"method_missing",[e].concat(T(n)),i)},-2),_(n,"$respond_to_missing?",function(t,e){var r=F,n=F;return(I(arguments,1),f(r=(n=t.$to_s())["$start_with?"]("convert_")["$!"]()))?this["$handles?"](n):r},-2)},Opal.modules["asciidoctor/extensions"]=function(t){var e,r,n,i,s,o,a,l,$,u,c,h,_,d,p,f,m,g,b,v,y,x,k,w,A,E,S,C,O,R,I,T,z,F,N,L,D,q,B,M,j,P,U,H,Y,G,W,K,X,V,J,Z,Q,tt,te,tr,tn,ti,ts,to,ta,tl,t$,tu,tc,th,t_,td,tp,tf,tm,tg,tb,tv=t.module,ty=t.klass,tx=t.truthy,tk=t.hash2,tw=t.def,tA=t.send,tE=t.alias,tS=t.slice,tC=t.rb_plus,tO=t.eqeq,tR=t.rb_gt,tI=t.not,tT=t.eqeqeq,tz=t.to_a,tF=t.to_ary,tN=t.const_set,tL=t.return_val,tD=t.send2,tq=t.find_super,tB=t.NilClass,tM=t.class_variable_set,tj=t.class_variable_get,tP=t.regexp,tU=t.Class,tH=t.return_ivar,tY=t.rb_lt,tG=t.rb_minus,tW=t.hash,tK=[],tX=t.nil,tV=t.$$$;return t.add_stubs("[]=,config,const_defined?,singleton_class?,include,const_get,extend,enable_dsl,attr_reader,merge,class,update,raise,document,==,doctype,[],+,level,delete,>,casecmp,new,title=,sectname=,special=,fetch,numbered=,attr?,!,key?,special,numbered,id=,generate_id,title,update_attributes,tr,basename,create_block,assign_caption,===,parse_blocks,empty?,include?,sub_attributes,parse,each,define_method,unshift,shift,send,size,receiver,binding,define_singleton_method,instance_exec,to_proc,call,option,content_model,flatten,positional_attributes,default_attributes,respond_to?,to_s,partition,to_i,<<,compact,inspect,resolve_attributes,attr_accessor,to_set,contexts,match?,resolve_regexp,format,method,register,reset,values,groups,arity,activate,add_document_processor,tree_processor,tree_processors?,tree_processors,any?,select,add_syntax_processor,to_sym,instance_variable_get,kind,private,join,map,split,capitalize,instance_variable_set,resolve_args,singleton_class,process_block_given?,source_location,freeze,resolve_class,<,update_config,as_symbol,name,name=,pop,-,-@,next_auto_id,generate_name,each_with_object"),r=(e=[tv(tK[0],"Asciidoctor")].concat(tK))[0],i=[n=tv(r,"Extensions")].concat(e),s=t.$r(i),a=[o=ty(i[0],null,"Processor")].concat(i),l=t.$r(a),o.$$prototype.config=tX,tw($=t.get_singleton_class(o),"$config",function(){var t=tX;return null==this.config&&(this.config=tX),this.config=tx(t=this.config)?t:tk([],{})}),tw($,"$option",function(t,e){var r;return r=[t,e],tA(this.$config(),"[]=",r),r[r.length-1]}),tw($,"$enable_dsl",function(){return tx(this["$const_defined?"]("DSL"))?tx(this["$singleton_class?"]())?this.$include(this.$const_get("DSL")):this.$extend(this.$const_get("DSL")):tX}),tE($,"use_dsl","enable_dsl"),o.$attr_reader("config"),tw(o,"$initialize",function(t){return null==t&&(t=tk([],{})),this.config=this.$class().$config().$merge(t)},-1),tw(o,"$update_config",function(t){return this.config.$update(t)}),tw(o,"$process",function(t){return tS(arguments),this.$raise(tV("NotImplementedError"),""+l("Processor")+" subclass "+this.$class()+" must implement the #process method")},-1),tw(o,"$create_section",function(t,e,r,n){var i,s,o=tX,a=tX,$=tX,u=tX,c=tX,h=tX,_=tX,d=tX,p=tX,f=tX;return null==n&&(n=tk([],{})),a=($=(o=t.$document()).$doctype())["$=="]("book"),u=tx(c=n["$[]"]("level"))?c:tC(t.$level(),1),tx(h=r.$delete("style"))?tx(a)&&tO(h,"abstract")?(_=(i=["chapter",1])[0],u=i[1]):(_=(i=[h,!0])[0],d=i[1],tO(u,0)&&(u=1)):tx(a)?_=tO(u,0)?"part":tx(tR(u,1))?"section":"chapter":tO($,"manpage")&&tO(e.$casecmp("synopsis"),0)?(_=(i=["synopsis",!0])[0],d=i[1]):_="section",tA(p=l("Section").$new(t,u),"title=",s=[(i=[e,_])[0]]),s[s.length-1],tA(p,"sectname=",s=[i[1]]),s[s.length-1],tx(d)?(p["$special="](!0),tx(n.$fetch("numbered",h["$=="]("appendix")))?p["$numbered="](!0):tI(n["$key?"]("numbered"))&&tx(o["$attr?"]("sectnums","all"))&&p["$numbered="](!(tx(a)&&tO(u,1))||"chapter")):tx(tR(u,0))?tx(n.$fetch("numbered",o["$attr?"]("sectnums")))&&p["$numbered="](!tx(p.$special())||tx(c=t.$numbered())||c):tx(n.$fetch("numbered",tx(c=a)?o["$attr?"]("partnums"):c))&&p["$numbered="](!0),tO(f=r["$[]"]("id"),!1)?r.$delete("id"):p["$id="]((tA(r,"[]=",i=["id",tx(c=f)?c:tx(o["$attr?"]("sectids"))?l("Section").$generate_id(p.$title(),o):tX]),i[i.length-1])),p.$update_attributes(r),p},-4),tw(o,"$create_block",function(t,e,r,n,i){return null==i&&(i=tk([],{})),l("Block").$new(t,e,tk(["source","attributes"],{source:r,attributes:n}).$merge(i))},-5),tw(o,"$create_list",function(t,e,r){var n=tX;return null==r&&(r=tX),n=l("List").$new(t,e),tx(r)&&n.$update_attributes(r),n},-3),tw(o,"$create_list_item",function(t,e){return null==e&&(e=tX),l("ListItem").$new(t,e)},-2),tw(o,"$create_image_block",function(t,e,r){var n,i=tX,s=tX,o=tX;return null==r&&(r=tk([],{})),tx(i=e["$[]"]("target"))||this.$raise(tV("ArgumentError"),"Unable to create an image block, target attribute is required"),tx(e["$[]"]("alt"))||e["$[]="]("alt",(tA(e,"[]=",n=["default-alt",l("Helpers").$basename(i,!0).$tr("_-"," ")]),n[n.length-1])),s=tx(e["$key?"]("title"))?e.$delete("title"):tX,o=this.$create_block(t,"image",tX,e,r),tx(s)&&(o["$title="](s),o.$assign_caption(e.$delete("caption"),"figure")),o},-3),tw(o,"$create_inline",function(t,e,r,n){return null==n&&(n=tk([],{})),l("Inline").$new(t,e,r,tO(e,"quoted")?tk(["type"],{type:"unquoted"}).$merge(n):n)},-4),tw(o,"$parse_content",function(t,e,r){var n=tX;return null==r&&(r=tX),n=tT(l("Reader"),e)?e:l("Reader").$new(e),l("Parser").$parse_blocks(n,t,r),t},-3),tw(o,"$parse_attributes",function(t,e,r){var n=tX;return(null==r&&(r=tk([],{})),tx(!tx(e)||e["$empty?"]()))?tk([],{}):(tx(r["$[]"]("sub_attributes"))&&tx(e["$include?"](l("ATTR_REF_HEAD")))&&(e=t.$sub_attributes(e)),l("AttributeList").$new(e).$parse(tx(n=r["$[]"]("positional_attributes"))?n:[]))},-3),tA([["create_paragraph","create_block","paragraph"],["create_open_block","create_block","open"],["create_example_block","create_block","example"],["create_pass_block","create_block","pass"],["create_listing_block","create_block","listing"],["create_literal_block","create_block","literal"],["create_anchor","create_inline","anchor"],["create_inline_pass","create_inline","quoted"]],"each",[],function t(e,r,n){var i=null==t.$$s?this:t.$$s;return null==e&&(e=tX),null==r&&(r=tX),null==n&&(n=tX),tA(i,"define_method",[e],function t(e){var i,s=null==t.$$s?this:t.$$s;return i=tS(arguments),i.$unshift(i.$shift(),n),tA(s,"send",[r].concat(tz(i)))},{$$arity:-1,$$s:i})},{$$s:o}),tw(u=tv(i[0],"ProcessorDsl"),"$option",function(t,e){var r;return r=[t,e],tA(this.$config(),"[]=",r),r[r.length-1]}),tw(u,"$process",function t(e){var r,n,i=t.$$p||tX,s=tX;return(null==this.process_block&&(this.process_block=tX),t.$$p=null,r=tS(arguments),i!==tX)?(tx(r["$empty?"]())||this.$raise(tV("ArgumentError"),"wrong number of arguments (given "+r.$size()+", expected 0)"),tx(i.$binding())&&tO(this,i.$binding().$receiver())||(s=this,tA(i,"define_singleton_method",["call"],function(t){var e;return e=tS(arguments),tA(s,"instance_exec",tz(e),i.$to_proc())},-1)),this.process_block=i):tx(null!=(n=this.process_block)&&n!==tX?"instance-variable":tX)?tA(this.process_block,"call",tz(r)):this.$raise(tV("NotImplementedError"),""+this.$class()+" #process method called before being registered")},-1),tw(u,"$process_block_given?",function(){var t;return null!=(t=this.process_block)&&t!==tX?"instance-variable":tX}),h=[c=tv(i[0],"DocumentProcessorDsl")].concat(i),_=t.$r(h),c.$include(_("ProcessorDsl")),tw(c,"$prefer",function(){return this.$option("position",">>")}),p=[d=tv(i[0],"SyntaxProcessorDsl")].concat(i),f=t.$r(p),d.$include(f("ProcessorDsl")),tw(d,"$named",function(t){return tT(f("Processor"),this)?this.name=t:this.$option("name",t)}),tw(d,"$content_model",function(t){return this.$option("content_model",t)}),tE(d,"parse_content_as","content_model"),tw(d,"$positional_attributes",function(t){var e;return e=tS(arguments),this.$option("positional_attrs",e.$flatten())},-1),tE(d,"name_positional_attributes","positional_attributes"),tE(d,"positional_attrs","positional_attributes"),tw(d,"$default_attributes",function(t){return this.$option("default_attrs",t)}),tE(d,"default_attrs","default_attributes"),tw(d,"$resolve_attributes",function(t){var e,r,n,i=tX,s=tX,o=tX;return(e=tS(arguments),!tx(tR((r=e).$size(),1))&&tx((r=r.$fetch(0,!0))["$respond_to?"]("to_sym"))&&(r=[r]),tT(!0,i=r))?(this.$option("positional_attrs",[]),this.$option("default_attrs",tk([],{}))):tT(tV("Array"),i)?(s=(n=[[],tk([],{})])[0],o=n[1],tA(r,"each",[],function(t){var e,r=tX,n=tX,i=tX;return(null==t&&(t=tX),tx((t=t.$to_s())["$include?"]("=")))?(r=null==(e=tF(t.$partition("=")))[0]?tX:e[0],null==e[1]||e[1],n=null==e[2]?tX:e[2],tx(r["$include?"](":"))&&(i=null==(e=tF(r.$partition(":")))[0]?tX:e[0],null==e[1]||e[1],r=null==e[2]?tX:e[2],i=tO(i,"@")?s.$size():i.$to_i(),s["$[]="](i,r)),tA(o,"[]=",e=[r,n]),e[e.length-1]):tx(t["$include?"](":"))?(i=null==(e=tF(t.$partition(":")))[0]?tX:e[0],null==e[1]||e[1],r=null==e[2]?tX:e[2],i=tO(i,"@")?s.$size():i.$to_i(),tA(s,"[]=",e=[i,r]),e[e.length-1]):s["$<<"](t)}),this.$option("positional_attrs",s.$compact()),this.$option("default_attrs",o)):tT(tV("Hash"),i)?(s=(n=[[],tk([],{})])[0],o=n[1],tA(r,"each",[],function(t,e){var r,n=tX,i=tX;return(null==t&&(t=tX),null==e&&(e=tX),tx((n=t.$to_s())["$include?"](":"))&&(i=null==(r=tF(n.$partition(":")))[0]?tX:r[0],null==r[1]||r[1],n=null==r[2]?tX:r[2],i=tO(i,"@")?s.$size():i.$to_i(),s["$[]="](i,n)),tx(e))?(tA(o,"[]=",r=[n,e]),r[r.length-1]):tX}),this.$option("positional_attrs",s.$compact()),this.$option("default_attrs",o)):this.$raise(tV("ArgumentError"),"unsupported attributes specification for macro: "+r.$inspect())},-1),tE(d,"resolves_attributes","resolve_attributes"),g=[m=ty(i[0],s("Processor"),"Preprocessor")].concat(i),b=t.$r(g),tw(m,"$process",function(t,e){return this.$raise(tV("NotImplementedError"),""+b("Preprocessor")+" subclass "+this.$class()+" must implement the #process method")}),tN(s("Preprocessor"),"DSL",s("DocumentProcessorDsl")),y=[v=ty(i[0],s("Processor"),"TreeProcessor")].concat(i),x=t.$r(y),tw(v,"$process",function(t){return this.$raise(tV("NotImplementedError"),""+x("TreeProcessor")+" subclass "+this.$class()+" must implement the #process method")}),tN(s("TreeProcessor"),"DSL",s("DocumentProcessorDsl")),tN(i[0],"Treeprocessor",s("TreeProcessor")),w=[k=ty(i[0],s("Processor"),"Postprocessor")].concat(i),A=t.$r(w),tw(k,"$process",function(t,e){return this.$raise(tV("NotImplementedError"),""+A("Postprocessor")+" subclass "+this.$class()+" must implement the #process method")}),tN(s("Postprocessor"),"DSL",s("DocumentProcessorDsl")),S=[E=ty(i[0],s("Processor"),"IncludeProcessor")].concat(i),C=t.$r(S),tw(E,"$process",function(t,e,r,n){return this.$raise(tV("NotImplementedError"),""+C("IncludeProcessor")+" subclass "+this.$class()+" must implement the #process method")}),tw(E,"$handles?",tL(!0)),R=[O=tv(i[0],"IncludeProcessorDsl")].concat(i),I=t.$r(R),O.$include(I("DocumentProcessorDsl")),tw(O,"$handles?",function t(e){var r,n,i=t.$$p||tX;return(null==this.handles_block&&(this.handles_block=tX),t.$$p=null,r=tS(arguments),i!==tX)?(tx(r["$empty?"]())||this.$raise(tV("ArgumentError"),"wrong number of arguments (given "+r.$size()+", expected 0)"),this.handles_block=i):!tx(null!=(n=this.handles_block)&&n!==tX?"instance-variable":tX)||this.handles_block.$call(r["$[]"](0))},-1),tN(s("IncludeProcessor"),"DSL",s("IncludeProcessorDsl")),z=[T=ty(i[0],s("Processor"),"DocinfoProcessor")].concat(i),F=t.$r(z),T.$$prototype.config=tX,tw(T,"$initialize",function t(e){t.$$p;var r,n=tX;return(t.$$p=null,null==e&&(e=tk([],{})),tD(this,tq(this,"initialize",t,!1,!0),"initialize",[e],null),tx(n=this.config["$[]"]("location")))?n:(r=["location","head"],tA(this.config,"[]=",r),r[r.length-1])},-1),tw(T,"$process",function(t){return this.$raise(tV("NotImplementedError"),""+F("DocinfoProcessor")+" subclass "+this.$class()+" must implement the #process method")}),L=[N=tv(i[0],"DocinfoProcessorDsl")].concat(i),D=t.$r(L),N.$include(D("DocumentProcessorDsl")),tw(N,"$at_location",function(t){return this.$option("location",t)}),tN(s("DocinfoProcessor"),"DSL",s("DocinfoProcessorDsl")),B=[q=ty(i[0],s("Processor"),"BlockProcessor")].concat(i),M=t.$r(B),q.$$prototype.config=tX,q.$attr_accessor("name"),tw(q,"$initialize",function t(e,r){t.$$p;var n,i=tX;return(t.$$p=null,null==e&&(e=tX),null==r&&(r=tk([],{})),tD(this,tq(this,"initialize",t,!1,!0),"initialize",[r],null),this.name=tx(i=e)?i:this.config["$[]"]("name"),tT(tB,i=this.config["$[]"]("contexts"))?tx(this.config["$[]"]("contexts"))||this.config["$[]="]("contexts",["open","paragraph"].$to_set()):tT(tV("Symbol"),i)?this.config["$[]="]("contexts",[this.config["$[]"]("contexts")].$to_set()):this.config["$[]="]("contexts",this.config["$[]"]("contexts").$to_set()),tx(i=this.config["$[]"]("content_model")))?i:(n=["content_model","compound"],tA(this.config,"[]=",n),n[n.length-1])},-1),tw(q,"$process",function(t,e,r){return this.$raise(tV("NotImplementedError"),""+M("BlockProcessor")+" subclass "+this.$class()+" must implement the #process method")}),P=[j=tv(i[0],"BlockProcessorDsl")].concat(i),U=t.$r(P),j.$include(U("SyntaxProcessorDsl")),tw(j,"$contexts",function(t){var e;return e=tS(arguments),this.$option("contexts",e.$flatten().$to_set())},-1),tE(j,"on_contexts","contexts"),tE(j,"on_context","contexts"),tE(j,"bind_to","contexts"),tN(s("BlockProcessor"),"DSL",s("BlockProcessorDsl")),Y=[H=ty(i[0],s("Processor"),"MacroProcessor")].concat(i),G=t.$r(Y),H.$$prototype.config=tX,H.$attr_accessor("name"),tw(H,"$initialize",function t(e,r){t.$$p;var n,i=tX;return(t.$$p=null,null==e&&(e=tX),null==r&&(r=tk([],{})),tD(this,tq(this,"initialize",t,!1,!0),"initialize",[r],null),this.name=tx(i=e)?i:this.config["$[]"]("name"),tx(i=this.config["$[]"]("content_model")))?i:(n=["content_model","attributes"],tA(this.config,"[]=",n),n[n.length-1])},-1),tw(H,"$process",function(t,e,r){return this.$raise(tV("NotImplementedError"),""+G("MacroProcessor")+" subclass "+this.$class()+" must implement the #process method")}),K=[W=tv(i[0],"MacroProcessorDsl")].concat(i),X=t.$r(K),W.$include(X("SyntaxProcessorDsl")),tw(W,"$resolve_attributes",function t(e){var r,n=t.$$p||tX;return(t.$$p=null,r=tS(arguments),tO(r.$size(),1)&&tI(r["$[]"](0)))?this.$option("content_model","text"):(tD(this,tq(this,"resolve_attributes",t,!1,!0),"resolve_attributes",tz(r),n),this.$option("content_model","attributes"))},-1),tE(W,"resolves_attributes","resolve_attributes"),J=[V=ty(i[0],s("MacroProcessor"),"BlockMacroProcessor")].concat(i),Z=t.$r(J),V.$$prototype.name=tX,tw(V,"$name",function(){return tx(Z("MacroNameRx")["$match?"](this.name.$to_s()))||this.$raise(tV("ArgumentError"),"invalid name for block macro: "+this.name),this.name}),tN(s("BlockMacroProcessor"),"DSL",s("MacroProcessorDsl")),tt=[Q=ty(i[0],s("MacroProcessor"),"InlineMacroProcessor")].concat(i),te=t.$r(tt),(tr=Q.$$prototype).config=tr.name=tX,tM(tt[0],"@@rx_cache",tk([],{})),tw(Q,"$regexp",function(){var t,e=tX;return tx(e=this.config["$[]"]("regexp"))?e:(t=["regexp",this.$resolve_regexp(this.name.$to_s(),this.config["$[]"]("format"))],tA(this.config,"[]=",t),t[t.length-1])}),tw(Q,"$resolve_regexp",function(t,e){var r,n=tX;return(tx(te("MacroNameRx")["$match?"](t))||this.$raise(tV("ArgumentError"),"invalid name for inline macro: "+t),tx(n=tj(tt[0],"@@rx_cache",!1)["$[]"]([t,e])))?n:(r=[[t,e],tP(["\\\\?",t,":",tO(e,"short")?"(){0}":"(\\S+?)","\\[(|",te("CC_ANY"),"*?[^\\\\])\\]"])],tA(tj(tt[0],"@@rx_cache",!1),"[]=",r),r[r.length-1])}),ti=[tn=tv(i[0],"InlineMacroProcessorDsl")].concat(i),ts=t.$r(ti),tn.$include(ts("MacroProcessorDsl")),tw(tn,"$format",function(t){return this.$option("format",t)}),tE(tn,"match_format","format"),tE(tn,"using_format","format"),tw(tn,"$match",function(t){return this.$option("regexp",t)}),tN(s("InlineMacroProcessor"),"DSL",s("InlineMacroProcessorDsl")),(to=ty(i[0],null,"Extension")).$attr_reader("kind"),to.$attr_reader("config"),to.$attr_reader("instance"),tw(to,"$initialize",function(t,e,r){return this.kind=t,this.instance=e,this.config=r}),(ta=ty(i[0],s("Extension"),"ProcessorExtension")).$attr_reader("process_method"),tw(ta,"$initialize",function t(e,r,n){t.$$p;var i=tX;return t.$$p=null,null==n&&(n=tX),tD(this,tq(this,"initialize",t,!1,!0),"initialize",[e,r,r.$config()],null),this.process_method=tx(i=n)?i:r.$method("process")},-3),t$=[tl=ty(i[0],null,"Group")].concat(i),tc=[tu=t.get_singleton_class(tl)].concat(t$),th=t.$r(tc),tw(tu,"$register",function(t){return null==t&&(t=tX),th("Extensions").$register(t,this)},-1),tw(tl,"$activate",function(t){return this.$raise(tV("NotImplementedError"))}),td=[t_=ty(i[0],null,"Registry")].concat(i),tp=t.$r(td),(tf=t_.$$prototype).document=tf.groups=tf.preprocessor_extensions=tf.tree_processor_extensions=tf.postprocessor_extensions=tf.include_processor_extensions=tf.docinfo_processor_extensions=tf.block_extensions=tf.block_macro_extensions=tf.inline_macro_extensions=tX,t_.$attr_reader("document"),t_.$attr_reader("groups"),tw(t_,"$initialize",function(t){return null==t&&(t=tk([],{})),this.groups=t,this.$reset(),this.preprocessor_extensions=this.tree_processor_extensions=this.postprocessor_extensions=this.include_processor_extensions=this.docinfo_processor_extensions=this.block_extensions=this.block_macro_extensions=this.inline_macro_extensions=tX,this.document=tX},-1),tw(t_,"$activate",function(t){var e=tX;return tx(this.document)&&this.$reset(),this.document=t,tx((e=tC(tp("Extensions").$groups().$values(),this.groups.$values()))["$empty?"]())||tA(e,"each",[],function t(e){var r=null==t.$$s?this:t.$$s,n=tX;if(null==e&&(e=tX),tT(tV("Proc"),n=e))switch(e.$arity()){case 0:case -1:return tA(r,"instance_exec",[],e.$to_proc());case 1:return e.$call(r);default:return tX}else if(tT(tU,n))return e.$new().$activate(r);else return e.$activate(r)},{$$s:this}),this}),tw(t_,"$preprocessor",function t(e){var r,n=t.$$p||tX;return t.$$p=null,r=tS(arguments),tA(this,"add_document_processor",["preprocessor",r],n.$to_proc())},-1),tw(t_,"$preprocessors?",function(){return this.preprocessor_extensions["$!"]()["$!"]()}),tw(t_,"$preprocessors",tH("preprocessor_extensions")),tw(t_,"$tree_processor",function t(e){var r,n=t.$$p||tX;return t.$$p=null,r=tS(arguments),tA(this,"add_document_processor",["tree_processor",r],n.$to_proc())},-1),tw(t_,"$tree_processors?",function(){return this.tree_processor_extensions["$!"]()["$!"]()}),tw(t_,"$tree_processors",tH("tree_processor_extensions")),tE(t_,"treeprocessor","tree_processor"),tE(t_,"treeprocessors?","tree_processors?"),tE(t_,"treeprocessors","tree_processors"),tw(t_,"$postprocessor",function t(e){var r,n=t.$$p||tX;return t.$$p=null,r=tS(arguments),tA(this,"add_document_processor",["postprocessor",r],n.$to_proc())},-1),tw(t_,"$postprocessors?",function(){return this.postprocessor_extensions["$!"]()["$!"]()}),tw(t_,"$postprocessors",tH("postprocessor_extensions")),tw(t_,"$include_processor",function t(e){var r,n=t.$$p||tX;return t.$$p=null,r=tS(arguments),tA(this,"add_document_processor",["include_processor",r],n.$to_proc())},-1),tw(t_,"$include_processors?",function(){return this.include_processor_extensions["$!"]()["$!"]()}),tw(t_,"$include_processors",tH("include_processor_extensions")),tw(t_,"$docinfo_processor",function t(e){var r,n=t.$$p||tX;return t.$$p=null,r=tS(arguments),tA(this,"add_document_processor",["docinfo_processor",r],n.$to_proc())},-1),tw(t_,"$docinfo_processors?",function(t){return null==t&&(t=tX),!!tx(this.docinfo_processor_extensions)&&(!tx(t)||tA(this.docinfo_processor_extensions,"any?",[],function(e){return null==e&&(e=tX),e.$config()["$[]"]("location")["$=="](t)}))},-1),tw(t_,"$docinfo_processors",function(t){return(null==t&&(t=tX),tx(this.docinfo_processor_extensions))?tx(t)?tA(this.docinfo_processor_extensions,"select",[],function(e){return null==e&&(e=tX),e.$config()["$[]"]("location")["$=="](t)}):this.docinfo_processor_extensions:tX},-1),tw(t_,"$block",function t(e){var r,n=t.$$p||tX;return t.$$p=null,r=tS(arguments),tA(this,"add_syntax_processor",["block",r],n.$to_proc())},-1),tw(t_,"$blocks?",function(){return this.block_extensions["$!"]()["$!"]()}),tw(t_,"$registered_for_block?",function(t,e){var r=tX;return!!tx(r=this.block_extensions["$[]"](t.$to_sym()))&&!!tx(r.$config()["$[]"]("contexts")["$include?"](e))&&r}),tw(t_,"$find_block_extension",function(t){return this.block_extensions["$[]"](t.$to_sym())}),tw(t_,"$block_macro",function t(e){var r,n=t.$$p||tX;return t.$$p=null,r=tS(arguments),tA(this,"add_syntax_processor",["block_macro",r],n.$to_proc())},-1),tw(t_,"$block_macros?",function(){return this.block_macro_extensions["$!"]()["$!"]()}),tw(t_,"$registered_for_block_macro?",function(t){var e=tX;return!!tx(e=this.block_macro_extensions["$[]"](t.$to_sym()))&&e}),tw(t_,"$find_block_macro_extension",function(t){return this.block_macro_extensions["$[]"](t.$to_sym())}),tw(t_,"$inline_macro",function t(e){var r,n=t.$$p||tX;return t.$$p=null,r=tS(arguments),tA(this,"add_syntax_processor",["inline_macro",r],n.$to_proc())},-1),tw(t_,"$inline_macros?",function(){return this.inline_macro_extensions["$!"]()["$!"]()}),tw(t_,"$registered_for_inline_macro?",function(t){var e=tX;return!!tx(e=this.inline_macro_extensions["$[]"](t.$to_sym()))&&e}),tw(t_,"$find_inline_macro_extension",function(t){return this.inline_macro_extensions["$[]"](t.$to_sym())}),tw(t_,"$inline_macros",function(){return this.inline_macro_extensions.$values()}),tw(t_,"$prefer",function t(e){var r,n=t.$$p||tX,i=tX,s=tX,o=tX;return t.$$p=null,r=tS(arguments),i=tT(tp("ProcessorExtension"),s=r.$shift())?s:tA(this,"send",[s].concat(tz(r)),n.$to_proc()),(o=this.$instance_variable_get(("@"+i.$kind()+"_extensions").$to_sym())).$unshift(o.$delete(i)),i},-1),t_.$private(),tw(t_,"$add_document_processor",function e(r,n){var i,s=e.$$p||tX,o=tX,a=tX,l=tX,$=tX,u=tX,c=tX,h=tX,_=tX,d=tX,p=tX,f=tX;return e.$$p=null,a=tA((o=r.$to_s().$tr("_"," ")).$split(),"map",[],function(t){return null==t&&(t=tX),t.$capitalize()}).$join().$to_sym(),l=tp("Extensions").$const_get(a,!1),$=tx(tV("::","AsciidoctorJ","skip_raise")?"constant":tX)?tV(tV("AsciidoctorJ"),"Extensions").$const_get(a,!1):tX,u=tx(c=this.$instance_variable_get(("@"+r+"_extensions").$to_sym()))?c:this.$instance_variable_set(("@"+r+"_extensions").$to_sym(),[]),s!==tX?(h=this.$resolve_args(n,1),(_=l.$new(h)).$singleton_class().$enable_dsl(),tO(s.$arity(),0)?tA(_,"instance_exec",[],s.$to_proc()):t.yield1(s,_),tx(_["$process_block_given?"]())||this.$raise(tV("NoMethodError"),"No block specified to process "+o+" extension at "+s.$source_location().$join(":")),_.$freeze(),d=tp("ProcessorExtension").$new(r,_)):(_=null==(i=tF(this.$resolve_args(n,2)))[0]?tX:i[0],h=null==i[1]?tX:i[1],tx(p=tp("Helpers").$resolve_class(_))?(tx(tY(p,l))||tx($)&&tx(tY(p,$))||this.$raise(tV("ArgumentError"),"Invalid type for "+o+" extension: "+_),(f=p.$new(h)).$freeze(),d=tp("ProcessorExtension").$new(r,f)):tT(l,_)||tx($)&&tT($,_)?(_.$update_config(h),_.$freeze(),d=tp("ProcessorExtension").$new(r,_)):this.$raise(tV("ArgumentError"),"Invalid arguments specified for registering "+o+" extension: "+n)),tO(d.$config()["$[]"]("position"),">>")?u.$unshift(d):u["$<<"](d),d}),tw(t_,"$add_syntax_processor",function e(r,n){var i,s=e.$$p||tX,o=tX,a=tX,l=tX,$=tX,u=tX,c=tX,h=tX,_=tX,d=tX,p=tX,f=tX;return(e.$$p=null,a=tA((o=r.$to_s().$tr("_"," ")).$split(),"map",[],function(t){return null==t&&(t=tX),t.$capitalize()})["$<<"]("Processor").$join().$to_sym(),l=tp("Extensions").$const_get(a,!1),$=tx(tV("::","AsciidoctorJ","skip_raise")?"constant":tX)?tV(tV("AsciidoctorJ"),"Extensions").$const_get(a,!1):tX,u=tx(c=this.$instance_variable_get(("@"+r+"_extensions").$to_sym()))?c:this.$instance_variable_set(("@"+r+"_extensions").$to_sym(),tk([],{})),s!==tX)?(h=null==(i=tF(this.$resolve_args(n,2)))[0]?tX:i[0],_=null==i[1]?tX:i[1],(d=l.$new(this.$as_symbol(h),_)).$singleton_class().$enable_dsl(),tO(s.$arity(),0)?tA(d,"instance_exec",[],s.$to_proc()):t.yield1(s,d),tx(h=this.$as_symbol(d.$name()))||this.$raise(tV("ArgumentError"),"No name specified for "+o+" extension at "+s.$source_location().$join(":")),tx(d["$process_block_given?"]())||this.$raise(tV("NoMethodError"),"No block specified to process "+o+" extension at "+s.$source_location().$join(":")),d.$freeze(),tA(u,"[]=",i=[h,tp("ProcessorExtension").$new(r,d)]),i[i.length-1]):(d=null==(i=tF(this.$resolve_args(n,3)))[0]?tX:i[0],h=null==i[1]?tX:i[1],_=null==i[2]?tX:i[2],tx(p=tp("Helpers").$resolve_class(d)))?(tx(tY(p,l))||tx($)&&tx(tY(p,$))||this.$raise(tV("ArgumentError"),"Class specified for "+o+" extension does not inherit from "+l+": "+d),f=p.$new(this.$as_symbol(h),_),tx(h=this.$as_symbol(f.$name()))||this.$raise(tV("ArgumentError"),"No name specified for "+o+" extension: "+d),f.$freeze(),tA(u,"[]=",i=[h,tp("ProcessorExtension").$new(r,f)]),i[i.length-1]):tT(l,d)||tx($)&&tT($,d)?(d.$update_config(_),tx(h=tx(h)?(tA(d,"name=",i=[this.$as_symbol(h)]),i[i.length-1]):this.$as_symbol(d.$name()))||this.$raise(tV("ArgumentError"),"No name specified for "+o+" extension: "+d),d.$freeze(),tA(u,"[]=",i=[h,tp("ProcessorExtension").$new(r,d)]),i[i.length-1]):this.$raise(tV("ArgumentError"),"Invalid arguments specified for registering "+o+" extension: "+n)}),tw(t_,"$reset",function(){return this.preprocessor_extensions=this.tree_processor_extensions=this.postprocessor_extensions=this.include_processor_extensions=this.docinfo_processor_extensions=this.block_extensions=this.block_macro_extensions=this.inline_macro_extensions=tX,this.document=tX}),tw(t_,"$resolve_args",function(t,e){var r=tX,n=tX;return(r=tT(tV("Hash"),t["$[]"](-1))?t.$pop():tk([],{}),tO(e,1))?r:(tx(tR(n=tG(tG(e,1),t.$size()),0))?t=tC(t,tV("Array").$new(n)):tx(tY(n,0))&&t.$pop(n["$-@"]()),t["$<<"](r),t)}),tw(t_,"$as_symbol",function(t){return tx(t)?t.$to_sym():tX}),tg=[tm=t.get_singleton_class(n)].concat(i),tb=t.$r(tg),tw(tm,"$generate_name",function(){return"extgrp"+this.$next_auto_id()}),tw(tm,"$next_auto_id",function(){var t=tX;return null==this.auto_id&&(this.auto_id=tX),this.auto_id=tx(t=this.auto_id)?t:-1,this.auto_id=tC(this.auto_id,1)}),tw(tm,"$groups",function(){var t=tX;return null==this.groups&&(this.groups=tX),this.groups=tx(t=this.groups)?t:tk([],{})}),tw(tm,"$create",function t(e){var r=t.$$p||tX,n=tX;return(t.$$p=null,null==e&&(e=tX),r!==tX)?tb("Registry").$new(tW(tx(n=e)?n:this.$generate_name(),r)):tb("Registry").$new()},-1),tw(tm,"$register",function t(e){var r,n,i=t.$$p||tX,s=tX,o=tX,a=tX,l=tX,$=tX;return t.$$p=null,r=tS(arguments),s=r.$size(),i!==tX?o=i:tx(a=r.$pop())?o=tx(l=tb("Helpers").$resolve_class(a))?l:a:this.$raise(tV("ArgumentError"),"Extension group to register not specified"),$=tx(l=r.$pop())?l:this.$generate_name(),tx(r["$empty?"]())||this.$raise(tV("ArgumentError"),"Wrong number of arguments ("+s+" for 1..2)"),n=[$.$to_sym(),o],tA(this.$groups(),"[]=",n),n[n.length-1]},-1),tw(tm,"$unregister_all",function(){return this.groups=tk([],{}),tX}),tw(tm,"$unregister",function(t){var e;return e=tS(arguments),tA(e,"each_with_object",[this.$groups()],function(t,e){return null==t&&(t=tX),null==e&&(e=tX),e.$delete(t.$to_sym())}),tX},-1)},Opal.modules["asciidoctor/js/asciidoctor_ext/stylesheet"]=function(t){var e,r=t.module,n=t.klass,i=t.truthy,s=t.def,o=[],a=t.nil,l=t.$$$;return t.add_stubs("rstrip,read,join"),(e=n([r(o[0],"Asciidoctor")].concat(o)[0],null,"Stylesheets")).$$prototype.primary_stylesheet_data=a,s(e,"$primary_stylesheet_data",function(){var t=a;return this.primary_stylesheet_data=i(t=this.primary_stylesheet_data)?t:l("IO").$read(l("File").$join("css","asciidoctor.css")).$rstrip()})},Opal.modules["asciidoctor/js/asciidoctor_ext/document"]=function(t){var e,r,n=t.module,i=t.klass,s=t.def,o=[];return t.nil,e=[n(o[0],"Asciidoctor")].concat(o),r=t.$r(e),s(i(e[0],r("AbstractBlock"),"Document"),"$fill_datetime_attributes",function(e,r){var n,i,s,o,a,l,$,u,c=t.truthy,h=t.falsy,_=t.nil,d=function(t,e){return 0===e?t.getUTCFullYear():t.getFullYear()},p=function(t,e){return 0===e?t.getUTCMonth():t.getMonth()},f=function(t,e){return 0===e?t.getUTCDate():t.getDate()},m=function(t,e){return 0===e?t.getUTCHours():t.getHours()},g=new Date;if(t.const_get_qualified("::","ENV")["$key?"]("SOURCE_DATE_EPOCH")?(g.setTime(1e3*parseInt(t.const_get_qualified("::","ENV")["$[]"]("SOURCE_DATE_EPOCH"))),i=g,n=0):n=-g.getTimezoneOffset()/60,c(s=e["$[]"]("localdate")))h(o=e["$[]"]("localyear"))&&(o=4===s.indexOf("-")?s.substring(0,4):_,e["$[]="]("localyear",o));else{var b=d(g,n).toString();s=b+"-"+("0"+(p(g,n)+1)).slice(-2)+"-"+("0"+f(g,n)).slice(-2),e["$[]="]("localdate",s),o=b,e["$[]="]("localyear",b)}if(h(a=e["$[]"]("localtime"))&&(a=("0"+m(g,n)).slice(-2)+":"+("0"+g.getMinutes()).slice(-2)+":"+("0"+g.getSeconds()).slice(-2)+" "+(0===n?"UTC":n>0?("+0"+100*n).slice(-5):("-0"+-(100*n)).slice(-5)),e["$[]="]("localtime",a)),h(l=e["$[]"]("localdatetime"))&&(l=s+" "+a,e["$[]="]("localdatetime",l)),c(i)?r=i:c(r)?n=-r.getTimezoneOffset()/60:r=g,c($=e["$[]"]("docdate")))e["$[]="]("docyear",4===$.indexOf("-")?$.substring(0,4):_);else{var v=d(r,n).toString();$=v+"-"+("0"+(p(r,n)+1)).slice(-2)+"-"+("0"+f(r,n)).slice(-2),e["$[]="]("docdate",$),h(e["$[]"]("docyear"))&&e["$[]="]("docyear",v)}return h(u=e["$[]"]("doctime"))&&(u=("0"+m(r,n)).slice(-2)+":"+("0"+r.getMinutes()).slice(-2)+":"+("0"+r.getSeconds()).slice(-2)+" "+(0===n?"UTC":n>0?("+0"+100*n).slice(-5):("-0"+-(100*n)).slice(-5)),e["$[]="]("doctime",u)),h(e["$[]"]("docdatetime"))&&e["$[]="]("docdatetime",$+" "+u),_})},Opal.modules["asciidoctor/js/asciidoctor_ext/substitutors"]=function(t){var e,r=t.module,n=t.def,i=[];return t.nil,e=[r(i[0],"Asciidoctor")].concat(i),n(r(e[0],"Substitutors"),"$sub_placeholder",function(t,e){return t.replace("%s",e)})},Opal.modules["asciidoctor/js/asciidoctor_ext/parser"]=function(t){var e,r=t.module,n=t.klass,i=t.truthy,s=t.defs,o=[];return t.nil,e=n([r(o[0],"Asciidoctor")].concat(o)[0],null,"Parser"),i(String.prototype.repeat)?s(e,"$uniform?",function(t,e,r){return e.repeat(r)===t}):s(e,"$uniform?",function(t,e,r){return Array.apply(null,{length:r}).map(function(){return e}).join("")===t})},Opal.modules["asciidoctor/js/asciidoctor_ext/syntax_highlighter"]=function(t){var e,r,n,i,s,o,a,l=t.module,$=t.truthy,u=t.def,c=[],h=t.nil;return t.add_stubs("key?,registry,[],include?,include,empty?,debug,logger,join,keys"),r=(e=[l(c[0],"Asciidoctor")].concat(c))[0],i=(n=[l(r,"SyntaxHighlighter")].concat(e))[0],o=[s=l(i,"Factory")].concat(n),a=t.$r(o),u(s,"$for",function(t){return $(this.$registry()["$key?"](t))?this.$registry()["$[]"](t):($(this["$include?"](a("Logging")))||this.$include(a("Logging")),$(this.$registry()["$empty?"]())?this.$logger().$debug("no syntax highlighter available, functionality disabled."):this.$logger().$debug("syntax highlighter named '"+t+"' is not available, must be one of: '"+this.$registry().$keys().$join("', '")+"'."),h)})},Opal.modules["asciidoctor/js/asciidoctor_ext"]=function(t){var e=t.top;t.nil,t.add_stubs("require"),e.$require("asciidoctor/js/asciidoctor_ext/stylesheet"),e.$require("asciidoctor/js/asciidoctor_ext/document"),e.$require("asciidoctor/js/asciidoctor_ext/substitutors"),e.$require("asciidoctor/js/asciidoctor_ext/parser"),e.$require("asciidoctor/js/asciidoctor_ext/syntax_highlighter"),e.$require("asciidoctor/js/asciidoctor_ext/browser")},Opal.modules["asciidoctor/js/opal_ext/logger"]=function(t){var e,r,n,i,s=t.klass,o=t.def,a=t.truthy,l=t.rb_lt,$=[],u=t.nil;return t.add_stubs("chr,rjust,message_as_string,<,write,call,[]"),r=[e=s($[0],null,"Logger")].concat($),n=t.$r(r),(i=e.$$prototype).level=i.progname=i.pipe=i.formatter=u,o(s(r[0],null,"Formatter"),"$call",function(t,e,r,n){var i=u;return i=e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+"T"+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+("00"+1e3*new Date().getMilliseconds()).slice(-6),""+t.$chr()+", ["+i+"] "+t.$rjust(5)+" -- "+r+": "+this.$message_as_string(n)}),o(e,"$add",function e(r,i,s){var o=e.$$p||u,$=u;return e.$$p=null,null==i&&(i=u),null==s&&(s=u),!!a(l(r=a($=r)?$:n("UNKNOWN"),this.level))||(s=a($=s)?$:this.progname,a(i)||(o!==u?i=t.yieldX(o,[]):(i=s,s=this.progname)),this.pipe.$write(this.formatter.$call(a($=n("SEVERITY_LABELS")["$[]"](r))?$:"ANY",new Date,s,i)),!0)},-2)},Opal.modules["asciidoctor/js/postscript"]=function(t){var e=t.top;return t.nil,t.add_stubs("require"),e.$require("asciidoctor/converter/composite"),e.$require("asciidoctor/converter/html5"),e.$require("asciidoctor/extensions"),e.$require("asciidoctor/js/asciidoctor_ext"),e.$require("asciidoctor/js/opal_ext/logger")},Opal.queue(function(t){var e,r,n,i,s,o,a,l=t.module,$=t.const_set,u=t.send,c=t.to_ary,h=t.defs,_=t.def,d=t.truthy,p=t.hash2,f=t.eqeq,m=t.rb_minus,g=t.regexp,b=t.top,v=[],y=t.nil,x=t.$$$;return t.add_stubs("require,==,to_h,sort,map,constants,const_get,downcase,to_s,<=>,upcase,[],values,new,attr_reader,instance_variable_set,send,singleton_class,<<,define,dirname,absolute_path,join,home,pwd,to_set,tap,each,chr,each_key,[]=,slice,length,-,merge,default=,drop,insert"),b.$require("set"),b.$require("asciidoctor/js"),e=[l(v[0],"Asciidoctor")].concat(v),r=t.$r(e),n=y,$(e[0],"RUBY_ENGINE_OPAL",$(e[0],"RUBY_ENGINE",x("RUBY_ENGINE"))["$=="]("opal")),$((s=[i=l(e[0],"SafeMode")].concat(e))[0],"UNSAFE",0),$(s[0],"SAFE",1),$(s[0],"SERVER",10),$(s[0],"SECURE",20),i.names_by_value=u(u(i.$constants(!1),"map",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=y),[r.$const_get(e),e.$to_s().$downcase()]},{$$s:i}),"sort",[],function(t,e){var r,n=y,i=y;return null==t&&(t=y),null==e&&(e=y),n=null==(r=c(t))[0]?y:r[0],i=null==(r=c(e))[0]?y:r[0],n["$<=>"](i)},{$$has_top_level_mlhs_arg:!0}).$to_h(),h(i,"$value_for_name",function(t){return this.$const_get(t.$upcase(),!1)}),h(i,"$name_for_value",function(t){return null==this.names_by_value&&(this.names_by_value=y),this.names_by_value["$[]"](t)}),h(i,"$names",function(){return null==this.names_by_value&&(this.names_by_value=y),this.names_by_value.$values()}),[o=l(e[0],"Compliance")].concat(e),o.keys=x("Set").$new(),(a=t.get_singleton_class(o)).$attr_reader("keys"),_(a,"$define",function(t,e){return null==this.keys&&(this.keys=y),this.$instance_variable_set("@"+t,e),this.$singleton_class().$send("attr_accessor",t),this.keys["$<<"](t),y}),o.$define("block_terminates_paragraph",!0),o.$define("strict_verbatim_paragraphs",!0),o.$define("underline_style_section_titles",!0),o.$define("unwrap_standalone_preamble",!0),o.$define("attribute_missing","skip"),o.$define("attribute_undefined","drop-line"),o.$define("shorthand_property_syntax",!0),o.$define("natural_xrefs",!0),o.$define("unique_id_start_index",2),o.$define("markdown_syntax",!0),d(r("ROOT_DIR","skip_raise")?"constant":y)||$(e[0],"ROOT_DIR",x("File").$dirname(x("File").$absolute_path("."))),$(e[0],"LIB_DIR",x("File").$join(r("ROOT_DIR"),"lib")),$(e[0],"DATA_DIR",x("File").$join(r("ROOT_DIR"),"data")),$(e[0],"USER_HOME",function(){try{return x("Dir").$home()}catch(e){if(t.rescue(e,[r("StandardError")]))try{if(d(n=x("ENV")["$[]"]("HOME")))return n;return x("Dir").$pwd()}finally{t.pop_exception()}else throw e}}()),$(e[0],"LF","\n"),$(e[0],"NULL","\x00"),$(e[0],"TAB","	"),$(e[0],"MAX_INT",9007199254740991),$(e[0],"UTF_8",x(x("Encoding"),"UTF_8")),$(e[0],"BOM_BYTES_UTF_8",[239,187,191]),$(e[0],"BOM_BYTES_UTF_16LE",[255,254]),$(e[0],"BOM_BYTES_UTF_16BE",[254,255]),$(e[0],"FILE_READ_MODE",d(r("RUBY_ENGINE_OPAL"))?"r":"rb:utf-8:utf-8"),$(e[0],"URI_READ_MODE",r("FILE_READ_MODE")),$(e[0],"FILE_WRITE_MODE",d(r("RUBY_ENGINE_OPAL"))?"w":"w:utf-8"),$(e[0],"DEFAULT_DOCTYPE","article"),$(e[0],"DEFAULT_BACKEND","html5"),$(e[0],"DEFAULT_STYLESHEET_KEYS",["","DEFAULT"].$to_set()),$(e[0],"DEFAULT_STYLESHEET_NAME","asciidoctor.css"),$(e[0],"BACKEND_ALIASES",p(["html","docbook"],{html:"html5",docbook:"docbook5"})),$(e[0],"DEFAULT_PAGE_WIDTHS",p(["docbook"],{docbook:425})),$(e[0],"DEFAULT_EXTENSIONS",p(["html","docbook","pdf","epub","manpage","asciidoc"],{html:".html",docbook:".xml",pdf:".pdf",epub:".epub",manpage:".man",asciidoc:".adoc"})),$(e[0],"ASCIIDOC_EXTENSIONS",p([".adoc",".asciidoc",".asc",".ad",".txt"],{".adoc":!0,".asciidoc":!0,".asc":!0,".ad":!0,".txt":!0})),$(e[0],"SETEXT_SECTION_LEVELS",p(["=","-","~","^","+"],{"=":0,"-":1,"~":2,"^":3,"+":4})),$(e[0],"ADMONITION_STYLES",["NOTE","TIP","IMPORTANT","WARNING","CAUTION"].$to_set()),$(e[0],"ADMONITION_STYLE_HEADS",u(x("Set").$new(),"tap",[],function(t){return null==t&&(t=y),u(r("ADMONITION_STYLES"),"each",[],function(e){return null==e&&(e=y),t["$<<"](e.$chr())})})),$(e[0],"PARAGRAPH_STYLES",["comment","example","literal","listing","normal","open","pass","quote","sidebar","source","verse","abstract","partintro"].$to_set()),$(e[0],"VERBATIM_STYLES",["literal","listing","source","verse"].$to_set()),$(e[0],"DELIMITED_BLOCKS",p(["--","----","....","====","****","____","++++","|===",",===",":===","!===","////","```"],{"--":["open",["comment","example","literal","listing","pass","quote","sidebar","source","verse","admonition","abstract","partintro"].$to_set()],"----":["listing",["literal","source"].$to_set()],"....":["literal",["listing","source"].$to_set()],"====":["example",["admonition"].$to_set()],"****":["sidebar",x("Set").$new()],____:["quote",["verse"].$to_set()],"++++":["pass",["stem","latexmath","asciimath"].$to_set()],"|===":["table",x("Set").$new()],",===":["table",x("Set").$new()],":===":["table",x("Set").$new()],"!===":["table",x("Set").$new()],"////":["comment",x("Set").$new()],"```":["fenced_code",x("Set").$new()]})),$(e[0],"DELIMITED_BLOCK_HEADS",u(p([],{}),"tap",[],function(t){return null==t&&(t=y),u(r("DELIMITED_BLOCKS"),"each_key",[],function(e){var r;return null==e&&(e=y),r=[e.$slice(0,2),!0],u(t,"[]=",r),r[r.length-1]})})),$(e[0],"DELIMITED_BLOCK_TAILS",u(p([],{}),"tap",[],function(t){return null==t&&(t=y),u(r("DELIMITED_BLOCKS"),"each_key",[],function(e){var r;return(null==e&&(e=y),f(e.$length(),4))?(r=[e,e["$[]"](m(e.$length(),1))],u(t,"[]=",r),r[r.length-1]):y})})),$(e[0],"CAPTION_ATTRIBUTE_NAMES",p(["example","figure","listing","table"],{example:"example-caption",figure:"figure-caption",listing:"listing-caption",table:"table-caption"})),$(e[0],"LAYOUT_BREAK_CHARS",p(["'","<"],{"'":"thematic_break","<":"page_break"})),$(e[0],"MARKDOWN_THEMATIC_BREAK_CHARS",p(["-","*","_"],{"-":"thematic_break","*":"thematic_break",_:"thematic_break"})),$(e[0],"HYBRID_LAYOUT_BREAK_CHARS",r("LAYOUT_BREAK_CHARS").$merge(r("MARKDOWN_THEMATIC_BREAK_CHARS"))),$(e[0],"NESTABLE_LIST_CONTEXTS",["ulist","olist","dlist"]),$(e[0],"ORDERED_LIST_STYLES",["arabic","loweralpha","lowerroman","upperalpha","upperroman"]),$(e[0],"ORDERED_LIST_KEYWORDS",p(["loweralpha","lowerroman","upperalpha","upperroman"],{loweralpha:"a",lowerroman:"i",upperalpha:"A",upperroman:"I"})),$(e[0],"ATTR_REF_HEAD","{"),$(e[0],"LIST_CONTINUATION","+"),$(e[0],"HARD_LINE_BREAK"," +"),$(e[0],"LINE_CONTINUATION"," \\"),$(e[0],"LINE_CONTINUATION_LEGACY"," +"),$(e[0],"BLOCK_MATH_DELIMITERS",p(["asciimath","latexmath"],{asciimath:["\\$","\\$"],latexmath:["\\[","\\]"]})),$(e[0],"INLINE_MATH_DELIMITERS",p(["asciimath","latexmath"],{asciimath:["\\$","\\$"],latexmath:["\\(","\\)"]})),$(e[0],"STEM_TYPE_ALIASES",p(["latexmath","latex","tex"],{latexmath:"latexmath",latex:"latexmath",tex:"latexmath"}))["$default="]("asciimath"),$(e[0],"FONT_AWESOME_VERSION","4.7.0"),$(e[0],"HIGHLIGHT_JS_VERSION","9.18.3"),$(e[0],"MATHJAX_VERSION","2.7.9"),$(e[0],"DEFAULT_ATTRIBUTES",p(["appendix-caption","appendix-refsig","caution-caption","chapter-refsig","example-caption","figure-caption","important-caption","last-update-label","note-caption","part-refsig","prewrap","sectids","section-refsig","table-caption","tip-caption","toc-placement","toc-title","untitled-label","version-label","warning-caption"],{"appendix-caption":"Appendix","appendix-refsig":"Appendix","caution-caption":"Caution","chapter-refsig":"Chapter","example-caption":"Example","figure-caption":"Figure","important-caption":"Important","last-update-label":"Last updated","note-caption":"Note","part-refsig":"Part",prewrap:"",sectids:"","section-refsig":"Section","table-caption":"Table","tip-caption":"Tip","toc-placement":"auto","toc-title":"Table of Contents","untitled-label":"Untitled","version-label":"Version","warning-caption":"Warning"})),$(e[0],"FLEXIBLE_ATTRIBUTES",["sectnums"]),$(e[0],"INTRINSIC_ATTRIBUTES",p(["startsb","endsb","vbar","caret","asterisk","tilde","plus","backslash","backtick","blank","empty","sp","two-colons","two-semicolons","nbsp","deg","zwsp","quot","apos","lsquo","rsquo","ldquo","rdquo","wj","brvbar","pp","cpp","amp","lt","gt"],{startsb:"[",endsb:"]",vbar:"|",caret:"^",asterisk:"*",tilde:"~",plus:"&#43;",backslash:"\\",backtick:"`",blank:"",empty:"",sp:" ","two-colons":"::","two-semicolons":";;",nbsp:"&#160;",deg:"&#176;",zwsp:"&#8203;",quot:"&#34;",apos:"&#39;",lsquo:"&#8216;",rsquo:"&#8217;",ldquo:"&#8220;",rdquo:"&#8221;",wj:"&#8288;",brvbar:"&#166;",pp:"&#43;&#43;",cpp:"C&#43;&#43;",amp:"&",lt:"<",gt:">"})),$(e[0],"QUOTE_SUBS",u(p([],{}),"tap",[],function(t){var e=y,n=y;return null==t&&(t=y),t["$[]="](!1,e=[["strong","unconstrained",g(["\\\\?(?:\\[([^\\]]+)\\])?\\*\\*(",r("CC_ALL"),"+?)\\*\\*"],"m")],["strong","constrained",g(["(^|[^",r("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?\\*(\\S|\\S",r("CC_ALL"),"*?\\S)\\*(?!",r("CG_WORD"),")"],"m")],["double","constrained",g(["(^|[^",r("CC_WORD"),';:}])(?:\\[([^\\]]+)\\])?"`(\\S|\\S',r("CC_ALL"),'*?\\S)`"(?!',r("CG_WORD"),")"],"m")],["single","constrained",g(["(^|[^",r("CC_WORD"),";:`}])(?:\\[([^\\]]+)\\])?'`(\\S|\\S",r("CC_ALL"),"*?\\S)`'(?!",r("CG_WORD"),")"],"m")],["monospaced","unconstrained",g(["\\\\?(?:\\[([^\\]]+)\\])?``(",r("CC_ALL"),"+?)``"],"m")],["monospaced","constrained",g(["(^|[^",r("CC_WORD"),";:\"'`}])(?:\\[([^\\]]+)\\])?`(\\S|\\S",r("CC_ALL"),"*?\\S)`(?![",r("CC_WORD"),"\"'`])"],"m")],["emphasis","unconstrained",g(["\\\\?(?:\\[([^\\]]+)\\])?__(",r("CC_ALL"),"+?)__"],"m")],["emphasis","constrained",g(["(^|[^",r("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?_(\\S|\\S",r("CC_ALL"),"*?\\S)_(?!",r("CG_WORD"),")"],"m")],["mark","unconstrained",g(["\\\\?(?:\\[([^\\]]+)\\])?##(",r("CC_ALL"),"+?)##"],"m")],["mark","constrained",g(["(^|[^",r("CC_WORD"),"&;:}])(?:\\[([^\\]]+)\\])?#(\\S|\\S",r("CC_ALL"),"*?\\S)#(?!",r("CG_WORD"),")"],"m")],["superscript","unconstrained",/\\?(?:\[([^\]]+)\])?\^(\S+?)\^/],["subscript","unconstrained",/\\?(?:\[([^\]]+)\])?~(\S+?)~/]]),t["$[]="](!0,n=e.$drop(0)),n["$[]="](2,["double","constrained",g(["(^|[^",r("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?``(\\S|\\S",r("CC_ALL"),"*?\\S)''(?!",r("CG_WORD"),")"],"m")]),n["$[]="](3,["single","constrained",g(["(^|[^",r("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?`(\\S|\\S",r("CC_ALL"),"*?\\S)'(?!",r("CG_WORD"),")"],"m")]),n["$[]="](4,["monospaced","unconstrained",g(["\\\\?(?:\\[([^\\]]+)\\])?\\+\\+(",r("CC_ALL"),"+?)\\+\\+"],"m")]),n["$[]="](5,["monospaced","constrained",g(["(^|[^",r("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?\\+(\\S|\\S",r("CC_ALL"),"*?\\S)\\+(?!",r("CG_WORD"),")"],"m")]),n.$insert(3,["emphasis","constrained",g(["(^|[^",r("CC_WORD"),";:}])(?:\\[([^\\]]+)\\])?'(\\S|\\S",r("CC_ALL"),"*?\\S)'(?!",r("CG_WORD"),")"],"m")])})),$(e[0],"REPLACEMENTS",[[/\\?\(C\)/,"&#169;","none"],[/\\?\(R\)/,"&#174;","none"],[/\\?\(TM\)/,"&#8482;","none"],[/(?: |\n|^|\\)--(?: |\n|$)/,"&#8201;&#8212;&#8201;","none"],[g(["(",r("CG_WORD"),")\\\\?--(?=",r("CG_WORD"),")"]),"&#8212;&#8203;","leading"],[/\\?\.\.\./,"&#8230;&#8203;","none"],[/\\?`'/,"&#8217;","none"],[g(["(",r("CG_ALNUM"),")\\\\?'(?=",r("CG_ALPHA"),")"]),"&#8217;","leading"],[/\\?-&gt;/,"&#8594;","none"],[/\\?=&gt;/,"&#8658;","none"],[/\\?&lt;-/,"&#8592;","none"],[/\\?&lt;=/,"&#8656;","none"],[/\\?(&)amp;((?:[a-zA-Z][a-zA-Z]+\d{0,2}|#\d\d\d{0,4}|#x[\da-fA-F][\da-fA-F][\da-fA-F]{0,3});)/,"","bounding"]]),b.$require("asciidoctor.rb/../asciidoctor/core_ext"),b.$require("asciidoctor.rb/../asciidoctor/helpers"),b.$require("asciidoctor.rb/../asciidoctor/logging"),b.$require("asciidoctor.rb/../asciidoctor/rx"),b.$require("asciidoctor.rb/../asciidoctor/substitutors"),b.$require("asciidoctor.rb/../asciidoctor/version"),b.$require("asciidoctor.rb/../asciidoctor/abstract_node"),b.$require("asciidoctor.rb/../asciidoctor/abstract_block"),b.$require("asciidoctor.rb/../asciidoctor/attribute_list"),b.$require("asciidoctor.rb/../asciidoctor/block"),b.$require("asciidoctor.rb/../asciidoctor/callouts"),b.$require("asciidoctor.rb/../asciidoctor/converter"),b.$require("asciidoctor.rb/../asciidoctor/document"),b.$require("asciidoctor.rb/../asciidoctor/inline"),b.$require("asciidoctor.rb/../asciidoctor/list"),b.$require("asciidoctor.rb/../asciidoctor/parser"),b.$require("asciidoctor.rb/../asciidoctor/path_resolver"),b.$require("asciidoctor.rb/../asciidoctor/reader"),b.$require("asciidoctor.rb/../asciidoctor/section"),b.$require("asciidoctor.rb/../asciidoctor/stylesheets"),b.$require("asciidoctor.rb/../asciidoctor/table"),b.$require("asciidoctor.rb/../asciidoctor/writer"),b.$require("asciidoctor.rb/../asciidoctor/load"),b.$require("asciidoctor.rb/../asciidoctor/convert"),b.$require("asciidoctor.rb/../asciidoctor/syntax_highlighter"),b.$require("asciidoctor.rb/../asciidoctor/timings"),b.$require("asciidoctor/js/postscript")});let e=function(t){return t&&!t.$$is_hash?Opal.hash2(Object.keys(t),t):t},r=function(t){let e={};if(t){let r=t.$$smap;for(let t in r){let n=r[t];e[t]=n===Opal.nil?void 0:n}let n=t.$$map;if(n){let t=[];for(let e in n){let r=n[e],i=r.value,s=r.key-1;t[s]=i===Opal.nil?void 0:i}t.length>0&&(e.$positional=t)}}return e},n=function(t){let e={};if(t){let r=t.$$keys;for(let t in r){let n=r[t].value;e[t.toString()]=n===Opal.nil?void 0:n}}return e},s=function(t){if(t=e(t)){let r=t["$[]"]("converter");r&&r!==Opal.nil&&t["$[]="]("converter",o(r));let n=t["$[]"]("attributes");n&&"object"==typeof n&&"Object"===n.constructor.name&&(t=t.$dup())["$[]="]("attributes",e(n))}return t},o=function(t){let r=function(t,r){t.backend_traits?r.backend_traits=e(t.backend_traits):t.backendTraits?r.backend_traits=e(t.backendTraits):(t.basebackend||t.outfilesuffix||t.filetype||t.htmlsyntax||t.supports_templates)&&(r.backend_traits=e(Object.assign({},t.basebackend?{basebackend:t.basebackend}:{},t.outfilesuffix?{outfilesuffix:t.outfilesuffix}:{},t.filetype?{filetype:t.filetype}:{},t.htmlsyntax?{htmlsyntax:t.htmlsyntax}:{},t.supports_templates?{supports_templates:t.supports_templates}:{})))},n=function(t,e){s(t,e,"$handles?","handles",function(){return!0})},i=function(t,e){s(t,e,"$composed","composed")},s=function(t,e,r,n,i){void 0===t[r]&&("function"==typeof t[n]?e[r]=t[n]:i&&(e[r]=i))},o=function(t){"function"!=typeof t["$respond_to?"]&&(t["$respond_to?"]=function(t){return"function"==typeof this[t]})};if("function"==typeof t){let e=a(Y,t.constructor.name,{initialize:function(e,s){let a=new t(e,s);Object.assign(this,a),r(a,this);let l=Object.getOwnPropertyNames(t.prototype);for(let t=0;t<l.length;t++){let e=l[t];"constructor"!==e&&(this[e]=a[e])}void 0===a.$convert&&"function"==typeof a.convert&&(this.$convert=a.convert),n(a,this),i(a,this),o(this),this.super(e,s)}});return e.$extend(G),e}if("object"==typeof t){if(void 0===t.$convert&&"function"==typeof t.convert&&(t.$convert=t.convert),r(t,t),t.backend_traits){for(let e of["basebackend","filetype","htmlsyntax","outfilesuffix","supports_templates","supports_templates?","init_backend_traits","backend_traits"])t["$"+e]=G.prototype["$"+e];t.$$meta=G}n(t,t),i(t,t),s(t,t,"$==","==",function(e){return t===e}),s(t,t,"$send","send",function(e){let[,...r]=Array.from(arguments),n=t["$"+e];if(n)return n.apply(t,r);throw Error(`undefined method \`${e}\` for \`${t.toString()}\``)}),o(t)}return t};function a(t,n,i,s,o){let a,l,$,u,c;let h=Opal.klass(Opal.Object,t,n,function(){}),_={};for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&function(t){let e=i[t];if("postConstruct"===t)a=e;else if("initialize"===t)l=e;else if("constructor"===t)$=e;else{let r;s&&Object.prototype.hasOwnProperty.call(s,t)&&(_[t]=!0),Opal.def(h,"$"+t,r=function(){let n;n=o&&Object.prototype.hasOwnProperty.call(o,t)?o[t](arguments):arguments;let i=r.$$p;return i&&(n[n.length]=function(){return Opal.yield1(i)},n.length+=1,r.$$p=null),e.apply(this,n)})}}(t);for(let t in u="function"==typeof $?function(){let t=Array.from(arguments);for(let e=0;e<t.length;e++)"object"==typeof t[e]&&"$$smap"in t[e]&&(t[e]=r(t[e]));t.unshift(null);let e=new(Function.prototype.bind.apply($,t));Object.assign(this,e),"function"==typeof a&&a.bind(this)()}:"function"==typeof l?function(){let t=Array.from(arguments);for(let e=0;e<t.length;e++)"object"==typeof t[e]&&"$$smap"in t[e]&&(t[e]=r(t[e]));l.apply(this,t),"function"==typeof a&&a.bind(this)()}:function(){Opal.send(this,Opal.find_super_dispatcher(this,"initialize",u)),"function"==typeof a&&a.bind(this)()},Opal.def(h,"$initialize",u),Opal.def(h,"super",c=function(t){if("function"==typeof t)Opal.send(this,Opal.find_super_dispatcher(this,t.name,t));else{let t=Array.from(arguments);for(let r=0;r<t.length;r++)"object"==typeof t[r]&&(t[r]=e(t[r]));Opal.send(this,Opal.find_super_dispatcher(this,"initialize",u),t)}}),i)c[t]=function(){let r=Array.from(arguments);for(let t=0;t<r.length;t++)"object"==typeof r[t]&&"function"==typeof r[t].constructor&&"Object"===r[t].constructor.name&&(r[t]=e(r[t]));let n=h.$$prototype;return Opal.send(n,Opal.find_super_dispatcher(n,t,n[`$${t}`]),r)};if(s)for(let t in s)Object.prototype.hasOwnProperty.call(s,t)&&!Object.prototype.hasOwnProperty.call(_,t)&&function(t){let e=s[t];Opal.def(h,"$"+t,function(){return e.apply(this,arguments)})}(t);return h}let l=Opal.Asciidoctor.$$class;l.prototype.getCoreVersion=function(){return this.$$const.VERSION},l.prototype.getRuntime=function(){return{ioModule:Opal.const_get_qualified("::","JAVASCRIPT_IO_MODULE"),platform:Opal.const_get_qualified("::","JAVASCRIPT_PLATFORM"),engine:Opal.const_get_qualified("::","JAVASCRIPT_ENGINE"),framework:Opal.const_get_qualified("::","JAVASCRIPT_FRAMEWORK")}},l.prototype.convert=function(t,e){"object"==typeof t&&"Buffer"===t.constructor.name&&(t=t.toString("utf8"));let r=e&&e.to_file;"object"==typeof r&&"Writable"===r.constructor.name&&"function"==typeof r.write&&(r["$respond_to?"]=t=>"write"===t,r.$object_id=()=>"",r.$write=function(t){this.write(t)});let n=s(e),i=this.$convert(t,n);return"object"==typeof r&&"Writable"===r.constructor.name&&"function"==typeof r.end&&r.end(),i===Opal.nil?"":i},l.prototype.convertFile=function(t,e){return this.$convert_file(t,s(e))},l.prototype.load=function(t,e){return"object"==typeof t&&"Buffer"===t.constructor.name&&(t=t.toString("utf8")),this.$load(t,s(e))},l.prototype.loadFile=function(t,e){return this.$load_file(t,s(e))};let $=Opal.Asciidoctor.AbstractBlock;$.prototype.getContentModel=function(){let t=this.content_model;return t===Opal.nil?void 0:t},$.prototype.setContentModel=function(t){this.content_model=t},$.prototype.append=function(t){return this.$append(t),this},$.prototype.getTitle=function(){let t=this.$title();return t===Opal.nil?void 0:t},$.prototype.setTitle=function(t){return t=void 0===t?Opal.nil:t,this["$title="](t)},$.prototype.assignCaption=function(t,e){t=void 0===t?Opal.nil:t,e=void 0===e?null:e,this.$assign_caption(t,e)},$.prototype.getCaptionedTitle=function(){return this.$captioned_title()},$.prototype.getStyle=function(){let t=this.style;return t===Opal.nil?void 0:t},$.prototype.setStyle=function(t){this.style=t},$.prototype.getSourceLocation=function(){let t=this.source_location;if(t!==Opal.nil)return t.getFile=function(){let t=this.file;return t===Opal.nil?void 0:t},t.getDirectory=function(){let t=this.dir;return t===Opal.nil?void 0:t},t.getPath=function(){let t=this.path;return t===Opal.nil?void 0:t},t.getLineNumber=function(){let t=this.lineno;return t===Opal.nil?void 0:t},t},$.prototype.getCaption=function(){let t=this.$caption();return t===Opal.nil?void 0:t},$.prototype.setCaption=function(t){this.caption=void 0===t?Opal.nil:t},$.prototype.getLevel=function(){let t=this.level;return t===Opal.nil?void 0:t},$.prototype.getSubstitutions=function(){return this.subs},$.prototype.hasSubstitution=function(t){return this["$sub?"](t)},$.prototype.removeSubstitution=function(t){this.$remove_sub(t)},$.prototype.hasBlocks=function(){return this.blocks.length>0},$.prototype.getBlocks=function(){return this.blocks},$.prototype.getContent=function(){let t=this.$content();return t===Opal.nil?void 0:t},$.prototype.convert=function(){return this.$convert()},$.prototype.findBy=function(t,r){return void 0===r&&"function"==typeof t?Opal.send(this,"find_by",null,t):"function"==typeof r?Opal.send(this,"find_by",[e(t)],r):this.$find_by(e(t))},$.prototype.getLineNumber=function(){let t=this.$lineno();return t===Opal.nil?void 0:t},$.prototype.hasSections=function(){return this.next_section_index!==Opal.nil&&this.next_section_index>0},$.prototype.getSections=function(){return this.$sections()},$.prototype.getNumeral=function(){let t=this.$numeral();return t===Opal.nil?void 0:t},$.prototype.setNumeral=function(t){this["$numeral="](t)},$.prototype.hasTitle=function(){return this["$title?"]()},$.prototype.getAlt=function(){return this.$alt()};let u=Opal.Asciidoctor.Section;u.create=function(t,r,n,i){return i&&i.attributes&&(i.attributes=e(i.attributes)),this.$new(t,r,n,e(i))},u.prototype.setLevel=function(t){this.level=t},u.prototype.getIndex=function(){return this.index},u.prototype.setIndex=function(t){this.index=t},u.prototype.getSectionName=function(){let t=this.sectname;return t===Opal.nil?void 0:t},u.prototype.setSectionName=function(t){this.sectname=t},u.prototype.getSectionNumeral=function(){return this.$sectnum()},u.prototype.getSectionNumber=u.prototype.getSectionNumeral,u.prototype.isSpecial=function(){return this.special},u.prototype.setSpecial=function(t){this.special=t},u.prototype.isNumbered=function(){return this.numbered},u.prototype.getCaption=function(){let t=this.caption;return t===Opal.nil?void 0:t},u.prototype.getName=function(){return this.getTitle()};let c=Opal.Asciidoctor.Block;c.create=function(t,r,n){return n&&n.attributes&&(n.attributes=e(n.attributes)),this.$new(t,r,e(n))},c.prototype.getSource=function(){return this.$source()},c.prototype.getSourceLines=function(){return this.lines};let h=Opal.Asciidoctor.AbstractNode;h.prototype.applySubstitutions=function(t,e){return this.$apply_subs(t,e)},h.prototype.resolveSubstitutions=function(t,e,r,n){void 0===e&&(e="block"),void 0===r&&(r=Opal.nil),void 0===n&&(n=Opal.nil);let i=this.$resolve_subs(t,e,r,n);return i===Opal.nil?void 0:i},h.prototype.resolveBlockSubstitutions=function(t,e,r){return this.resolveSubstitutions(t,"block",e,r)},h.prototype.resolvePassSubstitutions=function(t){return this.resolveSubstitutions(t,"inline",void 0,"passthrough macro")},h.prototype.getNodeName=function(){return this.node_name},h.prototype.getAttributes=function(){return r(this.attributes)},h.prototype.getAttribute=function(t,e,r){let n=this.$attr(t,e,r);return n===Opal.nil?void 0:n},h.prototype.hasAttribute=function(t){return t in this.attributes.$$smap},h.prototype.isAttribute=function(t,e,r){return this["$attr?"](t,e,r)},h.prototype.setAttribute=function(t,e,r){return void 0===r&&(r=!0),this.$set_attr(t,e,r)},h.prototype.removeAttribute=function(t){let e=this.$remove_attr(t);return e===Opal.nil?void 0:e},h.prototype.getDocument=function(){return this.document},h.prototype.getParent=function(){let t=this.parent;return t===Opal.nil?void 0:t},h.prototype.isInline=function(){return this["$inline?"]()},h.prototype.isBlock=function(){return this["$block?"]()},h.prototype.isRole=function(t){return this["$role?"](t)},h.prototype.getRole=function(){let t=this.$role();return t===Opal.nil?void 0:t},h.prototype.setRole=function(t){return Array.isArray(t)||"string"==typeof t&&1==arguments.length?this["$role="](t):this["$role="](Array.from(arguments))},h.prototype.hasRole=function(t){return this["$has_role?"](t)},h.prototype.getRoles=function(){return this.$roles()},h.prototype.addRole=function(t){return this.$add_role(t)},h.prototype.removeRole=function(t){return this.$remove_role(t)},h.prototype.isReftext=function(){return this["$reftext?"]()},h.prototype.getReftext=function(){let t=this.$reftext();return t===Opal.nil?void 0:t},h.prototype.getContext=function(){let t=this.context;return"string"==typeof t?t:t.toString()},h.prototype.getId=function(){let t=this.id;return t===Opal.nil?void 0:t},h.prototype.setId=function(t){this.id=t},h.prototype.isOption=function(t){return this["$option?"](t)},h.prototype.setOption=function(t){return this.$set_option(t)},h.prototype.getIconUri=function(t){return this.$icon_uri(t)},h.prototype.getMediaUri=function(t,e){return this.$media_uri(t,e)},h.prototype.getImageUri=function(t,e){return this.$image_uri(t,e)},h.prototype.getConverter=function(){return this.$converter()},h.prototype.readContents=function(t,r){return this.$read_contents(t,e(r))},h.prototype.readAsset=function(t,r){let n=this.$read_asset(t,e(r));return n===Opal.nil?void 0:n},h.prototype.normalizeWebPath=function(t,e,r){return this.$normalize_web_path(t,e,r)},h.prototype.normalizeSystemPath=function(t,r,n,i){return this.$normalize_system_path(t,r,n,e(i))},h.prototype.normalizeAssetPath=function(t,e,r){return this.$normalize_asset_path(t,e,r)};let Document=Opal.Asciidoctor.Document;Document.prototype.append=function(t){return this["$<<"](t),this},Document.prototype.getSyntaxHighlighter=function(){let t=this.syntax_highlighter,r=t.__proto__;return r&&("function"==typeof r["$highlight?"]&&(r.handlesHighlighting=function(){let t=r["$highlight?"]();return t!==Opal.nil&&t}),"function"==typeof r["$docinfo?"]&&(r.hasDocinfo=r["$docinfo?"]),"function"==typeof r.$format&&(r.format=function(t,r,n){return this.$format(t,r,e(n))}),"function"==typeof r.$docinfo&&(r.docinfo=function(t,r,n){return this.$docinfo(t,r,e(n))})),t},Document.prototype.getRefs=function(){return r(this.catalog.$$smap.refs)},Document.prototype.getImages=function(){return this.catalog.$$smap.images},Document.prototype.getLinks=function(){return this.catalog.$$smap.links},Document.prototype.hasFootnotes=function(){return this["$footnotes?"]()},Document.prototype.getFootnotes=function(){return this.$footnotes()},Document.prototype.getHeader=function(){return this.header},Document.prototype.setAttribute=function(t,e){return this.$set_attribute(t,e)},Document.prototype.removeAttribute=function(t){this.attributes.$delete(t),this.attribute_overrides.$delete(t)},Document.prototype.convert=function(t){let r=this.$convert(e(t));return r===Opal.nil?"":r},Document.prototype.write=function(t,e){return this.$write(t,e)},Document.prototype.getAuthor=function(){return this.$author()},Document.prototype.getSource=function(){return this.$source()},Document.prototype.getSourceLines=function(){return this.$source_lines()},Document.prototype.isNested=function(){return this["$nested?"]()},Document.prototype.isEmbedded=function(){return this["$embedded?"]()},Document.prototype.hasExtensions=function(){return this["$extensions?"]()},Document.prototype.getDoctype=function(){return this.doctype},Document.prototype.getBackend=function(){return this.backend},Document.prototype.isBasebackend=function(t){return this["$basebackend?"](t)},Document.prototype.getTitle=function(){let t=this.$title();return t===Opal.nil?void 0:t},Document.prototype.setTitle=function(t){return this["$title="](t)},Document.prototype.getDocumentTitle=function(t){let r=this.$doctitle(e(t));return r===Opal.nil?void 0:r},Document.prototype.getDoctitle=Document.prototype.getDocumentTitle,Document.prototype.getCatalog=function(){return r(this.catalog)},Document.prototype.getReferences=Document.prototype.getCatalog,Document.prototype.getRevisionDate=function(){return this.getAttribute("revdate")},Document.prototype.getRevdate=function(){return this.getRevisionDate()},Document.prototype.getRevisionNumber=function(){return this.getAttribute("revnumber")},Document.prototype.getRevisionRemark=function(){return this.getAttribute("revremark")},Document.prototype.setHeaderAttribute=function(t,e,r){return void 0===r&&(r=!0),void 0===e&&(e=""),this.$set_header_attribute(t,e,r)},Document.prototype.getAuthors=function(){return this.$authors()};let _=Document.Footnote;_.prototype.getIndex=function(){let t=this.$$data.index;return t===Opal.nil?void 0:t},_.prototype.getId=function(){let t=this.$$data.id;return t===Opal.nil?void 0:t},_.prototype.getText=function(){let t=this.$$data.text;return t===Opal.nil?void 0:t};let d=Document.ImageReference;d.prototype.getTarget=function(){return this.$$data.target},d.prototype.getImagesDirectory=function(){let t=this.$$data.imagesdir;return t===Opal.nil?void 0:t};let p=Document.Author;p.prototype.getName=function(){let t=this.$$data.name;return t===Opal.nil?void 0:t},p.prototype.getFirstName=function(){let t=this.$$data.firstname;return t===Opal.nil?void 0:t},p.prototype.getMiddleName=function(){let t=this.$$data.middlename;return t===Opal.nil?void 0:t},p.prototype.getLastName=function(){let t=this.$$data.lastname;return t===Opal.nil?void 0:t},p.prototype.getInitials=function(){let t=this.$$data.initials;return t===Opal.nil?void 0:t},p.prototype.getEmail=function(){let t=this.$$data.email;return t===Opal.nil?void 0:t},Document.RevisionInfo=function(t,e,r){this.date=t,this.number=e,this.remark=r};let f=Document.RevisionInfo;f.prototype.getDate=function(){return this.date},f.prototype.getNumber=function(){return this.number},f.prototype.getRemark=function(){return this.remark},f.prototype.isEmpty=function(){return void 0===this.date&&void 0===this.number&&void 0===this.remark};let m=Opal.Asciidoctor.SafeMode;m.getValueForName=function(t){return this.$value_for_name(t)},m.getNameForValue=function(t){let e=this.$name_for_value(t);return e===Opal.nil?void 0:e},m.getNames=function(){return this.$names()};let g=Opal.Asciidoctor.Callouts;g.create=function(){return this.$new()},g.prototype.register=function(t){return this.$register(t)},g.prototype.readNextId=function(){return this.$read_next_id()},g.prototype.getCalloutIds=function(t){return this.$callout_ids(t)},g.prototype.getLists=function(){let t=this.lists;if(t&&t.length>0)for(let e=0;e<t.length;e++){let n=t[e];if(n&&n.length>0)for(let t=0;t<n.length;t++)"object"==typeof n[t]&&"$$smap"in n[t]&&(n[t]=r(n[t]))}return t},g.prototype.getListIndex=function(){return this.list_index},g.prototype.getCurrentList=function(){let t=this.$current_list();if(t&&t.length>0)for(let e=0;e<t.length;e++)"object"==typeof t[e]&&"$$smap"in t[e]&&(t[e]=r(t[e]));return t},g.prototype.nextList=function(){return this.$nextList()},g.prototype.rewind=function(){return this.$rewind()},Document.prototype.getRevisionInfo=function(){return new Document.RevisionInfo(this.getRevisionDate(),this.getRevisionNumber(),this.getRevisionRemark())},Document.prototype.hasRevisionInfo=function(){let t=this.getRevisionInfo();return!t.isEmpty()},Document.prototype.getNotitle=function(){return this.$notitle()},Document.prototype.getNoheader=function(){return this.$noheader()},Document.prototype.getNofooter=function(){return this.$nofooter()},Document.prototype.hasHeader=function(){return this["$header?"]()},Document.prototype.playbackAttributes=function(t){if(t=e(t)){let e=t["$[]"]("attribute_entries");if(e&&Array.isArray(e)){let r=[];for(let t=0;t<e.length;t++){let n=e[t];n&&"object"==typeof n&&"Object"===n.constructor.name&&(n.$name=function(){return this.name},n.$value=function(){return this.value},n.$negate=function(){return this.negate}),r.push(n)}t["$[]="]("attribute_entries",r)}}this.$playback_attributes(t)},Document.prototype.deleteAttribute=function(t){return this.$delete_attribute(t)},Document.prototype.isAttributeLocked=function(t){return this["$attribute_locked?"](t)},Document.prototype.restoreAttributes=function(){return this.$restore_attributes()},Document.prototype.parse=function(t){return this.$parse(t)},Document.prototype.getDocinfo=function(t,e){return this.$docinfo(t,e)},Document.prototype.hasDocinfoProcessors=function(t){return this["$docinfo_processors?"](t)},Document.prototype.incrementAndStoreCounter=function(t,e){return this.$increment_and_store_counter(t,e)},Document.prototype.counterIncrement=Document.prototype.incrementAndStoreCounter,Document.prototype.counter=function(t,e){return this.$counter(t,e)},Document.prototype.getSafe=function(){return this.safe},Document.prototype.getCompatMode=function(){return this.compat_mode},Document.prototype.getSourcemap=function(){let t=this.sourcemap;return t!==Opal.nil&&t},Document.prototype.setSourcemap=function(t){this.sourcemap=t},Document.prototype.getCounters=function(){return r(this.counters)},Document.prototype.getCallouts=function(){return this.$callouts()},Document.prototype.getBaseDir=function(){return this.base_dir},Document.prototype.getOptions=function(){return r(this.options)},Document.prototype.getOutfilesuffix=function(){return this.outfilesuffix},Document.prototype.getParentDocument=function(){let t=this.parent_document;return t===Opal.nil?void 0:t},Document.prototype.getReader=function(){return this.reader},Document.prototype.getConverter=function(){return this.converter},Document.prototype.getExtensions=function(){let t=this.extensions;return t===Opal.nil?void 0:t};let b=Document.Title;b.prototype.getMain=function(){return this.main},b.prototype.getCombined=function(){return this.combined},b.prototype.getSubtitle=function(){let t=this.subtitle;return t===Opal.nil?void 0:t},b.prototype.isSanitized=function(){let t=this["$sanitized?"]();return t!==Opal.nil&&t},b.prototype.hasSubtitle=function(){return this["$subtitle?"]()};let v=Opal.Asciidoctor.Inline;v.create=function(t,e,r,n){return this.$new(t,e,r,s(n))},v.prototype.convert=function(){return this.$convert()},v.prototype.getText=function(){let t=this.$text();return t===Opal.nil?void 0:t},v.prototype.getType=function(){return this.$type()},v.prototype.getTarget=function(){let t=this.$target();return t===Opal.nil?void 0:t},v.prototype.getAlt=function(){return this.$alt()};let y=Opal.Asciidoctor.List;y.prototype.hasItems=function(){return this["$items?"]()},y.prototype.getItems=function(){return this.blocks};let x=Opal.Asciidoctor.ListItem;x.prototype.getText=function(){return this.$text()},x.prototype.setText=function(t){return this["$text="](t)},x.prototype.hasText=function(){return this["$text?"]()},x.prototype.getMarker=function(){return this.marker},x.prototype.setMarker=function(t){this.marker=t},x.prototype.getList=function(){return this.$list()},x.prototype.getParent=x.prototype.getList;let k=Opal.Asciidoctor.Reader;k.prototype.pushInclude=function(t,r,n,i,s){return this.$push_include(t,r,n,i,e(s))},k.prototype.getCursor=function(){return this.$cursor()},k.prototype.getLines=function(){return this.$lines()},k.prototype.getString=function(){return this.$string()},k.prototype.hasMoreLines=function(){return this["$has_more_lines?"]()},k.prototype.isEmpty=function(){return this["$empty?"]()},k.prototype.peekLine=function(t){t=t||!1;let e=this.$peek_line(t);return e===Opal.nil?void 0:e},k.prototype.readLine=function(){let t=this.$read_line();return t===Opal.nil?void 0:t},k.prototype.readLines=function(){return this.$read_lines()},k.prototype.read=function(){return this.$read()},k.prototype.advance=function(){return this.$advance()};let w=Opal.Asciidoctor.Reader.Cursor;w.prototype.getFile=function(){let t=this.file;return t===Opal.nil?void 0:t},w.prototype.getDirectory=function(){let t=this.dir;return t===Opal.nil?void 0:t},w.prototype.getPath=function(){let t=this.path;return t===Opal.nil?void 0:t},w.prototype.getLineNumber=function(){return this.lineno};let A=Opal.const_get_qualified(Opal.Asciidoctor,"LoggerManager",!0);Opal.Asciidoctor.LoggerManager=A,A.getLogger=function(){return this.$logger()},A.setLogger=function(t){this["$logger="](t)},A.newLogger=function(t,e){return(function(t,e){let n=Opal.const_get_qualified(Opal.Asciidoctor,"Logger");return a(n,t,e,{},{add:function(t){if(t.length>=2&&"object"==typeof t[2]&&"$$smap"in t[2]){let e=t[2],n=r(e);n.getText=function(){return this.text},n.getSourceLocation=function(){return this.source_location},n.$inspect=function(){let t=this.getSourceLocation();return t?t.getPath()+": line "+t.getLineNumber()+": "+this.getText():this.getText()},t[2]=n}return t.length>=1&&(t[1]=t[1]===Opal.nil?void 0:t[1]),t}})})(t,e).$new()},A.newFormatter=function(t,e){return(function(t,e){let n=Opal.const_get_qualified(Opal.Logger,"Formatter");return a(n,t,e,{},{call:function(t){for(let e=0;e<t.length;e++)"object"==typeof t[e]&&"$$smap"in t[e]&&(t[e]=r(t[e]));return t}})})(t,e).$new()};let E=Opal.const_get_qualified(Opal.Logger,"Severity",!0);Opal.Asciidoctor.LoggerSeverity=E,E.get=function(t){return E.$constants()[t]};let S=Opal.const_get_qualified(Opal.Logger,"Formatter",!0);Opal.Asciidoctor.LoggerFormatter=S,S.prototype.call=function(t,e,r,n){return this.$call(E.get(t),e,r,n)};let C=Opal.const_get_qualified(Opal.Asciidoctor,"MemoryLogger",!0);Opal.Asciidoctor.MemoryLogger=C,C.create=function(){return this.$new()},C.prototype.getMessages=function(){let t=this.messages,e=[];for(let n=0;n<t.length;n++){let i=t[n],s=r(i);"string"==typeof s.message?s.getText=function(){return this.message}:(s.message=r(s.message),s.getText=function(){return this.message.text}),s.getSeverity=function(){return this.severity.toString()},s.getSourceLocation=function(){return this.message.source_location},e.push(s)}return e};let O=Opal.const_get_qualified(Opal.Asciidoctor,"Logging",!0);Opal.Asciidoctor.Logging=O,O.getLogger=function(){return A.$logger()},O.createLogMessage=function(t,r){return O.prototype.$message_with_context(t,e(r))},k.prototype.getLogger=O.getLogger,k.prototype.createLogMessage=O.createLogMessage,h.prototype.getLogger=O.getLogger,h.prototype.createLogMessage=O.createLogMessage;let R=Opal.const_get_qualified(Opal.Asciidoctor,"Logger",!0);Opal.Asciidoctor.Logger=R,R.prototype.getMaxSeverity=function(){let t=this.max_severity;return t===Opal.nil?void 0:t},R.prototype.getFormatter=function(){return this.formatter},R.prototype.setFormatter=function(t){this.formatter=t},R.prototype.getLevel=function(){return this.level},R.prototype.setLevel=function(t){this.level=t},R.prototype.getProgramName=function(){return this.progname},R.prototype.setProgramName=function(t){this.progname=t};let I=Opal.const_get_qualified("::","Logger"),T=function(t,e,r){t["$"+e](r)};I.prototype.add=function(t,e,r){let n="string"==typeof t?E[t.toUpperCase()]:t;this.$add(n,e,r)},I.prototype.log=I.prototype.add,I.prototype.debug=function(t){T(this,"debug",t)},I.prototype.info=function(t){T(this,"info",t)},I.prototype.warn=function(t){T(this,"warn",t)},I.prototype.error=function(t){T(this,"error",t)},I.prototype.fatal=function(t){T(this,"fatal",t)},I.prototype.isDebugEnabled=function(){return this["$debug?"]()},I.prototype.isInfoEnabled=function(){return this["$info?"]()},I.prototype.isWarnEnabled=function(){return this["$warn?"]()},I.prototype.isErrorEnabled=function(){return this["$error?"]()},I.prototype.isFatalEnabled=function(){return this["$fatal?"]()};let z=Opal.const_get_qualified(Opal.Asciidoctor,"NullLogger",!0);Opal.Asciidoctor.NullLogger=z,z.create=function(){return this.$new()},z.prototype.getMaxSeverity=function(){return this.max_severity},Opal.Asciidoctor.StopIteration=Opal.StopIteration;let F=Opal.const_get_qualified(Opal.Asciidoctor,"Timings",!0);Opal.Asciidoctor.Timings=F,F.create=function(){return this.$new()},F.prototype.printReport=function(t,e){let r;if(t){if("function"==typeof t.$add)r=function(e){t.$add(1,e)};else if("function"==typeof t.log)r=t.log;else if("function"==typeof t.write)r=function(e){t.write(e,"utf-8")};else throw Error("The output should be a Stream (with a write function), an object with a log function or a Ruby Logger (with a add function)")}else r=function(t){Opal.gvars.stdout.$write(t)};e&&r("Input file: "+e),r(" Time to read and parse source: "+this.$read_parse().toFixed(2)),r(" Time to convert document: "+this.$convert().toFixed(2)),r(" Total time (read, parse and convert): "+this.$read_parse_convert().toFixed(2))};let N=Opal.const_get_qualified(Opal.Asciidoctor,"SyntaxHighlighter",!0);Opal.Asciidoctor.SyntaxHighlighter=N,N.register=function(t,e){let i="string"==typeof t?t:t[0];if("function"==typeof e){let t=e,r=t.prototype,n=Object.getOwnPropertyNames(r);for(let t in e={},n){let i=n[t];e[i]=r[i]}}let s=a(L,i,e,{},{format:function(t){return t.length>=2&&"object"==typeof t[2]&&"$$smap"in t[2]&&(t[2]=r(t[2])),t.length>=1&&(t[1]=t[1]===Opal.nil?void 0:t[1]),t},highlight:function(t){if(t.length>=3&&"object"==typeof t[3]&&"$$smap"in t[3]){let e=t[3];for(let t in e=r(e)){let r=e[t];if("callouts"===t){let i=n(r);for(let t in i){let e=i[t];for(let t=0;t<e.length;t++){let r=e[t];for(let t=0;t<r.length;t++)r[t]=r[t]===Opal.nil?void 0:r[t]}}e[t]=i}else e[t]=r===Opal.nil?void 0:r}t[3]=e}return t.length>=2&&(t[2]=t[2]===Opal.nil?void 0:t[2]),t}});for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&function(t){let r=e[t];"handlesHighlighting"===t?Opal.def(s,"$highlight?",function(){return r.call()}):"hasDocinfo"===t&&Opal.def(s,"$docinfo?",function(t){return r.apply(this,[t])})}(t);return Opal.def(s,"$name",function(){return i}),N.$register(s,t),s},N.get=function(t){let e=N.$for(t);return e===Opal.nil?void 0:e},N.for=N.get;let L=Opal.const_get_qualified(N,"Base",!0);Opal.Asciidoctor.SyntaxHighlighterBase=L,L.prototype.registerFor=function(t){N.$register(this,t)};let D=Opal.Asciidoctor.Table;D.create=function(t,r){return this.$new(t,e(r))},D.prototype.getCaption=function(){return this.caption},D.prototype.getRows=function(){return this.rows},D.prototype.getColumns=function(){return this.columns},D.prototype.getHeadRows=function(){return this.rows.head},D.prototype.hasHeadRows=function(){return this.rows!==Opal.nil&&this.rows.head.length>0},D.prototype.getBodyRows=function(){return this.rows.body},D.prototype.hasBodyRows=function(){return this.rows!==Opal.nil&&this.rows.body.length>0},D.prototype.getFootRows=function(){return this.rows.foot},D.prototype.hasFootRows=function(){return this.rows!==Opal.nil&&this.rows.foot.length>0},D.prototype.hasHeaderOption=function(){return this.has_header_option},D.prototype.hasFooterOption=function(){return this.isOption("footer")},D.prototype.hasAutowidthOption=function(){return this.isOption("autowidth")},D.prototype.getRowCount=function(){return this.getAttribute("rowcount")},D.prototype.setRowCount=function(t){this.setAttribute("rowcount",t)},D.prototype.getColumnCount=function(){return this.getAttribute("colcount")},D.prototype.setColumnCount=function(t){this.setAttribute("colcount",t)};let q=Opal.Asciidoctor.Table.Rows;q.create=function(t,e,r){return this.$new(t,e,r)},q.prototype.getHead=function(){return this.head},q.prototype.getFoot=function(){return this.foot},q.prototype.getBody=function(){return this.body},q.prototype.bySection=function(){return[["head",this.head],["body",this.body],["foot",this.foot]]};let B=Opal.Asciidoctor.Table.Column;B.create=function(t,r,n){return this.$new(t,r,e(n))},B.prototype.getColumnNumber=function(){return this.getAttribute("colnumber")},B.prototype.getWidth=function(){return this.getAttribute("width")},B.prototype.getHorizontalAlign=function(){return this.getAttribute("halign")},B.prototype.getVerticalAlign=function(){return this.getAttribute("valign")},B.prototype.getStyle=function(){let t=this.style;return t===Opal.nil?void 0:t};let M=Opal.Asciidoctor.Table.Cell;M.create=function(t,r,n,i){return this.$new(t,r,e(n),e(i))},M.prototype.getColumnSpan=function(){let t=this.colspan;return t===Opal.nil?void 0:t},M.prototype.setColumnSpan=function(t){return this["$colspan="](t)},M.prototype.getRowSpan=function(){let t=this.rowspan;return t===Opal.nil?void 0:t},M.prototype.setRowSpan=function(t){return this["$rowspan="](t)},M.prototype.getContent=function(){return this.$content()},M.prototype.getText=function(){return this.$text()},M.prototype.getSource=function(){return this.$source()},M.prototype.getLines=function(){return this.$lines()},M.prototype.getLineNumber=function(){let t=this.$lineno();return t===Opal.nil?void 0:t},M.prototype.getFile=function(){let t=this.$file();return t===Opal.nil?void 0:t},M.prototype.getStyle=function(){let t=this.$style();return t===Opal.nil?void 0:t},M.prototype.getColumn=function(){let t=this.$column();return t===Opal.nil?void 0:t},M.prototype.getWidth=function(){return this.getAttribute("width")},M.prototype.getColumnPercentageWidth=function(){return this.getAttribute("colpcwidth")},M.prototype.getInnerDocument=function(){let t=this.inner_document;return t===Opal.nil?void 0:t};let j=Opal.Asciidoctor.Converter.TemplateConverter;if(j){Opal.Asciidoctor.TemplateConverter=j,j.create=function(t,r,n){n&&n.template_cache&&(n.template_cache=e(n.template_cache)),this.$new(t,r,e(n))},j.getCache=function(){let t=r(this.caches);if(t){if(t.scans)for(let e in t.scans=r(t.scans),t.scans)t.scans[e]=r(t.scans[e]);t.templates&&(t.templates=r(t.templates))}return t},j.clearCache=function(){this.$clear_caches()},j.prototype.convert=function(t,r,n){return this.$convert(t,r,e(n))},j.prototype.handles=function(t){return this["$handles?"](t)},j.prototype.getContentOnly=function(t){return this.$content_only(t)},j.prototype.skip=function(t){this.$skip(t)},j.prototype.getTemplates=function(){return r(this.$templates())},j.prototype.register=function(t,e){return this.$register(t,e)};let t={};t.registry={},Opal.Asciidoctor.TemplateEngine=t,t.register=function(t,e){if("string"==typeof t)this.registry[t]=e;else for(let r=0;r<t.length;r++){let n=t[r];this.registry[n]=e}}}let P=Opal.Asciidoctor.Converter.CompositeConverter;P&&(Opal.Asciidoctor.CompositeConverter=P,P.prototype.convert=function(t,r,n){return this.$convert(t,r,e(n))},P.prototype.getContentOnly=function(t){return this.$content_only(t)},P.prototype.skip=function(t){this.$skip(t)},P.prototype.getConverters=function(){return this.converters},P.prototype.getConverter=function(t){let e=this.$converter_for(t);return e===Opal.nil?void 0:e},P.prototype.findConverter=function(t){return this.$find_converter(t)});let U=Opal.const_get_qualified(Opal.Asciidoctor,"Converter");Opal.Asciidoctor.Converter=U,U.prototype.convert=function(t,r,n){return this.$convert(t,r,e(n))},U.create=function(t,r){return this.$create(t,e(r))};let H=Opal.Asciidoctor.Converter.Factory,Y=Opal.Asciidoctor.Converter.Base;Opal.Asciidoctor.ConverterFactory=H;let G=Opal.Asciidoctor.Converter.BackendTraits;Opal.Asciidoctor.ConverterBackendTraits=G,H.register=function(t,e){let r=[o(t)].concat(e);return U.$register.apply(U,r)},H.getDefault=function(t){return this.$default(t)},H.prototype.create=function(t,r){return this.$create(t,e(r))},H.getRegistry=function(){return r(U.$registry())},H.for=function(t){let e=U.$for(t);return e===Opal.nil?void 0:e},H.unregisterAll=function(){let t=U.DefaultFactory.$$cvars["@@registry"];U.DefaultFactory.$$cvars["@@registry"]=e({html5:t["$[]"]("html5")})};let W=Opal.Asciidoctor.Converter.Html5Converter;Opal.Asciidoctor.Html5Converter=W,W.create=function(){return this.$new()},W.prototype.convert=function(t,e,r){return this.$convert(t,e,r)};let K=function(t){return t.$$arity=t.length,t},X=function(t,e,r,n){return"object"==typeof r||r.$$is_class?t["$"+e](r,n):Opal.send(t,e,n&&[n],K(r))},V=Opal.const_get_qualified(Opal.Asciidoctor,"Extensions");Opal.Asciidoctor.Extensions=V,V.create=function(t,e){return"function"==typeof t&&void 0===e?Opal.send(this,"create",null,K(t)):"function"==typeof e?Opal.send(this,"create",[t],K(e)):this.$create()},V.register=function(t,e){return"function"==typeof t&&void 0===e?Opal.send(this,"register",null,K(t)):Opal.send(this,"register",[t],K(e))},V.getGroups=function(){return r(this.$groups())},V.unregisterAll=function(){this.$unregister_all()},V.unregister=function(){let t=Array.prototype.concat.apply([],arguments),e=this.$groups(),r={},n=0,i=e.$$keys;for(;n<i.length;n++){let t=i[n];r[t.toString()]=t}for(let n=0;n<t.length;n++){let i=t[n];i in r&&Opal.hash_delete(e,r[i])}};let J=V.Registry;J.prototype.getGroups=V.getGroups,J.prototype.unregisterAll=function(){this.groups=Opal.hash()},J.prototype.unregister=V.unregister,J.prototype.prefer=function(t,e){return(1==arguments.length&&(e=t,t=null),"object"==typeof e||e.$$is_class)?this.$prefer(t,e):Opal.send(this,"prefer",t&&[t],K(e))},J.prototype.block=function(t,e){return 1==arguments.length&&(e=t,t=null),X(this,"block",e,t)},J.prototype.inlineMacro=function(t,e){return 1==arguments.length&&(e=t,t=null),X(this,"inline_macro",e,t)},J.prototype.includeProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),X(this,"include_processor",e,t)},J.prototype.blockMacro=function(t,e){return 1==arguments.length&&(e=t,t=null),X(this,"block_macro",e,t)},J.prototype.treeProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),X(this,"tree_processor",e,t)},J.prototype.postprocessor=function(t,e){return 1==arguments.length&&(e=t,t=null),X(this,"postprocessor",e,t)},J.prototype.preprocessor=function(t,e){return 1==arguments.length&&(e=t,t=null),X(this,"preprocessor",e,t)},J.prototype.docinfoProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),X(this,"docinfo_processor",e,t)},J.prototype.hasPreprocessors=function(){return this["$preprocessors?"]()},J.prototype.hasTreeProcessors=function(){return this["$tree_processors?"]()},J.prototype.hasIncludeProcessors=function(){return this["$include_processors?"]()},J.prototype.hasPostprocessors=function(){return this["$postprocessors?"]()},J.prototype.hasDocinfoProcessors=function(t){return this["$docinfo_processors?"](t)},J.prototype.hasBlocks=function(){return this["$blocks?"]()},J.prototype.hasBlockMacros=function(){return this["$block_macros?"]()},J.prototype.hasInlineMacros=function(){return this["$inline_macros?"]()},J.prototype.getPreprocessors=function(){return this.$preprocessors()},J.prototype.getTreeProcessors=function(){return this.$tree_processors()},J.prototype.getIncludeProcessors=function(){return this.$include_processors()},J.prototype.getPostprocessors=function(){return this.$postprocessors()},J.prototype.getDocinfoProcessors=function(t){return this.$docinfo_processors(t)},J.prototype.getBlocks=function(){return this.block_extensions.$values()},J.prototype.getBlockMacros=function(){return this.block_macro_extensions.$values()},J.prototype.getInlineMacros=function(){return this.$inline_macros()},J.prototype.getInlineMacroFor=function(t){let e=this["$registered_for_inline_macro?"](t);return!1===e?void 0:e},J.prototype.getBlockFor=function(t,e){if(void 0===e){let e=this.$find_block_extension(t);return e===Opal.nil?void 0:e}let r=this["$registered_for_block?"](t,e);return!1===r?void 0:r},J.prototype.getBlockMacroFor=function(t){let e=this["$registered_for_block_macro?"](t);return!1===e?void 0:e};let Z=V.Processor;Z.prototype.prepend=function(){this.$option("position",">>")},Z.prototype.process=function(t){let e=new Proxy(t,{apply:function(t,e,n){for(let t=0;t<n.length;t++)"object"==typeof n[t]&&"$$smap"in n[t]&&(n[t]=r(n[t]));return t.apply(e,n)}});return Opal.send(this,"process",null,K(e))},Z.prototype.named=function(t){return this.$named(t)},Z.prototype.createBlock=function(t,r,n,i,s){return this.$create_block(t,r,n,e(i),e(s))},Z.prototype.createList=function(t,r,n){return this.$create_list(t,r,e(n))},Z.prototype.createListItem=function(t,e){return this.$create_list_item(t,e)},Z.prototype.createImageBlock=function(t,r,n){return this.$create_image_block(t,e(r),e(n))},Z.prototype.createParagraph=function(t,r,n,i){return this.$create_paragraph(t,r,e(n),e(i))},Z.prototype.createOpenBlock=function(t,r,n,i){return this.$create_open_block(t,r,e(n),e(i))},Z.prototype.createExampleBlock=function(t,r,n,i){return this.$create_example_block(t,r,e(n),e(i))},Z.prototype.createPassBlock=function(t,r,n,i){return this.$create_pass_block(t,r,e(n),e(i))},Z.prototype.createListingBlock=function(t,r,n,i){return this.$create_listing_block(t,r,e(n),e(i))},Z.prototype.createLiteralBlock=function(t,r,n,i){return this.$create_literal_block(t,r,e(n),e(i))},Z.prototype.createAnchor=function(t,r,n){return n&&n.attributes&&(n.attributes=e(n.attributes)),this.$create_anchor(t,r,e(n))},Z.prototype.createInlinePass=function(t,r,n){return n&&n.attributes&&(n.attributes=e(n.attributes)),this.$create_inline_pass(t,r,e(n))},Z.prototype.createInline=function(t,r,n,i){return i&&i.attributes&&(i.attributes=e(i.attributes)),this.$create_inline(t,r,n,e(i))},Z.prototype.parseContent=function(t,r,n){return this.$parse_content(t,r,e(n))},Z.prototype.parseAttributes=function(t,n,i){return i&&i.attributes&&(i.attributes=e(i.attributes)),r(this.$parse_attributes(t,n,e(i)))},Z.prototype.positionalAttributes=function(t){return this.$positional_attrs(t)},Z.prototype.resolveAttributes=function(t){return"object"!=typeof t||Array.isArray(t)?arguments.length>1?this.$resolves_attributes(Array.prototype.slice.call(arguments)):void 0===t?this.$resolves_attributes(Opal.nil):this.$resolves_attributes(t):this.$resolves_attributes(e(t))},Z.prototype.resolvesAttributes=Z.prototype.resolveAttributes,Z.prototype.getConfig=function(){return r(this.config)},Z.prototype.option=function(t,e){this.$option(t,e)};let Q=V.BlockProcessor;Q.prototype.defaultAttributes=function(t){this.$default_attributes(e(t))},Q.prototype.onContext=function(t){return this.$on_context(t)},Q.prototype.onContexts=function(t){return this.$on_contexts(Array.prototype.slice.call(arguments))},Q.prototype.getName=function(){let t=this.name;return t===Opal.nil?void 0:t},Q.prototype.parseContentAs=function(t){this.$parse_content_as(t)};let tt=V.BlockMacroProcessor;tt.prototype.defaultAttributes=function(t){this.$default_attributes(e(t))},tt.prototype.getName=function(){let t=this.name;return t===Opal.nil?void 0:t},tt.prototype.parseContentAs=function(t){this.$parse_content_as(t)};let te=V.InlineMacroProcessor;te.prototype.defaultAttributes=function(t){this.$default_attributes(e(t))},te.prototype.getName=function(){let t=this.name;return t===Opal.nil?void 0:t},te.prototype.parseContentAs=function(t){this.$parse_content_as(t)},te.prototype.matchFormat=function(t){this.$match_format(t)},te.prototype.match=function(t){this.$match(t)};let tr=V.IncludeProcessor;tr.prototype.handles=function(t){return Opal.send(this,"handles?",null,K(t))},tr.prototype.prefer=function(){this.$prefer()};let tn=V.TreeProcessor;tn.prototype.prefer=function(){this.$prefer()};let ti=V.Postprocessor;ti.prototype.prefer=function(){this.$prefer()};let ts=V.Preprocessor;ts.prototype.prefer=function(){this.$prefer()};let to=V.DocinfoProcessor;function ta(t,e,r){let n=Opal.const_get_qualified(V,t);return a(n,e,r,{"handles?":function(){return!0}})}return to.prototype.prefer=function(){this.$prefer()},to.prototype.atLocation=function(t){this.$at_location(t)},V.createPostprocessor=function(t,e){return 1==arguments.length&&(e=t,t=null),ta("Postprocessor",t,e)},V.newPostprocessor=function(t,e){return 1==arguments.length&&(e=t,t=null),this.createPostprocessor(t,e).$new()},V.createPreprocessor=function(t,e){return 1==arguments.length&&(e=t,t=null),ta("Preprocessor",t,e)},V.newPreprocessor=function(t,e){return 1==arguments.length&&(e=t,t=null),this.createPreprocessor(t,e).$new()},V.createTreeProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),ta("TreeProcessor",t,e)},V.newTreeProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),this.createTreeProcessor(t,e).$new()},V.createIncludeProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),ta("IncludeProcessor",t,e)},V.newIncludeProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),this.createIncludeProcessor(t,e).$new()},V.createDocinfoProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),ta("DocinfoProcessor",t,e)},V.newDocinfoProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),this.createDocinfoProcessor(t,e).$new()},V.createBlockProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),ta("BlockProcessor",t,e)},V.newBlockProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),this.createBlockProcessor(t,e).$new()},V.createInlineMacroProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),ta("InlineMacroProcessor",t,e)},V.newInlineMacroProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),this.createInlineMacroProcessor(t,e).$new()},V.createBlockMacroProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),ta("BlockMacroProcessor",t,e)},V.newBlockMacroProcessor=function(t,e){return 1==arguments.length&&(e=t,t=null),this.createBlockMacroProcessor(t,e).$new()},Opal.Asciidoctor.prototype.getVersion=function(){return"3.0.2"},Opal.Asciidoctor}/**
 * @license Asciidoctor.js 3.0.2 | MIT | https://github.com/asciidoctor/asciidoctor.js
 */(function(t){if("undefined"!=typeof globalThis?t=globalThis:"undefined"!=typeof global?t=global:"undefined"!=typeof window&&(t=window),null==t.console&&(t.console={}),"log"in(e="object"==typeof t.console?t.console:{})||(e.log=function(){}),"warn"in e||(e.warn=e.log),void 0!==t.Opal)return e.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),t.Opal;var e,r,n,i,s,o,a,l,$=t.Opal={};$.global=t,$.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var u=Function.prototype.call,c=Function.prototype.bind,h=Object.hasOwn||u.bind(Object.prototype.hasOwnProperty),_=Object.setPrototypeOf,d=u.bind(Array.prototype.slice),p=u.bind(Array.prototype.splice),f=4;function m(){return f+=2}$.uid=m,$.id=function(t){return t.$$is_number?2*t+1:(null==t.$$id&&v(t,"$$id",m()),t.$$id)};var g=$.gvars={};function b(t,e){if(t||(t=$.Exception||Error),l&&l.$raise)arguments.length>2?l.$raise(t.$new.apply(t,d(arguments,1))):l.$raise(t,e);else if(t.$new)throw t.$new(e);else throw new t(e)}function v(t,e,r){"string"==typeof t?t[e]=r:Object.defineProperty(t,e,{value:r,enumerable:!1,configurable:!0,writable:!0})}$.exit=function(t){g.DEBUG&&e.log("Exited with status "+t)},$.exceptions=[],$.pop_exception=function(){var t=$.exceptions.pop();t?(g["!"]=t,g["@"]=t.$backtrace()):g["!"]=g["@"]=r},$.prop=v,$.defineProperty=$.prop,$.slice=d;var y=$.truthy=function(t){return!1!==t&&r!==t&&null!=t&&(!(t instanceof Boolean)||!0===t.valueOf())};function x(t){var e,r,n;for(e=0,r=$.tracers_for_class.length;e<r;e++)(n=$.tracers_for_class[e]).trace_object=t,n.block.$call(n)}function k(t,e){if(t.$$autoload[e].loaded){if(t.$$autoload[e].loaded&&!t.$$autoload[e].required&&t.$$autoload[e].exception)throw t.$$autoload[e].exception}else{t.$$autoload[e].loaded=!0;try{$.Kernel.$require(t.$$autoload[e].path)}catch(r){throw t.$$autoload[e].exception=r,r}if(t.$$autoload[e].required=!0,null!=t.$$const[e])return t.$$autoload[e].success=!0,t.$$const[e]}}function w(t,e){if(t){if(null!=t.$$const[e])return t.$$const[e];if(t.$$autoload&&t.$$autoload[e])return k(t,e)}}function A(t,e){var r,n,i;if(null!=t)for(r=0,n=(i=L(t)).length;r<n;r++){if(i[r].$$const&&h(i[r].$$const,e))return i[r].$$const[e];if(i[r].$$autoload&&i[r].$$autoload[e])return k(i[r],e)}}function E(t,e){return(t||i).$const_missing(e)}function S(t,e,n){var s=!0;return(null==t||"::"===t)&&(t=i),n.$$is_a_module&&((null==n.$$name||n.$$name===r)&&(n.$$name=e),null==n.$$base_module&&(n.$$base_module=t)),t.$$const=t.$$const||Object.create(null),(e in t.$$const||"$$autoload"in t&&e in t.$$autoload)&&(s=!1),t.$$const[e]=n,t.$$=t.$$const,$.const_cache_version++,t===i&&($[e]=n),v(t,e,n),s&&t.$const_added&&!t.$const_added.$$pristine&&t.$const_added(e),n}function C(t,e,n){var i;if(i=null!=e&&e.$$bridge?function(){var t=d(arguments),r=new(c.apply(e.$$constructor,[null].concat(t)));return _(r,i.$$prototype),r}:function(){},t&&t!==r&&v(i,"displayName","::"+t),v(i,"$$name",t),v(i,"$$constructor",i),v(i,"$$prototype",i.prototype),v(i,"$$const",{}),v(i,"$$is_class",!0),v(i,"$$is_a_module",!0),v(i,"$$super",e),v(i,"$$cvars",{}),v(i,"$$own_included_modules",[]),v(i,"$$own_prepended_modules",[]),v(i,"$$ancestors",[]),v(i,"$$ancestors_cache_version",null),v(i,"$$subclasses",[]),v(i.$$prototype,"$$class",i),$.Class&&_(i,$.Class.prototype),null!=e){if(_(i.$$prototype,e.$$prototype),!0!==n){if("undefined"!=typeof WeakRef){var s,o,a=[];for(s=0;s<e.$$subclasses.length;s++)void 0!==(o=e.$$subclasses[s]).deref()&&a.push(o);a.push(new WeakRef(i)),e.$$subclasses=a}else e.$$subclasses.push(i)}e.$$meta&&$.build_class_singleton_class(i)}return i}function O(t){var e=function(){};return t&&v(e,"displayName",t+".constructor"),v(e,"$$name",t),v(e,"$$prototype",e.prototype),v(e,"$$const",{}),v(e,"$$is_module",!0),v(e,"$$is_a_module",!0),v(e,"$$cvars",{}),v(e,"$$iclasses",[]),v(e,"$$own_included_modules",[]),v(e,"$$own_prepended_modules",[]),v(e,"$$ancestors",[e]),v(e,"$$ancestors_cache_version",null),_(e,$.Module.prototype),e}function R(t,e){t.hasOwnProperty("$$meta")?t.$$meta=e:v(t,"$$meta",e),t.$$frozen?t.$$meta.$freeze():_(t,e.$$prototype)}function I(t){return t.hasOwnProperty("$$iclass")&&t.hasOwnProperty("$$root")}function T(t){var e=z(t);return t.$$is_module&&t.$$iclasses.push(e),e}function z(t){var e={},r=t.$$prototype;r.hasOwnProperty("$$dummy")&&(r=r.$$define_methods_on);var n,i=Object.getOwnPropertyNames(r),s=i.length;for(n=0;n<s;n++){var o=i[n];v(e,o,r[o])}return v(e,"$$iclass",!0),v(e,"$$module",t),e}function F(t){var e=t.length,r=t[0];if(v(r,"$$root",!0),1===e)return{first:r,last:r};for(var n=r,i=1;i<e;i++){var s=t[i];_(n,s),n=s}return{first:t[0],last:t[e-1]}}function N(t){if(!t.hasOwnProperty("$$dummy")){if(t.hasOwnProperty("$$iclass"))return t.$$module;if(t.hasOwnProperty("$$class"))return t.$$class}}function L(t){if(!t)return[];if(t.$$ancestors_cache_version===$.const_cache_version)return t.$$ancestors;var e,r,n,i=[];for(e=0,n=(r=t.$$own_prepended_modules.concat([t]).concat(t.$$own_included_modules)).length;e<n;e++)i.push(r[e]);if(t.$$super)for(e=0,n=(r=L(t.$$super)).length;e<n;e++)i.push(r[e]);return t.$$ancestors_cache_version=$.const_cache_version,t.$$ancestors=i,i}function D(t){return t.hasOwnProperty("$$meta")&&null!==t.$$meta?L(t.$$meta):L(t.$$class)}function q(t,e){"number"==typeof e?t.$$arity=e:"object"==typeof e&&Object.assign(t,e)}$.falsy=function(t){return!y(t)},$.type_error=function(t,e,r,n){t=t.$$class,n&&r?(n=n.$$class,b($.TypeError,"can't convert "+t+" into "+e+" ("+t+"#"+r+" gives "+n+")")):b($.TypeError,"no implicit conversion of "+t+" into "+e)},$.coerce_to=function(t,e,r,n){var i;return"to_int"===r&&e===$.Integer&&t.$$is_number?t<0?Math.ceil(t):Math.floor(t):"to_str"===r&&e===$.String&&t.$$is_string||$.is_a(t,e)?t:t["$respond_to?"].$$pristine&&t.$method_missing.$$pristine?((null==(i=t[M(r)])||i.$$stub)&&$.type_error(t,e),i.apply(t,n)):(t["$respond_to?"](r)||$.type_error(t,e),null==n&&(n=[]),$.send(t,r,n))},$.respond_to=function(t,e,r){if(null==t||!t.$$class)return!1;r=!!r;var n=t[e];return t["$respond_to?"].$$pristine?"function"==typeof n&&!n.$$stub||(t["$respond_to_missing?"].$$pristine?void 0:$.send(t,t["$respond_to_missing?"],[e.substr(1),r])):$.send(t,t["$respond_to?"],[e.substr(1),r])},$.trace_class=!1,$.tracers_for_class=[],$.const_get_local=function(t,e,r){var n;if(null!=t)return"::"===t&&(t=i),t.$$is_module||t.$$is_class||b($.TypeError,t.toString()+" is not a class/module"),null!=(n=w(t,e))||r?n:E(t,e)},$.const_get_qualified=function(t,e,r){var n,s,o,a=$.const_cache_version;return null==e?null!=(n=w(i,t))?n:$.const_get_qualified(i,t,r):null!=t?("::"===t&&(t=i),t.$$is_module||t.$$is_class||b($.TypeError,t.toString()+" is not a class/module"),null==(s=t.$$const_cache)&&(v(t,"$$const_cache",Object.create(null)),s=t.$$const_cache),null==(o=s[e])||o[0]!==a?(null!=(n=w(t,e))||(n=A(t,e)),s[e]=[a,n]):n=o[1],null!=n||r?n:E(t,e)):void 0},$.const_cache_version=1,$.const_get_relative=function(t,e,r){var n,s,o,a=t[0],l=$.const_cache_version;return null==(s=t.$$const_cache)&&(v(t,"$$const_cache",Object.create(null)),s=t.$$const_cache),null==(o=s[e])||o[0]!==l?(null!=(n=w(a,e))||null!=(n=function(t,e){var r,n,i;if(0!==t.length)for(r=0,n=t.length;r<n;r++){if(null!=(i=t[r].$$const[e]))return i;if(t[r].$$autoload&&t[r].$$autoload[e])return k(t[r],e)}}(t,e))||null!=(n=A(a,e))||(n=function(t,e){if(null==t||t.$$is_module)return A(i,e)}(a,e)),s[e]=[l,n]):n=o[1],null!=n||r?n:E(a,e)},$.const_set=S,$.constants=function(t,e){null==e&&(e=!0);var r,n,s,o,a=[t],l={};for(e&&(a=a.concat(L(t))),e&&t.$$is_module&&(a=a.concat([$.Object]).concat(L($.Object))),n=0,s=a.length;n<s&&(r=a[n],t===i||r!=i);n++){for(o in r.$$const)l[o]=!0;if(r.$$autoload)for(o in r.$$autoload)l[o]=!0}return Object.keys(l)},$.const_remove=function(t,e){if($.const_cache_version++,null!=t.$$const[e]){var n=t.$$const[e];return delete t.$$const[e],n}if(t.$$autoload&&t.$$autoload[e])return delete t.$$autoload[e],r;b($.NameError,"constant "+t+"::"+t.$name()+" not defined")},$.const_get_relative_factory=function(t){return function(e,r){return $.$$(t,e,r)}},$.$$=$.const_get_relative,$.$$$=$.const_get_qualified,$.$r=$.const_get_relative_factory,$.allocate_class=C,$.klass=function(t,e,r){null==t||"::"==t?t=i:t.$$is_class||t.$$is_module||(t=t.$$class),null==e||e.hasOwnProperty&&(!e.hasOwnProperty||e.hasOwnProperty("$$is_class"))||(e.constructor&&"Function"==e.constructor.name?(o=e,e=i):b($.TypeError,"superclass must be a Class ("+(e.constructor&&(e.constructor.name||e.constructor.$$name)||typeof e)+" given)"));var n,s,o,a=function(t,e){var r=w(t,e);if(r)return r.$$is_class||b($.TypeError,e+" is not a class"),r}(t,r);return null!=a?e&&(n=a,s=e,n.$$super!==s&&b($.TypeError,"superclass mismatch for class "+n.$$name)):(null==e&&(e=i),a=C(r,e),S(t,r,a),e.$inherited&&e.$inherited(a),o&&$.bridge(o,a)),$.trace_class&&x(a),a},$.allocate_module=O,$.module=function(t,e){var r,n,s;return null==t||"::"==t?t=i:t.$$is_class||t.$$is_module||(t=t.$$class),null==(s=w(n=t,e))&&n===i&&(s=A(i,e)),s&&(s.$$is_module||s===i||b($.TypeError,e+" is not a module")),null==(r=s)&&(r=O(e),S(t,e,r)),$.trace_class&&x(r),r},$.get_singleton_class=function(t){return(t.$$is_number&&b($.TypeError,"can't define singleton"),t.$$meta)?t.$$meta:t.hasOwnProperty("$$is_class")?$.build_class_singleton_class(t):t.hasOwnProperty("$$is_module")?$.build_module_singleton_class(t):$.build_object_singleton_class(t)},$.build_class_singleton_class=function(t){if(t.$$meta)return t.$$meta;var e=C(null,t===n?o:$.get_singleton_class(t.$$super),!0);return v(e,"$$is_singleton",!0),v(e,"$$singleton_of",t),R(t,e),v(t,"$$class",$.Class),e},$.build_module_singleton_class=function(t){if(t.$$meta)return t.$$meta;var e=C(null,$.Module,!0);return v(e,"$$is_singleton",!0),v(e,"$$singleton_of",t),R(t,e),v(t,"$$class",$.Module),e},$.build_object_singleton_class=function(t){var e=t.$$class,n=C(r,e,!0);return v(n,"$$is_singleton",!0),v(n,"$$singleton_of",t),delete n.$$prototype.$$class,R(t,n),n},$.is_method=function(t){return"$"===t[0]&&"$"!==t[1]},$.instance_methods=function(t){for(var e=[],r=[],n=L(t),i=0,s=n.length;i<s;i++){var o=n[i].$$prototype;o.hasOwnProperty("$$dummy")&&(o=o.$$define_methods_on);for(var a=Object.getOwnPropertyNames(o),l=0,u=a.length;l<u;l++){var c=a[l];if($.is_method(c)){var h=c.slice(1),_=o[c];_.$$stub&&-1===e.indexOf(h)&&e.push(h),_.$$stub||-1!==r.indexOf(h)||-1!==e.indexOf(h)||r.push(h)}}}return r},$.own_instance_methods=function(t){var e=[],r=t.$$prototype;r.hasOwnProperty("$$dummy")&&(r=r.$$define_methods_on);for(var n=Object.getOwnPropertyNames(r),i=0,s=n.length;i<s;i++){var o=n[i];if($.is_method(o)&&!r[o].$$stub){var a=o.slice(1);e.push(a)}}return e},$.methods=function(t){return $.instance_methods(t.$$meta||t.$$class)},$.own_methods=function(t){return t.$$meta?$.own_instance_methods(t.$$meta):[]},$.receiver_methods=function(t){var e=$.get_singleton_class(t),r=$.own_instance_methods(e),n=$.own_instance_methods(e.$$super);return r.concat(n)},$.class_variables=function(t){var e,r=L(t),n=r.length,i={};for(e=n-1;e>=0;e--){var s=r[e];for(var o in s.$$cvars)i[o]=s.$$cvars[o]}return i},$.class_variable_set=function(t,e,r){var n,i=L(t);for(n=i.length-2;n>=0;n--){var s=i[n];if(h(s.$$cvars,e))return s.$$cvars[e]=r,r}return t.$$cvars[e]=r,r},$.class_variable_get=function(t,e,n){if(h(t.$$cvars,e))return t.$$cvars[e];var i,s=L(t),o=s.length;for(i=0;i<o;i++){var a=s[i];if(h(a.$$cvars,e))return a.$$cvars[e]}return n||b($.NameError,"uninitialized class variable "+e+" in "+t.$name()),r},$.append_features=function(t,e){var r=L(t),n=[];-1!==r.indexOf(e)&&b($.ArgumentError,"cyclic include detected");for(var i=0,s=r.length;i<s;i++){var o=T(r[i]);v(o,"$$included",!0),n.push(o)}var a,l,u=L(e),c=F(n);if(-1===u.indexOf(t))a=e.$$prototype,l=Object.getPrototypeOf(e.$$prototype);else{for(var h=e.$$prototype,d=Object.getPrototypeOf(h);null!=d&&!(d.$$module===t&&I(d));)h=d,d=Object.getPrototypeOf(d);if(d){for(var p=Object.getPrototypeOf(d);p.hasOwnProperty("$$iclass")&&!I(p);)p=Object.getPrototypeOf(p);a=h,l=p}else a=e.$$prototype,l=Object.getPrototypeOf(e.$$prototype)}_(a,c.first),_(c.last,l),e.$$own_included_modules=function(t){for(var e,r=[],n=Object.getPrototypeOf(t.$$prototype);n&&!n.hasOwnProperty("$$class");)(e=N(n))&&r.push(e),n=Object.getPrototypeOf(n);return r}(e),$.const_cache_version++},$.prepend_features=function(t,e){var r=L(t),n=[];-1!==r.indexOf(e)&&b($.ArgumentError,"cyclic prepend detected");for(var i=0,s=r.length;i<s;i++){var o=T(r[i]);v(o,"$$prepended",!0),n.push(o)}var a,l,u,c=F(n),h=e.$$prototype,d=Object.getPrototypeOf(h);if(h.hasOwnProperty("$$dummy")?a=h.$$define_methods_on:(a=z(e),function(t){for(var e=t.$$prototype,r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n];$.is_method(i)&&delete e[i]}}(e),v(h,"$$dummy",!0),v(h,"$$define_methods_on",a),_(h,a),_(a,d)),-1===L(e).indexOf(t))for(l=h,u=Object.getPrototypeOf(h);null!=u&&!u.hasOwnProperty("$$root")&&u!==a&&u.hasOwnProperty("$$iclass");)u=Object.getPrototypeOf(u);else b($.RuntimeError,"Prepending a module multiple times is not supported");_(l,c.first),_(c.last,u),e.$$own_prepended_modules=function(t){var e,r=[],n=Object.getPrototypeOf(t.$$prototype);if(t.$$prototype.hasOwnProperty("$$dummy"))for(;n&&n!==t.$$prototype.$$define_methods_on;)(e=N(n))&&r.push(e),n=Object.getPrototypeOf(n);return r}(e),$.const_cache_version++},$.bridge=function(t,e){t.hasOwnProperty("$$bridge")&&b($.ArgumentError,"already bridged"),v(t,"$$bridge",e),_(t.prototype,(e.$$super||$.Object).$$prototype),v(e,"$$prototype",t.prototype),v(e.$$prototype,"$$class",e),v(e,"$$constructor",t),v(e,"$$bridge",!0)},$.ancestors=L,$.included_modules=function(t){for(var e=[],r=null,n=Object.getPrototypeOf(t.$$prototype);n&&Object.getPrototypeOf(n);n=Object.getPrototypeOf(n))(r=N(n))&&r.$$is_module&&n.$$iclass&&n.$$included&&e.push(r);return e},$.add_stubs=function(t){var e,r,n=$.BasicObject.$$prototype;t=t.split(",");for(var i=0,s=t.length;i<s;i++)(null==(r=n[e=M(t[i])])||r.$$stub)&&$.add_stub_for(n,e)},$.add_stub_for=function(t,e){v(t,e,$.stub_for(e))},$.stub_for=function(t){function e(){this.$method_missing.$$p=e.$$p,e.$$p=null;for(var r=Array(arguments.length),n=0,i=r.length;n<i;n++)r[n]=arguments[n];return this.$method_missing.apply(this,[t.slice(1)].concat(r))}return e.$$stub=!0,e},$.ac=function(t,e,r,n){var i="";r.$$is_a_module?i+=r.$$name+".":i+=r.$$class.$$name+"#",i+=n,b($.ArgumentError,"["+i+"] wrong number of arguments (given "+t+", expected "+e+")")},$.block_ac=function(t,e,r){b($.ArgumentError,"`block in "+r+"': wrong number of arguments (given "+t+", expected "+e+")")},$.find_super=function(t,e,r,n,i){for(var s,o,a=M(e),l=(s=D(t)).indexOf(r.$$owner),u=l+1;u<s.length;u++){var c=s[u].$$prototype;if(c.hasOwnProperty("$$dummy")&&(c=c.$$define_methods_on),c.hasOwnProperty(a)){o=c[a];break}}return!n&&o&&o.$$stub&&t.$method_missing.$$pristine&&b($.NoMethodError,"super: no superclass method `"+e+"' for "+t,e),o.$$stub&&!i?null:o},$.find_block_super=function(t,e,r,n,i){var s=e;return r||b($.RuntimeError,"super called outside of method"),i&&r.$$define_meth&&b($.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),r.$$def&&(s=r.$$jsid),$.find_super(t,s,r,n)},$.find_super_dispatcher=$.find_super,$.find_iter_super_dispatcher=$.find_block_super,$.yield1=function(t,e){"function"!=typeof t&&b($.LocalJumpError,"no block given");var r=t.$$has_top_level_mlhs_arg,n=t.$$has_trailing_comma_in_args;return((t.length>1||(r||n)&&1===t.length)&&(e=$.to_ary(e)),(t.length>1||n&&1===t.length)&&e.$$is_array)?t.apply(null,e):t(e)},$.yieldX=function(t,e){if("function"!=typeof t&&b($.LocalJumpError,"no block given"),t.length>1&&1===e.length&&e[0].$$is_array)return t.apply(null,e[0]);if(!e.$$is_array){for(var r=Array(e.length),n=0,i=r.length;n<i;n++)r[n]=e[n];return t.apply(null,r)}return t.apply(null,e)},$.rescue=function(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(n.$$is_array){var i=$.rescue(t,n);if(i)return i}else if(n===$.JS.Error||n["$==="](t))return n}return null},$.is_a=function(t,e){return null!=e&&t.$$meta===e||t.$$class===e||(t.$$is_number&&e.$$is_number_class?!e.$$is_integer_class||t%1==0:-1!==L(t.$$is_class?$.get_singleton_class(t):t.$$meta||t.$$class).indexOf(e))},$.to_hash=function(t){if(t.$$is_hash)return t;if(t["$respond_to?"]("to_hash",!0)){var e=t.$to_hash();if(e.$$is_hash)return e;b($.TypeError,"Can't convert "+t.$$class+" to Hash ("+t.$$class+"#to_hash gives "+e.$$class+")")}else b($.TypeError,"no implicit conversion of "+t.$$class+" into Hash")},$.to_ary=function(t){if(t.$$is_array)return t;if(!t["$respond_to?"]("to_ary",!0))return[t];var e=t.$to_ary();return e===r?[t]:e.$$is_array?e:void b($.TypeError,"Can't convert "+t.$$class+" to Array ("+t.$$class+"#to_ary gives "+e.$$class+")")},$.to_a=function(t){if(t.$$is_array)return t.slice();if(!t["$respond_to?"]("to_a",!0))return[t];var e=t.$to_a();return e===r?[t]:e.$$is_array?e:void b($.TypeError,"Can't convert "+t.$$class+" to Array ("+t.$$class+"#to_a gives "+e.$$class+")")},$.extract_kwargs=function(t){var e=t[t.length-1];if(null!=e&&$.respond_to(e,"$to_hash",!0))return p(t,t.length-1),e},$.kwrestargs=function(t,e){var r,n=[],i={},s=t.$$smap;for(r in s)e[r]||(n.push(r),i[r]=s[r]);return $.hash2(n,i)};var B={};function M(t){return B[t]||(B[t]="$"+t)}function j(t){return"function"==typeof t&&!t.$$stub}$.jsid=M,$.send=function(t,e,r,n,i){var s;return"function"==typeof e?(s=e,e=null):"string"==typeof e?s=t[M(e)]:b($.NameError,"Passed method should be a string or a function"),$.send2(t,s,e,r,n,i)},$.send2=function(t,e,r,n,i,s){return null==e&&null!=r&&t.$method_missing&&(e=t.$method_missing,n=[r].concat(n)),q(i,s),"function"==typeof i&&(e.$$p=i),e.apply(t,n)},$.refined_send=function(t,e,r,n,i,s){var o,a,l,u,c,h,_,d,p,f;for(o=0,u=D(e);o<u.length;o++)for(a=0,c=$.id(u[o]);a<t.length;a++)for(l=(h=t[a]).length-1;l>=0;l--)if(void 0!==(_=h[l]).$$refine_modules&&void 0!==(d=_.$$refine_modules)[c]&&void 0!==(p=d[c]).$$prototype[M(r)])return f=p.$$prototype[M(r)],$.send2(e,f,r,n,i,s);return $.send(e,r,n,i,s)},$.lambda=function(t,e){return t.$$is_lambda=!0,q(t,e),t},$.def=function(t,e,r,n){return(q(r,n),t===$.top)?$.defn($.Object,e,r):!t.$$eval&&t.$$is_a_module?$.defn(t,e,r):$.defs(t,e,r)},$.defn=function(t,e,r){U(t),r.displayName=e,r.$$owner=t;var n=e.substr(1),i=t.$$prototype;if(i.hasOwnProperty("$$dummy")&&(i=i.$$define_methods_on),v(i,e,r),t.$$is_module){t.$$module_function&&$.defs(t,e,r);for(var s=0,o=t.$$iclasses,a=o.length;s<a;s++)v(o[s],e,r)}var l=t.$$singleton_of;return!t.$method_added||t.$method_added.$$stub||l?l&&l.$singleton_method_added&&!l.$singleton_method_added.$$stub&&l.$singleton_method_added(n):t.$method_added(n),n},$.defs=function(t,e,r,n){return q(r,n),(t.$$is_string||t.$$is_number)&&b($.TypeError,"can't define singleton"),$.defn($.get_singleton_class(t),e,r)},$.rdef=function(t,e){h(t.$$prototype,e)||b($.NameError,"method '"+e.substr(1)+"' not defined in "+t.$name()),delete t.$$prototype[e],t.$$is_singleton?t.$$prototype.$singleton_method_removed&&!t.$$prototype.$singleton_method_removed.$$stub&&t.$$prototype.$singleton_method_removed(e.substr(1)):t.$method_removed&&!t.$method_removed.$$stub&&t.$method_removed(e.substr(1))},$.udef=function(t,e){(!t.$$prototype[e]||t.$$prototype[e].$$stub)&&b($.NameError,"method '"+e.substr(1)+"' not defined in "+t.$name()),$.add_stub_for(t.$$prototype,e),t.$$is_singleton?t.$$prototype.$singleton_method_undefined&&!t.$$prototype.$singleton_method_undefined.$$stub&&t.$$prototype.$singleton_method_undefined(e.substr(1)):t.$method_undefined&&!t.$method_undefined.$$stub&&t.$method_undefined(e.substr(1))},$.alias=function(t,e,r){var n,i,s=M(e),o=M(r);if(void 0===t.$$prototype&&(t=$.Object),n=t.$$prototype[o],t.$$eval)return $.alias($.get_singleton_class(t),e,r);if(!j(n)){for(var a=t.$$super;"function"!=typeof n&&a;)n=a[o],a=a.$$super;!j(n)&&t.$$is_module&&(n=$.Object.$$prototype[o]),j(n)||b($.NameError,"undefined method `"+r+"' for class `"+t.$name()+"'")}n.$$alias_of&&(n=n.$$alias_of),i=function(){var t,e,r,s=i.$$p;for(e=0,t=Array(arguments.length),r=arguments.length;e<r;e++)t[e]=arguments[e];return i.$$p=null,$.send(this,n,t,s)};try{Object.defineProperty(i,"length",{value:n.length})}catch(t){}return i.displayName=e,i.$$arity=null==n.$$arity?n.length:n.$$arity,i.$$parameters=n.$$parameters,i.$$source_location=n.$$source_location,i.$$alias_of=n,i.$$alias_name=e,$.defn(t,s,i),t},$.alias_gvar=function(t,e){return Object.defineProperty(g,t,{configurable:!0,enumerable:!0,get:function(){return g[e]},set:function(t){g[e]=t}}),r},$.alias_native=function(t,e,r){var n=M(e),i=t.$$prototype[r];return("function"!=typeof i||i.$$stub)&&b($.NameError,"undefined native method `"+r+"' for class `"+t.$name()+"'"),$.defn(t,n,i),t},$.hash_init=function(t){t.$$smap=Object.create(null),t.$$map=Object.create(null),t.$$keys=[]},$.hash_clone=function(t,e){e.$$none=t.$$none,e.$$proc=t.$$proc;for(var r,n,i=0,s=t.$$keys,o=t.$$smap,a=s.length;i<a;i++)(r=s[i]).$$is_string?n=o[r]:(n=r.value,r=r.key),$.hash_put(e,r,n)},$.hash_put=function(t,e,r){var n,i,s;if(e.$$is_string){h(t.$$smap,e)||t.$$keys.push(e),t.$$smap[e]=r;return}if(n=t.$$by_identity?$.id(e):e.$hash(),!h(t.$$map,n)){i={key:e,key_hash:n,value:r},t.$$keys.push(i),t.$$map[n]=i;return}for(i=t.$$map[n];i;){if(e===i.key||e["$eql?"](i.key)){s=void 0,i.value=r;break}s=i,i=i.next}s&&(i={key:e,key_hash:n,value:r},t.$$keys.push(i),s.next=i)},$.hash_get=function(t,e){var r,n;if(e.$$is_string)return h(t.$$smap,e)?t.$$smap[e]:void 0;if(r=t.$$by_identity?$.id(e):e.$hash(),h(t.$$map,r))for(n=t.$$map[r];n;){if(e===n.key||e["$eql?"](n.key))return n.value;n=n.next}},$.hash_delete=function(t,e){var r,n,i,s=t.$$keys,o=s.length;if(e.$$is_string){if("string"!=typeof e&&(e=e.valueOf()),!h(t.$$smap,e))return;for(r=0;r<o;r++)if((i=s[r]).$$is_string&&"string"!=typeof i&&(i=i.valueOf()),i===e){s.splice(r,1);break}return n=t.$$smap[e],delete t.$$smap[e],n}var a=e.$hash();if(h(t.$$map,a))for(var l,$=t.$$map[a];$;){if(e===$.key||e["$eql?"]($.key)){for(r=0,n=$.value;r<o;r++)if(s[r]===$){s.splice(r,1);break}return l&&$.next?l.next=$.next:l?delete l.next:$.next?t.$$map[a]=$.next:delete t.$$map[a],n}l=$,$=$.next}},$.hash_rehash=function(t){for(var e,r,n,i=0,s=t.$$keys.length;i<s;i++)if(!t.$$keys[i].$$is_string&&(e=t.$$keys[i].key.$hash())!==t.$$keys[i].key_hash){for(r=t.$$map[t.$$keys[i].key_hash],n=void 0;r;){if(r===t.$$keys[i]){n&&r.next?n.next=r.next:n?delete n.next:r.next?t.$$map[t.$$keys[i].key_hash]=r.next:delete t.$$map[t.$$keys[i].key_hash];break}n=r,r=r.next}if(t.$$keys[i].key_hash=e,!h(t.$$map,e)){t.$$map[e]=t.$$keys[i];continue}for(r=t.$$map[e],n=void 0;r;){if(r===t.$$keys[i]){n=void 0;break}n=r,r=r.next}n&&(n.next=t.$$keys[i])}},$.hash=function(){var t,e,r,n,i,s,o=arguments.length;if(1===o&&arguments[0].$$is_hash)return arguments[0];if(e=new $.Hash,$.hash_init(e),1===o){if(t=arguments[0],arguments[0].$$is_array){for(r=0,n=t.length;r<n;r++)2!==t[r].length&&b($.ArgumentError,"value not of length 2: "+t[r].$inspect()),i=t[r][0],s=t[r][1],$.hash_put(e,i,s);return e}for(i in t=arguments[0])h(t,i)&&(s=t[i],$.hash_put(e,i,s));return e}for(o%2!=0&&b($.ArgumentError,"odd number of arguments for Hash"),r=0;r<o;r+=2)i=arguments[r],s=arguments[r+1],$.hash_put(e,i,s);return e},$.hash2=function(t,e){var r=new $.Hash;return r.$$smap=e,r.$$map=Object.create(null),r.$$keys=t,r},$.range=function(t,e,r){var n=new $.Range;return n.begin=t,n.end=e,n.excl=r,n};var P=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];function U(t){t.$$frozen&&b($.FrozenError,"can't modify frozen "+t.$class()+": "+t,$.hash2(["receiver"],{receiver:t}))}function H(t,e){return"number"==typeof t&&"number"==typeof e}function Y(t,e){return"number"==typeof t&&"number"==typeof e||"string"==typeof t&&"string"==typeof e}function G(t){return function(){return t}}$.ivar=function(t){return -1!==P.indexOf(t)&&(t+="$"),t},$.deny_frozen_access=U,$.freeze=function(t){return v(t,"$$frozen",!0),t.hasOwnProperty("$$id")||v(t,"$$id",m()),t.hasOwnProperty("$$meta")?t.$$meta.$freeze():v(t,"$$meta",null),t.hasOwnProperty("$$comparable")||v(t,"$$comparable",null),Object.seal(t),t},$.freeze_props=function(t){var e,r,n;for(e in t)("string"!=(r=typeof e)&&"object"!==r||"$"!==e[0])&&(n=Object.getOwnPropertyDescriptor(t,e))&&n.enumerable&&n.writable&&function(){var r=t[e];Object.defineProperty(t,e,{get:function(){return r},set:function(e){U(t)},enumerable:!0})}()},$.escape_regexp=function(t){return t.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},$.global_regexp=function(t){return t.global?t:(null==t.$$g?t.$$g=new RegExp(t.source,(t.multiline?"gm":"g")+(t.ignoreCase?"i":"")):t.$$g.lastIndex=null,t.$$g)},$.global_multiline_regexp=function(t){var e,r;return t.global&&t.multiline?t:(r="gm"+(t.ignoreCase?"i":""),t.multiline?(null==t.$$g&&(t.$$g=new RegExp(t.source,r)),e=t.$$g):(null==t.$$gm&&(t.$$gm=new RegExp(t.source,r)),e=t.$$gm),e.lastIndex=null,e)},$.regexp=function(t,e){for(var r,n=void 0!==e&&e&&e.indexOf("i")>=0,i=0,s=t.length;i<s;i++)(r=t[i])instanceof RegExp&&(r.ignoreCase!==n&&$.Kernel.$warn("ignore case doesn't match for "+r.source.$inspect(),$.hash({uplevel:1})),r=r.source),""===r&&(r="(?:"+r+")"),t[i]=r;return e?new RegExp(t.join(""),e):new RegExp(t.join(""))},$.modules={},$.loaded_features=["corelib/runtime"],$.current_dir=".",$.require_table={"corelib/runtime":!0},$.normalize=function(t){var e,r,n=[];"."!==$.current_dir&&(t=$.current_dir.replace(/\/*$/,"/")+t),e=(t=(t=t.replace(/^\.\//,"")).replace(/\.(rb|opal|js)$/,"")).split("/");for(var i=0,s=e.length;i<s;i++)""!==(r=e[i])&&(".."===r?n.pop():n.push(r));return n.join("/")},$.loaded=function(t){var e,r,n;for(e=0,r=t.length;e<r;e++)n=$.normalize(t[e]),$.require_table[n]||($.loaded_features.push(n),$.require_table[n]=!0)},$.load_normalized=function(t){$.loaded([t]);var r=$.modules[t];if(r){var n=r($);if("undefined"!=typeof Promise&&n instanceof Promise)return n.then(G(!0))}else{var i=$.config.missing_require_severity,s="cannot load such file -- "+t;"error"===i?b($.LoadError,s):"warning"===i&&e.warn("WARNING: LoadError: "+s)}return!0},$.load=function(t){return t=$.normalize(t),$.load_normalized(t)},$.require=function(t){return t=$.normalize(t),!$.require_table[t]&&$.load_normalized(t)},$.encodings=Object.create(null),$.set_encoding=function(t,e,r){void 0===r&&(r="encoding"),("string"==typeof t||!0===t.$$frozen)&&b($.FrozenError,"can't modify frozen String");var n=$.find_encoding(e);return n===t[r]||(t[r]=n),t},$.find_encoding=function(t){var e=$.encodings,r=e[t]||e[t.toUpperCase()];return r||b($.ArgumentError,"unknown encoding name - "+t),r},$.enc=function(t,e){var r=new String(t);return(r=$.set_encoding(r,e)).internal_encoding=r.encoding,r},$.binary=function(t){var e=new String(t);return $.set_encoding(e,"binary","internal_encoding")},$.last_promise=null,$.promise_unhandled_exception=!1,$.queue=function(t){if($.last_promise)return $.last_promise=$.last_promise.then(function(){if(!$.promise_unhandled_exception)return t($)}).catch(function(t){$.respond_to(t,"$full_message")&&(t=t.$full_message()),e.error(t),$.promise_unhandled_exception=!0,$.exit(1)}),$.last_promise;var r=t($);return"function"==typeof Promise&&"object"==typeof r&&r instanceof Promise&&($.last_promise=r),r},$.rb_plus=function(t,e){return H(t,e)?t+e:t["$+"](e)},$.rb_minus=function(t,e){return H(t,e)?t-e:t["$-"](e)},$.rb_times=function(t,e){return H(t,e)?t*e:t["$*"](e)},$.rb_divide=function(t,e){return H(t,e)?t/e:t["$/"](e)},$.rb_lt=function(t,e){return H(t,e)?t<e:t["$<"](e)},$.rb_gt=function(t,e){return H(t,e)?t>e:t["$>"](e)},$.rb_le=function(t,e){return H(t,e)?t<=e:t["$<="](e)},$.rb_ge=function(t,e){return H(t,e)?t>=e:t["$>="](e)},$.eqeq=function(t,e){return Y(t,e)?t===e:y(t["$=="](e))},$.eqeqeq=function(t,e){return Y(t,e)?t===e:y(t["$==="](e))},$.neqeq=function(t,e){return Y(t,e)?t!==e:y(t["$!="](e))},$.not=function(t){return null==t||!1===t||r===t||!0!==t&&!t["$!"].$$pristine&&y(t["$!"]())},$.return_val=G,$.return_self=function(){return this},$.return_ivar=function(t){return function(){return null==this[t]?r:this[t]}},$.assign_ivar=function(t){return function(e){return U(this),this[t]=e}},$.assign_ivar_val=function(t,e){return function(){return U(this),this[t]=e}},$.ensure_kwargs=function(t){return null==t?$.hash2([],{}):t.$$is_hash?t:void b($.ArgumentError,"expected kwargs")},$.get_kwarg=function(t,e){return h(t.$$smap,e)||b($.ArgumentError,"missing keyword: "+e),t.$$smap[e]},$.large_array_unpack=function(t){var e,n=t.split(","),i=n.length;for(e=0;e<i;e++)switch(n[e][0]){case void 0:n[e]=r;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n[e]=+n[e]}return n},$.BasicObject=n=C("BasicObject",null),$.Object=i=C("Object",$.BasicObject),$.Module=s=C("Module",$.Object),$.Class=o=C("Class",$.Module),$.Opal=a=O("Opal"),$.Kernel=l=O("Kernel"),_($.BasicObject,$.Class.$$prototype),_($.Object,$.Class.$$prototype),_($.Module,$.Class.$$prototype),_($.Class,$.Class.$$prototype),n.$$const.BasicObject=n,S(i,"BasicObject",n),S(i,"Object",i),S(i,"Module",s),S(i,"Class",o),S(i,"Opal",a),S(i,"Kernel",l),n.$$class=o,i.$$class=o,s.$$class=o,o.$$class=o,a.$$class=s,l.$$class=s,v(i.$$prototype,"toString",function(){var t=this.$to_s();return t.$$is_string&&"object"==typeof t?t.valueOf():t}),v(i.$$prototype,"$require",$.require),$.top=new i,$.top.$to_s=$.top.$inspect=G("main"),$.top.$define_method=function t(){var e=d(arguments),r=t.$$p;return t.$$p=null,$.send(i,"define_method",e,r)},$.NilClass=C("NilClass",$.Object),S(i,"NilClass",$.NilClass),(r=$.nil=new $.NilClass).$$id=4,r.call=r.apply=function(){b($.LocalJumpError,"no block given")},r.$$frozen=!0,r.$$comparable=!1,Object.seal(r),$.thrower=function(t){var e=Error("unexpected "+t);return e.$thrower_type=t,e.$throw=function(t){throw null==t&&(t=r),e.$v=t,e},e},$.t_eval_return=$.thrower("return"),TypeError.$$super=Error,$.file_sources={}}).call(void 0),Opal.loaded(["corelib/runtime.js"]),Opal.modules["corelib/helpers"]=function(t){var e,r,n=t.type_error,i=t.coerce_to,s=t.module,o=t.defs,a=t.slice,l=t.eqeqeq,$=t.Kernel,u=t.truthy,c=t.Opal,h=t.nil,_=t.$$$;return t.add_stubs("===,raise,respond_to?,nil?,__send__,<=>,class,coerce_to!,new,to_s,__id__"),o(e=s("::","Opal"),"$bridge",function(e,r){return t.bridge(e,r)}),o(e,"$coerce_to!",function(t,e,r,s){var o,u=h;return o=a(arguments,3),u=i(t,e,r,o),l(e,u)||$.$raise(n(t,e,r,u)),u},-4),o(e,"$coerce_to?",function(t,e,r,s){var o,c=h;return(o=a(arguments,3),!u(t["$respond_to?"](r))||u((c=i(t,e,r,o))["$nil?"]()))?h:(l(e,c)||$.$raise(n(t,e,r,c)),c)},-4),o(e,"$try_convert",function(t,e,r){return l(e,t)?t:u(t["$respond_to?"](r))?t.$__send__(r):h}),o(e,"$compare",function(t,e){var r=h;return u((r=t["$<=>"](e))===h)&&$.$raise(_("ArgumentError"),"comparison of "+t.$class()+" with "+e.$class()+" failed"),r}),o(e,"$destructure",function(t){if(1==t.length)return t[0];if(t.$$is_array)return t;for(var e=Array(t.length),r=0,n=e.length;r<n;r++)e[r]=t[r];return e}),o(e,"$respond_to?",function(t,e,r){return null==r&&(r=!1),null!=t&&!!t.$$class&&t["$respond_to?"](e,r)},-3),o(e,"$instance_variable_name!",function(t){return t=c["$coerce_to!"](t,_("String"),"to_str"),u(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(t))||$.$raise(_("NameError").$new("'"+t+"' is not allowed as an instance variable name",t)),t}),o(e,"$class_variable_name!",function(t){return u((t=c["$coerce_to!"](t,_("String"),"to_str")).length<3||"@@"!==t.slice(0,2))&&$.$raise(_("NameError").$new("`"+t+"' is not allowed as a class variable name",t)),t}),o(e,"$const_name?",function(t){return"string"!=typeof t&&(t=c["$coerce_to!"](t,_("String"),"to_str")),t[0]===t[0].toUpperCase()}),o(e,"$const_name!",function(t){return u(_("::","String","skip_raise")?"constant":h)&&(t=c["$coerce_to!"](t,_("String"),"to_str")),t&&t[0]==t[0].toUpperCase()||this.$raise(_("NameError"),"wrong constant name "+t),t}),o(e,"$pristine",function(e,r){n=a(arguments,1);for(var n,i,s,o=n.length-1;o>=0;o--)i=n[o],(s=e.$$prototype[t.jsid(i)])&&!s.$$stub&&(s.$$pristine=!0);return h},-2),r=[],o(e,"$inspect",function(e){var n=!1;return function(){try{try{if(null===e)return"null";if(void 0===e)return"undefined";if(void 0===e.$$class)return Object.prototype.toString.apply(e);if("function"!=typeof e.$inspect||e.$inspect.$$stub)return"#<"+e.$$class+":0x"+e.$__id__().$to_s(16)+">";else if(-1!==r.indexOf(e.$__id__()))return"#<"+e.$$class+":0x"+e.$__id__().$to_s(16)+">";else return r.push(e.$__id__()),n=!0,e.$inspect()}catch(r){if(t.rescue(r,[_("Exception")]))try{return"#<"+e.$$class+":0x"+e.$__id__().$to_s(16)+">"}finally{t.pop_exception()}else throw r}}finally{n&&r.pop()}}()},-1)},Opal.modules["corelib/module"]=function(t){var e,r,n,i,s,o=t.truthy,a=t.coerce_to,l=t.const_set,$=t.Object,u=t.return_ivar,c=t.assign_ivar,h=t.ivar,_=t.deny_frozen_access,d=t.freeze,p=t.prop,f=t.jsid,m=t.klass,g=t.defs,b=t.send,v=t.def,y=t.eqeqeq,x=t.Module,k=t.Kernel,w=t.rb_lt,A=t.rb_gt,E=t.slice,S=t.to_a,C=t.hash2,O=t.Opal,R=t.return_val,I=t.eqeq,T=t.lambda,z=t.range,F=t.send2,N=t.find_super,L=t.alias,D=t.nil,q=t.$$$;return t.add_stubs("module_eval,to_proc,===,raise,equal?,<,>,nil?,attr_reader,attr_writer,warn,attr_accessor,const_name?,class_variable_name!,pristine,const_name!,=~,new,inject,split,const_get,==,start_with?,!~,bind,call,class,frozen?,name,append_features,included,cover?,size,merge,compile,proc,any?,prepend_features,prepended,to_s,__id__,constants,include?,copy_class_variables,copy_constants,class_exec,module_exec,inspect"),r=[e=m("::",null,"Module")].concat([]),n=t.$r(r),g(e,"$allocate",function(){var e=t.allocate_module(D,function(){});return this!==t.Module&&Object.setPrototypeOf(e,this.$$prototype),e}),v(e,"$initialize",function t(){var e=t.$$p||D;return(t.$$p=null,e!==D)?b(this,"module_eval",[],e.$to_proc()):D}),v(e,"$===",function(e){return!o(null==e)&&t.is_a(e,this)}),v(e,"$<",function(e){var r,n,i;if(y(x,e)||k.$raise(q("TypeError"),"compared with non class/module"),this===e)return!1;for(n=0,i=(r=t.ancestors(this)).length;n<i;n++)if(r[n]===e)return!0;for(n=0,i=(r=t.ancestors(e)).length;n<i;n++)if(r[n]===this)return!1;return D}),v(e,"$<=",function(t){var e=D;return o(e=this["$equal?"](t))?e:w(this,t)}),v(e,"$>",function(t){return y(x,t)||k.$raise(q("TypeError"),"compared with non class/module"),w(t,this)}),v(e,"$>=",function(t){var e=D;return o(e=this["$equal?"](t))?e:A(this,t)}),v(e,"$<=>",function(t){var e=D;return this===t?0:!y(x,t)||o((e=w(this,t))["$nil?"]())?D:o(e)?-1:1}),v(e,"$alias_method",function(e,r){return _(this),e=a(e,q("String"),"to_str"),r=a(r,q("String"),"to_str"),t.alias(this,e,r),this}),v(e,"$alias_native",function(e,r){return null==r&&(r=e),_(this),t.alias_native(this,e,r),this},-2),v(e,"$ancestors",function(){return t.ancestors(this)}),v(e,"$append_features",function(e){return _(e),t.append_features(this,e),this}),v(e,"$attr_accessor",function(t){var e;return e=E(arguments),b(this,"attr_reader",S(e)),b(this,"attr_writer",S(e))},-1),v(e,"$attr",function(t){var e;return(e=E(arguments),2==e.length&&(!0===e[1]||!1===e[1]))?(this.$warn("optional boolean argument is obsoleted",C(["uplevel"],{uplevel:1})),e[1]?this.$attr_accessor(e[0]):this.$attr_reader(e[0]),D):b(this,"attr_reader",S(e))},-1),v(e,"$attr_reader",function(e){r=E(arguments),_(this);for(var r,n=this.$$prototype,i=r.length-1;i>=0;i--){var s=r[i],o=f(s),a=h(s),l=u(a);t.prop(n,a,D),l.$$parameters=[],l.$$arity=0,t.defn(this,o,l)}return D},-1),v(e,"$attr_writer",function(e){r=E(arguments),_(this);for(var r,n=this.$$prototype,i=r.length-1;i>=0;i--){var s=r[i],o=f(s+"="),a=h(s),l=c(a);l.$$parameters=[["req"]],l.$$arity=1,t.prop(n,a,D),t.defn(this,o,l)}return D},-1),v(e,"$autoload",function(e,r){return _(this),n("Opal")["$const_name?"](e)||k.$raise(q("NameError"),"autoload must be constant name: "+e),""==r&&k.$raise(q("ArgumentError"),"empty file name"),this.$$const.hasOwnProperty(e)||(this.$$autoload||(this.$$autoload={}),t.const_cache_version++,this.$$autoload[e]={path:r,loaded:!1,required:!1,success:!1,exception:!1},this.$const_added&&!this.$const_added.$$pristine&&this.$const_added(e)),D}),v(e,"$autoload?",function(t){if(this.$$autoload&&this.$$autoload[t]&&!this.$$autoload[t].required&&!this.$$autoload[t].success)return this.$$autoload[t].path;for(var e=this.$ancestors(),r=0,n=e.length;r<n;r++)if(e[r].$$autoload&&e[r].$$autoload[t]&&!e[r].$$autoload[t].required&&!e[r].$$autoload[t].success)return e[r].$$autoload[t].path;return D}),v(e,"$class_variables",function(){return Object.keys(t.class_variables(this))}),v(e,"$class_variable_get",function(e){return e=O["$class_variable_name!"](e),t.class_variable_get(this,e,!1)}),v(e,"$class_variable_set",function(e,r){return _(this),e=O["$class_variable_name!"](e),t.class_variable_set(this,e,r)}),v(e,"$class_variable_defined?",function(e){return e=O["$class_variable_name!"](e),t.class_variables(this).hasOwnProperty(e)}),v(e,"$const_added",R(D)),O.$pristine(e,"const_added"),v(e,"$remove_class_variable",function(e){if(_(this),e=O["$class_variable_name!"](e),t.hasOwnProperty.call(this.$$cvars,e)){var r=this.$$cvars[e];return delete this.$$cvars[e],r}k.$raise(q("NameError"),"cannot remove "+e+" for "+this)}),v(e,"$constants",function(e){return null==e&&(e=!0),t.constants(this,e)},-1),g(e,"$constants",function(e){if(null!=e)return t.constants(this,e);var r,n,i,s=(this.$$nesting||[]).concat($),o={};for(n=0,i=s.length;n<i;n++)for(r in s[n].$$const)o[r]=!0;return Object.keys(o)},-1),g(e,"$nesting",function(){return this.$$nesting||[]}),v(e,"$const_defined?",function(e,r){null==r&&(r=!0),o((e=n("Opal")["$const_name!"](e))["$=~"](q(O,"CONST_NAME_REGEXP")))||k.$raise(q("NameError").$new("wrong constant name "+e,e));var i,s,a,l=[this];for(r&&(l=l.concat(t.ancestors(this)),this.$$is_module&&(l=l.concat([$]).concat(t.ancestors($)))),s=0,a=l.length;s<a;s++)if(null!=(i=l[s]).$$const[e]||i.$$autoload&&i.$$autoload[e]&&!i.$$autoload[e].required&&!i.$$autoload[e].success)return!0;return!1},-2),v(e,"$const_get",function(e,r){return(null==r&&(r=!0),0===(e=n("Opal")["$const_name!"](e)).indexOf("::")&&"::"!==e&&(e=e.slice(2)),o(-1!=e.indexOf("::")&&"::"!=e))?b(e.$split("::"),"inject",[this],function(t,e){return null==t&&(t=D),null==e&&(e=D),t.$const_get(e)}):(o(e["$=~"](q(O,"CONST_NAME_REGEXP")))||k.$raise(q("NameError").$new("wrong constant name "+e,e)),r)?t.$$([this],e):t.const_get_local(this,e)},-2),v(e,"$const_missing",function(t){var e=D;return e=I(this,$)?t:""+this+"::"+t,k.$raise(q("NameError").$new("uninitialized constant "+e,t))}),v(e,"$const_set",function(t,e){return _(this),(o((t=O["$const_name!"](t))["$!~"](q(O,"CONST_NAME_REGEXP")))||o(t["$start_with?"]("::")))&&k.$raise(q("NameError").$new("wrong constant name "+t,t)),l(this,t,e),e}),v(e,"$public_constant",R(D)),v(e,"$define_method",function e(r,n){var i=e.$$p||D,s=D,a=D;return e.$$p=null,_(this),void 0===n&&i===D&&k.$raise(q("ArgumentError"),"tried to create a Proc object without a block"),i=o(s=i)?s:y(q("Proc"),a=n)?n:y(q("Method"),a)?n.$to_proc().$$unbound:y(q("UnboundMethod"),a)?T(function t(e){var r,i=null==t.$$s?this:t.$$s;return r=E(arguments),b(n.$bind(i),"call",S(r))},{$$arity:-1,$$s:this}):k.$raise(q("TypeError"),"wrong argument type "+i.$class()+" (expected Proc/Method)"),"undefined"!=typeof Proxy&&(Object.create(null),i.$$proxy_target=i,i=new Proxy(i,{apply:function(t,e,n){var i=t.$$jsid;t.$$jsid=r;try{return t.apply(e,n)}catch(e){if(e===t.$$brk||e===t.$$ret)return e.$v;throw e}finally{t.$$jsid=i}}})),i.$$jsid=r,i.$$s=null,i.$$def=i,i.$$define_meth=!0,t.defn(this,f(r),i)},-2),v(e,"$freeze",function(){return o(this["$frozen?"]())?this:(this.hasOwnProperty("$$base_module")||p(this,"$$base_module",null),d(this))}),v(e,"$remove_method",function(e){var r;r=E(arguments);for(var n=0;n<r.length;n++){var i=r[n];"string"==typeof i||i.$$is_string||this.$raise(q("TypeError"),""+this.$name()+" is not a symbol nor a string"),_(this),t.rdef(this,"$"+i)}return this},-1),v(e,"$singleton_class?",function(){return!!this.$$is_singleton}),v(e,"$include",function(t){var e;e=E(arguments);for(var r=e.length-1;r>=0;r--){var n=e[r];n.$$is_module||k.$raise(q("TypeError"),"wrong argument type "+n.$class()+" (expected Module)"),n.$append_features(this),n.$included(this)}return this},-1),v(e,"$included_modules",function(){return t.included_modules(this)}),v(e,"$include?",function(e){e.$$is_module||k.$raise(q("TypeError"),"wrong argument type "+e.$class()+" (expected Module)");var r,n,i,s=t.ancestors(this);for(r=0,n=s.length;r<n;r++)if((i=s[r])===e&&i!==this)return!0;return!1}),v(e,"$instance_method",function(t){var e=this.$$prototype[f(t)];return(!e||e.$$stub)&&k.$raise(q("NameError").$new("undefined method `"+t+"' for class `"+this.$name()+"'",t)),q("UnboundMethod").$new(this,e.$$owner||this,e,t)}),v(e,"$instance_methods",function(e){return(null==e&&(e=!0),o(e))?t.instance_methods(this):t.own_instance_methods(this)},-1),v(e,"$included",R(D)),v(e,"$extended",R(D)),v(e,"$extend_object",function(t){return _(t),D}),v(e,"$method_added",function(t){return E(arguments),D},-1),v(e,"$method_removed",function(t){return E(arguments),D},-1),v(e,"$method_undefined",function(t){return E(arguments),D},-1),v(e,"$module_eval",function e(r){var n,i,s=e.$$p||D,a=D,l=D,$=D,u=D,c=D,h=D;e.$$p=null,n=E(arguments),o(s["$nil?"]())&&o(!!t.compile)?(o(z(1,3,!1)["$cover?"](n.$size()))||k.$raise(q("ArgumentError"),"wrong number of arguments (0 for 1..3)"),a=null==(i=[].concat(S(n)))[0]?D:i[0],l=null==i[1]?D:i[1],null==i[2]||i[2],$=C(["file","eval"],{file:o(u=l)?u:"(eval)",eval:!0}),c=t.hash({arity_check:!1}).$merge($),h=O.$compile(a,c),s=b(k,"proc",[],function e(){var r=null==e.$$s?this:e.$$s;return Function("Opal,self","return "+h)(t,r)},{$$s:this})):o(n["$any?"]())&&k.$raise(q("ArgumentError"),"wrong number of arguments ("+n.$size()+" for 0)\n\n  NOTE:If you want to enable passing a String argument please add \"require 'opal-parser'\" to your script\n");var _,d=s.$$s;return s.$$s=null,_=s.apply(this,[this]),s.$$s=d,_},-1),v(e,"$module_exec",function t(e){var r,n=t.$$p||D;t.$$p=null,r=E(arguments),n===D&&k.$raise(q("LocalJumpError"),"no block given");var i,s=n.$$s;return n.$$s=null,i=n.apply(this,r),n.$$s=s,i},-1),v(e,"$method_defined?",function(t){var e=this.$$prototype[f(t)];return!!e&&!e.$$stub}),v(e,"$module_function",function(e){var r;if(r=E(arguments),_(this),0===r.length)return this.$$module_function=!0,D;for(var n=0,i=r.length;n<i;n++){var s=f(r[n]),o=this.$$prototype[s];t.defs(this,s,o)}return 1===r.length?r[0]:r},-1),v(e,"$name",function(){if(this.$$full_name)return this.$$full_name;for(var t=[],e=this;e;){if(e.$$name===D||null==e.$$name)return D;if(t.unshift(e.$$name),(e=e.$$base_module)===$)break}return 0===t.length?D:this.$$full_name=t.join("::")}),v(e,"$prepend",function(t){var e;e=E(arguments),0===e.length&&k.$raise(q("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var r=e.length-1;r>=0;r--){var n=e[r];n.$$is_module||k.$raise(q("TypeError"),"wrong argument type "+n.$class()+" (expected Module)"),n.$prepend_features(this),n.$prepended(this)}return this},-1),v(e,"$prepend_features",function(e){return _(e),this.$$is_module||k.$raise(q("TypeError"),"wrong argument type "+this.$class()+" (expected Module)"),t.prepend_features(this,e),this}),v(e,"$prepended",R(D)),v(e,"$remove_const",function(e){return _(this),t.const_remove(this,e)}),v(e,"$to_s",function(){var e=D;return o(e=t.Module.$name.call(this))?e:"#<"+(this.$$is_module?"Module":"Class")+":0x"+this.$__id__().$to_s(16)+">"}),v(e,"$undef_method",function(e){var r;r=E(arguments);for(var n=0;n<r.length;n++){var i=r[n];"string"==typeof i||i.$$is_string||this.$raise(q("TypeError"),""+this.$name()+" is not a symbol nor a string"),_(this),t.udef(this,"$"+r[n])}return this},-1),v(e,"$instance_variables",function(){var e=D;t.Module.$$nesting=r,e=this.$constants();var n=[];for(var i in this)this.hasOwnProperty(i)&&"$"!==i.charAt(0)&&"constructor"!==i&&!e["$include?"](i)&&n.push("@"+i);return n}),v(e,"$dup",function t(){var e=t.$$p||D,r=D;return t.$$p=null,(r=F(this,N(this,"dup",t,!1,!0),"dup",[],e)).$copy_class_variables(this),r.$copy_constants(this),r}),v(e,"$copy_class_variables",function(t){for(var e in t.$$cvars)this.$$cvars[e]=t.$$cvars[e]}),v(e,"$copy_constants",function(t){var e,r=t.$$const;for(e in r)l(this,e,r[e])}),v(e,"$refine",function e(r){var n,i=e.$$p||D,s=D,o=D,a=D;return e.$$p=null,s=(n=[this,D,D])[0],o=n[1],a=n[2],a=t.id(r),void 0===this.$$refine_modules&&(this.$$refine_modules=Object.create(null)),(o=void 0===this.$$refine_modules[a]?this.$$refine_modules[a]=q("Refinement").$new():this.$$refine_modules[a]).refinement_module=s,o.refined_class=r,b(o,"class_exec",[],i.$to_proc()),o}),v(e,"$refinements",function(){var t=this.$$refine_modules,e=C([],{});if(void 0===t)return e;for(var r in t)e["$[]="](t[r].refined_class,t[r]);return e}),v(e,"$using",function(t){return k.$raise("Module#using is not permitted in methods")}),L(e,"class_eval","module_eval"),L(e,"class_exec","module_exec"),L(e,"inspect","to_s"),(s=(i=m("::",x,"Refinement")).$$prototype).refinement_module=s.refined_class=D,i.$attr_reader("refined_class"),v(i,"$inspect",function t(){var e=t.$$p||D;return(t.$$p=null,o(this.refinement_module))?"#<refinement:"+this.refined_class.$inspect()+"@"+this.refinement_module.$inspect()+">":F(this,N(this,"inspect",t,!1,!0),"inspect",[],e)})},Opal.modules["corelib/class"]=function(t){var e,r,n,i=t.klass,s=t.send,o=t.defs,a=t.def,l=t.rb_plus,$=t.return_val,u=t.slice,c=t.send2,h=t.find_super,_=t.Kernel,d=t.alias,p=t.top,f=t.nil,m=t.$$$;return t.add_stubs("require,class_eval,to_proc,+,subclasses,flatten,map,initialize_copy,allocate,name,to_s,raise"),p.$require("corelib/module"),r=[e=i("::",null,"Class")].concat([]),n=t.$r(r),o(e,"$new",function e(r){var i=e.$$p||f;if(e.$$p=null,null==r&&(r=n("Object")),!r.$$is_class)throw t.TypeError.$new("superclass must be a Class");var o=t.allocate_class(f,r);return r.$inherited(o),i!==f&&s(o,"class_eval",[],i.$to_proc()),o},-1),a(e,"$allocate",function(){var e=new this.$$constructor;return e.$$id=t.uid(),e}),a(e,"$descendants",function(){return l(this.$subclasses(),s(this.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),a(e,"$inherited",$(f)),a(e,"$initialize_dup",function(t){this.$initialize_copy(t),this.$$name=null,this.$$full_name=null}),a(e,"$new",function e(r){var n,i=e.$$p||f;e.$$p=null,n=u(arguments);var s=this.$allocate();return t.send(s,s.$initialize,n,i),s},-1),a(e,"$subclasses",function(){if("undefined"==typeof WeakRef)return this.$$subclasses;var t,e,r=[];for(t=0;t<this.$$subclasses.length;t++)void 0!==(e=this.$$subclasses[t].deref())&&r.push(e);return r}),a(e,"$superclass",function(){return this.$$super||f}),a(e,"$to_s",function e(){e.$$p,e.$$p=null;var r=this.$$singleton_of;return r&&r.$$is_a_module?"#<Class:"+r.$name()+">":r?"#<Class:#<"+r.$$class.$name()+":0x"+t.id(r).$to_s(16)+">>":c(this,h(this,"to_s",e,!1,!0),"to_s",[],null)}),a(e,"$attached_object",function(){if(null!=this.$$singleton_of)return this.$$singleton_of;_.$raise(m("TypeError"),"`"+this+"' is not a singleton class")}),d(e,"inspect","to_s")},Opal.modules["corelib/basic_object"]=function(t){var e,r=t.klass,n=t.slice,i=t.def,s=t.alias,o=t.return_val,a=t.Opal,l=t.truthy,$=t.range,u=t.Kernel,c=t.to_a,h=t.hash2,_=t.send,d=t.eqeq,p=t.rb_ge,f=t.nil,m=t.$$$;return t.add_stubs("==,raise,inspect,pristine,!,nil?,cover?,size,merge,compile,proc,[],first,>=,length,instance_variable_get,any?,new,caller"),i(e=r("::",null,"BasicObject"),"$initialize",function(t){return n(arguments),f},-1),i(e,"$==",function(t){return this===t}),i(e,"$eql?",function(t){return this["$=="](t)}),s(e,"equal?","=="),i(e,"$__id__",function(){return null!=this.$$id||t.prop(this,"$$id",t.uid()),this.$$id}),i(e,"$__send__",function e(r,i){var s,o=e.$$p||f;e.$$p=null,s=n(arguments,1),r.$$is_string||this.$raise(m("TypeError"),""+this.$inspect()+" is not a symbol nor a string");var a=this[t.jsid(r)];return a?(o!==f&&(a.$$p=o),a.apply(this,s)):(o!==f&&(this.$method_missing.$$p=o),this.$method_missing.apply(this,[r].concat(s)))},-2),i(e,"$!",o(!1)),a.$pristine("!"),i(e,"$!=",function(t){return this["$=="](t)["$!"]()}),i(e,"$instance_eval",function e(r){var i,s,o=e.$$p||f,g=f,b=f,v=f,y=f,x=f,k=f;if(e.$$p=null,i=n(arguments),l(o["$nil?"]())&&l(!!t.compile))l($(1,3,!1)["$cover?"](i.$size()))||u.$raise(m("ArgumentError"),"wrong number of arguments (0 for 1..3)"),g=null==(s=[].concat(c(i)))[0]?f:s[0],b=null==s[1]?f:s[1],null==s[2]||s[2],v=h(["file","eval"],{file:l(y=b)?y:"(eval)",eval:!0}),x=t.hash({arity_check:!1}).$merge(v),k=a.$compile(g,x),o=_(u,"proc",[],function e(){var r=null==e.$$s?this:e.$$s;return Function("Opal,self","return "+k)(t,r)},{$$s:this});else{if(l(o["$nil?"]())&&l(p(i.$length(),1))&&d(i.$first()["$[]"](0),"@"))return this.$instance_variable_get(i.$first());l(i["$any?"]())&&u.$raise(m("ArgumentError"),"wrong number of arguments ("+i.$size()+" for 0)")}var w,A=o.$$s;if(o.$$s=null,this.$$is_a_module){this.$$eval=!0;try{w=o.call(this,this)}finally{this.$$eval=!1}}else w=o.call(this,this);return o.$$s=A,w},-1),i(e,"$instance_exec",function t(e){var r,i=t.$$p||f;t.$$p=null,r=n(arguments),l(i)||u.$raise(m("ArgumentError"),"no block given");var s,o=i.$$s;if(i.$$s=null,this.$$is_a_module){this.$$eval=!0;try{s=i.apply(this,r)}finally{this.$$eval=!1}}else s=i.apply(this,r);return i.$$s=o,s},-1),i(e,"$singleton_method_added",function(t){return n(arguments),f},-1),i(e,"$singleton_method_removed",function(t){return n(arguments),f},-1),i(e,"$singleton_method_undefined",function(t){return n(arguments),f},-1),i(e,"$method_missing",function t(e,r){t.$$p;var i,s=f;return t.$$p=null,i=n(arguments,1),s=a.$inspect(this),u.$raise(m("NoMethodError").$new("undefined method `"+e+"' for "+s,e,i),f,u.$caller(1))},-2),a.$pristine(e,"method_missing"),i(e,"$respond_to_missing?",function(t,e){return null==e&&(e=!1),!1},-2)},Opal.modules["corelib/kernel"]=function(t){var e,r,n,i,s,o=t.truthy,a=t.coerce_to,l=t.respond_to,$=t.Opal,u=t.deny_frozen_access,c=t.freeze,h=t.freeze_props,_=t.jsid,d=t.module,p=t.return_val,f=t.def,m=t.Kernel,g=t.gvars,b=t.slice,v=t.send,y=t.to_a,x=t.ensure_kwargs,k=t.eqeq,w=t.hash2,A=t.rb_plus,E=t.eqeqeq,S=t.return_self,C=t.rb_le,O=t.extract_kwargs,R=t.rb_lt,I=t.Object,T=t.alias,z=t.klass,F=t.nil,N=t.$$$;return t.add_stubs("!,=~,==,object_id,raise,new,class,coerce_to?,<<,map,caller,nil?,allocate,copy_instance_variables,copy_singleton_methods,initialize_clone,frozen?,freeze,initialize_copy,define_method,singleton_class,to_proc,initialize_dup,for,empty?,pop,call,append_features,extend_object,extended,gets,__id__,include?,each,instance_variables,instance_variable_get,inspect,+,to_s,instance_variable_name!,respond_to?,to_int,coerce_to!,Integer,===,enum_for,result,any?,print,format,puts,<=,length,[],readline,<,first,split,to_str,exception,backtrace,rand,respond_to_missing?,pristine,try_convert!,expand_path,join,start_with?,new_seed,srand,tag,value,open,is_a?,__send__,yield_self,include"),r=[e=d("::","Kernel")].concat([]),n=t.$r(r),f(e,"$=~",p(!1)),f(e,"$!~",function(t){return this["$=~"](t)["$!"]()}),f(e,"$===",function(t){var e=F;return o(e=this.$object_id()["$=="](t.$object_id()))?e:this["$=="](t)}),f(e,"$<=>",function(t){this.$$comparable=!0;var e=this["$=="](t);return e&&e!==F?0:F}),f(e,"$method",function(t){var e=this[_(t)];return(!e||e.$$stub)&&m.$raise(N("NameError").$new("undefined method `"+t+"' for class `"+this.$class()+"'",t)),N("Method").$new(this,e.$$owner||this.$class(),e,t)}),f(e,"$methods",function(e){return(null==e&&(e=!0),o(e))?t.methods(this):t.own_methods(this)},-1),f(e,"$public_methods",function(e){return(null==e&&(e=!0),o(e))?t.methods(this):t.receiver_methods(this)},-1),f(e,"$Array",function(t){var e;return t===F?[]:t.$$is_array?t:(e=$["$coerce_to?"](t,N("Array"),"to_ary"))!==F||(e=$["$coerce_to?"](t,N("Array"),"to_a"))!==F?e:[t]}),f(e,"$at_exit",function t(){var e=t.$$p||F,r=F;return null==g.__at_exit__&&(g.__at_exit__=F),t.$$p=null,g.__at_exit__=o(r=g.__at_exit__)?r:[],g.__at_exit__["$<<"](e),e}),f(e,"$caller",function(t,e){null==t&&(t=1),null==e&&(e=F),r=Error().$backtrace(),n=[];for(var r,n,i=t+1,s=r.length;i<s;i++)r[i].match(/runtime\.js/)||n.push(r[i]);return e!=F&&(n=n.slice(0,e)),n},-1),f(e,"$caller_locations",function(t){var e;return e=b(arguments),v(v(this,"caller",y(e)),"map",[],function(t){return null==t&&(t=F),N(N(N("Thread"),"Backtrace"),"Location").$new(t)})},-1),f(e,"$class",function(){return this.$$class}),f(e,"$copy_instance_variables",function(t){var e,r,n,i=Object.keys(t);for(e=0,r=i.length;e<r;e++)"$"!==(n=i[e]).charAt(0)&&t.hasOwnProperty(n)&&(this[n]=t[n])}),f(e,"$copy_singleton_methods",function(e){var r,n,i,s;if(e.hasOwnProperty("$$meta")&&null!==e.$$meta){var o=t.get_singleton_class(e),a=t.get_singleton_class(this);for(r=0,s=(i=Object.getOwnPropertyNames(o.$$prototype)).length;r<s;r++)n=i[r],t.is_method(n)&&(a.$$prototype[n]=o.$$prototype[n]);a.$$const=Object.assign({},o.$$const),Object.setPrototypeOf(a.$$prototype,Object.getPrototypeOf(o.$$prototype))}for(r=0,s=(i=Object.getOwnPropertyNames(e)).length;r<s;r++)"$"===(n=i[r]).charAt(0)&&"$"!==n.charAt(1)&&e.hasOwnProperty(n)&&(this[n]=e[n])}),f(e,"$clone",function(t){var e,r=F;return null==(e=(t=x(t)).$$smap.freeze)&&(e=F),o(e["$nil?"]())||k(e,!0)||k(e,!1)||this.$raise(n("ArgumentError"),"unexpected value for freeze: "+e.$class()),(r=this.$class().$allocate()).$copy_instance_variables(this),r.$copy_singleton_methods(this),r.$initialize_clone(this,w(["freeze"],{freeze:e})),(k(e,!0)||o(e["$nil?"]())&&o(this["$frozen?"]()))&&r.$freeze(),r},-1),f(e,"$initialize_clone",function(t,e){return(e=x(e)).$$smap.freeze,this.$initialize_copy(t),this},-2),f(e,"$define_singleton_method",function t(e,r){var n=t.$$p||F;return t.$$p=null,v(this.$singleton_class(),"define_method",[e,r],n.$to_proc())},-2),f(e,"$dup",function(){var t=F;return(t=this.$class().$allocate()).$copy_instance_variables(this),t.$initialize_dup(this),t}),f(e,"$initialize_dup",function(t){return this.$initialize_copy(t)}),f(e,"$enum_for",function t(e,r){var n,i,s=t.$$p||F;return t.$$p=null,n=b(arguments),n.length>0&&(i=n.shift()),null==i&&(i="each"),v(N("Enumerator"),"for",[this,i].concat(y(n)),s.$to_proc())},-1),f(e,"$equal?",function(t){return this===t}),f(e,"$exit",function(e){var r=F;for(null==g.__at_exit__&&(g.__at_exit__=F),null==e&&(e=!0),g.__at_exit__=o(r=g.__at_exit__)?r:[];!o(g.__at_exit__["$empty?"]());)g.__at_exit__.$pop().$call();return e=e.$$is_boolean?e?0:1:a(e,N("Integer"),"to_int"),t.exit(e),F},-1),f(e,"$extend",function(t){e=b(arguments),0==e.length&&this.$raise(N("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),u(this);for(var e,r=this.$singleton_class(),n=e.length-1;n>=0;n--){var i=e[n];i.$$is_module||m.$raise(N("TypeError"),"wrong argument type "+i.$class()+" (expected Module)"),i.$append_features(r),i.$extend_object(this),i.$extended(this)}return this},-1),f(e,"$freeze",function(){return o(this["$frozen?"]())?this:"object"==typeof this?(h(this),c(this)):this}),f(e,"$frozen?",function(){switch(typeof this){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return this.$$frozen||!1;default:return!1}}),f(e,"$gets",function(t){var e;return null==g.stdin&&(g.stdin=F),e=b(arguments),v(g.stdin,"gets",y(e))},-1),f(e,"$hash",function(){return this.$__id__()}),f(e,"$initialize_copy",p(F)),i=[],f(e,"$inspect",function(){var e=this,r=F,s=F,a=F;return function(){try{try{return r="",s=e.$__id__(),o(i["$include?"](s))?r=" ...":(i["$<<"](s),a=!0,v(e.$instance_variables(),"each",[],function t(e){var i=null==t.$$s?this:t.$$s,s=F,o=F;return null==e&&(e=F),s=i.$instance_variable_get(e),o=n("Opal").$inspect(s),r=A(r," "+e+"="+o)},{$$s:e})),"#<"+e.$class()+":0x"+s.$to_s(16)+r+">"}catch(r){if(t.rescue(r,[n("StandardError")]))try{return"#<"+e.$class()+":0x"+s.$to_s(16)+">"}finally{t.pop_exception()}else throw r}}finally{o(a)&&i.$pop()}}()}),f(e,"$instance_of?",function(t){return t.$$is_class||t.$$is_module||m.$raise(N("TypeError"),"class or module required"),this.$$class===t}),f(e,"$instance_variable_defined?",function(e){return e=$["$instance_variable_name!"](e),t.hasOwnProperty.call(this,e.substr(1))}),f(e,"$instance_variable_get",function(e){e=$["$instance_variable_name!"](e);var r=this[t.ivar(e.substr(1))];return null==r?F:r}),f(e,"$instance_variable_set",function(e,r){return u(this),e=$["$instance_variable_name!"](e),this[t.ivar(e.substr(1))]=r}),f(e,"$remove_instance_variable",function(e){e=$["$instance_variable_name!"](e);var r,n=t.ivar(e.substr(1));return this.hasOwnProperty(n)?(r=this[n],delete this[n],r):m.$raise(N("NameError"),"instance variable "+e+" not defined")}),f(e,"$instance_variables",function(){var t,e=[];for(var r in this)this.hasOwnProperty(r)&&"$"!==r.charAt(0)&&(t="$"===r.substr(-1)?r.slice(0,r.length-1):r,e.push("@"+t));return e}),f(e,"$Integer",function(t,e){var r,n;return t.$$is_string?"0"===t?0:(void 0===e?e=0:(1===(e=a(e,N("Integer"),"to_int"))||e<0||e>36)&&m.$raise(N("ArgumentError"),"invalid radix "+e),n=(n=(n=t.toLowerCase()).replace(/(\d)_(?=\d)/g,"$1")).replace(/^(\s*[+-]?)(0[bodx]?)/,function(r,n,i){switch(i){case"0b":if(0===e||2===e)return e=2,n;case"0":case"0o":if(0===e||8===e)return e=8,n;case"0d":if(0===e||10===e)return e=10,n;case"0x":if(0===e||16===e)return e=16,n}m.$raise(N("ArgumentError"),'invalid value for Integer(): "'+t+'"')}),RegExp("^\\s*[+-]?[0-"+((e=0===e?10:e)<=10?e-1:"9a-"+String.fromCharCode(97+(e-11)))+"]+\\s*$").test(n)||m.$raise(N("ArgumentError"),'invalid value for Integer(): "'+t+'"'),isNaN(r=parseInt(n,e))&&m.$raise(N("ArgumentError"),'invalid value for Integer(): "'+t+'"'),r):(void 0!==e&&m.$raise(N("ArgumentError"),"base specified for non string value"),t===F&&m.$raise(N("TypeError"),"can't convert nil into Integer"),t.$$is_number)?((t===1/0||t===-1/0||isNaN(t))&&m.$raise(N("FloatDomainError"),t),Math.floor(t)):t["$respond_to?"]("to_int")&&(r=t.$to_int())!==F?r:$["$coerce_to!"](t,N("Integer"),"to_i")},-2),f(e,"$Float",function(t){var e;return(t===F&&m.$raise(N("TypeError"),"can't convert nil into Float"),t.$$is_string)?(e=(e=t.toString()).replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(e))?m.$Integer(e):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(e)||m.$raise(N("ArgumentError"),'invalid value for Float(): "'+t+'"'),parseFloat(e)):$["$coerce_to!"](t,N("Float"),"to_f")}),f(e,"$Hash",function(t){return o(t["$nil?"]())||k(t,[])?w([],{}):E(N("Hash"),t)?t:$["$coerce_to!"](t,N("Hash"),"to_hash")}),f(e,"$is_a?",function(e){return e.$$is_class||e.$$is_module||m.$raise(N("TypeError"),"class or module required"),t.is_a(this,e)}),f(e,"$itself",S),f(e,"$lambda",function e(){var r=e.$$p||F;return e.$$p=null,t.lambda(r)}),f(e,"$load",function(e){return e=$["$coerce_to!"](e,N("String"),"to_str"),t.load(e)}),f(e,"$loop",function e(){var r=e.$$p||F,n=F;if(e.$$p=null,!(r!==F))return v(this,"enum_for",["loop"],function(){return N(N("Float"),"INFINITY")});for(;o(!0);)try{t.yieldX(r,[])}catch(e){if(t.rescue(e,[N("StopIteration")])){n=e;try{return n.$result()}finally{t.pop_exception()}}else throw e}return this}),f(e,"$nil?",p(!1)),f(e,"$printf",function(t){var e;return e=b(arguments),o(e["$any?"]())&&this.$print(v(this,"format",y(e))),F},-1),f(e,"$proc",function t(){var e=t.$$p||F;return t.$$p=null,o(e)||m.$raise(N("ArgumentError"),"tried to create Proc object without a block"),e.$$is_lambda=!1,e}),f(e,"$puts",function(t){var e;return null==g.stdout&&(g.stdout=F),e=b(arguments),v(g.stdout,"puts",y(e))},-1),f(e,"$p",function(t){var e;return(e=b(arguments),v(e,"each",[],function(t){return null==g.stdout&&(g.stdout=F),null==t&&(t=F),g.stdout.$puts(t.$inspect())}),o(C(e.$length(),1)))?e["$[]"](0):e},-1),f(e,"$print",function(t){var e;return null==g.stdout&&(g.stdout=F),e=b(arguments),v(g.stdout,"print",y(e))},-1),f(e,"$readline",function(t){var e;return null==g.stdin&&(g.stdin=F),e=b(arguments),v(g.stdin,"readline",y(e))},-1),f(e,"$warn",function(t,e){var r,n,i,s,a,l,u=F;return(null==g.VERBOSE&&(g.VERBOSE=F),null==g.stderr&&(g.stderr=F),r=b(arguments),n=x(n=O(r)),i=r,null==(s=n.$$smap.uplevel)&&(s=F),o(s)&&(o(R(s=$["$coerce_to!"](s,N("Integer"),"to_str"),0))&&m.$raise(N("ArgumentError"),"negative level ("+s+")"),o(u=(a=(l=this.$caller(A(s,1),1).$first())===F||null==l?F:l.$split(":in `"))===F||null==a?F:a.$first())&&(u=""+u+": "),i=v(i,"map",[],function(t){return null==t&&(t=F),""+u+"warning: "+t})),o(g.VERBOSE["$nil?"]())||o(i["$empty?"]()))?F:v(g.stderr,"puts",y(i))},-1),f(e,"$raise",function(e,r,n){if(null==g["!"]&&(g["!"]=F),null==g["@"]&&(g["@"]=F),null==r&&(r=F),null==n&&(n=F),null==e&&g["!"]!==F)throw g["!"];throw null==e?e=N("RuntimeError").$new(""):l(e,"$to_str")?e=N("RuntimeError").$new(e.$to_str()):e.$$is_class&&l(e,"$exception")?e=e.$exception(r):e.$$is_exception||(e=N("TypeError").$new("exception class/object expected")),n!==F&&e.$set_backtrace(n),g["!"]!==F&&t.exceptions.push(g["!"]),g["!"]=e,g["@"]=e.$backtrace(),e},-1),f(e,"$rand",function(t){return void 0===t?N(N("Random"),"DEFAULT").$rand():(t.$$is_number&&(t<0&&(t=Math.abs(t)),t%1!=0&&(t=t.$to_i()),0===t&&(t=void 0)),N(N("Random"),"DEFAULT").$rand(t))},-1),f(e,"$respond_to?",function(t,e){null==e&&(e=!1);var r=this[_(t)];return"function"==typeof r&&!r.$$stub||!0!==this["$respond_to_missing?"].$$pristine&&this["$respond_to_missing?"](t,e)},-2),f(e,"$respond_to_missing?",function(t,e){return null==e&&(e=!1),!1},-2),$.$pristine(e,"respond_to?","respond_to_missing?"),f(e,"$require",function(e){return"string"!=typeof e&&t.String&&t.Array&&(e=$["$coerce_to!"](e,N("String"),"to_str")),t.require(e)}),f(e,"$require_relative",function(e){return $["$try_convert!"](e,N("String"),"to_str"),e=N("File").$expand_path(N("File").$join(t.current_file,"..",e)),t.require(e)}),f(e,"$require_tree",function(e,r){null==(n=(r=x(r)).$$smap.autoload)&&(n=!1);var n,i=[];for(var s in e=N("File").$expand_path(e),"."===(e=t.normalize(e))&&(e=""),t.modules)s["$start_with?"](e)&&(n?i.push([s,!0]):i.push([s,t.require(s)]));return i},-2),f(e,"$singleton_class",function(){return t.get_singleton_class(this)}),f(e,"$sleep",function(e){null==e&&(e=F),e===F&&m.$raise(N("TypeError"),"can't convert NilClass into time interval"),e.$$is_number||m.$raise(N("TypeError"),"can't convert "+e.$class()+" into time interval"),e<0&&m.$raise(N("ArgumentError"),"time interval must be positive");for(var r=t.global.performance?function(){return performance.now()}:function(){return new Date},n=r();r()-n<=1e3*e;);return Math.round(e)},-1),f(e,"$srand",function(t){return null==t&&(t=n("Random").$new_seed()),N("Random").$srand(t)},-1),f(e,"$String",function(t){var e=F;return o(e=$["$coerce_to?"](t,N("String"),"to_str"))?e:$["$coerce_to!"](t,N("String"),"to_s")}),f(e,"$tap",function e(){var r=e.$$p||F;return e.$$p=null,t.yield1(r,this),this}),f(e,"$to_proc",S),f(e,"$to_s",function(){return"#<"+this.$class()+":0x"+this.$__id__().$to_s(16)+">"}),f(e,"$catch",function e(r){var n=e.$$p||F,i=F,s=F;e.$$p=null,null==r&&(r=F);try{return r=o(i=r)?i:I.$new(),t.yield1(n,r)}catch(e){if(t.rescue(e,[N("UncaughtThrowError")])){s=e;try{if(k(s.$tag(),r))return s.$value();return m.$raise()}finally{t.pop_exception()}}else throw e}},-1),f(e,"$throw",function(t,e){return null==e&&(e=F),m.$raise(N("UncaughtThrowError").$new(t,e))},-2),f(e,"$open",function t(e){var r,n=t.$$p||F;return t.$$p=null,r=b(arguments),v(N("File"),"open",y(r),n.$to_proc())},-1),f(e,"$yield_self",function e(){var r=e.$$p||F;return(e.$$p=null,r!==F)?t.yield1(r,this):v(this,"enum_for",["yield_self"],p(1))}),T(e,"fail","raise"),T(e,"kind_of?","is_a?"),T(e,"object_id","__id__"),T(e,"public_send","__send__"),T(e,"send","__send__"),T(e,"then","yield_self"),T(e,"to_enum","enum_for"),s=z("::",null,"Object"),delete I.$$prototype.$require,s.$include(m)},Opal.modules["corelib/main"]=function(t){var e,r=t.return_val,n=t.def,i=t.Object,s=t.slice,o=t.Kernel,a=t.top;return t.nil,t.add_stubs("include,raise"),n(e=t.get_singleton_class(a),"$to_s",r("main")),n(e,"$include",function(t){return i.$include(t)}),n(e,"$autoload",function(e){var r;return r=s(arguments),t.Object.$autoload.apply(t.Object,r)},-1),n(e,"$using",function(t){return o.$raise("main.using is permitted only at toplevel")})},Opal.modules["corelib/error/errno"]=function(t){var e,r=t.module,n=t.truthy,i=t.rb_plus,s=t.send2,o=t.find_super,a=t.def,l=t.klass,$=[],u=t.nil,c=t.$$$;return t.add_stubs("+,errno,class,attr_reader"),function(e,l){var $,c=r("::","Errno"),h=([c].concat(l),u),_=u;for($=0,h=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],_=u;$<h.length;$++)!function(){var e=h[$][0],r=h[$][1],l=h[$][2];(_=t.klass(c,t.SystemCallError,e)).errno=l,a(t.get_singleton_class(_),"$new",function t(e){t.$$p;var a=u;return t.$$p=null,null==e&&(e=u),a=r,n(e)&&(a=i(a," - "+e)),s(this,o(this,"new",t,!1,!0),"new",[a],null)},-1)}()}(0,$),[e=l("::",c("StandardError"),"SystemCallError")].concat($),a(e,"$errno",function(){return this.$class().$errno()}),t.get_singleton_class(e).$attr_reader("errno")},Opal.modules["corelib/error"]=function(t){var e,r,n,i,s,o,a=t.klass,l=t.slice,$=t.gvars,u=t.defs,c=t.send,h=t.to_a,_=t.def,d=t.truthy,p=t.hash2,f=t.Kernel,m=t.not,g=t.rb_plus,b=t.eqeq,v=t.Object,y=t.ensure_kwargs,x=t.send2,k=t.find_super,w=t.module,A=[],E=t.nil,S=t.$$$;return t.add_stubs("new,map,backtrace,clone,to_s,merge,tty?,[],include?,raise,dup,empty?,!,caller,shift,+,class,join,cause,full_message,==,reverse,split,autoload,attr_reader,inspect"),function(e,r,n){var i,s=a("::",r,"Exception"),o=[s].concat(n),v=t.$r(o);function y(t){for(var e,r=[],n=0;n<t.length;n++){var i=t[n];i&&i.$$is_string&&((e=i.match(/^    at (.*?) \((.*?)\)$/))?r.push(e[2]+":in `"+e[1]+"'"):(e=i.match(/^    at (.*?)$/))?r.push(e[1]+":in `undefined'"):(e=i.match(/^  from (.*?)$/))?r.push(e[1]):(e=i.match(/^(.*?)@(.*?)$/))&&r.push(e[2]+":in `"+e[1]+"'"))}return r}s.$$prototype.message=E,t.prop(s.$$prototype,"$$is_exception",!0),Error.stackTraceLimit=100,u(s,"$new",function(e){null==$["!"]&&($["!"]=E),r=l(arguments);var r,n=r.length>0?r[0]:E,s=new this.$$constructor(n);return s.name=this.$$name,s.message=n,s.cause=$["!"],t.send(s,s.$initialize,r),t.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(s,i),s},-1),i=s.$new,u(s,"$exception",function(t){var e;return e=l(arguments),c(this,"new",h(e))},-1),_(s,"$initialize",function(t){var e;return e=l(arguments),this.message=e.length>0?e[0]:E},-1),_(s,"$backtrace",function(){if(this.backtrace)return this.backtrace;var t=this.stack;return void 0!==t&&t.$$is_string?this.backtrace=y(t.split("\n")):t?this.backtrace=y(t):[]}),_(s,"$backtrace_locations",function(){var t;return this.backtrace_locations||(this.backtrace_locations=(t=this.$backtrace())===E||null==t?E:c(t,"map",[],function(t){return null==t&&(t=E),S(S(S("Thread"),"Backtrace"),"Location").$new(t)})),this.backtrace_locations}),_(s,"$cause",function(){return this.cause||E}),_(s,"$exception",function(t){if(null==t&&(t=E),t===E||this===t)return this;var e=this.$clone();return e.message=t,this.backtrace&&(e.backtrace=this.backtrace.$dup()),e.stack=this.stack,e.cause=this.cause,e},-1),_(s,"$message",function(){return this.$to_s()}),_(s,"$full_message",function(t){var e,r=E,n=E,i=E,s=E,o=E,a=E,l=E,u=E;return(null==$.stderr&&($.stderr=E),null==t&&(t=E),d(v("Hash","skip_raise")?"constant":E))?(n=(e=[(t=p(["highlight","order"],{highlight:$.stderr["$tty?"](),order:"top"}).$merge(d(r=t)?r:p([],{})))["$[]"]("highlight"),t["$[]"]("order")])[0],i=e[1],d([!0,!1]["$include?"](n))||f.$raise(S("ArgumentError"),"expected true or false as highlight: "+n),d(["top","bottom"]["$include?"](i))||f.$raise(S("ArgumentError"),"expected :top or :bottom as order: "+i),d(n)?(s="\x1b[1;4m",o="\x1b[1m",a="\x1b[m"):s=o=a="",(m(l=this.$backtrace().$dup())||d(l["$empty?"]()))&&(l=this.$caller()),u=g(u=""+l.$shift()+": ",""+o+this.$to_s()+" ("+s+this.$class()+a+o+")"+a+"\n"),u=g(u,c(l,"map",[],function(t){return null==t&&(t=E),"	from "+t+"\n"}).$join()),d(this.$cause())&&(u=g(u,this.$cause().$full_message(p(["highlight"],{highlight:n})))),b(i,"bottom")&&(u=g(""+o+"Traceback"+a+" (most recent call last):\n",u=u.$split("\n").$reverse().$join("\n"))),u):""+this.message+"\n"+this.stack},-1),_(s,"$inspect",function(){return d(this.$to_s()["$empty?"]())?this.$class().$to_s():"#<"+this.$class().$to_s()+": "+this.$to_s()+">"}),_(s,"$set_backtrace",function(t){var e,r,n=!0;if(t===E)this.backtrace=E,this.stack="";else if(t.$$is_string)this.backtrace=[t],this.stack="  from "+t;else{if(t.$$is_array){for(e=0,r=t.length;e<r;e++)if(!t[e].$$is_string){n=!1;break}}else n=!1;!1===n&&f.$raise(S("TypeError"),"backtrace must be Array of String"),this.backtrace=t,this.stack=c(t,"map",[],function(t){return null==t&&(t=E),g("  from ",t)}).join("\n")}return t}),_(s,"$to_s",function(){var t=E,e=E;return d(t=d(e=this.message)?this.message.$to_s():e)?t:this.$class().$to_s()})}(0,Error,A),a("::",S("Exception"),"ScriptError"),a("::",S("ScriptError"),"SyntaxError"),a("::",S("ScriptError"),"LoadError"),a("::",S("ScriptError"),"NotImplementedError"),a("::",S("Exception"),"SystemExit"),a("::",S("Exception"),"NoMemoryError"),a("::",S("Exception"),"SignalException"),a("::",S("SignalException"),"Interrupt"),a("::",S("Exception"),"SecurityError"),a("::",S("Exception"),"SystemStackError"),a("::",S("Exception"),"StandardError"),a("::",S("StandardError"),"EncodingError"),a("::",S("StandardError"),"ZeroDivisionError"),a("::",S("StandardError"),"NameError"),a("::",S("NameError"),"NoMethodError"),a("::",S("StandardError"),"RuntimeError"),a("::",S("RuntimeError"),"FrozenError"),a("::",S("StandardError"),"LocalJumpError"),a("::",S("StandardError"),"TypeError"),a("::",S("StandardError"),"ArgumentError"),a("::",S("ArgumentError"),"UncaughtThrowError"),a("::",S("StandardError"),"IndexError"),a("::",S("IndexError"),"StopIteration"),a("::",S("StopIteration"),"ClosedQueueError"),a("::",S("IndexError"),"KeyError"),a("::",S("StandardError"),"RangeError"),a("::",S("RangeError"),"FloatDomainError"),a("::",S("StandardError"),"IOError"),a("::",S("IOError"),"EOFError"),a("::",S("StandardError"),"SystemCallError"),a("::",S("StandardError"),"RegexpError"),a("::",S("StandardError"),"ThreadError"),a("::",S("StandardError"),"FiberError"),v.$autoload("Errno","corelib/error/errno"),(e=a("::",S("RuntimeError"),"FrozenError")).$attr_reader("receiver"),_(e,"$initialize",function t(e,r){var n;return t.$$p,t.$$p=null,null==(n=(r=y(r)).$$smap.receiver)&&(n=E),x(this,k(this,"initialize",t,!1,!0),"initialize",[e],null),this.receiver=n},-2),(r=a("::",S("ArgumentError"),"UncaughtThrowError")).$$prototype.tag=E,r.$attr_reader("tag","value"),_(r,"$initialize",function t(e,r){return t.$$p,t.$$p=null,null==r&&(r=E),this.tag=e,this.value=r,x(this,k(this,"initialize",t,!1,!0),"initialize",["uncaught throw "+this.tag.$inspect()],null)},-2),(n=a("::",null,"NameError")).$attr_reader("name"),_(n,"$initialize",function t(e,r){return t.$$p,t.$$p=null,null==r&&(r=E),x(this,k(this,"initialize",t,!1,!0),"initialize",[e],null),this.name=r},-2),(i=a("::",null,"NoMethodError")).$attr_reader("args"),_(i,"$initialize",function t(e,r,n){return t.$$p,t.$$p=null,null==r&&(r=E),null==n&&(n=[]),x(this,k(this,"initialize",t,!1,!0),"initialize",[e,r],null),this.args=n},-2),a("::",null,"StopIteration").$attr_reader("result"),(o=(s=a("::",null,"KeyError")).$$prototype).receiver=o.key=E,_(s,"$initialize",function t(e,r){var n,i;return t.$$p,t.$$p=null,null==(n=(r=y(r)).$$smap.receiver)&&(n=E),null==(i=r.$$smap.key)&&(i=E),x(this,k(this,"initialize",t,!1,!0),"initialize",[e],null),this.receiver=n,this.key=i},-2),_(s,"$receiver",function(){var t=E;return d(t=this.receiver)?t:f.$raise(S("ArgumentError"),"no receiver is available")}),_(s,"$key",function(){var t=E;return d(t=this.key)?t:f.$raise(S("ArgumentError"),"no key is available")}),a([w("::","JS")].concat(A)[0],null,"Error"),E},Opal.modules["corelib/constants"]=function(t){var e=t.const_set,r=(t.nil,t.$$$);return e("::","RUBY_PLATFORM","opal"),e("::","RUBY_ENGINE","opal"),e("::","RUBY_VERSION","3.2.0"),e("::","RUBY_ENGINE_VERSION","1.7.3"),e("::","RUBY_RELEASE_DATE","2023-03-23"),e("::","RUBY_PATCHLEVEL",0),e("::","RUBY_REVISION","0"),e("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),e("::","RUBY_DESCRIPTION","opal "+r("RUBY_ENGINE_VERSION")+" ("+r("RUBY_RELEASE_DATE")+" revision "+r("RUBY_REVISION")+")")},Opal.modules["opal/base"]=function(t){var e=t.Object;return t.nil,t.add_stubs("require"),e.$require("corelib/runtime"),e.$require("corelib/helpers"),e.$require("corelib/module"),e.$require("corelib/class"),e.$require("corelib/basic_object"),e.$require("corelib/kernel"),e.$require("corelib/main"),e.$require("corelib/error"),e.$require("corelib/constants")},Opal.modules["corelib/nil"]=function(t){var e,r,n=t.klass,i=t.Kernel,s=t.def,o=t.return_val,a=t.ensure_kwargs,l=t.NilClass,$=t.slice,u=t.truthy,c=t.rb_gt,h=t.alias,_=t.nil,d=t.$$$;return t.add_stubs("raise,name,new,>,length,Rational,to_i"),[e=n("::",null,"NilClass")].concat([]),e.$$prototype.$$meta=e,s(r=t.get_singleton_class(e),"$allocate",function(){return i.$raise(d("TypeError"),"allocator undefined for "+this.$name())}),t.udef(r,"$new"),s(e,"$!",o(!0)),s(e,"$&",o(!1)),s(e,"$|",function(t){return!1!==t&&t!==_}),s(e,"$^",function(t){return!1!==t&&t!==_}),s(e,"$==",function(t){return t===_}),s(e,"$dup",o(_)),s(e,"$clone",function(t){return(t=a(t)).$$smap.freeze,_},-1),s(e,"$inspect",o("nil")),s(e,"$nil?",o(!0)),s(e,"$singleton_class",function(){return l}),s(e,"$to_a",function(){return[]}),s(e,"$to_h",function(){return t.hash()}),s(e,"$to_i",o(0)),s(e,"$to_s",o("")),s(e,"$to_c",function(){return d("Complex").$new(0,0)}),s(e,"$rationalize",function(t){var e;return e=$(arguments),u(c(e.$length(),1))&&i.$raise(d("ArgumentError")),i.$Rational(0,1)},-1),s(e,"$to_r",function(){return i.$Rational(0,1)}),s(e,"$instance_variables",function(){return[]}),h(e,"to_f","to_i")},Opal.modules["corelib/boolean"]=function(t){var e=t.klass,r=t.Kernel,n=t.def,i=t.return_self,s=t.ensure_kwargs,o=t.slice,a=t.truthy,l=t.send2,$=t.find_super,u=t.to_a,c=t.alias,h=t.nil,_=t.$$$;return t.add_stubs("raise,name,==,to_s,__id__"),function(d,p,f){var m,g=e("::",p,"Boolean");[g].concat(f),t.prop(g.$$prototype,"$$is_boolean",!0);for(var b=["$$class","$$meta"],v=0;v<b.length;v++)Object.defineProperty(g.$$prototype,b[v],{configurable:!0,enumerable:!1,get:function(){return this==!0?t.TrueClass:this==!1?t.FalseClass:t.Boolean}});Object.defineProperty(g.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return this==!0?2:this==!1?0:h}}),n(m=t.get_singleton_class(g),"$allocate",function(){return r.$raise(_("TypeError"),"allocator undefined for "+this.$name())}),t.udef(m,"$new"),n(g,"$__id__",function(){return this.valueOf()?2:0}),n(g,"$!",function(){return!0!=this}),n(g,"$&",function(t){return!0==this&&!1!==t&&t!==h}),n(g,"$|",function(t){return!0==this||!1!==t&&t!==h}),n(g,"$^",function(t){return!0==this?!1===t||t===h:!1!==t&&t!==h}),n(g,"$==",function(t){return!0==this===t.valueOf()}),n(g,"$singleton_class",function(){return this.$$meta}),n(g,"$to_s",function(){return!0==this?"true":"false"}),n(g,"$dup",i),n(g,"$clone",function(t){return(t=s(t)).$$smap.freeze,this},-1),n(g,"$method_missing",function e(r,n){var i,s=e.$$p||h;e.$$p=null,i=o(arguments,1);var c=this.$$class.$$prototype[t.jsid(r)];return a(void 0!==c&&!c.$$stub)||l(this,$(this,"method_missing",e,!1,!0),"method_missing",[r].concat(u(i)),s),t.send(this,c,i,s)},-2),n(g,"$respond_to_missing?",function(e,r){null==r&&(r=!1);var n=this.$$class.$$prototype[t.jsid(e)];return void 0!==n&&!n.$$stub},-2),c(g,"eql?","=="),c(g,"equal?","=="),c(g,"inspect","to_s"),c(g,"object_id","__id__")}(0,Boolean,[]),e("::",_("Boolean"),"TrueClass"),e("::",_("Boolean"),"FalseClass"),h},Opal.modules["corelib/comparable"]=function(t){var e=t.truthy,r=t.module,n=t.rb_gt,i=t.rb_lt,s=t.eqeqeq,o=t.Kernel,a=t.def,l=t.nil,$=t.$$$;return t.add_stubs(">,<,===,raise,class,<=>,equal?"),function(u){var c=r("::","Comparable"),h=l;function _(e){return t.is_a(e,t.Integer)?e:n(e,0)?1:i(e,0)?-1:0}function d(t,r){var n,i=t["$<=>"](r);return e(i)||(n=s(l,h=r)||s(!0,h)||s(!1,h)||s($("Integer"),h)||s($("Float"),h)?r.$inspect():r.$$class,o.$raise($("ArgumentError"),"comparison of "+t.$class()+" with "+n+" failed")),_(i)}return a(c,"$==",function(r){var n=l;return!!e(this["$equal?"](r))||this["$<=>"]!=t.Kernel["$<=>"]&&(this.$$comparable?(this.$$comparable=!1,!1):!!e(n=this["$<=>"](r))&&0==_(n))}),a(c,"$>",function(t){return d(this,t)>0}),a(c,"$>=",function(t){return d(this,t)>=0}),a(c,"$<",function(t){return 0>d(this,t)}),a(c,"$<=",function(t){return 0>=d(this,t)}),a(c,"$between?",function(t,e){return!(i(this,t)||n(this,e))}),a(c,"$clamp",function(e,r){var n,i;if(null==r&&(r=l),r===l&&(t.is_a(e,t.Range)||o.$raise($("TypeError"),"wrong argument type "+e.$class()+" (expected Range)"),i=e.excl,r=e.end,e=e.begin,r!==l&&i&&o.$raise($("ArgumentError"),"cannot clamp with an exclusive range")),e!==l&&r!==l&&d(e,r)>0&&o.$raise($("ArgumentError"),"min argument must be smaller than max argument"),e!==l){if(0==(n=d(this,e)))return this;if(n<0)return e}return r!==l&&(n=d(this,r))>0?r:this},-2)}(0)},Opal.modules["corelib/regexp"]=function(t){var e,r,n,i,s,o,a,l,$,u=t.coerce_to,c=t.prop,h=t.freeze,_=t.klass,d=t.const_set,p=t.send2,f=t.find_super,m=t.def,g=t.truthy,b=t.gvars,v=t.slice,y=t.Kernel,x=t.Opal,k=t.alias,w=t.send,A=t.hash2,E=t.rb_plus,S=t.ensure_kwargs,C=t.rb_ge,O=t.to_a,R=t.eqeqeq,I=t.rb_minus,T=t.return_ivar,z=[],F=t.nil,N=t.$$$;return t.add_stubs("nil?,[],raise,escape,options,to_str,new,join,coerce_to!,!,match,coerce_to?,begin,frozen?,uniq,map,scan,source,to_proc,transform_values,group_by,each_with_index,+,last,=~,==,attr_reader,>=,length,is_a?,include?,names,regexp,named_captures,===,captures,-,inspect,empty?,each,to_a"),_("::",N("StandardError"),"RegexpError"),r=[e=_("::",RegExp,"Regexp")].concat(z),n=t.$r(r),d(e,"IGNORECASE",1),d(e,"EXTENDED",2),d(e,"MULTILINE",4),t.prop(e.$$prototype,"$$is_regexp",!0),s=[i=t.get_singleton_class(e)].concat(r),o=t.$r(s),m(i,"$allocate",function t(){var e=t.$$p||F,r=F;return t.$$p=null,(r=p(this,f(this,"allocate",t,!1,!0),"allocate",[],e)).uninitialized=!0,r}),m(i,"$escape",function(e){return t.escape_regexp(e)}),m(i,"$last_match",function(t){return(null==b["~"]&&(b["~"]=F),null==t&&(t=F),g(t["$nil?"]()))?b["~"]:g(b["~"])?b["~"]["$[]"](t):F},-1),m(i,"$union",function(t){var e,r,n,i,s,o,a;if(o=v(arguments),0==(a=o).length)return/(?!)/;if(1==a.length&&a[0].$$is_regexp)return a[0];e=a[0].$$is_array,a.length>1&&e&&y.$raise(N("TypeError"),"no implicit conversion of Array into String"),e&&(a=a[0]),i=void 0,r=[];for(var l=0;l<a.length;l++)(n=a[l]).$$is_string?r.push(this.$escape(n)):n.$$is_regexp?(s=n.$options(),void 0!=i&&i!=s&&y.$raise(N("TypeError"),"All expressions must use the same options"),i=s,r.push("("+n.source+")")):r.push(this.$escape(n.$to_str()));return this.$new(r.$join("|"),i)},-1),m(i,"$new",function(t,e){if(t.$$is_regexp||("\\"===(t=x["$coerce_to!"](t,N("String"),"to_str")).charAt(t.length-1)&&"\\"!==t.charAt(t.length-2)&&y.$raise(N("RegexpError"),"too short escape sequence: /"+t+"/"),t=t.replace("\\A","^").replace("\\z","$"),void 0===e||e["$!"]()))return new RegExp(t);if(e.$$is_number){var r="";o("IGNORECASE")&e&&(r+="i"),o("MULTILINE")&e&&(r+="m"),e=r}else e="i";return new RegExp(t,e)},-2),k(i,"compile","new"),k(i,"quote","escape"),m(e,"$==",function(t){return t instanceof RegExp&&this.toString()===t.toString()}),m(e,"$===",function(t){return this.$match(x["$coerce_to?"](t,N("String"),"to_str"))!==F}),m(e,"$=~",function(t){var e=F;return(null==b["~"]&&(b["~"]=F),g(e=this.$match(t)))?b["~"].$begin(0):e}),m(e,"$freeze",function(){return g(this["$frozen?"]())?this:(this.hasOwnProperty("$$g")||c(this,"$$g",null),this.hasOwnProperty("$$gm")||c(this,"$$gm",null),h(this))}),m(e,"$inspect",function(){var t=this.toString(),e=/^\/(.*)\/([^\/]*)$/.exec(t);if(!e)return t;for(var r=e[1],n=e[2],i=r.split(""),s=i.length,o=!1,a="",l=0;l<s;l++){var $=i[l];o||"/"!=$||(a=a.concat("\\")),a=a.concat($),o="\\"==$&&!o}return"/"+a+"/"+n}),m(e,"$match",function e(r,n){var i=e.$$p||F;if(null==b["~"]&&(b["~"]=F),e.$$p=null,this.uninitialized&&y.$raise(N("TypeError"),"uninitialized Regexp"),void 0===n){if(r===F)return b["~"]=F;var s=this.exec(u(r,N("String"),"to_str"));return s?(b["~"]=N("MatchData").$new(this,s),i===F?b["~"]:t.yield1(i,b["~"])):b["~"]=F}if(n=u(n,N("Integer"),"to_int"),r===F||(r=u(r,N("String"),"to_str"),n<0&&(n+=r.length)<0))return b["~"]=F;for(var o,a=t.global_regexp(this);;){if(null===(o=a.exec(r)))return b["~"]=F;if(o.index>=n)return b["~"]=N("MatchData").$new(a,o),i===F?b["~"]:t.yield1(i,b["~"]);a.lastIndex=o.index+1}},-2),m(e,"$match?",function(e,r){var n;return(this.uninitialized&&y.$raise(N("TypeError"),"uninitialized Regexp"),void 0===r)?e!==F&&this.test(u(e,N("String"),"to_str")):(r=u(r,N("Integer"),"to_int"),e!==F&&(e=u(e,N("String"),"to_str"),!(r<0)||!((r+=e.length)<0))&&null!==(n=t.global_regexp(this).exec(e))&&!(n.index<r))},-2),m(e,"$names",function(){return w(this.$source().$scan(/\(?<(\w+)>/,A(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$uniq()}),m(e,"$named_captures",function(){return w(w(w(this.$source().$scan(/\(?<(\w+)>/,A(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function(t){return null==t&&(t=F),w(t,"map",[],function(t){return null==t&&(t=F),E(t.$last(),1)})})}),m(e,"$~",function(){return null==b._&&(b._=F),this["$=~"](b._)}),m(e,"$source",function(){return this.source}),m(e,"$options",function(){this.uninitialized&&y.$raise(N("TypeError"),"uninitialized Regexp");var t=0;return this.multiline&&(t|=n("MULTILINE")),this.ignoreCase&&(t|=n("IGNORECASE")),t}),m(e,"$casefold?",function(){return this.ignoreCase}),k(e,"eql?","=="),k(e,"to_s","source"),l=[a=_(z[0],null,"MatchData")].concat(z),$=t.$r(l),a.$$prototype.matches=F,a.$attr_reader("post_match","pre_match","regexp","string"),m(a,"$initialize",function(t,e,r){var n;null==(n=(r=S(r)).$$smap.no_matchdata)&&(n=!1),g(n)||(b["~"]=this),this.regexp=t,this.begin=e.index,this.string=e.input,this.pre_match=e.input.slice(0,e.index),this.post_match=e.input.slice(e.index+e[0].length),this.matches=[];for(var i=0,s=e.length;i<s;i++){var o=e[i];null==o?this.matches.push(F):this.matches.push(o)}},-3),m(a,"$match",function(t){var e=F;return g(e=this["$[]"](t))?e:g(t["$is_a?"]($("Integer")))&&g(C(t,this.$length()))?y.$raise(N("IndexError"),"index "+t+" out of matches"):F}),m(a,"$match_length",function(t){var e;return(e=this.$match(t))===F||null==e?F:e.$length()}),m(a,"$[]",function(t){var e;return(e=v(arguments),e[0].$$is_string)?(this.$regexp().$names()["$include?"](e["$[]"](0))["$!"]()&&y.$raise(N("IndexError"),"undefined group name reference: "+e["$[]"](0)),this.$named_captures()["$[]"](e["$[]"](0))):w(this.matches,"[]",O(e))},-1),m(a,"$offset",function(t){return 0!==t&&y.$raise(N("ArgumentError"),"MatchData#offset only supports 0th element"),[this.begin,this.begin+this.matches[t].length]}),m(a,"$==",function(t){var e=F,r=F,n=F,i=F;return!!R(N("MatchData"),t)&&(g(e=g(r=g(n=g(i=this.string==t.string)?this.regexp.toString()==t.regexp.toString():i)?this.pre_match==t.pre_match:n)?this.post_match==t.post_match:r)?this.begin==t.begin:e)}),m(a,"$begin",function(t){return 0!==t&&y.$raise(N("ArgumentError"),"MatchData#begin only supports 0th element"),this.begin}),m(a,"$end",function(t){return 0!==t&&y.$raise(N("ArgumentError"),"MatchData#end only supports 0th element"),this.begin+this.matches[t].length}),m(a,"$captures",function(){return this.matches.slice(1)}),m(a,"$named_captures",function(){var t=F;return t=this.$captures(),w(this.$regexp().$named_captures(),"transform_values",[],function(e){return null==e&&(e=F),t["$[]"](I(e.$last(),1))})}),m(a,"$names",function(){return this.$regexp().$names()}),m(a,"$inspect",function(){var t="#<MatchData "+this.matches[0].$inspect();if(this.$regexp().$names()["$empty?"]())for(var e=1,r=this.matches.length;e<r;e++)t+=" "+e+":"+this.matches[e].$inspect();else w(this.$named_captures(),"each",[],function(e,r){return null==e&&(e=F),null==r&&(r=F),t+=" "+e+":"+r.$inspect()});return t+">"}),m(a,"$length",function(){return this.matches.length}),m(a,"$to_a",T("matches")),m(a,"$to_s",function(){return this.matches[0]}),m(a,"$values_at",function(t){e=v(arguments);var e,r,n,i,s=[];for(r=0;r<e.length;r++){if(e[r].$$is_range&&((n=e[r].$to_a()).unshift(r,1),Array.prototype.splice.apply(e,n)),(i=x["$coerce_to!"](e[r],N("Integer"),"to_int"))<0&&(i+=this.matches.length)<0){s.push(F);continue}s.push(this.matches[i])}return s},-1),k(a,"eql?","=="),k(a,"size","length")},Opal.modules["corelib/string"]=function(t){var e=t.coerce_to,r=t.respond_to,n=t.global_multiline_regexp,i=t.prop,s=t.klass,o=t.def,a=t.Opal,l=t.defs,$=t.slice,u=t.send,c=t.to_a,h=t.extract_kwargs,_=t.ensure_kwargs,d=t.eqeqeq,p=t.Kernel,f=t.truthy,m=t.gvars,g=t.rb_divide,b=t.rb_plus,v=t.eqeq,y=t.hash2,x=t.alias,k=t.const_set,w=t.top,A=[],E=t.$r(A),S=t.nil,C=t.$$$;return t.add_stubs("require,include,coerce_to?,initialize,===,format,raise,respond_to?,to_s,to_str,<=>,==,=~,new,force_encoding,casecmp,empty?,ljust,ceil,/,+,rjust,floor,coerce_to!,nil?,class,copy_singleton_methods,initialize_clone,initialize_dup,enum_for,chomp,[],to_i,length,each_line,to_proc,to_a,match,match?,captures,proc,succ,escape,include?,upcase,unicode_normalize,dup,__id__,next,intern,pristine"),w.$require("corelib/comparable"),w.$require("corelib/regexp"),function(k,w,A){var E=s("::",w,"String"),O=[E].concat(A),R=t.$r(O);function I(t){function r(t,e){if(0===t.length)return e;var r,n,i="",s=t.length;for(r=0;r<s;r++)n=t.charAt(r),-1!==e.indexOf(n)&&(i+=n);return i}var n,i,s,o,a,l,$="",u="";for(n=0,i=t.length;n<i;n++)s=function(t){var e,r,n,i,s,o,a="",l=t.length;for(e=0;e<l;e++)if("-"===(r=t.charAt(e))&&e>0&&e<l-1&&!n){for((i=t.charCodeAt(e-1))>(s=t.charCodeAt(e+1))&&p.$raise(C("ArgumentError"),'invalid range "'+i+"-"+s+'" in string transliteration'),o=i+1;o<s+1;o++)a+=String.fromCharCode(o);n=!0,e++}else n="\\"===r,a+=r;return a}((o="^"===(s=e(t[n],C("String"),"to_str")).charAt(0)&&s.length>1)?s.slice(1):s),o?u=r(u,s):$=r($,s);if($.length>0&&u.length>0){for(n=0,l="",i=$.length;n<i;n++)a=$.charAt(n),-1===u.indexOf(a)&&(l+=a);$=l,u=""}return $.length>0?"["+C("Regexp").$escape($)+"]":u.length>0?"[^"+C("Regexp").$escape(u)+"]":null}E.$include(C("Comparable")),t.prop(E.$$prototype,"$$is_string",!0),o(E,"$__id__",function(){return this.toString()}),l(E,"$try_convert",function(t){return a["$coerce_to?"](t,C("String"),"to_str")}),l(E,"$new",function(t){r=$(arguments);var r,n=r[0]||"",i=r[r.length-1];return n=e(n,C("String"),"to_str"),i&&i.$$is_hash&&i.$$smap.encoding&&(n=n.$force_encoding(i.$$smap.encoding)),(n=new this.$$constructor(n)).$initialize.$$pristine||u(n,"initialize",c(r)),n},-1),o(E,"$initialize",function(t,e){var r,n;return r=$(arguments),n=_(n=h(r)),r.length>0&&r.shift(),n.$$smap.encoding,n.$$smap.capacity,S},-1),o(E,"$%",function(t){return d(C("Array"),t)?u(this,"format",[this].concat(c(t))):this.$format(this,t)}),o(E,"$*",function(t){if((t=e(t,C("Integer"),"to_int"))<0&&p.$raise(C("ArgumentError"),"negative argument"),0===t)return"";var r="",n=this.toString();for(n.length*t>=268435456&&p.$raise(C("RangeError"),"multiply count must not overflow maximum string size");(1&t)==1&&(r+=n),0!=(t>>>=1);)n+=n;return r}),o(E,"$+",function(r){if(""==(r=e(r,C("String"),"to_str"))&&this.$$class===t.String)return this;if(""==this&&r.$$class===t.String)return r;var n=this+r;return this.encoding===n.encoding&&r.encoding===n.encoding||"UTF-8"===this.encoding.name||"UTF-8"===r.encoding.name?n:t.enc(n,this.encoding)}),o(E,"$<=>",function(t){if(f(t["$respond_to?"]("to_str")))return this>(t=t.$to_str().$to_s())?1:this<t?-1:0;var e=t["$<=>"](this);return e===S?S:e>0?-1:e<0?1:0}),o(E,"$==",function(t){return t.$$is_string?this.toString()===t.toString():!!r(t,"$to_str")&&t["$=="](this)}),o(E,"$=~",function(t){return t.$$is_string&&p.$raise(C("TypeError"),"type mismatch: String given"),t["$=~"](this)}),o(E,"$[]",function(t,r){var n,i,s=this.length;if(t.$$is_range)return(n=t.excl,i=t,r=t.end===S?-1:e(t.end,C("Integer"),"to_int"),Math.abs(t=t.begin===S?0:e(t.begin,C("Integer"),"to_int"))>s)?S:(t<0&&(t+=s),r<0&&(r+=s),n&&i.end!==S||(r+=1),(r-=t)<0&&(r=0),this.substr(t,r));if(t.$$is_string)return null!=r&&p.$raise(C("TypeError")),-1!==this.indexOf(t)?t:S;if(t.$$is_regexp){var o=this.match(t);return null===o?(m["~"]=S,S):(m["~"]=C("MatchData").$new(t,o),null==r)?o[0]:(r=e(r,C("Integer"),"to_int"))<0&&-r<o.length?o[r+=o.length]:r>=0&&r<o.length?o[r]:S}return((t=e(t,C("Integer"),"to_int"))<0&&(t+=s),null==r)?t>=s||t<0?S:this.substr(t,1):(r=e(r,C("Integer"),"to_int"))<0||t>s||t<0?S:this.substr(t,r)},-2),o(E,"$b",function(){return new String(this).$force_encoding("binary")}),o(E,"$capitalize",function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()}),o(E,"$casecmp",function(t){var r=this;if(!f(t["$respond_to?"]("to_str")))return S;t=e(t,C("String"),"to_str").$to_s();var n=/^[\x00-\x7F]*$/;return n.test(r)&&n.test(t)&&(r=r.toLowerCase(),t=t.toLowerCase()),r["$<=>"](t)}),o(E,"$casecmp?",function(t){var e=this.$casecmp(t);return e===S?S:0===e}),o(E,"$center",function(t,r){if(null==r&&(r=" "),t=e(t,C("Integer"),"to_int"),f((r=e(r,C("String"),"to_str").$to_s())["$empty?"]())&&p.$raise(C("ArgumentError"),"zero width padding"),f(t<=this.length))return this;var n=this.$ljust(g(b(t,this.length),2).$ceil(),r);return this.$rjust(g(b(t,this.length),2).$floor(),r)+n.slice(this.length)},-2),o(E,"$chomp",function(t){var e;return(null==m["/"]&&(m["/"]=S),null==t&&(t=m["/"]),f(t===S||0===this.length))?this:("\n"===(t=a["$coerce_to!"](t,C("String"),"to_str").$to_s())?e=this.replace(/\r?\n?$/,""):""===t?e=this.replace(/(\r?\n)+$/,""):this.length>=t.length&&this.substr(this.length-t.length,t.length)===t&&(e=this.substr(0,this.length-t.length)),null!=e)?e:this},-1),o(E,"$chop",function(){var t=this.length;return t<=1?"":"\n"===this.charAt(t-1)&&"\r"===this.charAt(t-2)?this.substr(0,t-2):this.substr(0,t-1)}),o(E,"$chr",function(){return this.charAt(0)}),o(E,"$clone",function(t){var e,r=S;return null==(e=(t=_(t)).$$smap.freeze)&&(e=S),f(e["$nil?"]())||v(e,!0)||v(e,!1)||this.$raise(R("ArgumentError"),"unexpected value for freeze: "+e.$class()),(r=new String(this)).$copy_singleton_methods(this),r.$initialize_clone(this,y(["freeze"],{freeze:e})),v(e,!0)?r.$$frozen||(r.$$frozen=!0):f(e["$nil?"]())&&this.$$frozen&&(r.$$frozen=!0),r},-1),o(E,"$dup",function(){var t=S;return(t=new String(this)).$initialize_dup(this),t}),o(E,"$count",function(t){e=$(arguments),0===e.length&&p.$raise(C("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var e,r=I(e);return null===r?0:this.length-this.replace(RegExp(r,"g"),"").length},-1),o(E,"$delete",function(t){e=$(arguments),0===e.length&&p.$raise(C("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var e,r=I(e);return null===r?this:this.replace(RegExp(r,"g"),"")},-1),o(E,"$delete_prefix",function(t){return(t.$$is_string||(t=e(t,C("String"),"to_str")),this.slice(0,t.length)===t)?this.slice(t.length):this}),o(E,"$delete_suffix",function(t){return(t.$$is_string||(t=e(t,C("String"),"to_str")),this.slice(this.length-t.length)===t)?this.slice(0,this.length-t.length):this}),o(E,"$downcase",function(){return this.toLowerCase()}),o(E,"$each_line",function r(n,i){var s,o,a,l,u,c,d,p,f,g,b,v,x=r.$$p||S;if(null==m["/"]&&(m["/"]=S),r.$$p=null,f=$(arguments),g=_(g=h(f)),f.length>0&&(b=f.shift()),null==b&&(b=m["/"]),null==(v=g.$$smap.chomp)&&(v=!1),!(x!==S))return this.$enum_for("each_line",b,y(["chomp"],{chomp:v}));if(b===S)return t.yield1(x,this),this;if(0===(b=e(b,C("String"),"to_str")).length){for(s=this.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/),o=0,a=s.length;o<a;o+=2)(s[o]||s[o+1])&&(p=(s[o]||"")+(s[o+1]||""),v&&(p=p.$chomp("\n")),t.yield1(x,p));return this}for(o=0,u=this.$chomp(b),c=this.length!=u.length,l=(d=u.split(b)).length;o<l;o++)p=d[o],(o<l-1||c)&&(p+=b),v&&(p=p.$chomp(b)),t.yield1(x,p);return this},-1),o(E,"$empty?",function(){return 0===this.length}),o(E,"$end_with?",function(t){var r;r=$(arguments);for(var n=0,i=r.length;n<i;n++){var s=e(r[n],C("String"),"to_str").$to_s();if(this.length>=s.length&&this.substr(this.length-s.length,s.length)==s)return!0}return!1},-1),o(E,"$gsub",function t(r,i){var s,o=t.$$p||S,a=this;if(t.$$p=null,void 0===i&&o===S)return a.$enum_for("gsub",r);var l,$,u="",c=S,h=0;for(r=r.$$is_regexp?n(r):RegExp((r=e(r,C("String"),"to_str")).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm");;){if(null===(l=r.exec(a))){m["~"]=S,u+=a.slice(h);break}c=C("MatchData").$new(r,l),void 0===i?(s=r.lastIndex,$=o(l[0]),r.lastIndex=s):i.$$is_hash?$=i["$[]"](l[0]).$to_s():(i.$$is_string||(i=e(i,C("String"),"to_str")),$=i.replace(/([\\]+)([0-9+&`'])/g,function(t,e,r){if(e.length%2==0)return t;switch(r){case"+":for(var n=l.length-1;n>0;n--)if(void 0!==l[n])return e.slice(1)+l[n];return"";case"&":return e.slice(1)+l[0];case"`":return e.slice(1)+a.slice(0,l.index);case"'":return e.slice(1)+a.slice(l.index+l[0].length);default:return e.slice(1)+(l[r]||"")}}).replace(/\\\\/g,"\\")),r.lastIndex===l.index?(u+=a.slice(h,l.index)+$+(a[l.index]||""),r.lastIndex+=1):u+=a.slice(h,l.index)+$,h=r.lastIndex}return m["~"]=c,u},-2),o(E,"$hash",function(){return this.toString()}),o(E,"$hex",function(){return this.$to_i(16)}),o(E,"$include?",function(t){return t.$$is_string||(t=e(t,C("String"),"to_str")),-1!==this.indexOf(t)}),o(E,"$index",function(t,r){var i,s,o;if(void 0===r)r=0;else if((r=e(r,C("Integer"),"to_int"))<0&&(r+=this.length)<0)return S;if(t.$$is_regexp)for(o=n(t);;){if(null===(s=o.exec(this))){m["~"]=S,i=-1;break}if(s.index>=r){m["~"]=C("MatchData").$new(o,s),i=s.index;break}o.lastIndex=s.index+1}else i=0===(t=e(t,C("String"),"to_str")).length&&r>this.length?-1:this.indexOf(t,r);return -1===i?S:i},-2),o(E,"$inspect",function(){var t=this,e={"\x07":"\\a","\x1b":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"};return'"'+t.replace(/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,function(r){return e[r]?e[r]:(r=r.charCodeAt(0))<=255&&(t.encoding["$binary?"]()||t.internal_encoding["$binary?"]())?"\\x"+("00"+r.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+r.toString(16).toUpperCase()).slice(-4)}).replace(/\#[\$\@\{]/g,"\\$&")+'"'}),o(E,"$intern",function(){return this.toString()}),o(E,"$length",function(){return this.length}),x(E,"size","length"),o(E,"$lines",function t(e,r){var n,i,s,o,a=t.$$p||S,l=S;return(null==m["/"]&&(m["/"]=S),t.$$p=null,n=$(arguments),i=_(i=h(n)),n.length>0&&(s=n.shift()),null==s&&(s=m["/"]),null==(o=i.$$smap.chomp)&&(o=!1),l=u(this,"each_line",[s,y(["chomp"],{chomp:o})],a.$to_proc()),f(a))?this:l.$to_a()},-1),o(E,"$ljust",function(t,r){if(null==r&&(r=" "),t=e(t,C("Integer"),"to_int"),f((r=e(r,C("String"),"to_str").$to_s())["$empty?"]())&&p.$raise(C("ArgumentError"),"zero width padding"),f(t<=this.length))return this;var n=-1,i="";for(t-=this.length;++n<t;)i+=r;return this+i.slice(0,t)},-2),o(E,"$lstrip",function(){return this.replace(/^[\u0000\s]*/,"")}),o(E,"$ascii_only?",function(){return!!this.encoding.ascii&&/^[\x00-\x7F]*$/.test(this)}),o(E,"$match",function t(e,r){var n=t.$$p||S;return t.$$p=null,(d(R("String"),e)||f(e["$respond_to?"]("to_str")))&&(e=C("Regexp").$new(e.$to_str())),d(C("Regexp"),e)||p.$raise(C("TypeError"),"wrong argument type "+e.$class()+" (expected Regexp)"),u(e,"match",[this,r],n.$to_proc())},-2),o(E,"$match?",function(t,e){return(d(R("String"),t)||f(t["$respond_to?"]("to_str")))&&(t=C("Regexp").$new(t.$to_str())),d(C("Regexp"),t)||p.$raise(C("TypeError"),"wrong argument type "+t.$class()+" (expected Regexp)"),t["$match?"](this,e)},-2),o(E,"$next",function(){var t,e=this.length;if(0===e)return"";for(var r=this,n=this.search(/[a-zA-Z0-9]/),i=!1;e--;){if((t=this.charCodeAt(e))>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)switch(t){case 57:i=!0,t=48;break;case 90:i=!0,t=65;break;case 122:i=!0,t=97;break;default:i=!1,t+=1}else -1===n?255===t?(i=!0,t=0):(i=!1,t+=1):i=!0;if(r=r.slice(0,e)+String.fromCharCode(t)+r.slice(e+1),i&&(0===e||e===n)){switch(t){case 65:case 97:break;default:t+=1}r=0===e?String.fromCharCode(t)+r:r.slice(0,e)+String.fromCharCode(t)+r.slice(e),i=!1}if(!i)break}return r}),o(E,"$oct",function(){var t,e=this,r=8;return/^\s*_/.test(e)?0:isNaN(t=parseInt((e=e.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(t,e,n,i){switch(i.charAt(0)){case"+":case"-":return t;case"0":if("x"===i.charAt(1)&&"0x"===n)return t}switch(n){case"0b":r=2;break;case"0":case"0o":r=8;break;case"0d":r=10;break;case"0x":r=16}return e+i})).replace(/_(?!_)/g,""),r))?0:t}),o(E,"$ord",function(){return"function"==typeof this.codePointAt?this.codePointAt(0):this.charCodeAt(0)}),o(E,"$partition",function(t){var r,n;return(t.$$is_regexp?null===(n=t.exec(this))?r=-1:(C("MatchData").$new(t,n),t=n[0],r=n.index):(t=e(t,C("String"),"to_str"),r=this.indexOf(t)),-1===r)?[this,"",""]:[this.slice(0,r),this.slice(r,r+t.length),this.slice(r+t.length)]}),o(E,"$reverse",function(){return this.split("").reverse().join("")}),o(E,"$rindex",function(t,r){var i,s,o,a;if(void 0===r)r=this.length;else if((r=e(r,C("Integer"),"to_int"))<0&&(r+=this.length)<0)return S;if(t.$$is_regexp){for(s=null,o=n(t);null!==(a=o.exec(this))&&!(a.index>r);)s=a,o.lastIndex=s.index+1;null===s?(m["~"]=S,i=-1):(C("MatchData").$new(o,s),i=s.index)}else t=e(t,C("String"),"to_str"),i=this.lastIndexOf(t,r);return -1===i?S:i},-2),o(E,"$rjust",function(t,r){if(null==r&&(r=" "),t=e(t,C("Integer"),"to_int"),f((r=e(r,C("String"),"to_str").$to_s())["$empty?"]())&&p.$raise(C("ArgumentError"),"zero width padding"),f(t<=this.length))return this;var n=Math.floor(t-this.length),i=Array(Math.floor(n/r.length)+1).join(r),s=n-i.length;return i+r.slice(0,s)+this},-2),o(E,"$rpartition",function(t){var r,i,s,o;if(t.$$is_regexp){for(i=null,s=n(t);null!==(o=s.exec(this));)i=o,s.lastIndex=i.index+1;null===i?r=-1:(C("MatchData").$new(s,i),t=i[0],r=i.index)}else t=e(t,C("String"),"to_str"),r=this.lastIndexOf(t);return -1===r?["","",this]:[this.slice(0,r),this.slice(r,r+t.length),this.slice(r+t.length)]}),o(E,"$rstrip",function(){return this.replace(/[\s\u0000]*$/,"")}),o(E,"$scan",function r(i,s){var o,a=r.$$p||S;r.$$p=null,null==(o=(s=_(s)).$$smap.no_matchdata)&&(o=!1);var l,$=[],u=S;for(i=i.$$is_regexp?n(i):RegExp((i=e(i,C("String"),"to_str")).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm");null!=(l=i.exec(this));)u=C("MatchData").$new(i,l,y(["no_matchdata"],{no_matchdata:o})),a===S?1==l.length?$.push(l[0]):$.push(u.$captures()):1==l.length?t.yield1(a,l[0]):t.yield1(a,u.$captures()),i.lastIndex===l.index&&(i.lastIndex+=1);return o||(m["~"]=u),a!==S?this:$},-2),o(E,"$singleton_class",function(){return t.get_singleton_class(this)}),o(E,"$split",function(t,r){var i=S;if(null==m[";"]&&(m[";"]=S),0===this.length)return[];if(void 0===r)r=0;else if(1===(r=a["$coerce_to!"](r,C("Integer"),"to_int")))return[this];(void 0===t||t===S)&&(t=f(i=m[";"])?i:" ");var s,o,l,$=[],u=this.toString(),c=0;if(t.$$is_regexp?t=n(t):" "===(t=e(t,C("String"),"to_str").$to_s())?(t=/\s+/gm,u=u.replace(/^\s+/,"")):t=RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"),1===($=u.split(t)).length&&$[0]===u)return[$[0]];for(;-1!==(o=$.indexOf(void 0));)$.splice(o,1);if(0===r){for(;""===$[$.length-1];)$.length-=1;return $}if(s=t.exec(u),r<0){if(null!==s&&""===s[0]&&-1===t.source.indexOf("(?="))for(o=0,l=s.length;o<l;o++)$.push("");return $}if(null!==s&&""===s[0])return $.splice(r-1,$.length-1,$.slice(r-1).join("")),$;if(r>=$.length)return $;for(o=0;null!==s&&(o++,c=t.lastIndex,o+1!==r);)s=t.exec(u);return $.splice(r-1,$.length-1,u.slice(c)),$},-1),o(E,"$squeeze",function(t){if(e=$(arguments),0===e.length)return this.replace(/(.)\1+/g,"$1");var e,r=I(e);return null===r?this:this.replace(RegExp("("+r+")\\1+","g"),"$1")},-1),o(E,"$start_with?",function(t){var r;r=$(arguments);for(var n=0,i=r.length;n<i;n++)if(r[n].$$is_regexp){var s=r[n],o=s.exec(this);if(null!=o&&0===o.index)return m["~"]=C("MatchData").$new(s,o),!0;m["~"]=S}else{var a=e(r[n],C("String"),"to_str").$to_s();if(0===this.indexOf(a))return!0}return!1},-1),o(E,"$strip",function(){return this.replace(/^[\s\u0000]*|[\s\u0000]*$/g,"")}),o(E,"$sub",function t(r,n){var i=t.$$p||S,s=this;t.$$p=null,r.$$is_regexp||(r=new RegExp((r=e(r,C("String"),"to_str")).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var o,a=r.exec(s);return null===a?(m["~"]=S,o=s.toString()):(C("MatchData").$new(r,a),void 0===n?(i===S&&p.$raise(C("ArgumentError"),"wrong number of arguments (1 for 2)"),o=s.slice(0,a.index)+i(a[0])+s.slice(a.index+a[0].length)):n.$$is_hash?o=s.slice(0,a.index)+n["$[]"](a[0]).$to_s()+s.slice(a.index+a[0].length):(n=(n=e(n,C("String"),"to_str")).replace(/([\\]+)([0-9+&`'])/g,function(t,e,r){if(e.length%2==0)return t;switch(r){case"+":for(var n=a.length-1;n>0;n--)if(void 0!==a[n])return e.slice(1)+a[n];return"";case"&":return e.slice(1)+a[0];case"`":return e.slice(1)+s.slice(0,a.index);case"'":return e.slice(1)+s.slice(a.index+a[0].length);default:return e.slice(1)+(a[r]||"")}}).replace(/\\\\/g,"\\"),o=s.slice(0,a.index)+n+s.slice(a.index+a[0].length))),o},-2),o(E,"$sum",function(t){null==t&&(t=16),t=e(t,C("Integer"),"to_int");for(var r=0,n=this.length,i=0;i<n;i++)r+=this.charCodeAt(i);return t<=0?r:r&Math.pow(2,t)-1},-1),o(E,"$swapcase",function(){return this.replace(/([a-z]+)|([A-Z]+)/g,function(t,e,r){return e?t.toUpperCase():t.toLowerCase()})}),o(E,"$to_f",function(){if("_"===this.charAt(0))return 0;var t=parseFloat(this.replace(/_/g,""));return isNaN(t)||t==1/0||t==-1/0?0:t}),o(E,"$to_i",function(t){null==t&&(t=10);var r,n=this.toLowerCase(),i=e(t,C("Integer"),"to_int");return((1===i||i<0||i>36)&&p.$raise(C("ArgumentError"),"invalid radix "+i),/^\s*_/.test(n))?0:isNaN(r=parseInt((n=n.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(t,e,r,n){switch(n.charAt(0)){case"+":case"-":return t;case"0":if("x"===n.charAt(1)&&"0x"===r&&(0===i||16===i))return t}switch(r){case"0b":if(0===i||2===i)return i=2,e+n;break;case"0":case"0o":if(0===i||8===i)return i=8,e+n;break;case"0d":if(0===i||10===i)return i=10,e+n;break;case"0x":if(0===i||16===i)return i=16,e+n}return t})).replace(/_(?!_)/g,""),i))?0:r},-1),o(E,"$to_proc",function e(){e.$$p;var r=S,n=S,i=S;return e.$$p=null,r=this.valueOf(),n=t.jsid(r),(i=u(p,"proc",[],function t(e){var i,s,o=t.$$p||S;t.$$p=null,i=$(arguments),0===(s=i).length&&p.$raise(C("ArgumentError"),"no receiver given");var a=s[0];null==a&&(a=S);var l=a[n];return(l?s=s.slice(1):(l=a.$method_missing,s[0]=r),"function"==typeof o&&(l.$$p=o),0===s.length)?l.call(a):l.apply(a,s)},-1)).$$source_location=S,i}),o(E,"$to_s",function(){return this.toString()}),o(E,"$tr",function(t,r){if(t=e(t,C("String"),"to_str").$to_s(),r=e(r,C("String"),"to_str").$to_s(),0==t.length||t===r)return this;var n,i,s,o,a,l,$,u={},c=t.split(""),h=c.length,_=r.split(""),d=_.length,f=!1,m=null;"^"===c[0]&&c.length>1&&(f=!0,c.shift(),m=_[d-1],h-=1);var g=[],b=null;for(n=0,i=!1;n<h;n++)if(o=c[n],null==b)b=o,g.push(o);else if("-"===o)"-"===b?(g.push("-"),g.push("-")):n==h-1?g.push("-"):i=!0;else if(i){for((a=b.charCodeAt(0))>(l=o.charCodeAt(0))&&p.$raise(C("ArgumentError"),'invalid range "'+String.fromCharCode(a)+"-"+String.fromCharCode(l)+'" in string transliteration'),s=a+1;s<l;s++)g.push(String.fromCharCode(s));g.push(o),i=null,b=null}else g.push(o);if(h=(c=g).length,f)for(n=0;n<h;n++)u[c[n]]=!0;else{if(d>0){var v=[],y=null;for(n=0,i=!1;n<d;n++)if(o=_[n],null==y)y=o,v.push(o);else if("-"===o)"-"===y?(v.push("-"),v.push("-")):n==d-1?v.push("-"):i=!0;else if(i){for((a=y.charCodeAt(0))>(l=o.charCodeAt(0))&&p.$raise(C("ArgumentError"),'invalid range "'+String.fromCharCode(a)+"-"+String.fromCharCode(l)+'" in string transliteration'),s=a+1;s<l;s++)v.push(String.fromCharCode(s));v.push(o),i=null,y=null}else v.push(o);d=(_=v).length}var x=h-d;if(x>0){var k=d>0?_[d-1]:"";for(n=0;n<x;n++)_.push(k)}for(n=0;n<h;n++)u[c[n]]=_[n]}var w="";for(n=0,$=this.length;n<$;n++){var A=u[o=this.charAt(n)];f?w+=null==A?m:o:w+=null!=A?A:o}return w}),o(E,"$tr_s",function(t,r){if(t=e(t,C("String"),"to_str").$to_s(),r=e(r,C("String"),"to_str").$to_s(),0==t.length)return this;var n,i,s,o,a,l,$,u={},c=t.split(""),h=c.length,_=r.split(""),d=_.length,f=!1,m=null;"^"===c[0]&&c.length>1&&(f=!0,c.shift(),m=_[d-1],h-=1);var g=[],b=null;for(n=0,i=!1;n<h;n++)if(o=c[n],null==b)b=o,g.push(o);else if("-"===o)"-"===b?(g.push("-"),g.push("-")):n==h-1?g.push("-"):i=!0;else if(i){for((a=b.charCodeAt(0))>(l=o.charCodeAt(0))&&p.$raise(C("ArgumentError"),'invalid range "'+String.fromCharCode(a)+"-"+String.fromCharCode(l)+'" in string transliteration'),s=a+1;s<l;s++)g.push(String.fromCharCode(s));g.push(o),i=null,b=null}else g.push(o);if(h=(c=g).length,f)for(n=0;n<h;n++)u[c[n]]=!0;else{if(d>0){var v=[];for(n=0,i=!1;n<d;n++)if(o=_[n],null==b)b=o,v.push(o);else if("-"===o)n==d-1?v.push("-"):i=!0;else if(i){for((a=b.charCodeAt(0))>(l=o.charCodeAt(0))&&p.$raise(C("ArgumentError"),'invalid range "'+String.fromCharCode(a)+"-"+String.fromCharCode(l)+'" in string transliteration'),s=a+1;s<l;s++)v.push(String.fromCharCode(s));v.push(o),i=null,b=null}else v.push(o);d=(_=v).length}var y=h-d;if(y>0){var x=d>0?_[d-1]:"";for(n=0;n<y;n++)_.push(x)}for(n=0;n<h;n++)u[c[n]]=_[n]}var k="",w=null;for(n=0,$=this.length;n<$;n++){var A=u[o=this.charAt(n)];f?null==A?null==w&&(k+=m,w=!0):(k+=o,w=null):null!=A?(null==w||w!==A)&&(k+=A,w=A):(k+=o,w=null)}return k}),o(E,"$upcase",function(){return this.toUpperCase()}),o(E,"$upto",function t(r,n){var i=t.$$p||S;if(t.$$p=null,null==n&&(n=!1),!(i!==S))return this.$enum_for("upto",r,n);var s,o,a=this.toString();if(r=e(r,C("String"),"to_str"),1===a.length&&1===r.length)for(s=a.charCodeAt(0),o=r.charCodeAt(0);s<=o&&(!n||s!==o);)i(String.fromCharCode(s)),s+=1;else if(parseInt(a,10).toString()===a&&parseInt(r,10).toString()===r)for(s=parseInt(a,10),o=parseInt(r,10);s<=o&&(!n||s!==o);)i(s.toString()),s+=1;else for(;a.length<=r.length&&a<=r&&(!n||a!==r);)i(a),a=a.$succ();return this},-2),o(E,"$instance_variables",function(){return[]}),l(E,"$_load",function(t){var e;return e=$(arguments),u(this,"new",c(e))},-1),o(E,"$unicode_normalize",function(t){return null==t&&(t="nfc"),f(["nfc","nfd","nfkc","nfkd"]["$include?"](t))||p.$raise(C("ArgumentError"),"Invalid normalization form "+t),this.normalize(t.$upcase())},-1),o(E,"$unicode_normalized?",function(t){return null==t&&(t="nfc"),this.$unicode_normalize(t)["$=="](this)},-1),o(E,"$unpack",function(t){return p.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),o(E,"$unpack1",function(t){return p.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),o(E,"$freeze",function(){return"string"==typeof this||i(this,"$$frozen",!0),this}),o(E,"$-@",function(){return"string"==typeof this||this.$$frozen?this:"UTF-8"==this.encoding.name&&"UTF-8"==this.internal_encoding.name?this.toString():this.$dup().$freeze()}),o(E,"$frozen?",function(){return"string"==typeof this||!0===this.$$frozen}),x(E,"+@","dup"),x(E,"===","=="),x(E,"byteslice","[]"),x(E,"eql?","=="),x(E,"equal?","==="),x(E,"object_id","__id__"),x(E,"slice","[]"),x(E,"succ","next"),x(E,"to_str","to_s"),x(E,"to_sym","intern"),a.$pristine(E,"initialize")}(0,String,A),k(A[0],"Symbol",E("String"))},Opal.modules["corelib/enumerable"]=function(t){var e=t.truthy,r=t.coerce_to,n=t.yield1,i=t.yieldX,s=t.deny_frozen_access,o=t.module,a=t.send,l=t.slice,$=t.to_a,u=t.Opal,c=t.thrower,h=t.def,_=t.Kernel,d=t.return_val,p=t.rb_gt,f=t.rb_times,m=t.rb_lt,g=t.eqeq,b=t.rb_plus,v=t.rb_minus,y=t.rb_divide,x=t.rb_le,k=t.hash2,w=t.lambda,A=t.not,E=t.alias,S=t.nil,C=t.$$$;return t.add_stubs("each,public_send,destructure,to_enum,enumerator_size,new,yield,raise,slice_when,!,enum_for,flatten,map,to_proc,compact,to_a,warn,proc,==,nil?,respond_to?,coerce_to!,>,*,try_convert,<,+,-,ceil,/,size,select,__send__,length,<=,[],push,<<,[]=,===,inspect,<=>,first,reverse,sort,take,sort_by,compare,call,dup,sort!,map!,include?,-@,key?,values,transform_values,group_by,fetch,to_h,coerce_to?,class,zip,detect,find_all,collect_concat,collect,inject,entries"),function(O,R){var I=o("::","Enumerable"),T=[I].concat(R),z=t.$r(T);function F(t){return 0===t.length&&(t=[S]),t.length>1&&(t=[t]),t}return h(I,"$all?",function r(n){try{var i=c("return"),s=r.$$p||S;return r.$$p=null,e(void 0!==n)?a(this,"each",[],function(t){var r,s=S;if(r=l(arguments),s=F(r),e(a(n,"public_send",["==="].concat($(s)))))return S;i.$throw(!1)},{$$arity:-1,$$ret:i}):s!==S?a(this,"each",[],function(r){var n;if(n=l(arguments),e(t.yieldX(s,$(n))))return S;i.$throw(!1)},{$$arity:-1,$$ret:i}):a(this,"each",[],function(t){var r;if(r=l(arguments),e(u.$destructure(r)))return S;i.$throw(!1)},{$$arity:-1,$$ret:i}),!0}catch(t){if(t===i)return t.$v;throw t}},-1),h(I,"$any?",function r(n){try{var i=c("return"),s=r.$$p||S;return r.$$p=null,e(void 0!==n)?a(this,"each",[],function(t){var r,s=S;if(r=l(arguments),s=F(r),!e(a(n,"public_send",["==="].concat($(s)))))return S;i.$throw(!0)},{$$arity:-1,$$ret:i}):s!==S?a(this,"each",[],function(r){var n;if(n=l(arguments),!e(t.yieldX(s,$(n))))return S;i.$throw(!0)},{$$arity:-1,$$ret:i}):a(this,"each",[],function(t){var r;if(r=l(arguments),!e(u.$destructure(r)))return S;i.$throw(!0)},{$$arity:-1,$$ret:i}),!1}catch(t){if(t===i)return t.$v;throw t}},-1),h(I,"$chunk",function t(){var e=t.$$p||S;return(t.$$p=null,e!==S)?a(C("Enumerator"),"new",[],function t(r){var i=null==t.$$s?this:t.$$s;null==r&&(r=S);var s=S,o=[];function a(){o.length>0&&r.$yield(s,o)}i.$each.$$p=function(t){var r=n(e,t);r===S?(a(),o=[],s=S):(s===S||s===r?o.push(t):(a(),o=[t]),s=r)},i.$each(),a()},{$$s:this}):a(this,"to_enum",["chunk"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this})}),h(I,"$chunk_while",function e(){var r=e.$$p||S;return e.$$p=null,r!==S||_.$raise(C("ArgumentError"),"no block given"),a(this,"slice_when",[],function(e,n){return null==e&&(e=S),null==n&&(n=S),t.yieldX(r,[e,n])["$!"]()})}),h(I,"$collect",function t(){var e=t.$$p||S;if(t.$$p=null,!(e!==S))return a(this,"enum_for",["collect"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this});var r=[];return this.$each.$$p=function(){var t=i(e,arguments);r.push(t)},this.$each(),r}),h(I,"$collect_concat",function t(){var e=t.$$p||S;return(t.$$p=null,e!==S)?a(this,"map",[],e.$to_proc()).$flatten(1):a(this,"enum_for",["collect_concat"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this})}),h(I,"$compact",function(){return this.$to_a().$compact()}),h(I,"$count",function t(r){var n=t.$$p||S,s=S;return t.$$p=null,s=0,null!=r&&n!==S&&this.$warn("warning: given block not used"),e(null!=r)?n=a(_,"proc",[],function(t){var e;return e=l(arguments),u.$destructure(e)["$=="](r)},-1):e(n["$nil?"]())&&(n=a(_,"proc",[],d(!0))),a(this,"each",[],function(t){var r;return(r=l(arguments),e(i(n,r)))?s++:S},-1),s},-1),h(I,"$cycle",function t(r){var i=t.$$p||S;if(t.$$p=null,null==r&&(r=S),!(i!==S))return a(this,"enum_for",["cycle",r],function t(){var n=null==t.$$s?this:t.$$s;return e(r["$nil?"]())?e(n["$respond_to?"]("size"))?C(C("Float"),"INFINITY"):S:e(p(r=u["$coerce_to!"](r,C("Integer"),"to_int"),0))?f(n.$enumerator_size(),r):0},{$$s:this});if(!e(r["$nil?"]())&&e((r=u["$coerce_to!"](r,C("Integer"),"to_int"))<=0))return S;var s,o,l=[];if(this.$each.$$p=function(){var t=u.$destructure(arguments);n(i,t),l.push(t)},this.$each(),0===l.length)return S;if(r===S)for(;;)for(s=0,o=l.length;s<o;s++)n(i,l[s]);else for(;r>1;){for(s=0,o=l.length;s<o;s++)n(i,l[s]);r--}},-1),h(I,"$detect",function r(n){try{var i=c("return"),s=r.$$p||S;if(r.$$p=null,!(s!==S))return this.$enum_for("detect",n);if(a(this,"each",[],function(r){var n,o=S;if(n=l(arguments),o=u.$destructure(n),!e(t.yield1(s,o)))return S;i.$throw(o)},{$$arity:-1,$$ret:i}),void 0!==n){if("function"==typeof n)return n();return n}return S}catch(t){if(t===i)return t.$v;throw t}},-1),h(I,"$drop",function(t){e((t=r(t,C("Integer"),"to_int"))<0)&&_.$raise(C("ArgumentError"),"attempt to drop negative size");var n=[],i=0;return this.$each.$$p=function(){t<=i&&n.push(u.$destructure(arguments)),i++},this.$each(),n}),h(I,"$drop_while",function t(){var r=t.$$p||S;if(t.$$p=null,!(r!==S))return this.$enum_for("drop_while");var i=[],s=!0;return this.$each.$$p=function(){var t=u.$destructure(arguments);s?e(n(r,t))||(s=!1,i.push(t)):i.push(t)},this.$each(),i}),h(I,"$each_cons",function t(r){var i=t.$$p||S;if(t.$$p=null,e(1!=arguments.length)&&_.$raise(C("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),e((r=u.$try_convert(r,C("Integer"),"to_int"))<=0)&&_.$raise(C("ArgumentError"),"invalid size"),!(i!==S))return a(this,"enum_for",["each_cons",r],function t(){var n=null==t.$$s?this:t.$$s,i=S;return e((i=n.$enumerator_size())["$nil?"]())?S:g(i,0)||e(m(i,r))?0:b(v(i,r),1)},{$$s:this});var s=[];return this.$each.$$p=function(){var t=u.$destructure(arguments);s.push(t),s.length>r&&s.shift(),s.length==r&&n(i,s.slice(0,r))},this.$each(),this}),h(I,"$each_entry",function t(e){var r,i=t.$$p||S;return(t.$$p=null,r=l(arguments),i!==S)?(this.$each.$$p=function(){var t=u.$destructure(arguments);n(i,t)},this.$each.apply(this,r),this):a(this,"to_enum",["each_entry"].concat($(r)),function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this})},-1),h(I,"$each_slice",function t(i){var s=t.$$p||S;if(t.$$p=null,e((i=r(i,C("Integer"),"to_int"))<=0)&&_.$raise(C("ArgumentError"),"invalid slice size"),!(s!==S))return a(this,"enum_for",["each_slice",i],function t(){var r=null==t.$$s?this:t.$$s;return e(r["$respond_to?"]("size"))?y(r.$size(),i).$ceil():S},{$$s:this});var o=[];return this.$each.$$p=function(){var t=u.$destructure(arguments);o.push(t),o.length===i&&(n(s,o),o=[])},this.$each(),o.length>0&&n(s,o),this}),h(I,"$each_with_index",function t(e){var r,n=t.$$p||S;if(t.$$p=null,r=l(arguments),!(n!==S))return a(this,"enum_for",["each_with_index"].concat($(r)),function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this});var i=0;return this.$each.$$p=function(){var t=u.$destructure(arguments);n(t,i),i++},this.$each.apply(this,r),this},-1),h(I,"$each_with_object",function t(e){var r=t.$$p||S;return(t.$$p=null,r!==S)?(this.$each.$$p=function(){var t=u.$destructure(arguments);r(t,e)},this.$each(),e):a(this,"enum_for",["each_with_object",e],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this})}),h(I,"$entries",function(t){e=l(arguments);var e,r=[];return this.$each.$$p=function(){r.push(u.$destructure(arguments))},this.$each.apply(this,e),r},-1),h(I,"$filter_map",function t(){var e=t.$$p||S;return(t.$$p=null,e!==S)?a(a(this,"map",[],e.$to_proc()),"select",[],"itself".$to_proc()):a(this,"enum_for",["filter_map"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this})}),h(I,"$find_all",function t(){var r=t.$$p||S;if(t.$$p=null,!(r!==S))return a(this,"enum_for",["find_all"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this});var i=[];return this.$each.$$p=function(){var t=u.$destructure(arguments);e(n(r,t))&&i.push(t)},this.$each(),i}),h(I,"$find_index",function r(n){try{var i=c("return"),s=r.$$p||S,o=S;if(r.$$p=null,e(void 0===n&&s===S))return this.$enum_for("find_index");return null!=n&&s!==S&&this.$warn("warning: given block not used"),o=0,e(null!=n)?a(this,"each",[],function(t){var e;return e=l(arguments),g(u.$destructure(e),n)&&i.$throw(o),o+=1},{$$arity:-1,$$ret:i}):a(this,"each",[],function(r){var n;return n=l(arguments),e(t.yieldX(s,$(n)))&&i.$throw(o),o+=1},{$$arity:-1,$$ret:i}),S}catch(t){if(t===i)return t.$v;throw t}},-1),h(I,"$first",function(t){try{var n=c("return"),i=S,s=S;if(e(void 0===t))return a(this,"each",[],function(t){null==t&&(t=S),n.$throw(t)},{$$ret:n});if(i=[],t=r(t,C("Integer"),"to_int"),e(t<0)&&_.$raise(C("ArgumentError"),"attempt to take negative size"),e(0==t))return[];return s=0,a(this,"each",[],function(r){var o;if(o=l(arguments),i.push(u.$destructure(o)),!e(t<=++s))return S;n.$throw(i)},{$$arity:-1,$$ret:n}),i}catch(t){if(t===n)return t.$v;throw t}},-1),h(I,"$grep",function r(n){var i=r.$$p||S,s=S;return r.$$p=null,s=[],a(this,"each",[],function(r){var o,u;return(o=l(arguments),e(a(n,"__send__",["==="].concat($(F(u=o))))))?(i!==S?(e(p(u.$length(),1))&&(u=[u]),u=t.yieldX(i,$(u))):e(x(u.$length(),1))&&(u=u["$[]"](0)),s.$push(u)):S},-1),s}),h(I,"$grep_v",function r(n){var i=r.$$p||S,s=S;return r.$$p=null,s=[],a(this,"each",[],function(r){var o,u;return(o=l(arguments),e(a(n,"__send__",["==="].concat($(F(u=o))))))?S:(i!==S?(e(p(u.$length(),1))&&(u=[u]),u=t.yieldX(i,$(u))):e(x(u.$length(),1))&&(u=u["$[]"](0)),s.$push(u))},-1),s}),h(I,"$group_by",function t(){var r,i,s=t.$$p||S,o=S,l=S;return(t.$$p=null,s!==S)?(o=k([],{}),this.$each.$$p=function(){var t=u.$destructure(arguments),r=n(s,t);(e(l=o["$[]"](r))?l:(a(o,"[]=",i=[r,[]]),i[i.length-1]))["$<<"](t)},this.$each(),void 0!==r)?r:o:a(this,"enum_for",["group_by"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this})}),h(I,"$include?",function(t){try{var e=c("return");return a(this,"each",[],function(r){var n;if(n=l(arguments),!g(u.$destructure(n),t))return S;e.$throw(!0)},{$$arity:-1,$$ret:e}),!1}catch(t){if(t===e)return t.$v;throw t}}),h(I,"$inject",function t(e,r){var n=t.$$p||S;t.$$p=null;var s=e;return n!==S&&void 0===r?this.$each.$$p=function(){var t=u.$destructure(arguments);if(void 0===s){s=t;return}s=i(n,[s,t])}:(void 0===r&&(C("Symbol")["$==="](e)||_.$raise(C("TypeError"),""+e.$inspect()+" is not a Symbol"),r=e,s=void 0),this.$each.$$p=function(){var t=u.$destructure(arguments);if(void 0===s){s=t;return}s=s.$__send__(r,t)}),this.$each(),void 0==s?S:s},-1),h(I,"$lazy",function(){return a(C(C("Enumerator"),"Lazy"),"new",[this,this.$enumerator_size()],function(t,e){var r;return null==t&&(t=S),r=l(arguments,1),a(t,"yield",$(r))},-2)}),h(I,"$enumerator_size",function(){return e(this["$respond_to?"]("size"))?this.$size():S}),h(I,"$max",function t(e){var n,s,o=t.$$p||S;return(t.$$p=null,void 0===e||e===S)?(this.$each.$$p=function(){var t=u.$destructure(arguments);if(void 0===n){n=t;return}(s=o!==S?i(o,[t,n]):t["$<=>"](n))===S&&_.$raise(C("ArgumentError"),"comparison failed"),s>0&&(n=t)},this.$each(),void 0===n)?S:n:(e=r(e,C("Integer"),"to_int"),a(this,"sort",[],o.$to_proc()).$reverse().$first(e))},-1),h(I,"$max_by",function t(r){var i,s,o=t.$$p||S;return(t.$$p=null,null==r&&(r=S),e(o))?e(r["$nil?"]())?(this.$each.$$p=function(){var t=u.$destructure(arguments),e=n(o,t);if(void 0===i){i=t,s=e;return}e["$<=>"](s)>0&&(i=t,s=e)},this.$each(),void 0===i?S:i):a(this,"sort_by",[],o.$to_proc()).$reverse().$take(r):a(this,"enum_for",["max_by",r],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this})},-1),h(I,"$min",function r(n){var i,s=r.$$p||S;return(r.$$p=null,null==n&&(n=S),e(n["$nil?"]()))?(s!==S?this.$each.$$p=function(){var t=u.$destructure(arguments);if(void 0===i){i=t;return}var e=s(t,i);e===S&&_.$raise(C("ArgumentError"),"comparison failed"),e<0&&(i=t)}:this.$each.$$p=function(){var t=u.$destructure(arguments);if(void 0===i){i=t;return}0>u.$compare(t,i)&&(i=t)},this.$each(),void 0===i?S:i):s!==S?a(this,"sort",[],function(e,r){return null==e&&(e=S),null==r&&(r=S),t.yieldX(s,[e,r])}).$take(n):this.$sort().$take(n)},-1),h(I,"$min_by",function t(r){var i,s,o=t.$$p||S;return(t.$$p=null,null==r&&(r=S),e(o))?e(r["$nil?"]())?(this.$each.$$p=function(){var t=u.$destructure(arguments),e=n(o,t);if(void 0===i){i=t,s=e;return}0>e["$<=>"](s)&&(i=t,s=e)},this.$each(),void 0===i?S:i):a(this,"sort_by",[],o.$to_proc()).$take(r):a(this,"enum_for",["min_by",r],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this})},-1),h(I,"$minmax",function t(){var r=t.$$p||S,n=S;t.$$p=null,r=e(n=r)?n:a(_,"proc",[],function(t,e){return null==t&&(t=S),null==e&&(e=S),t["$<=>"](e)});var i=S,s=S,o=!0;return this.$each.$$p=function(){var t=u.$destructure(arguments);if(o)i=s=t,o=!1;else{var e=r.$call(i,t);e===S?_.$raise(C("ArgumentError"),"comparison failed"):e>0&&(i=t);var n=r.$call(s,t);n===S?_.$raise(C("ArgumentError"),"comparison failed"):n<0&&(s=t)}},this.$each(),[i,s]}),h(I,"$minmax_by",function t(){var r=t.$$p||S;if(t.$$p=null,!e(r))return a(this,"enum_for",["minmax_by"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this});var i,s,o=S,l=S;return this.$each.$$p=function(){var t=u.$destructure(arguments),e=n(r,t);(void 0===i||0>e["$<=>"](i))&&(o=t,i=e),(void 0===s||e["$<=>"](s)>0)&&(l=t,s=e)},this.$each(),[o,l]}),h(I,"$none?",function r(n){try{var i=c("return"),s=r.$$p||S;return r.$$p=null,e(void 0!==n)?a(this,"each",[],function(t){var r,s=S;if(r=l(arguments),s=F(r),!e(a(n,"public_send",["==="].concat($(s)))))return S;i.$throw(!1)},{$$arity:-1,$$ret:i}):s!==S?a(this,"each",[],function(r){var n;if(n=l(arguments),!e(t.yieldX(s,$(n))))return S;i.$throw(!1)},{$$arity:-1,$$ret:i}):a(this,"each",[],function(t){var r,n=S;if(r=l(arguments),n=u.$destructure(r),!e(n))return S;i.$throw(!1)},{$$arity:-1,$$ret:i}),!0}catch(t){if(t===i)return t.$v;throw t}},-1),h(I,"$one?",function r(n){try{var i=c("return"),s=r.$$p||S,o=S;return r.$$p=null,o=0,e(void 0!==n)?a(this,"each",[],function(t){var r,s=S;if(r=l(arguments),s=F(r),!e(a(n,"public_send",["==="].concat($(s))))||(o=b(o,1),!e(p(o,1))))return S;i.$throw(!1)},{$$arity:-1,$$ret:i}):s!==S?a(this,"each",[],function(r){var n;return(n=l(arguments),e(t.yieldX(s,$(n)))&&(o=b(o,1),e(p(o,1))))?void i.$throw(!1):S},{$$arity:-1,$$ret:i}):a(this,"each",[],function(t){var r;return(r=l(arguments),e(u.$destructure(r))&&(o=b(o,1),e(p(o,1))))?void i.$throw(!1):S},{$$arity:-1,$$ret:i}),o["$=="](1)}catch(t){if(t===i)return t.$v;throw t}},-1),h(I,"$partition",function t(){var r=t.$$p||S;if(t.$$p=null,!(r!==S))return a(this,"enum_for",["partition"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this});var i=[],s=[];return this.$each.$$p=function(){var t=u.$destructure(arguments);e(n(r,t))?i.push(t):s.push(t)},this.$each(),[i,s]}),h(I,"$reject",function t(){var r=t.$$p||S;if(t.$$p=null,!(r!==S))return a(this,"enum_for",["reject"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this});var i=[];return this.$each.$$p=function(){var t=u.$destructure(arguments);e(n(r,t))||i.push(t)},this.$each(),i}),h(I,"$reverse_each",function t(){var e=t.$$p||S;if(t.$$p=null,!(e!==S))return a(this,"enum_for",["reverse_each"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this});var r=[];this.$each.$$p=function(){r.push(arguments)},this.$each();for(var n=r.length-1;n>=0;n--)i(e,r[n]);return r}),h(I,"$slice_before",function t(r){var i=t.$$p||S;return t.$$p=null,e(void 0===r&&i===S)&&_.$raise(C("ArgumentError"),"both pattern and block are given"),e(void 0!==r&&i!==S||arguments.length>1)&&_.$raise(C("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),a(C("Enumerator"),"new",[],function t(s){var o=null==t.$$s?this:t.$$s;null==s&&(s=S);var a=[];i!==S?void 0===r?o.$each.$$p=function(){var t=u.$destructure(arguments);e(n(i,t))&&a.length>0&&(s["$<<"](a),a=[]),a.push(t)}:o.$each.$$p=function(){var t=u.$destructure(arguments);e(i(t,r.$dup()))&&a.length>0&&(s["$<<"](a),a=[]),a.push(t)}:o.$each.$$p=function(){var t=u.$destructure(arguments);e(r["$==="](t))&&a.length>0&&(s["$<<"](a),a=[]),a.push(t)},o.$each(),a.length>0&&s["$<<"](a)},{$$s:this})},-1),h(I,"$slice_after",function t(r){var i=t.$$p||S;return t.$$p=null,e(void 0===r&&i===S)&&_.$raise(C("ArgumentError"),"both pattern and block are given"),e(void 0!==r&&i!==S||arguments.length>1)&&_.$raise(C("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),e(void 0!==r)&&(i=a(_,"proc",[],function(t){return null==t&&(t=S),r["$==="](t)})),a(C("Enumerator"),"new",[],function t(r){var s,o=null==t.$$s?this:t.$$s;null==r&&(r=S),o.$each.$$p=function(){var t=u.$destructure(arguments),o=n(i,t);null==s&&(s=[]),e(o)?(s.push(t),r.$yield(s),s=null):s.push(t)},o.$each(),null!=s&&r.$yield(s)},{$$s:this})},-1),h(I,"$slice_when",function t(){var r=t.$$p||S;return t.$$p=null,r!==S||_.$raise(C("ArgumentError"),"wrong number of arguments (0 for 1)"),a(C("Enumerator"),"new",[],function t(n){var s=null==t.$$s?this:t.$$s;null==n&&(n=S);var o=S,a=S;s.$each_cons.$$p=function(){var t=u.$destructure(arguments),s=t[0],l=t[1],$=i(r,[s,l]);a=l,o===S&&(o=[]),e($)?(o.push(s),n.$yield(o),o=[]):o.push(s)},s.$each_cons(2),o!==S&&(o.push(a),n.$yield(o))},{$$s:this})}),h(I,"$sort",function t(){var e=t.$$p||S,r=S;return t.$$p=null,r=this.$to_a(),e!==S||(e=w(function(t,e){return null==t&&(t=S),null==e&&(e=S),t["$<=>"](e)})),a(r,"sort",[],e.$to_proc())}),h(I,"$sort_by",function e(){var r=e.$$p||S,n=S;return(e.$$p=null,r!==S)?(n=a(this,"map",[],function(){var e=S;return e=u.$destructure(arguments),[t.yield1(r,e),e]}),a(n,"sort!",[],function(t,e){return null==t&&(t=S),null==e&&(e=S),t[0]["$<=>"](e[0])}),a(n,"map!",[],function(t){return null==t&&(t=S),t[1]})):a(this,"enum_for",["sort_by"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:this})}),h(I,"$sum",function r(n){var i=r.$$p||S,s=S,o=S;return r.$$p=null,null==n&&(n=0),s=n,o=0,a(this,"each",[],function(r){var n,a=S,c=S,h=S;return(n=l(arguments),a=i!==S?t.yieldX(i,$(n)):u.$destructure(n),A([C(C("Float"),"INFINITY"),C(C("Float"),"INFINITY")["$-@"]()]["$include?"](a))&&e(a["$respond_to?"]("-")))?(c=v(a,o),o=v(v(h=b(s,c),s),c),s=h):s=b(s,a)},-1),s},-1),h(I,"$take",function(t){return this.$first(t)}),h(I,"$take_while",function r(){try{var n=c("return"),i=r.$$p||S,s=S;if(r.$$p=null,!e(i))return this.$enum_for("take_while");return s=[],a(this,"each",[],function(r){var o,a=S;return o=l(arguments),a=u.$destructure(o),e(t.yield1(i,a))||n.$throw(s),s.push(a)},{$$arity:-1,$$ret:n})}catch(t){if(t===n)return t.$v;throw t}}),h(I,"$uniq",function r(){var n=r.$$p||S,i=S;return r.$$p=null,i=k([],{}),a(this,"each",[],function(r){var s,o,$=S,c=S;return(s=l(arguments),$=u.$destructure(s),c=n!==S?t.yield1(n,$):$,e(i["$key?"](c)))?S:(a(i,"[]=",o=[c,$]),o[o.length-1])},-1),i.$values()}),h(I,"$tally",function(t){var r=S;return(t&&t!==S&&s(t),r=a(a(this,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),e(t))?(a(r,"each",[],function(e,r){var n;return null==e&&(e=S),null==r&&(r=S),n=[e,b(t.$fetch(e,0),r)],a(t,"[]=",n),n[n.length-1]}),t):r},-1),h(I,"$to_h",function e(r){var n,i=e.$$p||S;if(e.$$p=null,n=l(arguments),i!==S)return a(a(this,"map",[],i.$to_proc()),"to_h",$(n));var s=k([],{});return this.$each.$$p=function(){var e,r,n=u.$destructure(arguments),i=u["$coerce_to?"](n,C("Array"),"to_ary");i.$$is_array||_.$raise(C("TypeError"),"wrong element type "+i.$class()+" (expected array)"),2!==i.length&&_.$raise(C("ArgumentError"),"wrong array length (expected 2, was "+i.$length()+")"),e=i[0],r=i[1],t.hash_put(s,e,r)},this.$each.apply(this,n),s},-1),h(I,"$to_set",function t(e,r){var n,i,s=t.$$p||S;return t.$$p=null,n=l(arguments),n.length>0&&(i=n.shift()),null==i&&(i=z("Set")),a(i,"new",[this].concat($(n)),s.$to_proc())},-1),h(I,"$zip",function t(e){var r;return t.$$p,t.$$p=null,r=l(arguments),a(this.$to_a(),"zip",$(r))},-1),E(I,"find","detect"),E(I,"filter","find_all"),E(I,"flat_map","collect_concat"),E(I,"map","collect"),E(I,"member?","include?"),E(I,"reduce","inject"),E(I,"select","find_all"),E(I,"to_a","entries")}(0,[])},Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(t){var e,r,n,i,s,o,a,l=t.klass,$=t.truthy,u=t.to_a,c=t.eqeq,h=t.Kernel,_=t.def,d=t.rb_gt,p=t.rb_lt,f=t.rb_le,m=t.rb_ge,g=t.rb_plus,b=t.rb_minus,v=t.eqeqeq,y=t.not,x=t.rb_times,k=t.rb_divide,w=t.alias,A=t.nil,E=t.$$$;return t.add_stubs("is_a?,==,raise,respond_to?,class,attr_reader,begin,end,exclude_end?,>,step,<,<=,>=,-@,_lesser_than_end?,<<,+,-,===,%,_greater_than_begin?,reverse,!,include?,*,to_i,abs,/,hash,inspect"),r=[e=l("::",null,"Enumerator")].concat([]),i=[n=l(e,e,"ArithmeticSequence")].concat(r),s=t.$r(i),(o=n.$$prototype).step_arg2=o.receiver_num=o.step_arg1=o.step=o.range=o.topfx=o.bypfx=o.creation_method=o.skipped_arg=A,t.prop(n.$$prototype,"$$is_arithmetic_seq",!0),a=1/0,_(n,"$initialize",function(e,r,n){var i,o=A;return(null==n&&(n="step"),this.creation_method=n,$(e["$is_a?"](E("Array")))?(i=[].concat(u(e)),this.step_arg1=null==i[0]?A:i[0],this.step_arg2=null==i[1]?A:i[1],this.topfx=null==i[2]?A:i[2],this.bypfx=null==i[3]?A:i[3],this.receiver_num=r,this.step=1,this.range=$(this.step_arg2)?(this.step=this.step_arg2,t.Range.$new(this.receiver_num,this.step_arg1,!1)):$(this.step_arg1)?t.Range.$new(this.receiver_num,this.step_arg1,!1):t.Range.$new(this.receiver_num,A,!1)):($(r)||(this.skipped_arg=!0),i=[e,$(o=r)?o:1],this.range=i[0],this.step=i[1]),this.object=this,c(this.step,0)&&h.$raise(s("ArgumentError"),"step can't be 0"),$(this.step["$respond_to?"]("to_int")))?A:h.$raise(s("ArgumentError"),"no implicit conversion of "+this.step.$class()+" into Integer")},-2),n.$attr_reader("step"),_(n,"$begin",function(){return this.range.$begin()}),_(n,"$end",function(){return this.range.$end()}),_(n,"$exclude_end?",function(){return this.range["$exclude_end?"]()}),_(n,"$_lesser_than_end?",function(t){var e=A,r=A;return(e=$(r=this.$end())?r:a,$(d(this.$step(),0)))?$(this["$exclude_end?"]())?p(t,e):f(t,e):$(this["$exclude_end?"]())?d(t,e):m(t,e)}),_(n,"$_greater_than_begin?",function(t){var e=A,r=A;return(e=$(r=this.$begin())?r:a["$-@"](),$(d(this.$step(),0)))?d(t,e):p(t,e)}),_(n,"$first",function(t){var e=A,r=A,n=A;if(e=$(r=this.$begin())?r:a["$-@"](),!$(t))return $(this["$_lesser_than_end?"](e))?e:A;for(n=[];$($(r=this["$_lesser_than_end?"](e))?d(t,0):r);)n["$<<"](e),e=g(e,this.$step()),t=b(t,1);return n},-1),_(n,"$each",function e(){var r=e.$$p||A,n=A,i=A;if(e.$$p=null,!(r!==A))return this;for(v(A,n=this.$begin())&&h.$raise(s("TypeError"),"nil can't be coerced into Integer"),i=$(n=this.$begin())?n:a["$-@"]();$(this["$_lesser_than_end?"](i));)t.yield1(r,i),i=g(i,this.$step());return this}),_(n,"$last",function(t){var e=A,r=A,n=A;if(v(a,e=this.$end())||v(a["$-@"](),e)?h.$raise(E("FloatDomainError"),this.$end()):v(A,e)&&h.$raise(E("RangeError"),"cannot get the last element of endless arithmetic sequence"),r=b(this.$end(),b(this.$end(),this.$begin())["$%"](this.$step())),$(this["$_lesser_than_end?"](r))||(r=b(r,this.$step())),!$(t))return $(this["$_greater_than_begin?"](r))?r:A;for(n=[];$($(e=this["$_greater_than_begin?"](r))?d(t,0):e);)n["$<<"](r),r=b(r,this.$step()),t=b(t,1);return n.$reverse()},-1),_(n,"$size",function(){var t=A,e=A;return(t=$(d(this.$step(),0))?1:-1,y(this["$_lesser_than_end?"](this.$begin())))?0:$([a["$-@"](),a]["$include?"](this.$step()))?1:$([x(a["$-@"](),t),A]["$include?"](this.$begin()))||$([x(a,t),A]["$include?"](this.$end()))?a:(e=b(this.$end(),b(this.$end(),this.$begin())["$%"](this.$step())),$(this["$_lesser_than_end?"](e))||(e=b(e,this.$step())),g(k(b(e,this.$begin()),this.$step()).$abs().$to_i(),1))}),_(n,"$==",function(t){var e=A,r=A,n=A,i=A;return $(e=$(r=$(n=$(i=this.$class()["$=="](t.$class()))?this.$begin()["$=="](t.$begin()):i)?this.$end()["$=="](t.$end()):n)?this.$step()["$=="](t.$step()):r)?this["$exclude_end?"]()["$=="](t["$exclude_end?"]()):e}),_(n,"$hash",function(){return[this.$begin(),this.$end(),this.$step(),this["$exclude_end?"]()].$hash()}),_(n,"$inspect",function(){var t=A;return $(this.receiver_num)?(t=$(this.step_arg2)?"("+this.topfx+this.step_arg1.$inspect()+", "+this.bypfx+this.step_arg2.$inspect()+")":$(this.step_arg1)?"("+this.topfx+this.step_arg1.$inspect()+")":A,"("+this.receiver_num.$inspect()+"."+this.creation_method+t+")"):(t=$(this.skipped_arg)?A:"("+this.step+")","(("+this.range.$inspect()+")."+this.creation_method+t+")")}),w(n,"===","=="),w(n,"eql?","==")},Opal.modules["corelib/enumerator/chain"]=function(t){var e,r,n,i=t.deny_frozen_access,s=t.klass,o=t.slice,a=t.def,l=t.send,$=t.to_a,u=t.truthy,c=t.rb_plus,h=t.thrower,_=t.nil,d=t.$$$;return t.add_stubs("to_enum,size,each,<<,to_proc,include?,+,reverse_each,respond_to?,rewind,inspect"),e=s("::",null,"Enumerator"),(n=(r=s(e,e,"Chain")).$$prototype).enums=n.iterated=_,a(r,"$initialize",function(t){var e;return e=o(arguments),i(this),this.enums=e,this.iterated=[],this.object=this},-1),a(r,"$each",function t(e){var r,n=t.$$p||_;return(t.$$p=null,r=o(arguments),n!==_)?(l(this.enums,"each",[],function t(e){var i=null==t.$$s?this:t.$$s;return null==i.iterated&&(i.iterated=_),null==e&&(e=_),i.iterated["$<<"](e),l(e,"each",$(r),n.$to_proc())},{$$s:this}),this):l(this,"to_enum",["each"].concat($(r)),function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this})},-1),a(r,"$size",function(t){try{var e,r=h("return"),n=_;return e=o(arguments),n=0,l(this.enums,"each",[],function(t){var i=_;return null==t&&(t=_),i=l(t,"size",$(e)),u([_,d(d("Float"),"INFINITY")]["$include?"](i))&&r.$throw(i),n=c(n,i)},{$$ret:r}),n}catch(t){if(t===r)return t.$v;throw t}},-1),a(r,"$rewind",function(){return l(this.iterated,"reverse_each",[],function(t){return(null==t&&(t=_),u(t["$respond_to?"]("rewind")))?t.$rewind():_}),this.iterated=[],this}),a(r,"$inspect",function(){return"#<Enumerator::Chain: "+this.enums.$inspect()+">"})},Opal.modules["corelib/enumerator/generator"]=function(t){var e,r,n,i,s,o=t.deny_frozen_access,a=t.klass,l=t.truthy,$=t.Kernel,u=t.def,c=t.slice,h=t.send,_=[],d=t.nil,p=t.$$$;return t.add_stubs("include,raise,new,to_proc"),r=(e=[a(_[0],null,"Enumerator")].concat(_))[0],i=[n=a(r,null,"Generator")].concat(e),s=t.$r(i),n.$$prototype.block=d,n.$include(p("Enumerable")),u(n,"$initialize",function t(){var e=t.$$p||d;return t.$$p=null,o(this),l(e)||$.$raise(p("LocalJumpError"),"no block given"),this.block=e}),u(n,"$each",function e(r){var n,i=e.$$p||d,o=d;e.$$p=null,n=c(arguments),o=h(s("Yielder"),"new",[],i.$to_proc());try{n.unshift(o),t.yieldX(this.block,n)}catch(t){if(t&&"breaker"==t.$thrower_type)return t.$v;throw t}return this},-1)},Opal.modules["corelib/enumerator/lazy"]=function(t){var e,r,n,i,s,o=t.truthy,a=t.coerce_to,l=t.yield1,$=t.yieldX,u=t.deny_frozen_access,c=t.klass,h=t.slice,_=t.send2,d=t.find_super,p=t.to_a,f=t.defs,m=t.Kernel,g=t.send,b=t.def,v=t.return_self,y=t.Opal,x=t.rb_lt,k=t.eqeqeq,w=t.rb_plus,A=t.alias,E=t.nil,S=t.$$$;return t.add_stubs("raise,each,new,enumerator_size,yield,respond_to?,try_convert,<,===,+,for,class,to_proc,destructure,inspect,to_a,find_all,collect_concat,collect,enum_for"),r=[e=c("::",null,"Enumerator")].concat([]),i=[n=c(e,e,"Lazy")].concat(r),s=t.$r(i),n.$$prototype.enumerator=E,c(n,S("Exception"),"StopLazyError"),f(n,"$for",function t(e,r){var n,i=t.$$p||E,s=E;return t.$$p=null,n=h(arguments,1),(s=_(this,d(this,"for",t,!1,!0),"for",[e].concat(p(n)),i)).enumerator=e,s},-2),b(n,"$initialize",function e(r,n){var i=e.$$p||E;return e.$$p=null,null==n&&(n=E),u(this),i!==E||m.$raise(S("ArgumentError"),"tried to call lazy new without a block"),this.enumerator=r,_(this,d(this,"initialize",e,!1,!0),"initialize",[n],function(e,n){var o;null==e&&(e=E),o=h(arguments,1);try{return g(r,"each",p(o),function(t){var r;r=h(arguments),r.unshift(e),$(i,r)},-1)}catch(e){if(t.rescue(e,[s("StopLazyError")]))try{return E}finally{t.pop_exception()}else throw e}},-2)},-2),b(n,"$lazy",v),b(n,"$collect",function t(){var e=t.$$p||E;return t.$$p=null,o(e)||m.$raise(S("ArgumentError"),"tried to call lazy map without a block"),g(s("Lazy"),"new",[this,this.$enumerator_size()],function(t,r){null==t&&(t=E),n=h(arguments,1);var n,i=$(e,n);t.$yield(i)},-2)}),b(n,"$collect_concat",function t(){var e=t.$$p||E;return t.$$p=null,o(e)||m.$raise(S("ArgumentError"),"tried to call lazy map without a block"),g(s("Lazy"),"new",[this,E],function(t,r){null==t&&(t=E),n=h(arguments,1);var n,i=$(e,n);i["$respond_to?"]("force")&&i["$respond_to?"]("each")?g(i,"each",[],function(e){return null==e&&(e=E),t.$yield(e)}):y.$try_convert(i,S("Array"),"to_ary")===E?t.$yield(i):g(i,"each",[],function(e){return null==e&&(e=E),t.$yield(e)})},-2)}),b(n,"$drop",function(t){var e=E,r=E,n=E;return o(x(t=a(t,S("Integer"),"to_int"),0))&&m.$raise(S("ArgumentError"),"attempt to drop negative size"),e=this.$enumerator_size(),r=k(S("Integer"),e)&&o(x(t,e))?t:e,n=0,g(s("Lazy"),"new",[this,r],function(e,r){var i;return(null==e&&(e=E),i=h(arguments,1),o(x(n,t)))?n=w(n,1):g(e,"yield",p(i))},-2)}),b(n,"$drop_while",function t(){var e=t.$$p||E,r=E;return t.$$p=null,o(e)||m.$raise(S("ArgumentError"),"tried to call lazy drop_while without a block"),r=!0,g(s("Lazy"),"new",[this,E],function(t,n){var i;if(null==t&&(t=E),i=h(arguments,1),!o(r))return g(t,"yield",p(i));o($(e,i))||(r=!1,g(t,"yield",p(i)))},-2)}),b(n,"$enum_for",function t(e,r){var n,i,s=t.$$p||E;return t.$$p=null,n=h(arguments),n.length>0&&(i=n.shift()),null==i&&(i="each"),g(this.$class(),"for",[this,i].concat(p(n)),s.$to_proc())},-1),b(n,"$find_all",function t(){var e=t.$$p||E;return t.$$p=null,o(e)||m.$raise(S("ArgumentError"),"tried to call lazy select without a block"),g(s("Lazy"),"new",[this,E],function(t,r){var n;null==t&&(t=E),n=h(arguments,1),o($(e,n))&&g(t,"yield",p(n))},-2)}),b(n,"$grep",function t(e){var r=t.$$p||E;return(t.$$p=null,o(r))?g(s("Lazy"),"new",[this,E],function(t,n){null==t&&(t=E),i=h(arguments,1);var i,s=y.$destructure(i),a=e["$==="](s);o(a)&&(a=l(r,s),t.$yield(l(r,s)))},-2):g(s("Lazy"),"new",[this,E],function(t,r){null==t&&(t=E),n=h(arguments,1);var n,i=y.$destructure(n);o(e["$==="](i))&&t.$yield(i)},-2)}),b(n,"$reject",function t(){var e=t.$$p||E;return t.$$p=null,o(e)||m.$raise(S("ArgumentError"),"tried to call lazy reject without a block"),g(s("Lazy"),"new",[this,E],function(t,r){var n;null==t&&(t=E),n=h(arguments,1),o($(e,n))||g(t,"yield",p(n))},-2)}),b(n,"$take",function(t){var e=E,r=E,n=E;return o(x(t=a(t,S("Integer"),"to_int"),0))&&m.$raise(S("ArgumentError"),"attempt to take negative size"),e=this.$enumerator_size(),r=k(S("Integer"),e)&&o(x(t,e))?t:e,n=0,g(s("Lazy"),"new",[this,r],function(e,r){var i;return(null==e&&(e=E),i=h(arguments,1),o(x(n,t)))?(g(e,"yield",p(i)),n=w(n,1)):m.$raise(s("StopLazyError"))},-2)}),b(n,"$take_while",function t(){var e=t.$$p||E;return t.$$p=null,o(e)||m.$raise(S("ArgumentError"),"tried to call lazy take_while without a block"),g(s("Lazy"),"new",[this,E],function(t,r){var n;null==t&&(t=E),n=h(arguments,1),o($(e,n))?g(t,"yield",p(n)):m.$raise(s("StopLazyError"))},-2)}),b(n,"$inspect",function(){return"#<"+this.$class()+": "+this.enumerator.$inspect()+">"}),A(n,"force","to_a"),A(n,"filter","find_all"),A(n,"flat_map","collect_concat"),A(n,"map","collect"),A(n,"select","find_all"),A(n,"to_enum","enum_for")},Opal.modules["corelib/enumerator/yielder"]=function(t){var e,r,n=t.klass,i=t.def,s=t.slice,o=t.send,a=t.to_a,l=[],$=t.nil;return t.add_stubs("yield,proc"),e=[n(l[0],null,"Enumerator")].concat(l)[0],(r=n(e,null,"Yielder")).$$prototype.block=$,i(r,"$initialize",function t(){var e=t.$$p||$;return t.$$p=null,this.block=e,this}),i(r,"$yield",function(e){r=s(arguments);var r,n=t.yieldX(this.block,r);if(n&&"break"==n.$thrower_type)throw n;return n},-1),i(r,"$<<",function(t){return this.$yield(t),this}),i(r,"$to_proc",function(){return o(this,"proc",[],function t(e){var r,n=null==t.$$s?this:t.$$s;return r=s(arguments),o(n,"yield",a(r))},{$$arity:-1,$$s:this})})},Opal.modules["corelib/enumerator"]=function(t){var e,r,n,i,s=t.slice,o=t.coerce_to,a=t.deny_frozen_access,l=t.klass,$=t.defs,u=t.truthy,c=t.send,h=t.not,_=t.def,d=t.rb_plus,p=t.to_a,f=t.Opal,m=t.send2,g=t.find_super,b=t.rb_ge,v=t.Kernel,y=t.rb_le,x=t.alias,k=t.top,w=t.nil,A=t.$$$;return t.add_stubs("require,include,allocate,new,to_proc,!,respond_to?,empty?,nil?,+,class,__send__,call,enum_for,size,destructure,map,>=,length,raise,[],peek_values,<=,next_values,inspect,any?,each_with_object,autoload"),k.$require("corelib/enumerable"),r=[e=l("::",null,"Enumerator")].concat([]),n=t.$r(r),(i=e.$$prototype).size=i.args=i.object=i.method=i.values=i.cursor=w,e.$include(A("Enumerable")),e.$$prototype.$$is_enumerator=!0,$(e,"$for",function t(e,r,n){var i,o,a=t.$$p||w;t.$$p=null,i=s(arguments,1),i.length>0&&(o=i.shift()),null==o&&(o="each");var l=this.$allocate();return l.object=e,l.size=a,l.method=o,l.args=i,l.cursor=0,l},-2),_(e,"$initialize",function t(e){var r=t.$$p||w;return(t.$$p=null,s(arguments),a(this),this.cursor=0,u(r))?(this.object=c(n("Generator"),"new",[],r.$to_proc()),this.method="each",this.args=[],this.size=arguments[0]||w,u(this.size)&&h(this.size["$respond_to?"]("call")))?this.size=o(this.size,A("Integer"),"to_int"):w:(this.object=arguments[0],this.method=arguments[1]||"each",this.args=s(arguments,2),this.size=w)},-1),_(e,"$each",function t(e){var r,n,i=t.$$p||w;return(t.$$p=null,r=s(arguments),n=r,u(i["$nil?"]())&&u(n["$empty?"]()))?this:(n=d(this.args,n),u(i["$nil?"]()))?c(this.$class(),"new",[this.object,this.method].concat(p(n))):c(this.object,"__send__",[this.method].concat(p(n)),i.$to_proc())},-1),_(e,"$size",function(){return u(this.size["$respond_to?"]("call"))?c(this.size,"call",p(this.args)):this.size}),_(e,"$with_index",function t(e){var r=t.$$p||w;if(t.$$p=null,null==e&&(e=0),e=u(e)?o(e,A("Integer"),"to_int"):0,!u(r))return c(this,"enum_for",["with_index",e],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});var n=e;return this.$each.$$p=function(){var t=f.$destructure(arguments),e=r(t,n);return n++,e},this.$each()},-1),_(e,"$each_with_index",function t(){var e=t.$$p||w;return(t.$$p=null,e!==w)?(m(this,g(this,"each_with_index",t,!1,!0),"each_with_index",[],e),this.object):c(this,"enum_for",["each_with_index"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this})}),_(e,"$rewind",function(){return this.cursor=0,this}),_(e,"$peek_values",function(){var t=w;return this.values=u(t=this.values)?t:c(this,"map",[],function(t){return s(arguments)},-1),u(b(this.cursor,this.values.$length()))&&v.$raise(A("StopIteration"),"iteration reached an end"),this.values["$[]"](this.cursor)}),_(e,"$peek",function(){var t=w;return u(y((t=this.$peek_values()).$length(),1))?t["$[]"](0):t}),_(e,"$next_values",function(){var t=w;return t=this.$peek_values(),this.cursor=d(this.cursor,1),t}),_(e,"$next",function(){var t=w;return u(y((t=this.$next_values()).$length(),1))?t["$[]"](0):t}),_(e,"$feed",function(t){return this.$raise(n("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),_(e,"$+",function(t){return A(A("Enumerator"),"Chain").$new(this,t)}),_(e,"$inspect",function(){var t=w;return t="#<"+this.$class()+": "+this.object.$inspect()+":"+this.method,u(this.args["$any?"]())&&(t=d(t,"("+this.args.$inspect()["$[]"](A("Range").$new(1,-2))+")")),d(t,">")}),x(e,"with_object","each_with_object"),e.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),e.$autoload("Chain","corelib/enumerator/chain"),e.$autoload("Generator","corelib/enumerator/generator"),e.$autoload("Lazy","corelib/enumerator/lazy"),e.$autoload("Yielder","corelib/enumerator/yielder")},Opal.modules["corelib/numeric"]=function(t){var e,r=t.klass,n=t.truthy,i=t.Kernel,s=t.def,o=t.to_ary,a=t.return_self,l=t.rb_minus,$=t.rb_times,u=t.rb_lt,c=t.eqeq,h=t.rb_divide,_=t.return_val,d=t.Opal,p=t.slice,f=t.extract_kwargs,m=t.ensure_kwargs,g=t.not,b=t.send,v=t.rb_ge,y=t.rb_le,x=t.rb_plus,k=t.rb_gt,w=t.alias,A=t.top,E=t.nil,S=t.$$$;return t.add_stubs("require,include,instance_of?,class,Float,respond_to?,coerce,__send__,raise,equal?,-,*,div,<,-@,ceil,to_f,denominator,to_r,==,floor,/,%,Complex,zero?,numerator,abs,arg,coerce_to!,round,<=>,compare,is_a?,!,new,enum_for,to_proc,negative?,>=,<=,+,to_i,truncate,>,angle,conj,imag,rect"),A.$require("corelib/comparable"),(e=r("::",null,"Numeric")).$include(S("Comparable")),s(e,"$coerce",function(t){return n(t["$instance_of?"](this.$class()))?[t,this]:[i.$Float(t),i.$Float(this)]}),s(e,"$__coerced__",function(t,e){var r,s=E,a=E;if(n(e["$respond_to?"]("coerce")))return s=null==(r=o(e.$coerce(this)))[0]?E:r[0],a=null==r[1]?E:r[1],s.$__send__(t,a);switch(t){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return i.$raise(S("TypeError"),""+e.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return i.$raise(S("ArgumentError"),"comparison of "+this.$class()+" with "+e.$class()+" failed");default:return E}}),s(e,"$<=>",function(t){return n(this["$equal?"](t))?0:E}),s(e,"$+@",a),s(e,"$-@",function(){return l(0,this)}),s(e,"$%",function(t){return l(this,$(t,this.$div(t)))}),s(e,"$abs",function(){return u(this,0)?this["$-@"]():this}),s(e,"$abs2",function(){return $(this,this)}),s(e,"$angle",function(){return u(this,0)?S(S("Math"),"PI"):0}),s(e,"$ceil",function(t){return null==t&&(t=0),this.$to_f().$ceil(t)},-1),s(e,"$conj",a),s(e,"$denominator",function(){return this.$to_r().$denominator()}),s(e,"$div",function(t){return c(t,0)&&i.$raise(S("ZeroDivisionError"),"divided by o"),h(this,t).$floor()}),s(e,"$divmod",function(t){return[this.$div(t),this["$%"](t)]}),s(e,"$fdiv",function(t){return h(this.$to_f(),t)}),s(e,"$floor",function(t){return null==t&&(t=0),this.$to_f().$floor(t)},-1),s(e,"$i",function(){return i.$Complex(0,this)}),s(e,"$imag",_(0)),s(e,"$integer?",_(!1)),s(e,"$nonzero?",function(){return n(this["$zero?"]())?E:this}),s(e,"$numerator",function(){return this.$to_r().$numerator()}),s(e,"$polar",function(){return[this.$abs(),this.$arg()]}),s(e,"$quo",function(t){return h(d["$coerce_to!"](this,S("Rational"),"to_r"),t)}),s(e,"$real",a),s(e,"$real?",_(!0)),s(e,"$rect",function(){return[this,0]}),s(e,"$round",function(t){return this.$to_f().$round(t)},-1),s(e,"$step",function e(r,s,o){var a,l,$,u,c,h,_=e.$$p||E,k=this,w=E;function A(){u===E&&i.$raise(S("TypeError"),"step must be numeric"),null!=u&&u["$=="](0)&&i.$raise(S("ArgumentError"),"step can't be 0"),(u===E||null==u)&&(u=1);var t=u["$<=>"](0);t===E&&i.$raise(S("ArgumentError"),"0 can't be coerced into "+u.$class()),($===E||null==$)&&($=t>0?S(S("Float"),"INFINITY"):S(S("Float"),"INFINITY")["$-@"]()),d.$compare(k,$)}function C(){if(u>0&&k>$||u<0&&k<$)return 0;if(u===1/0||u===-1/0)return 1;var t=Math.abs,e=Math.floor,r=(t(k)+t($)+t($-k))/t(u)*S(S("Float"),"EPSILON");return r===1/0||r===-1/0?0:(r>.5&&(r=.5),e(($-k)/u+r)+1)}if(e.$$p=null,a=p(arguments),l=m(l=f(a)),a.length>0&&($=a.shift()),a.length>0&&(u=a.shift()),c=l.$$smap.to,h=l.$$smap.by,void 0!==$&&void 0!==c&&i.$raise(S("ArgumentError"),"to is given twice"),void 0!==u&&void 0!==h&&i.$raise(S("ArgumentError"),"step is given twice"),void 0!==c&&($=c),void 0!==h&&(u=h),void 0===$&&($=E),!(_!==E))return(g($)||n($["$is_a?"](S("Numeric"))))&&(g(u)||n(u["$is_a?"](S("Numeric"))))?S(S("Enumerator"),"ArithmeticSequence").$new([$,u,n(c)?"to: ":E,n(h)?"by: ":E],k):b(k,"enum_for",["step",$,u],(function(){if(A(),0===u)return 1/0;if(u%1!=0)return C();if(u>0&&k>$||u<0&&k<$)return 0;var t=Math.abs;return(0,Math.ceil)((t(k-$)+1)/t(u))}).$to_proc());A();var O=u["$negative?"](),R=u["$=="](0)||$===1/0&&!O||$===-1/0&&O;if(k.$$is_number&&u.$$is_number&&$.$$is_number){if(k%1==0&&(R||$%1==0)&&u%1==0){var I=k;if(R)for(;;I+=u)_(I);else if(O)for(;I>=$;I+=u)_(I);else for(;I<=$;I+=u)_(I);return k}var T=k.$to_f().valueOf();u=u.$to_f().valueOf(),$=$.$to_f().valueOf();var z=C();if(isFinite(u)){if(0===u)for(;;)_(T);else for(var F=0;F<z;F++){var N=F*u+k;(u>=0?$<N:$>N)&&(N=$),_(N)}}else 0!==z&&_(T);return k}for(w=k;n(O?v(w,$):y(w,$));)t.yield1(_,w),w=x(w,u)},-1),s(e,"$to_c",function(){return i.$Complex(this,0)}),s(e,"$to_int",function(){return this.$to_i()}),s(e,"$truncate",function(t){return null==t&&(t=0),this.$to_f().$truncate(t)},-1),s(e,"$zero?",function(){return this["$=="](0)}),s(e,"$positive?",function(){return k(this,0)}),s(e,"$negative?",function(){return u(this,0)}),s(e,"$dup",a),s(e,"$clone",function(t){return(t=m(t)).$$smap.freeze,this},-1),s(e,"$finite?",_(!0)),s(e,"$infinite?",_(E)),w(e,"arg","angle"),w(e,"conjugate","conj"),w(e,"imaginary","imag"),w(e,"magnitude","abs"),w(e,"modulo","%"),w(e,"phase","arg"),w(e,"rectangular","rect")},Opal.modules["corelib/array"]=function(t){var e=t.truthy,r=t.falsy,n=t.hash_ids,i=t.yield1,s=t.hash_get,o=t.hash_put,a=t.hash_delete,l=t.coerce_to,$=t.respond_to,u=t.deny_frozen_access,c=t.freeze,h=t.klass,_=t.slice,d=t.defs,p=t.Kernel,f=t.def,m=t.Opal,g=t.eqeqeq,b=t.hash2,v=t.send2,y=t.find_super,x=t.send,k=t.rb_gt,w=t.rb_times,A=t.eqeq,E=t.rb_minus,S=t.to_a,C=t.to_ary,O=t.gvars,R=t.rb_ge,I=t.assign_ivar,T=t.rb_lt,z=t.return_self,F=t.neqeq,N=t.alias,L=t.top,D=t.nil,q=t.$$$;return t.add_stubs("require,include,to_a,warn,raise,replace,respond_to?,to_ary,coerce_to?,===,join,to_str,hash,<=>,==,object_id,inspect,enum_for,class,bsearch_index,to_proc,nil?,coerce_to!,>,*,enumerator_size,empty?,size,map,equal?,dup,each,reduce,-,[],dig,eql?,length,exclude_end?,flatten,frozen?,__id__,&,!,intersection,to_s,new,item,max,min,>=,**,delete_if,reverse,rotate,rand,at,keep_if,shuffle!,<,sort,sort_by,!=,times,[]=,<<,uniq,|,values,is_a?,end,begin,upto,reject,push,select,select!,collect,collect!,unshift,pristine,singleton_class"),L.$require("corelib/enumerable"),L.$require("corelib/numeric"),function(L,B,M){var j,P=h("::",B,"Array"),U=[P].concat(M),H=t.$r(U);function Y(t,e,r){for(var n,s=null,o=Array(t.length),a=0,l=0,$=t.length;a<$;a++){if(!s)try{n=i(r,t[a])}catch(t){s=t}(s||e(n))&&(o[l]=t[a],l+=1)}if(l!==a&&(t.splice.apply(t,[0,o.length].concat(o)),t.splice(l,o.length)),s)throw s}function G(e,r){var n,i,s,o=e.length;return(n=r.excl,i=r.begin===D?0:l(r.begin,t.Integer,"to_int"),s=r.end===D?-1:l(r.end,t.Integer,"to_int"),i<0&&(i+=o)<0)?D:(r.excl_rev&&r.begin!==D&&(i+=1),i>o)?D:s<0&&(s+=o)<0?[]:(n&&r.end!==D||(s+=1),e.slice(i,s))}function W(t,e){return t===e||0===e?1:e>0&&t>e?W(t-1,e-1)+W(t-1,e):0}P.$include(q("Enumerable")),t.prop(P.$$prototype,"$$is_array",!0),d(P,"$[]",function(e){var r;return r=_(arguments),this.$$name===t.Array?r:this.$allocate().$replace(r.$to_a())},-1),f(P,"$initialize",function t(e,r){var n,i,s=t.$$p||D;if(t.$$p=null,null==e&&(e=D),null==r&&(r=D),u(this),r!==D&&s!==D&&p.$warn("warning: block supersedes default value argument"),e>q(q("Integer"),"MAX")&&p.$raise(q("ArgumentError"),"array size too big"),arguments.length>2&&p.$raise(q("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),0==arguments.length)return this.splice(0,this.length),this;if(1==arguments.length){if(e.$$is_array)return this.$replace(e.$to_a()),this;if(e["$respond_to?"]("to_ary"))return this.$replace(e.$to_ary()),this}if((e=l(e,q("Integer"),"to_int"))<0&&p.$raise(q("ArgumentError"),"negative array size"),this.splice(0,this.length),s===D)for(n=0;n<e;n++)this.push(r);else for(n=0;n<e;n++)i=s(n),this[n]=i;return this},-1),d(P,"$try_convert",function(t){return m["$coerce_to?"](t,q("Array"),"to_ary")}),f(P,"$&",function(t){t=g(q("Array"),t)?t.$to_a():l(t,q("Array"),"to_ary").$to_a();var e,r,n,i=[],s=b([],{});for(e=0,r=t.length;e<r;e++)o(s,t[e],!0);for(e=0,r=this.length;e<r;e++)void 0!==a(s,n=this[e])&&i.push(n);return i}),f(P,"$|",function(t){t=g(q("Array"),t)?t.$to_a():l(t,q("Array"),"to_ary").$to_a();var e,r,n=b([],{});for(e=0,r=this.length;e<r;e++)o(n,this[e],!0);for(e=0,r=t.length;e<r;e++)o(n,t[e],!0);return n.$keys()}),f(P,"$*",function(t){if(e(t["$respond_to?"]("to_str")))return this.$join(t.$to_str());e((t=l(t,q("Integer"),"to_int"))<0)&&p.$raise(q("ArgumentError"),"negative argument");for(var r=[],n=this.$to_a(),i=0;i<t;i++)r=r.concat(n);return r}),f(P,"$+",function(t){return t=g(q("Array"),t)?t.$to_a():l(t,q("Array"),"to_ary").$to_a(),this.concat(t)}),f(P,"$-",function(t){if(t=g(q("Array"),t)?t.$to_a():l(t,q("Array"),"to_ary").$to_a(),e(0===this.length))return[];if(e(0===t.length))return this.slice();var r,n,i,a=[],$=b([],{});for(r=0,n=t.length;r<n;r++)o($,t[r],!0);for(r=0,n=this.length;r<n;r++)void 0===s($,i=this[r])&&a.push(i);return a}),f(P,"$<<",function(t){return u(this),this.push(t),this}),f(P,"$<=>",function(t){if(g(q("Array"),t))t=t.$to_a();else{if(!e(t["$respond_to?"]("to_ary")))return D;t=t.$to_ary().$to_a()}if(this.$hash()===t.$hash())return 0;for(var r=Math.min(this.length,t.length),n=0;n<r;n++){var i=this[n]["$<=>"](t[n]);if(0!==i)return i}return this.length["$<=>"](t.length)}),f(P,"$==",function(t){var e={};return function t(r,n){var i,s,o,a;if(r===n)return!0;if(!n.$$is_array)return!!$(n,"$to_ary")&&n["$=="](r);if(r.$$constructor!==Array&&(r=r.$to_a()),n.$$constructor!==Array&&(n=n.$to_a()),r.length!==n.length)return!1;for(i=0,e[r.$object_id()]=!0,s=r.length;i<s;i++)if(o=r[i],a=n[i],o.$$is_array){if(a.$$is_array&&a.length!==o.length||!e.hasOwnProperty(o.$object_id())&&!t(o,a))return!1}else if(!o["$=="](a))return!1;return!0}(this,t)}),f(P,"$[]",function(e,r){var n,i,s;return e.$$is_range?G(this,e):e.$$is_arithmetic_seq?function(t,e){var r,n=[],i=0;for(r=e.step<0?G(t,{begin:e.range.end,end:e.range.begin,excl:!1,excl_rev:e.range.excl}).$reverse():G(t,e.range);i<r.length;)n.push(r[i]),i+=Math.abs(e.step);return n}(this,e):(n=e,i=r,s=this.length,(n=l(n,t.Integer,"to_int"))<0&&(n+=s)<0?D:void 0===i?n>=s||n<0?D:this[n]:(i=l(i,t.Integer,"to_int"))<0||n>s||n<0?D:this.slice(n,n+i))},-2),f(P,"$[]=",function(e,r,n){var i,s=D,o=D;u(this),s=D;var a,$=this.length;if(e.$$is_range){s=r.$$is_array?r.$to_a():r["$respond_to?"]("to_ary")?r.$to_ary().$to_a():[r];var c=e.excl,h=e.begin===D?0:l(e.begin,t.Integer,"to_int"),_=e.end===D?-1:l(e.end,t.Integer,"to_int");if(h<0&&(h+=$)<0&&p.$raise(q("RangeError"),""+e.$inspect()+" out of range"),_<0&&(_+=$),c&&e.end!==D||(_+=1),h>$)for(a=$;a<h;a++)this[a]=D;return _<0?this.splice.apply(this,[h,0].concat(s)):this.splice.apply(this,[h,_-h].concat(s)),r}if(void 0===n?o=1:(o=r,s=(r=n).$$is_array?r.$to_a():r["$respond_to?"]("to_ary")?r.$to_ary().$to_a():[r]),e=l(e,q("Integer"),"to_int"),o=l(o,q("Integer"),"to_int"),e<0&&(i=e,(e+=$)<0&&p.$raise(q("IndexError"),"index "+i+" too small for array; minimum "+-this.length)),o<0&&p.$raise(q("IndexError"),"negative length ("+o+")"),e>$)for(a=$;a<e;a++)this[a]=D;return void 0===n?this[e]=r:this.splice.apply(this,[e,o].concat(s)),r},-3),f(P,"$any?",function t(e){var r=t.$$p||D;return t.$$p=null,0!==this.length&&v(this,y(this,"any?",t,!1,!0),"any?",[e],r)},-1),f(P,"$assoc",function(t){for(var e,r=0,n=this.length;r<n;r++)if((e=this[r]).length&&e[0]["$=="](t))return e;return D}),f(P,"$at",function(t){return((t=l(t,q("Integer"),"to_int"))<0&&(t+=this.length),t<0||t>=this.length)?D:this[t]}),f(P,"$bsearch_index",function t(){var e=t.$$p||D;if(t.$$p=null,!(e!==D))return this.$enum_for("bsearch_index");for(var r,n,s=0,o=this.length,a=!1,l=D;s<o;){if(!0===(n=i(e,this[r=s+Math.floor((o-s)/2)])))l=r,a=!0;else if(!1===n||n===D)a=!1;else if(n.$$is_number){if(0===n)return r;a=n<0}else p.$raise(q("TypeError"),"wrong argument type "+n.$class()+" (must be numeric, true, false or nil)");a?o=r:s=r+1}return l}),f(P,"$bsearch",function t(){var e=t.$$p||D,r=D;return(t.$$p=null,e!==D)?null!=(r=x(this,"bsearch_index",[],e.$to_proc()))&&r.$$is_number?this[r]:r:this.$enum_for("bsearch")}),f(P,"$cycle",function t(r){var n,s,o=t.$$p||D;if(t.$$p=null,null==r&&(r=D),!(o!==D))return x(this,"enum_for",["cycle",r],function t(){var n=null==t.$$s?this:t.$$s;return e(r["$nil?"]())?q(q("Float"),"INFINITY"):e(k(r=m["$coerce_to!"](r,q("Integer"),"to_int"),0))?w(n.$enumerator_size(),r):0},{$$s:this});if(e(this["$empty?"]())||A(r,0))return D;if(r===D)for(;;)for(n=0,s=this.length;n<s;n++)i(o,this[n]);else{if((r=m["$coerce_to!"](r,q("Integer"),"to_int"))<=0)return this;for(;r>0;){for(n=0,s=this.length;n<s;n++)i(o,this[n]);r--}}return this},-1),f(P,"$clear",function(){return u(this),this.splice(0,this.length),this}),f(P,"$count",function t(r){var n=t.$$p||D;return(t.$$p=null,e(void 0!==r)||e(n))?v(this,y(this,"count",t,!1,!0),"count",[r],n):this.$size()},-1),f(P,"$initialize_copy",function(t){return this.$replace(t)}),f(P,"$collect",function t(){var e=t.$$p||D;if(t.$$p=null,!(e!==D))return x(this,"enum_for",["collect"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r=[],n=0,s=this.length;n<s;n++){var o=i(e,this[n]);r.push(o)}return r}),f(P,"$collect!",function t(){var e=t.$$p||D;if(t.$$p=null,!(e!==D))return x(this,"enum_for",["collect!"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});u(this);for(var r=0,n=this.length;r<n;r++){var s=i(e,this[r]);this[r]=s}return this}),f(P,"$combination",function e(r){var n,i,s,o,a,l,$,u=e.$$p||D,c=D;if(e.$$p=null,c=m["$coerce_to!"](r,q("Integer"),"to_int"),!(u!==D))return x(this,"enum_for",["combination",c],function t(){return W((null==t.$$s?this:t.$$s).length,c)},{$$s:this});if(0===c)t.yield1(u,[]);else if(1===c)for(n=0,i=this.length;n<i;n++)t.yield1(u,[this[n]]);else if(c===this.length)t.yield1(u,this.slice());else if(c>=0&&c<this.length){for(n=0,s=[];n<=c+1;n++)s.push(0);for(o=[],a=0,l=!1,s[0]=-1;!l;){for(o[a]=this[s[a+1]];a<c-1;)$=s[++a+1]=s[a]+1,o[a]=this[$];t.yield1(u,o.slice()),a++;do l=0===a,s[a]++,a--;while(s[a+1]+c===this.length+a+1)}}return this}),f(P,"$repeated_combination",function e(r){var n=e.$$p||D,i=D;return(e.$$p=null,i=m["$coerce_to!"](r,q("Integer"),"to_int"),n!==D)?(i>=0&&function e(r,i,s,o){if(s.length==r){var a=s.slice();t.yield1(n,a);return}for(var l=i;l<o.length;l++)s.push(o[l]),e(r,l,s,o),s.pop()}(i,0,[],this),this):x(this,"enum_for",["repeated_combination",i],function t(){return W((null==t.$$s?this:t.$$s).length+i-1,i)},{$$s:this})}),f(P,"$compact",function(){for(var t,e=[],r=0,n=this.length;r<n;r++)(t=this[r])!==D&&e.push(t);return e}),f(P,"$compact!",function(){u(this);for(var t=this.length,e=0,r=this.length;e<r;e++)this[e]===D&&(this.splice(e,1),r--,e--);return this.length===t?D:this}),f(P,"$concat",function(t){var r,n;return r=_(arguments),n=r,u(this),n=x(n,"map",[],function t(r){var n=null==t.$$s?this:t.$$s;return null==r&&(r=D),e((r=g(q("Array"),r)?r.$to_a():l(r,q("Array"),"to_ary").$to_a())["$equal?"](n))&&(r=r.$dup()),r},{$$s:this}),x(n,"each",[],function t(e){var r=null==t.$$s?this:t.$$s;null==e&&(e=D);for(var n=0,i=e.length;n<i;n++)r.push(e[n])},{$$s:this}),this},-1),f(P,"$delete",function e(r){var n=e.$$p||D;e.$$p=null;for(var i=this.length,s=0,o=i;s<o;s++)this[s]["$=="](r)&&(u(this),this.splice(s,1),o--,s--);return this.length===i?n!==D?t.yieldX(n,[]):D:r}),f(P,"$delete_at",function(t){if(u(this),(t=l(t,q("Integer"),"to_int"))<0&&(t+=this.length),t<0||t>=this.length)return D;var e=this[t];return this.splice(t,1),e}),f(P,"$delete_if",function t(){var e=t.$$p||D;return(t.$$p=null,e!==D)?(u(this),Y(this,r,e),this):x(this,"enum_for",["delete_if"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this})}),f(P,"$difference",function(t){var e;return e=_(arguments),x(e,"reduce",[this.$to_a().$dup()],function(t,e){return null==t&&(t=D),null==e&&(e=D),E(t,e)})},-1),f(P,"$dig",function(t,r){var n,i=D;return(n=_(arguments,1),(i=this["$[]"](t))===D||0===n.length)?i:(e(i["$respond_to?"]("dig"))||p.$raise(q("TypeError"),""+i.$class()+" does not have #dig method"),x(i,"dig",S(n)))},-2),f(P,"$drop",function(t){return(t=l(t,q("Integer"),"to_int"))<0&&p.$raise(q("ArgumentError")),this.slice(t)}),f(P,"$dup",function e(){var r=e.$$p||D;return(e.$$p=null,this.$$class===t.Array&&this.$$class.$allocate.$$pristine&&this.$copy_instance_variables.$$pristine&&this.$initialize_dup.$$pristine)?this.slice(0):v(this,y(this,"dup",e,!1,!0),"dup",[],r)}),f(P,"$each",function t(){var e=t.$$p||D;if(t.$$p=null,!(e!==D))return x(this,"enum_for",["each"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r=0,n=this.length;r<n;r++)i(e,this[r]);return this}),f(P,"$each_index",function t(){var e=t.$$p||D;if(t.$$p=null,!(e!==D))return x(this,"enum_for",["each_index"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r=0,n=this.length;r<n;r++)i(e,r);return this}),f(P,"$empty?",function(){return 0===this.length}),f(P,"$eql?",function(t){var e={};return function t(r,n){var i,s,o,a;if(!n.$$is_array||(n=n.$to_a(),r.length!==n.length))return!1;for(i=0,e[r.$object_id()]=!0,s=r.length;i<s;i++)if(o=r[i],a=n[i],o.$$is_array){if(a.$$is_array&&a.length!==o.length||!e.hasOwnProperty(o.$object_id())&&!t(o,a))return!1}else if(!o["$eql?"](a))return!1;return!0}(this,t)}),f(P,"$fetch",function t(e,r){var n=t.$$p||D;t.$$p=null;var i=e;return((e=l(e,q("Integer"),"to_int"))<0&&(e+=this.length),e>=0&&e<this.length)?this[e]:(n!==D&&null!=r&&this.$warn("warning: block supersedes default value argument"),n!==D)?n(i):null!=r?r:void(0===this.length?p.$raise(q("IndexError"),"index "+i+" outside of array bounds: 0...0"):p.$raise(q("IndexError"),"index "+i+" outside of array bounds: -"+this.length+"..."+this.length))},-2),f(P,"$fill",function t(r){var n,i,s,o,a,$=t.$$p||D,c=D,h=D,d=D,f=D,m=D;if(t.$$p=null,s=_(arguments),u(this),e($)?(e(s.length>2)&&p.$raise(q("ArgumentError"),"wrong number of arguments ("+s.$length()+" for 0..2)"),c=null==(o=C(a=s))[0]?D:o[0],h=null==o[1]?D:o[1]):(e(0==s.length)?p.$raise(q("ArgumentError"),"wrong number of arguments (0 for 1..3)"):e(s.length>3)&&p.$raise(q("ArgumentError"),"wrong number of arguments ("+s.$length()+" for 1..3)"),d=null==(o=C(a=s))[0]?D:o[0],c=null==o[1]?D:o[1],h=null==o[2]?D:o[2]),g(q("Range"),c)){if(e(h)&&p.$raise(q("TypeError"),"length invalid with range"),e((f=c.begin===D?0:l(c.begin,q("Integer"),"to_int"))<0)&&(f+=this.length),e(f<0)&&p.$raise(q("RangeError"),""+c.$inspect()+" out of range"),e((m=c.end===D?-1:l(c.end,q("Integer"),"to_int"))<0)&&(m+=this.length),e(c["$exclude_end?"]())||(m+=1),e(m<=f))return this}else if(e(c)){if(e((f=l(c,q("Integer"),"to_int"))<0)&&(f+=this.length),e(f<0)&&(f=0),e(h)){if(e(0==(m=l(h,q("Integer"),"to_int"))))return this;m+=f}else m=this.length}else f=0,m=this.length;if(e(f>this.length))for(n=this.length;n<m;n++)this[n]=D;if(e(m>this.length)&&(this.length=m),e($))for(this.length;f<m;f++)i=$(f),this[f]=i;else for(this.length;f<m;f++)this[f]=d;return this},-1),f(P,"$first",function(t){return null==t?0===this.length?D:this[0]:((t=l(t,q("Integer"),"to_int"))<0&&p.$raise(q("ArgumentError"),"negative array size"),this.slice(0,t))},-1),f(P,"$flatten",function(t){var e=this;return void 0!==t&&(t=l(t,q("Integer"),"to_int")),function t(r,n){var i,s,o,a,l=[];for(i=0,s=(r=r.$to_a()).length;i<s;i++){if(!$(o=r[i],"$to_ary",!0)||(a=o.$to_ary())===D){l.push(o);continue}switch(a.$$is_array||p.$raise(q("TypeError")),a===e&&p.$raise(q("ArgumentError")),n){case void 0:l=l.concat(t(a));break;case 0:l.push(a);break;default:l.push.apply(l,t(a,n-1))}}return l}(e,t)},-1),f(P,"$flatten!",function(t){u(this);var e=this.$flatten(t);if(this.length==e.length){for(var r=0,n=this.length;r<n&&this[r]===e[r];r++);if(r==n)return D}return this.$replace(e),this},-1),f(P,"$freeze",function(){return e(this["$frozen?"]())?this:c(this)}),f(P,"$hash",function(){var t,e,r,i=void 0===n,s=["A"],o=this.$object_id();try{if(i&&(n=Object.create(null)),n[o])return"self";for(r in n)if(t=n[r],this["$eql?"](t))return"self";for(e=0,n[o]=this;e<this.length;e++)t=this[e],s.push(t.$hash());return s.join(",")}finally{i&&(n=void 0)}}),f(P,"$include?",function(t){for(var e=0,r=this.length;e<r;e++)if(this[e]["$=="](t))return!0;return!1}),f(P,"$index",function t(e){var r,n,i,s=t.$$p||D;if(t.$$p=null,null!=e&&s!==D&&this.$warn("warning: given block not used"),null!=e){for(r=0,n=this.length;r<n;r++)if(this[r]["$=="](e))return r}else if(s===D)return this.$enum_for("index");else for(r=0,n=this.length;r<n;r++)if(!1!==(i=s(this[r]))&&i!==D)return r;return D},-1),f(P,"$insert",function(t,e){var r;if(r=_(arguments,1),u(this),t=l(t,q("Integer"),"to_int"),r.length>0){if(t<0&&(t+=this.length+1)<0&&p.$raise(q("IndexError"),""+t+" is out of bounds"),t>this.length)for(var n=this.length;n<t;n++)this.push(D);this.splice.apply(this,[t,0].concat(r))}return this},-2);var K=[];return f(P,"$inspect",function(){var t=this,e=[],r=t.$__id__(),n=!0;return function(){try{if(-1!==K.indexOf(r))return n=!1,"[...]";K.push(r);for(var i=0,s=t.length;i<s;i++){var o=t["$[]"](i);e.push(H("Opal").$inspect(o))}return"["+e.join(", ")+"]"}finally{n&&K.pop()}}()}),f(P,"$intersection",function(t){var e;return e=_(arguments),x(e,"reduce",[this.$to_a().$dup()],function(t,e){return null==t&&(t=D),null==e&&(e=D),t["$&"](e)})},-1),f(P,"$intersect?",function(t){return this.$intersection(t)["$empty?"]()["$!"]()}),f(P,"$join",function(t){if(null==O[","]&&(O[","]=D),null==t&&(t=D),e(0===this.length))return"";e(t===D)&&(t=O[","]);var r,n,i,s,o=[];for(r=0,n=this.length;r<n;r++){if($(i=this[r],"$to_str")&&(s=i.$to_str())!==D){o.push(s.$to_s());continue}if($(i,"$to_ary")&&((s=i.$to_ary())===this&&p.$raise(q("ArgumentError")),s!==D)){o.push(s.$join(t));continue}if($(i,"$to_s")&&(s=i.$to_s())!==D){o.push(s);continue}p.$raise(q("NoMethodError").$new(""+H("Opal").$inspect(this.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"))}return t===D?o.join(""):o.join(m["$coerce_to!"](t,q("String"),"to_str").$to_s())},-1),f(P,"$keep_if",function t(){var r=t.$$p||D;return(t.$$p=null,r!==D)?(u(this),Y(this,e,r),this):x(this,"enum_for",["keep_if"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this})}),f(P,"$last",function(t){return null==t?0===this.length?D:this[this.length-1]:((t=l(t,q("Integer"),"to_int"))<0&&p.$raise(q("ArgumentError"),"negative array size"),t>this.length&&(t=this.length),this.slice(this.length-t,this.length))},-1),f(P,"$length",function(){return this.length}),f(P,"$max",function t(e){var r=t.$$p||D;return t.$$p=null,x(this.$each(),"max",[e],r.$to_proc())},-1),f(P,"$min",function t(){var e=t.$$p||D;return t.$$p=null,x(this.$each(),"min",[],e.$to_proc())}),f(P,"$permutation",function e(r){var n,s,o,a=e.$$p||D,$=this,u=D,c=D;if(e.$$p=null,!(a!==D))return x($,"enum_for",["permutation",r],function t(){var e=null==t.$$s?this:t.$$s;return function(t,e){for(var r=e>=0?1:0;e;)r*=t,t--,e--;return r}(e.length,void 0===r?e.length:r)},{$$s:$});if((r=void 0===r?$.length:l(r,q("Integer"),"to_int"))<0||$.length<r);else if(0===r)t.yield1(a,[]);else if(1===r)for(var h=0;h<$.length;h++)t.yield1(a,[$[h]]);else u=H("Array").$new(r),c=H("Array").$new($.length,!1),n=function(t,e,r,s,a){$=this;for(var l=0;l<$.length;l++)if(s["$[]"](l)["$!"]()){if(e[r]=l,r<t-1)s[l]=!0,n.call($,t,e,r+1,s,a),s[l]=!1;else{o=[];for(var u=0;u<e.length;u++)o.push($[e[u]]);i(a,o)}}},a!==D?(s=$.slice(),n.call(s,r,u,0,c,a)):n.call($,r,u,0,c,a);return $},-1),f(P,"$repeated_permutation",function r(n){var i=r.$$p||D,s=D;return(r.$$p=null,s=m["$coerce_to!"](n,q("Integer"),"to_int"),i!==D)?(function e(r,n,s){if(n.length==r){var o=n.slice();t.yield1(i,o);return}for(var a=0;a<s.length;a++)n.push(s[a]),e(r,n,s),n.pop()}(s,[],this.slice()),this):x(this,"enum_for",["repeated_permutation",s],function t(){var r=null==t.$$s?this:t.$$s;return e(R(s,0))?r.$size()["$**"](s):0},{$$s:this})}),f(P,"$pop",function(t){return(u(this),e(void 0===t))?e(0===this.length)?D:this.pop():(e((t=l(t,q("Integer"),"to_int"))<0)&&p.$raise(q("ArgumentError"),"negative array size"),e(0===this.length))?[]:e(1===t)?[this.pop()]:e(t>this.length)?this.splice(0,this.length):this.splice(this.length-t,this.length)},-1),f(P,"$product",function e(r){var n,i=e.$$p||D;e.$$p=null,n=_(arguments);var s,o,a,$,u=i!==D?null:[],c=n.length+1,h=Array(c),d=Array(c),f=Array(c),m=1;for(s=1,f[0]=this;s<c;s++)f[s]=l(n[s-1],q("Array"),"to_ary");for(s=0;s<c;s++){if(0===($=f[s].length))return u||this;(m*=$)>2147483647&&p.$raise(q("RangeError"),"too big to product"),d[s]=$,h[s]=0}t:for(;;){for(s=0,a=[];s<c;s++)a.push(f[s][h[s]]);for(u?u.push(a):t.yield1(i,a),o=c-1,h[o]++;h[o]===d[o];){if(h[o]=0,--o<0)break t;h[o]++}}return u||this},-1),f(P,"$push",function(t){var e;e=_(arguments),u(this);for(var r=0,n=e.length;r<n;r++)this.push(e[r]);return this},-1),f(P,"$rassoc",function(t){for(var e,r=0,n=this.length;r<n;r++)if((e=this[r]).length&&void 0!==e[1]&&e[1]["$=="](t))return e;return D}),f(P,"$reject",function t(){var e=t.$$p||D;if(t.$$p=null,!(e!==D))return x(this,"enum_for",["reject"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r,n=[],i=0,s=this.length;i<s;i++)(!1===(r=e(this[i]))||r===D)&&n.push(this[i]);return n}),f(P,"$reject!",function t(){var e=t.$$p||D,r=D;return(t.$$p=null,e!==D)?(u(this),r=this.$length(),x(this,"delete_if",[],e.$to_proc()),A(this.$length(),r))?D:this:x(this,"enum_for",["reject!"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this})}),f(P,"$replace",function(t){return u(this),t=g(q("Array"),t)?t.$to_a():l(t,q("Array"),"to_ary").$to_a(),this.splice(0,this.length),this.push.apply(this,t),this}),f(P,"$reverse",function(){return this.slice(0).reverse()}),f(P,"$reverse!",function(){return u(this),this.reverse()}),f(P,"$reverse_each",function t(){var e=t.$$p||D;return(t.$$p=null,e!==D)?(x(this.$reverse(),"each",[],e.$to_proc()),this):x(this,"enum_for",["reverse_each"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this})}),f(P,"$rindex",function t(e){var r,n,i=t.$$p||D;if(t.$$p=null,null!=e&&i!==D&&this.$warn("warning: given block not used"),null!=e){for(r=this.length-1;r>=0&&!(r>=this.length);r--)if(this[r]["$=="](e))return r}else if(i!==D){for(r=this.length-1;r>=0&&!(r>=this.length);r--)if(!1!==(n=i(this[r]))&&n!==D)return r}else if(null==e)return this.$enum_for("rindex");return D},-1),f(P,"$rotate",function(t){var e,r,n,i;return(null==t&&(t=1),t=l(t,q("Integer"),"to_int"),1===this.length)?this.slice():0===this.length?[]:(r=t%(e=this.slice()).length,n=e.slice(r),i=e.slice(0,r),n.concat(i))},-1),f(P,"$rotate!",function(t){var e=D;return(null==t&&(t=1),u(this),0===this.length||1===this.length)?this:(t=l(t,q("Integer"),"to_int"),e=this.$rotate(t),this.$replace(e))},-1),(j=h(P,null,"SampleRandom")).$$prototype.rng=D,f(j,"$initialize",I("rng")),f(j,"$rand",function(t){var r=D;return e((r=l(this.rng.$rand(t),q("Integer"),"to_int"))<0)&&p.$raise(q("RangeError"),"random value must be >= 0"),e(r<t)||p.$raise(q("RangeError"),"random value must be less than Array size"),r}),f(P,"$sample",function(t,r){var n,i,s,o,a,$,u,c,h=D,_=D;if(e(void 0===t))return this.$at(p.$rand(this.length));if(e(void 0===r)?e(h=m["$coerce_to?"](t,q("Hash"),"to_hash"))?(r=h,t=D):(r=D,t=l(t,q("Integer"),"to_int")):(t=l(t,q("Integer"),"to_int"),r=l(r,q("Hash"),"to_hash")),e(t)&&e(t<0)&&p.$raise(q("ArgumentError"),"count must be greater than 0"),e(r)&&(_=r["$[]"]("random")),_=e(_)&&e(_["$respond_to?"]("rand"))?H("SampleRandom").$new(_):p,!e(t))return this[_.$rand(this.length)];switch(t>this.length&&(t=this.length),t){case 0:return[];case 1:return[this[_.$rand(this.length)]];case 2:return(o=_.$rand(this.length))<=(a=_.$rand(this.length-1))&&a++,[this[o],this[a]];default:if(this.length/t>3){for(n=!1,i=0,s=H("Array").$new(t),o=1,s[0]=_.$rand(this.length);o<t;){for($=_.$rand(this.length),a=0;a<o;){for(;$===s[a];){if(++i>100){n=!0;break}$=_.$rand(this.length)}if(n)break;a++}if(n)break;s[o]=$,o++}if(!n){for(o=0;o<t;)s[o]=this[s[o]],o++;return s}}s=this.slice();for(var d=0;d<t;d++)u=_.$rand(this.length-d)+d,c=s[d],s[d]=s[u],s[u]=c;return t===this.length?s:s["$[]"](0,t)}},-1),f(P,"$select",function t(){var r=t.$$p||D;if(t.$$p=null,!(r!==D))return x(this,"enum_for",["select"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var n,s=[],o=0,a=this.length;o<a;o++)e(i(r,n=this[o]))&&s.push(n);return s}),f(P,"$select!",function t(){var e=t.$$p||D;if(t.$$p=null,!(e!==D))return x(this,"enum_for",["select!"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});u(this);var r=this.length;return x(this,"keep_if",[],e.$to_proc()),this.length===r?D:this}),f(P,"$shift",function(t){return(u(this),e(void 0===t))?e(0===this.length)?D:function(t){for(var e=t[0],r=1,n=t.length;r<n;r++)t[r-1]=t[r];return t.pop(),e}(this):(e((t=l(t,q("Integer"),"to_int"))<0)&&p.$raise(q("ArgumentError"),"negative array size"),e(0===this.length))?[]:this.splice(0,t)},-1),f(P,"$shuffle",function(t){return this.$dup().$to_a()["$shuffle!"](t)},-1),f(P,"$shuffle!",function(t){u(this);var e,r,n,i=this.length;for(void 0!==t&&(t=m["$coerce_to?"](t,q("Hash"),"to_hash"))!==D&&(t=t["$[]"]("random"))!==D&&t["$respond_to?"]("rand")&&(e=t);i;)e?((r=e.$rand(i).$to_int())<0&&p.$raise(q("RangeError"),"random number too small "+r),r>=i&&p.$raise(q("RangeError"),"random number too big "+r)):r=this.$rand(i),n=this[--i],this[i]=this[r],this[r]=n;return this},-1),f(P,"$slice!",function(t,r){var n=D,i=D,s=D,o=D,a=D;if(u(this),n=D,e(void 0===r)){if(g(q("Range"),t)){i=t,n=this["$[]"](i),s=i.begin===D?0:l(i.begin,q("Integer"),"to_int"),o=i.end===D?-1:l(i.end,q("Integer"),"to_int"),s<0&&(s+=this.length),o<0?o+=this.length:o>=this.length&&(o=this.length-1,i.excl&&(o+=1));var $=o-s;i.excl&&i.end!==D?o-=1:$+=1,s<this.length&&s>=0&&o<this.length&&o>=0&&$>0&&this.splice(s,$)}else{if((a=l(t,q("Integer"),"to_int"))<0&&(a+=this.length),a<0||a>=this.length)return D;n=this[a],0===a?this.shift():this.splice(a,1)}}else{if(a=l(t,q("Integer"),"to_int"),(r=l(r,q("Integer"),"to_int"))<0)return D;n=this["$[]"](a,r),a<0&&(a+=this.length),a+r>this.length&&(r=this.length-a),a<this.length&&a>=0&&this.splice(a,r)}return n},-2),f(P,"$sort",function t(){var r=t.$$p||D;return(t.$$p=null,e(this.length>1))?(r===D&&(r=function(t,e){return t["$<=>"](e)}),this.slice().sort(function(t,e){var n=r(t,e);return n===D&&p.$raise(q("ArgumentError"),"comparison of "+t.$inspect()+" with "+e.$inspect()+" failed"),k(n,0)?1:T(n,0)?-1:0})):this}),f(P,"$sort!",function t(){var e,r=t.$$p||D;t.$$p=null,u(this),e=r!==D?x(this.slice(),"sort",[],r.$to_proc()):this.slice().$sort(),this.length=0;for(var n=0,i=e.length;n<i;n++)this.push(e[n]);return this}),f(P,"$sort_by!",function t(){var e=t.$$p||D;return(t.$$p=null,e!==D)?(u(this),this.$replace(x(this,"sort_by",[],e.$to_proc()))):x(this,"enum_for",["sort_by!"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this})}),f(P,"$take",function(t){return t<0&&p.$raise(q("ArgumentError")),this.slice(0,t)}),f(P,"$take_while",function t(){var e=t.$$p||D;t.$$p=null;for(var r,n,i=[],s=0,o=this.length;s<o&&!1!==(n=e(r=this[s]))&&n!==D;s++)i.push(r);return i}),f(P,"$to_a",function(){return this.$$class===t.Array?this:t.Array.$new(this)}),f(P,"$to_ary",z),f(P,"$to_h",function t(){var e=t.$$p||D,r=D;t.$$p=null,r=this,e!==D&&(r=x(r,"map",[],e.$to_proc()));var n,i,s=r.length,a=b([],{});for(n=0;n<s;n++)(i=m["$coerce_to?"](r[n],q("Array"),"to_ary")).$$is_array||p.$raise(q("TypeError"),"wrong element type "+i.$class()+" at "+n+" (expected array)"),2!==i.length&&p.$raise(q("ArgumentError"),"wrong array length at "+n+" (expected 2, was "+i.$length()+")"),o(a,i[0],i[1]);return a}),f(P,"$transpose",function(){var t=D,r=D;return e(this["$empty?"]())?[]:(t=[],r=D,x(this,"each",[],function(n){var i=D;return null==n&&(n=D),n=g(q("Array"),n)?n.$to_a():l(n,q("Array"),"to_ary").$to_a(),r=e(i=r)?i:n.length,F(n.length,r)&&p.$raise(q("IndexError"),"element size differs ("+n.length+" should be "+r+")"),x(n.length,"times",[],function(r){var s;return null==r&&(r=D),(e(i=t["$[]"](r))?i:(x(t,"[]=",s=[r,[]]),s[s.length-1]))["$<<"](n.$at(r))})}),t)}),f(P,"$union",function(t){var e;return e=_(arguments),x(e,"reduce",[this.$uniq()],function(t,e){return null==t&&(t=D),null==e&&(e=D),t["$|"](e)})},-1),f(P,"$uniq",function t(){var e=t.$$p||D;t.$$p=null;var r,n,a,l,$=b([],{});if(e===D)for(r=0,n=this.length;r<n;r++)void 0===s($,a=this[r])&&o($,a,a);else for(r=0,n=this.length;r<n;r++)void 0===s($,l=i(e,a=this[r]))&&o($,l,a);return $.$values()}),f(P,"$uniq!",function t(){var e=t.$$p||D;t.$$p=null,u(this);var r,n,a,l,$=this.length,c=b([],{});for(r=0,n=$;r<n;r++){if(a=this[r],void 0===s(c,l=e===D?a:i(e,a))){o(c,l,a);continue}this.splice(r,1),n--,r--}return this.length===$?D:this}),f(P,"$unshift",function(t){e=_(arguments),u(this);var e,r=this.length,n=e.length;if(0==n)return this;for(var i=r-n,s=0;s<n;s++)this.push(this[i+s]);for(var o=r-1;o-n>=0;)this[o]=this[o-n],o--;for(var a=0;a<n;a++)this[a]=e[a];return this},-1),f(P,"$values_at",function(t){var r,n=D;return r=_(arguments),n=[],x(r,"each",[],function t(r){var i=null==t.$$s?this:t.$$s,s=D,o=D,a=D;return(null==r&&(r=D),e(r["$is_a?"](q("Range"))))?(s=r.$end()===D?-1:l(r.$end(),q("Integer"),"to_int"),(o=r.$begin()===D?0:l(r.$begin(),q("Integer"),"to_int"))<0)?(o+=i.length,D):(s<0&&(s+=i.length),r["$exclude_end?"]()&&r.$end()!==D&&s--,s<o)?D:x(o,"upto",[s],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=D),n["$<<"](r.$at(e))},{$$s:i}):(a=l(r,q("Integer"),"to_int"),n["$<<"](i.$at(a)))},{$$s:this}),n},-1),f(P,"$zip",function r(n){var i,s=r.$$p||D,o=D;r.$$p=null,i=_(arguments);var a,l,$,u,c,h=[],d=this.length;for(u=0,c=i.length;u<c;u++)if(!(l=i[u]).$$is_array){if(l.$$is_range||l.$$is_enumerator){i[u]=l.$take(d);continue}i[u]=(e(o=m["$coerce_to?"](l,q("Array"),"to_ary"))?o:m["$coerce_to!"](l,q("Enumerator"),"to_enum","each")).$to_a()}for($=0;$<d;$++){for(u=0,a=[this[$]],c=i.length;u<c;u++)null==(l=i[u][$])&&(l=D),a[u+1]=l;h[$]=a}if(s!==D){for($=0;$<d;$++)t.yield1(s,h[$]);return D}return h},-1),d(P,"$inherited",function(t){t.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),f(P,"$instance_variables",function t(){var r=t.$$p||D;return t.$$p=null,x(v(this,y(this,"instance_variables",t,!1,!0),"instance_variables",[],r),"reject",[],function(t){var r=D;return(null==t&&(t=D),e(r=/^@\d+$/.test(t)))?r:t["$=="]("@length")})}),f(P,"$pack",function(t){return _(arguments),p.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),N(P,"append","push"),N(P,"filter","select"),N(P,"filter!","select!"),N(P,"map","collect"),N(P,"map!","collect!"),N(P,"prepend","unshift"),N(P,"size","length"),N(P,"slice","[]"),N(P,"to_s","inspect"),m.$pristine(P.$singleton_class(),"allocate"),m.$pristine(P,"copy_instance_variables","initialize_dup")}(0,Array,[])},Opal.modules["corelib/hash"]=function(t){var e,r,n,i,s=t.yield1,o=t.hash,a=t.hash_init,l=t.hash_get,$=t.hash_put,u=t.hash_delete,c=t.deny_frozen_access,h=t.freeze,_=t.klass,d=t.slice,p=t.Opal,f=t.Kernel,m=t.defs,g=t.def,b=t.send,v=t.rb_ge,y=t.rb_gt,x=t.hash2,k=t.truthy,w=t.to_a,A=t.return_self,E=t.alias,S=t.top,C=t.nil,O=t.$$$;return t.add_stubs("require,include,coerce_to?,[],merge!,allocate,raise,coerce_to!,each,fetch,>=,>,==,compare_by_identity,lambda?,abs,arity,enum_for,size,respond_to?,class,dig,except!,dup,delete,new,inspect,map,to_proc,flatten,frozen?,eql?,default,default_proc,default_proc=,default=,to_h,proc,clone,select,select!,has_key?,indexes,index,length,[]=,has_value?"),S.$require("corelib/enumerable"),n=[r=_("::",null,"Hash")].concat([]),i=t.$r(n),r.$include(O("Enumerable")),r.$$prototype.$$is_hash=!0,m(r,"$[]",function(t){e=d(arguments);var e,r,n,i,s=(r=e).length;if(1===s){if((n=p["$coerce_to?"](r["$[]"](0),O("Hash"),"to_hash"))!==C)return this.$allocate()["$merge!"](n);for((r=p["$coerce_to?"](r["$[]"](0),O("Array"),"to_ary"))===C&&f.$raise(O("ArgumentError"),"odd number of arguments for Hash"),s=r.length,n=this.$allocate(),i=0;i<s;i++)if(r[i].$$is_array)switch(r[i].length){case 1:n.$store(r[i][0],C);break;case 2:n.$store(r[i][0],r[i][1]);break;default:f.$raise(O("ArgumentError"),"invalid number of elements ("+r[i].length+" for 1..2)")}return n}for(s%2!=0&&f.$raise(O("ArgumentError"),"odd number of arguments for Hash"),n=this.$allocate(),i=0;i<s;i+=2)n.$store(r[i],r[i+1]);return n},-1),m(r,"$allocate",function(){var t=new this.$$constructor;return a(t),t.$$none=C,t.$$proc=C,t}),m(r,"$try_convert",function(t){return p["$coerce_to?"](t,O("Hash"),"to_hash")}),g(r,"$initialize",function t(e){var r=t.$$p||C;return t.$$p=null,c(this),void 0!==e&&r!==C&&f.$raise(O("ArgumentError"),"wrong number of arguments (1 for 0)"),this.$$none=void 0===e?C:e,this.$$proc=r,this},-1),g(r,"$==",function(t){if(this===t)return!0;if(!t.$$is_hash||this.$$keys.length!==t.$$keys.length)return!1;for(var e,r,n,i=0,s=this.$$keys,o=s.length;i<o;i++)if((e=s[i]).$$is_string?(r=this.$$smap[e],n=t.$$smap[e]):(r=e.value,n=l(t,e.key)),void 0===n||!r["$eql?"](n))return!1;return!0}),g(r,"$>=",function(t){var e=C;return t=p["$coerce_to!"](t,O("Hash"),"to_hash"),!(this.$$keys.length<t.$$keys.length)&&(e=!0,b(t,"each",[],function t(r,n){var i=null==t.$$s?this:t.$$s,s=C;if(null==r&&(r=C),null==n&&(n=C),null==(s=i.$fetch(r,null))||s!==n){e=!1;return}},{$$s:this}),e)}),g(r,"$>",function(t){return t=p["$coerce_to!"](t,O("Hash"),"to_hash"),!(this.$$keys.length<=t.$$keys.length)&&v(this,t)}),g(r,"$<",function(t){return y(t=p["$coerce_to!"](t,O("Hash"),"to_hash"),this)}),g(r,"$<=",function(t){return v(t=p["$coerce_to!"](t,O("Hash"),"to_hash"),this)}),g(r,"$[]",function(t){var e=l(this,t);return void 0!==e?e:this.$default(t)}),g(r,"$[]=",function(t,e){return c(this),$(this,t,e),e}),g(r,"$assoc",function(t){for(var e,r=0,n=this.$$keys,i=n.length;r<i;r++)if((e=n[r]).$$is_string){if(e["$=="](t))return[e,this.$$smap[e]]}else if(e.key["$=="](t))return[e.key,e.value];return C}),g(r,"$clear",function(){return c(this),a(this),this}),g(r,"$clone",function(){var e=new this.$$class;return a(e),t.hash_clone(this,e),e}),g(r,"$compact",function(){for(var t,e,r=o(),n=0,i=this.$$keys,s=i.length;n<s;n++)(t=i[n]).$$is_string?e=this.$$smap[t]:(e=t.value,t=t.key),e!==C&&$(r,t,e);return r}),g(r,"$compact!",function(){c(this);for(var t,e,r=!1,n=0,i=this.$$keys,s=i.length;n<s;n++)(t=i[n]).$$is_string?e=this.$$smap[t]:(e=t.value,t=t.key),e===C&&void 0!==u(this,t)&&(r=!0,s--,n--);return r?this:C}),g(r,"$compare_by_identity",function(){c(this);var t,e,r,n,i=this.$$keys;if(this.$$by_identity)return this;if(0===this.$$keys.length)return this.$$by_identity=!0,this;for(t=0,n=x([],{}).$compare_by_identity(),e=i.length;t<e;t++)(r=i[t]).$$is_string||(r=r.key),$(n,r,l(this,r));return this.$$by_identity=!0,this.$$map=n.$$map,this.$$smap=n.$$smap,this}),g(r,"$compare_by_identity?",function(){return!0===this.$$by_identity}),g(r,"$default",function(t){return void 0!==t&&this.$$proc!==C&&void 0!==this.$$proc?this.$$proc.$call(this,t):void 0===this.$$none?C:this.$$none},-1),g(r,"$default=",function(t){return c(this),this.$$proc=C,this.$$none=t,t}),g(r,"$default_proc",function(){return void 0!==this.$$proc?this.$$proc:C}),g(r,"$default_proc=",function(t){c(this);var e=t;return e!==C&&(e=p["$coerce_to!"](e,O("Proc"),"to_proc"))["$lambda?"]()&&2!==e.$arity().$abs()&&f.$raise(O("TypeError"),"default_proc takes two arguments"),this.$$none=C,this.$$proc=e,t}),g(r,"$delete",function e(r){var n=e.$$p||C;e.$$p=null,c(this);var i=u(this,r);return void 0!==i?i:n!==C?t.yield1(n,r):C}),g(r,"$delete_if",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["delete_if"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});c(this);for(var r,n,i,s=0,o=this.$$keys,a=o.length;s<a;s++)(r=o[s]).$$is_string?n=this.$$smap[r]:(n=r.value,r=r.key),!1!==(i=e(r,n))&&i!==C&&void 0!==u(this,r)&&(a--,s--);return this}),g(r,"$dig",function(t,e){var r,n=C;return(r=d(arguments,1),(n=this["$[]"](t))===C||0===r.length)?n:(k(n["$respond_to?"]("dig"))||f.$raise(O("TypeError"),""+n.$class()+" does not have #dig method"),b(n,"dig",w(r)))},-2),g(r,"$each",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["each"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r,n,i=0,o=this.$$keys.slice(),a=o.length;i<a;i++)(r=o[i]).$$is_string?n=this.$$smap[r]:(n=r.value,r=r.key),s(e,[r,n]);return this}),g(r,"$each_key",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["each_key"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r,n=0,i=this.$$keys.slice(),s=i.length;n<s;n++)e((r=i[n]).$$is_string?r:r.key);return this}),g(r,"$each_value",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["each_value"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r,n=0,i=this.$$keys.slice(),s=i.length;n<s;n++)e((r=i[n]).$$is_string?this.$$smap[r]:r.value);return this}),g(r,"$empty?",function(){return 0===this.$$keys.length}),g(r,"$except",function(t){var e;return e=d(arguments),b(this.$dup(),"except!",w(e))},-1),g(r,"$except!",function(t){var e;return e=d(arguments),b(e,"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=C),r.$delete(e)},{$$s:this}),this},-1),g(r,"$fetch",function t(e,r){var n=t.$$p||C;t.$$p=null;var i=l(this,e);return void 0!==i?i:n!==C?n(e):void 0!==r?r:f.$raise(O("KeyError").$new("key not found: "+e.$inspect(),x(["key","receiver"],{key:e,receiver:this})))},-2),g(r,"$fetch_values",function t(e){var r,n=t.$$p||C;return t.$$p=null,r=d(arguments),b(r,"map",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=C),b(r,"fetch",[e],n.$to_proc())},{$$s:this})},-1),g(r,"$flatten",function(t){null==t&&(t=1),t=p["$coerce_to!"](t,O("Integer"),"to_int");for(var e,r,n=[],i=0,s=this.$$keys,o=s.length;i<o;i++){if((e=s[i]).$$is_string?r=this.$$smap[e]:(r=e.value,e=e.key),n.push(e),r.$$is_array){if(1===t){n.push(r);continue}n=n.concat(r.$flatten(t-2));continue}n.push(r)}return n},-1),g(r,"$freeze",function(){return k(this["$frozen?"]())?this:h(this)}),g(r,"$has_key?",function(t){return void 0!==l(this,t)}),g(r,"$has_value?",function(t){for(var e,r=0,n=this.$$keys,i=n.length;r<i;r++)if(((e=n[r]).$$is_string?this.$$smap[e]:e.value)["$=="](t))return!0;return!1}),g(r,"$hash",function(){var e,r,n=void 0===t.hash_ids,i=this.$object_id(),s=["Hash"];try{if(n&&(t.hash_ids=Object.create(null)),t[i])return"self";for(e in t.hash_ids)if(r=t.hash_ids[e],this["$eql?"](r))return"self";t.hash_ids[i]=this;for(var o=0,a=this.$$keys,l=a.length;o<l;o++)(e=a[o]).$$is_string?s.push([e,this.$$smap[e].$hash()]):s.push([e.key_hash,e.value.$hash()]);return s.sort().join()}finally{n&&(t.hash_ids=void 0)}}),g(r,"$index",function(t){for(var e,r,n=0,i=this.$$keys,s=i.length;n<s;n++)if((e=i[n]).$$is_string?r=this.$$smap[e]:(r=e.value,e=e.key),r["$=="](t))return e;return C}),g(r,"$indexes",function(t){e=d(arguments);for(var e,r,n=[],i=0,s=e.length;i<s;i++){if(void 0===(r=l(this,e[i]))){n.push(this.$default());continue}n.push(r)}return n},-1),g(r,"$inspect",function(){var t=this,r=void 0===e,n=t.$object_id(),s=[];return function(){try{if(r&&(e={}),e.hasOwnProperty(n))return"{...}";e[n]=!0;for(var o,a,l=0,$=t.$$keys,u=$.length;l<u;l++)(o=$[l]).$$is_string?a=t.$$smap[o]:(a=o.value,o=o.key),o=i("Opal").$inspect(o),a=i("Opal").$inspect(a),s.push(o+"=>"+a);return"{"+s.join(", ")+"}"}finally{r&&(e=void 0)}}()}),g(r,"$invert",function(){for(var t,e,r=o(),n=0,i=this.$$keys,s=i.length;n<s;n++)(t=i[n]).$$is_string?e=this.$$smap[t]:(e=t.value,t=t.key),$(r,e,t);return r}),g(r,"$keep_if",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["keep_if"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});c(this);for(var r,n,i,s=0,o=this.$$keys,a=o.length;s<a;s++)(r=o[s]).$$is_string?n=this.$$smap[r]:(n=r.value,r=r.key),(!1===(i=e(r,n))||i===C)&&void 0!==u(this,r)&&(a--,s--);return this}),g(r,"$keys",function(){for(var t,e=[],r=0,n=this.$$keys,i=n.length;r<i;r++)(t=n[r]).$$is_string?e.push(t):e.push(t.key);return e}),g(r,"$length",function(){return this.$$keys.length}),g(r,"$merge",function t(e){var r,n=t.$$p||C;return t.$$p=null,r=d(arguments),b(this.$dup(),"merge!",w(r),n.$to_proc())},-1),g(r,"$merge!",function t(e){var r,n,i,s,o,a,u,h,_,f=t.$$p||C;for(t.$$p=null,_=d(arguments),c(this),r=0;r<_.length;++r)if(o=(s=(i=p["$coerce_to!"](_[r],O("Hash"),"to_hash")).$$keys).length,f===C)for(n=0;n<o;n++)(a=s[n]).$$is_string?h=i.$$smap[a]:(h=a.value,a=a.key),$(this,a,h);else for(n=0;n<o;n++){if((a=s[n]).$$is_string?h=i.$$smap[a]:(h=a.value,a=a.key),void 0===(u=l(this,a))){$(this,a,h);continue}$(this,a,f(a,u,h))}return this},-1),g(r,"$rassoc",function(t){for(var e,r,n=0,i=this.$$keys,s=i.length;n<s;n++)if((e=i[n]).$$is_string?r=this.$$smap[e]:(r=e.value,e=e.key),r["$=="](t))return[e,r];return C}),g(r,"$rehash",function(){return c(this),t.hash_rehash(this),this}),g(r,"$reject",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["reject"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r,n,i,s=o(),a=0,l=this.$$keys,u=l.length;a<u;a++)(r=l[a]).$$is_string?n=this.$$smap[r]:(n=r.value,r=r.key),(!1===(i=e(r,n))||i===C)&&$(s,r,n);return s}),g(r,"$reject!",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["reject!"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});c(this);for(var r,n,i,s=!1,o=0,a=this.$$keys,l=a.length;o<l;o++)(r=a[o]).$$is_string?n=this.$$smap[r]:(n=r.value,r=r.key),!1!==(i=e(r,n))&&i!==C&&void 0!==u(this,r)&&(s=!0,l--,o--);return s?this:C}),g(r,"$replace",function(t){c(this),t=p["$coerce_to!"](t,O("Hash"),"to_hash"),a(this);for(var e,r,n=0,i=t.$$keys,s=i.length;n<s;n++)(e=i[n]).$$is_string?r=t.$$smap[e]:(r=e.value,e=e.key),$(this,e,r);return k(t.$default_proc())?this["$default_proc="](t.$default_proc()):this["$default="](t.$default()),this}),g(r,"$select",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["select"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r,n,i,s=o(),a=0,l=this.$$keys,u=l.length;a<u;a++)(r=l[a]).$$is_string?n=this.$$smap[r]:(n=r.value,r=r.key),!1!==(i=e(r,n))&&i!==C&&$(s,r,n);return s}),g(r,"$select!",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["select!"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});c(this);for(var r,n,i,s=C,o=0,a=this.$$keys,l=a.length;o<l;o++)(r=a[o]).$$is_string?n=this.$$smap[r]:(n=r.value,r=r.key),(!1===(i=e(r,n))||i===C)&&(void 0!==u(this,r)&&(l--,o--),s=this);return s}),g(r,"$shift",function(){c(this);var t,e=this.$$keys;return e.length>0?[t=(t=e[0]).$$is_string?t:t.key,u(this,t)]:C}),g(r,"$slice",function(t){e=d(arguments);for(var e,r=o(),n=0,i=e.length;n<i;n++){var s=e[n],a=l(this,s);void 0!==a&&$(r,s,a)}return r},-1),g(r,"$to_a",function(){for(var t,e,r=[],n=0,i=this.$$keys,s=i.length;n<s;n++)(t=i[n]).$$is_string?e=this.$$smap[t]:(e=t.value,t=t.key),r.push([t,e]);return r}),g(r,"$to_h",function e(){var r=e.$$p||C;if(e.$$p=null,r!==C)return b(this,"map",[],r.$to_proc()).$to_h();if(this.$$class===t.Hash)return this;var n=new t.Hash;return a(n),t.hash_clone(this,n),n}),g(r,"$to_hash",A),g(r,"$to_proc",function(){return b(this,"proc",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&f.$raise(O("ArgumentError"),"no key given"),r["$[]"](e)},{$$arity:-1,$$s:this})}),g(r,"$transform_keys",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["transform_keys"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r,n,i=o(),a=0,l=this.$$keys,u=l.length;a<u;a++)(r=l[a]).$$is_string?n=this.$$smap[r]:(n=r.value,r=r.key),$(i,r=s(e,r),n);return i}),g(r,"$transform_keys!",function e(){var r=e.$$p||C;if(e.$$p=null,!k(r))return b(this,"enum_for",["transform_keys!"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});c(this);var n,i,o,a,l=t.slice(this.$$keys),h=l.length;for(n=0;n<h;n++)(i=l[n]).$$is_string?o=this.$$smap[i]:(o=i.value,i=i.key),a=s(r,i),u(this,i),$(this,a,o);return this}),g(r,"$transform_values",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["transform_values"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});for(var r,n,i=o(),a=0,l=this.$$keys,u=l.length;a<u;a++)(r=l[a]).$$is_string?n=this.$$smap[r]:(n=r.value,r=r.key),$(i,r,n=s(e,n));return i}),g(r,"$transform_values!",function t(){var e=t.$$p||C;if(t.$$p=null,!k(e))return b(this,"enum_for",["transform_values!"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});c(this);for(var r,n,i=0,o=this.$$keys,a=o.length;i<a;i++)(r=o[i]).$$is_string?n=this.$$smap[r]:(n=r.value,r=r.key),$(this,r,n=s(e,n));return this}),g(r,"$values",function(){for(var t,e=[],r=0,n=this.$$keys,i=n.length;r<i;r++)(t=n[r]).$$is_string?e.push(this.$$smap[t]):e.push(t.value);return e}),E(r,"dup","clone"),E(r,"each_pair","each"),E(r,"eql?","=="),E(r,"filter","select"),E(r,"filter!","select!"),E(r,"include?","has_key?"),E(r,"indices","indexes"),E(r,"key","index"),E(r,"key?","has_key?"),E(r,"member?","has_key?"),E(r,"size","length"),E(r,"store","[]="),E(r,"to_s","inspect"),E(r,"update","merge!"),E(r,"value?","has_value?"),E(r,"values_at","indexes")},Opal.modules["corelib/number"]=function(t){var e,r,n,i,s,o,a,l=t.klass,$=t.Opal,u=t.Kernel,c=t.def,h=t.eqeqeq,_=t.truthy,d=t.rb_gt,p=t.not,f=t.rb_lt,m=t.alias,g=t.send2,b=t.find_super,v=t.send,y=t.rb_plus,x=t.rb_minus,k=t.eqeq,w=t.return_self,A=t.rb_divide,E=t.to_ary,S=t.rb_times,C=t.rb_le,O=t.rb_ge,R=t.return_val,I=t.const_set,T=t.top,z=[],F=t.nil,N=t.$$$;return t.add_stubs("require,bridge,raise,name,class,Float,respond_to?,coerce_to!,__coerced__,===,>,!,**,new,<,to_f,==,nan?,infinite?,enum_for,+,-,gcd,lcm,%,/,frexp,to_i,ldexp,rationalize,*,<<,to_r,truncate,-@,size,<=,>=,inspect,angle,to_s,is_a?,abs,__id__,next,coerce_to?"),T.$require("corelib/numeric"),function(e,r,n){var i,s=l("::",r,"Number");function o(t){var e=new Uint8Array(8);return new DataView(e.buffer).setFloat64(0,t,!0),e}function a(t){return new DataView(t.buffer).getFloat64(0,!0)}function I(t){for(var e=o(t),r=0;r<e.length;r++)if(255===e[r])e[r]=0;else{e[r]++;break}return a(e)}function T(t){for(var e=o(t),r=0;r<e.length;r++)if(0===e[r])e[r]=255;else{e[r]--;break}return a(e)}[s].concat(n),$.$bridge(Number,s),t.prop(s.$$prototype,"$$is_number",!0),s.$$is_number_class=!0,c(i=t.get_singleton_class(s),"$allocate",function(){return u.$raise(N("TypeError"),"allocator undefined for "+this.$name())}),t.udef(i,"$new"),c(s,"$coerce",function(t){if(t===F)u.$raise(N("TypeError"),"can't convert "+t.$class()+" into Float");else{if(t.$$is_string)return[u.$Float(t),this];if(t["$respond_to?"]("to_f"))return[$["$coerce_to!"](t,N("Float"),"to_f"),this];if(t.$$is_number)return[t,this];u.$raise(N("TypeError"),"can't convert "+t.$class()+" into Float")}}),c(s,"$__id__",function(){return 2*this+1}),c(s,"$+",function(t){return t.$$is_number?this+t:this.$__coerced__("+",t)}),c(s,"$-",function(t){return t.$$is_number?this-t:this.$__coerced__("-",t)}),c(s,"$*",function(t){return t.$$is_number?this*t:this.$__coerced__("*",t)}),c(s,"$/",function(t){return t.$$is_number?this/t:this.$__coerced__("/",t)}),c(s,"$%",function(t){if(!t.$$is_number)return this.$__coerced__("%",t);if(t==-1/0)return t;if(0==t)u.$raise(N("ZeroDivisionError"),"divided by 0");else if(t<0||this<0)return(this%t+t)%t;else return this%t}),c(s,"$&",function(t){return t.$$is_number?this&t:this.$__coerced__("&",t)}),c(s,"$|",function(t){return t.$$is_number?this|t:this.$__coerced__("|",t)}),c(s,"$^",function(t){return t.$$is_number?this^t:this.$__coerced__("^",t)}),c(s,"$<",function(t){return t.$$is_number?this<t:this.$__coerced__("<",t)}),c(s,"$<=",function(t){return t.$$is_number?this<=t:this.$__coerced__("<=",t)}),c(s,"$>",function(t){return t.$$is_number?this>t:this.$__coerced__(">",t)}),c(s,"$>=",function(t){return t.$$is_number?this>=t:this.$__coerced__(">=",t)}),c(s,"$<=>",function(e){try{return e.$$is_number?isNaN(this)||isNaN(e)?F:this>e?1:this<e?-1:0:this.$__coerced__("<=>",e)}catch(e){if(t.rescue(e,[N("ArgumentError")]))try{return F}finally{t.pop_exception()}else throw e}}),c(s,"$<<",function(t){return(t=$["$coerce_to!"](t,N("Integer"),"to_int"))>0?this<<t:this>>-t}),c(s,"$>>",function(t){return(t=$["$coerce_to!"](t,N("Integer"),"to_int"))>0?this>>t:this<<-t}),c(s,"$[]",function(t){return(t=$["$coerce_to!"](t,N("Integer"),"to_int"))<0?0:t>=32?this<0?1:0:this>>t&1}),c(s,"$+@",function(){return+this}),c(s,"$-@",function(){return-this}),c(s,"$~",function(){return~this}),c(s,"$**",function(t){return h(N("Integer"),t)?p(N("Integer")["$==="](this))||_(d(t,0))?Math.pow(this,t):N("Rational").$new(this,1)["$**"](t):f(this,0)&&(h(N("Float"),t)||h(N("Rational"),t))?N("Complex").$new(this,0)["$**"](t.$to_f()):_(null!=t.$$is_number)?Math.pow(this,t):this.$__coerced__("**",t)}),c(s,"$==",function(t){return t.$$is_number?this.valueOf()===t.valueOf():!!t["$respond_to?"]("==")&&t["$=="](this)}),m(s,"===","=="),c(s,"$abs",function(){return Math.abs(this)}),c(s,"$abs2",function(){return Math.abs(this*this)}),c(s,"$allbits?",function(t){return(this&(t=$["$coerce_to!"](t,N("Integer"),"to_int")))==t}),c(s,"$anybits?",function(t){return(this&(t=$["$coerce_to!"](t,N("Integer"),"to_int")))!=0}),c(s,"$angle",function(){return _(this["$nan?"]())?this:0==this?1/this>0?0:Math.PI:this<0?Math.PI:0}),c(s,"$bit_length",function(){if(h(N("Integer"),this)||u.$raise(N("NoMethodError").$new("undefined method `bit_length` for "+this+":Float","bit_length")),0===this||-1===this)return 0;for(var t=0,e=this<0?~this:this;0!=e;)t+=1,e>>>=1;return t}),c(s,"$ceil",function(t){null==t&&(t=0);var e=this.$to_f();if(e%1==0&&t>=0)return e;var r=Math.pow(10,t),n=Math.ceil(e*r)/r;return e%1==0&&(n=Math.round(n)),n},-1),c(s,"$chr",function(e){return t.enc(String.fromCharCode(this),e||"BINARY")},-1),c(s,"$denominator",function t(){var e=t.$$p||F;return(t.$$p=null,_(this["$nan?"]())||_(this["$infinite?"]()))?1:g(this,b(this,"denominator",t,!1,!0),"denominator",[],e)}),c(s,"$downto",function t(e){var r=t.$$p||F;if(t.$$p=null,!(r!==F))return v(this,"enum_for",["downto",e],function t(){var r=null==t.$$s?this:t.$$s;return(h(N("Numeric"),e)||u.$raise(N("ArgumentError"),"comparison of "+r.$class()+" with "+e.$class()+" failed"),_(d(e,r)))?0:y(x(r,e),1)},{$$s:this});e.$$is_number||u.$raise(N("ArgumentError"),"comparison of "+this.$class()+" with "+e.$class()+" failed");for(var n=this;n>=e;n--)r(n);return this}),c(s,"$equal?",function(t){var e=F;return _(e=this["$=="](t))?e:isNaN(this)&&isNaN(t)}),c(s,"$even?",function(){return this%2==0}),c(s,"$floor",function(t){null==t&&(t=0);var e=this.$to_f();if(e%1==0&&t>=0)return e;var r=Math.pow(10,t),n=Math.floor(e*r)/r;return e%1==0&&(n=Math.round(n)),n},-1),c(s,"$gcd",function(t){h(N("Integer"),t)||u.$raise(N("TypeError"),"not an integer");for(var e=Math.abs(this),r=Math.abs(t);e>0;){var n=e;e=r%e,r=n}return r}),c(s,"$gcdlcm",function(t){return[this.$gcd(t),this.$lcm(t)]}),c(s,"$integer?",function(){return this%1==0}),c(s,"$is_a?",function t(e){var r=t.$$p||F;return t.$$p=null,!!(k(e,N("Integer"))&&h(N("Integer"),this)||k(e,N("Integer"))&&h(N("Integer"),this)||k(e,N("Float"))&&h(N("Float"),this))||g(this,b(this,"is_a?",t,!1,!0),"is_a?",[e],r)}),c(s,"$instance_of?",function t(e){var r=t.$$p||F;return t.$$p=null,!!(k(e,N("Integer"))&&h(N("Integer"),this)||k(e,N("Integer"))&&h(N("Integer"),this)||k(e,N("Float"))&&h(N("Float"),this))||g(this,b(this,"instance_of?",t,!1,!0),"instance_of?",[e],r)}),c(s,"$lcm",function(t){return(h(N("Integer"),t)||u.$raise(N("TypeError"),"not an integer"),0==this||0==t)?0:Math.abs(this*t/this.$gcd(t))}),c(s,"$next",function(){return this+1}),c(s,"$nobits?",function(t){return(this&(t=$["$coerce_to!"](t,N("Integer"),"to_int")))==0}),c(s,"$nonzero?",function(){return 0==this?F:this}),c(s,"$numerator",function t(){var e=t.$$p||F;return(t.$$p=null,_(this["$nan?"]())||_(this["$infinite?"]()))?this:g(this,b(this,"numerator",t,!1,!0),"numerator",[],e)}),c(s,"$odd?",function(){return this%2!=0}),c(s,"$ord",w),c(s,"$pow",function(t,e){return(0==this&&u.$raise(N("ZeroDivisionError"),"divided by 0"),void 0===e)?this["$**"](t):(N("Integer")["$==="](t)||u.$raise(N("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),t<0&&u.$raise(N("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),N("Integer")["$==="](e)||u.$raise(N("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),0===e&&u.$raise(N("ZeroDivisionError"),"divided by 0"),this["$**"](t)["$%"](e))},-2),c(s,"$pred",function(){return this-1}),c(s,"$quo",function t(e){var r=t.$$p||F;return(t.$$p=null,h(N("Integer"),this))?g(this,b(this,"quo",t,!1,!0),"quo",[e],r):A(this,e)}),c(s,"$rationalize",function(t){var e,r=F,n=F;return(arguments.length>1&&u.$raise(N("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),h(N("Integer"),this))?N("Rational").$new(this,1):_(this["$infinite?"]())?u.$raise(N("FloatDomainError"),"Infinity"):_(this["$nan?"]())?u.$raise(N("FloatDomainError"),"NaN"):_(null==t)?(r=null==(e=E(N("Math").$frexp(this)))[0]?F:e[0],n=null==e[1]?F:e[1],r=N("Math").$ldexp(r,N(N("Float"),"MANT_DIG")).$to_i(),n=x(n,N(N("Float"),"MANT_DIG")),N("Rational").$new(S(2,r),1["$<<"](x(1,n))).$rationalize(N("Rational").$new(1,1["$<<"](x(1,n))))):this.$to_r().$rationalize(t)},-1),c(s,"$remainder",function(t){return x(this,S(t,A(this,t).$truncate()))}),c(s,"$round",function(t){var e,r=F;if(h(N("Integer"),this)){if(_(null==t)||(h(N("Float"),t)&&_(t["$infinite?"]())&&u.$raise(N("RangeError"),"Infinity"),_(f(t=$["$coerce_to!"](t,N("Integer"),"to_int"),N(N("Integer"),"MIN")))&&u.$raise(N("RangeError"),"out of bounds"),_(t>=0)))return this;if(.415241*(t=t["$-@"]())-.125>this.$size())return 0;var n=Math.pow(10,t),i=Math.floor((Math.abs(this)+n/2)/n)*n;return this<0?-i:i}if(_(this["$nan?"]())&&_(null==t)&&u.$raise(N("FloatDomainError"),"NaN"),_(C(t=$["$coerce_to!"](t||0,N("Integer"),"to_int"),0)))_(this["$nan?"]())?u.$raise(N("RangeError"),"NaN"):_(this["$infinite?"]())&&u.$raise(N("FloatDomainError"),"Infinity");else if(k(t,0))return Math.round(this);else if(_(this["$nan?"]())||_(this["$infinite?"]()))return this;return(null==(e=E(N("Math").$frexp(this)))[0]||e[0],r=null==e[1]?F:e[1],_(O(t,x(y(N(N("Float"),"DIG"),2),_(d(r,0))?A(r,4):x(A(r,3),1)))))?this:_(f(t,(_(d(r,0))?y(A(r,3),1):A(r,4))["$-@"]()))?0:Math.round(this*Math.pow(10,t))/Math.pow(10,t)},-1),c(s,"$times",function t(){var e=t.$$p||F;if(t.$$p=null,!_(e))return v(this,"enum_for",["times"],function t(){return null==t.$$s?this:t.$$s},{$$s:this});for(var r=0;r<this;r++)e(r);return this}),c(s,"$to_f",w),c(s,"$to_i",function(){return this<0?Math.ceil(this):Math.floor(this)}),c(s,"$to_r",function(){var t,e=F,r=F;return h(N("Integer"),this)?N("Rational").$new(this,1):(e=null==(t=E(N("Math").$frexp(this)))[0]?F:t[0],r=null==t[1]?F:t[1],e=N("Math").$ldexp(e,N(N("Float"),"MANT_DIG")).$to_i(),r=x(r,N(N("Float"),"MANT_DIG")),S(e,N(N("Float"),"RADIX")["$**"](r)).$to_r())}),c(s,"$to_s",function(t){return(null==t&&(t=10),(_(f(t=$["$coerce_to!"](t,N("Integer"),"to_int"),2))||_(d(t,36)))&&u.$raise(N("ArgumentError"),"invalid radix "+t),k(this,0)&&_(1/this==-1/0))?"-0.0":this.toString(t)},-1),c(s,"$truncate",function(t){null==t&&(t=0);var e=this.$to_f();if(e%1==0&&t>=0)return e;var r=Math.pow(10,t),n=parseInt(e*r,10)/r;return e%1==0&&(n=Math.round(n)),n},-1),c(s,"$digits",function(t){null==t&&(t=10),f(this,0)&&u.$raise(N(N("Math"),"DomainError"),"out of domain"),_(f(t=$["$coerce_to!"](t,N("Integer"),"to_int"),2))&&u.$raise(N("ArgumentError"),"invalid radix "+t),this!=parseInt(this)&&u.$raise(N("NoMethodError"),"undefined method `digits' for "+this.$inspect());var e=this,r=[];if(0==this)return[0];for(;0!=e;)r.push(e%t),e=parseInt(e/t,10);return r},-1),c(s,"$divmod",function t(e){var r=t.$$p||F;return(t.$$p=null,_(this["$nan?"]())||_(e["$nan?"]()))?u.$raise(N("FloatDomainError"),"NaN"):_(this["$infinite?"]())?u.$raise(N("FloatDomainError"),"Infinity"):g(this,b(this,"divmod",t,!1,!0),"divmod",[e],r)}),c(s,"$upto",function t(e){var r=t.$$p||F;if(t.$$p=null,!(r!==F))return v(this,"enum_for",["upto",e],function t(){var r=null==t.$$s?this:t.$$s;return(h(N("Numeric"),e)||u.$raise(N("ArgumentError"),"comparison of "+r.$class()+" with "+e.$class()+" failed"),_(f(e,r)))?0:y(x(e,r),1)},{$$s:this});e.$$is_number||u.$raise(N("ArgumentError"),"comparison of "+this.$class()+" with "+e.$class()+" failed");for(var n=this;n<=e;n++)r(n);return this}),c(s,"$zero?",function(){return 0==this}),c(s,"$size",R(4)),c(s,"$nan?",function(){return isNaN(this)}),c(s,"$finite?",function(){return this!=1/0&&this!=-1/0&&!isNaN(this)}),c(s,"$infinite?",function(){return this==1/0?1:this==-1/0?-1:F}),c(s,"$positive?",function(){return 0!=this&&(this==1/0||1/this>0)}),c(s,"$negative?",function(){return this==-1/0||1/this<0}),c(s,"$next_float",function(){return k(this,N(N("Float"),"INFINITY"))?N(N("Float"),"INFINITY"):_(this["$nan?"]())?N(N("Float"),"NAN"):O(this,0)?I(Math.abs(this)):T(this)}),c(s,"$prev_float",function(){return k(this,N(N("Float"),"INFINITY")["$-@"]())?N(N("Float"),"INFINITY")["$-@"]():_(this["$nan?"]())?N(N("Float"),"NAN"):d(this,0)?T(this):-I(Math.abs(this))}),m(s,"arg","angle"),m(s,"eql?","=="),m(s,"fdiv","/"),m(s,"inspect","to_s"),m(s,"kind_of?","is_a?"),m(s,"magnitude","abs"),m(s,"modulo","%"),m(s,"object_id","__id__"),m(s,"phase","angle"),m(s,"succ","next"),m(s,"to_int","to_i")}(0,N("Numeric"),z),I("::","Fixnum",N("Number")),r=[e=l("::",N("Numeric"),"Integer")].concat(z),e.$$is_number_class=!0,e.$$is_integer_class=!0,i=[n=t.get_singleton_class(e)].concat(r),s=t.$r(i),c(n,"$allocate",function(){return u.$raise(N("TypeError"),"allocator undefined for "+this.$name())}),t.udef(n,"$new"),c(n,"$sqrt",function(t){return(t=$["$coerce_to!"](t,N("Integer"),"to_int"))<0&&u.$raise(N(N("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(t),10)}),c(n,"$try_convert",function(t){return s("Opal")["$coerce_to?"](t,this,"to_int")}),I(e,"MAX",1073741823),I(e,"MIN",-1073741824),[o=l("::",N("Numeric"),"Float")].concat(z),o.$$is_number_class=!0,c(a=t.get_singleton_class(o),"$allocate",function(){return u.$raise(N("TypeError"),"allocator undefined for "+this.$name())}),t.udef(a,"$new"),c(a,"$===",function(t){return!!t.$$is_number}),I(o,"INFINITY",1/0),I(o,"MAX",Number.MAX_VALUE),I(o,"MIN",Number.MIN_VALUE),I(o,"NAN",NaN),I(o,"DIG",15),I(o,"MANT_DIG",53),I(o,"RADIX",2),I(o,"EPSILON",Number.EPSILON||2220446049250313e-31)},Opal.modules["corelib/range"]=function(t){var e=t.klass,r=t.truthy,n=t.Kernel,i=t.def,s=t.not,o=t.send2,a=t.find_super,l=t.rb_lt,$=t.rb_le,u=t.send,c=t.eqeq,h=t.eqeqeq,_=t.return_ivar,d=t.rb_gt,p=t.rb_minus,f=t.Opal,m=t.rb_divide,g=t.rb_plus,b=t.rb_times,v=t.rb_ge,y=t.thrower,x=t.alias,k=t.top,w=t.nil,A=t.$$$;return t.add_stubs("require,include,attr_reader,raise,nil?,<=>,include?,!,<,<=,enum_for,size,upto,to_proc,respond_to?,class,succ,==,===,exclude_end?,eql?,begin,end,last,to_a,>,-@,-,to_i,coerce_to!,ceil,/,is_a?,new,loop,+,*,>=,each_with_index,%,step,bsearch,inspect,[],hash,cover?"),k.$require("corelib/enumerable"),function(k,E,S){var C=e("::",null,"Range"),O=[C].concat(S),R=t.$r(O),I=C.$$prototype;function T(t){return t.begin===w||t.end===w||t.begin===-1/0||t.end===1/0||t.begin===1/0||t.end===-1/0}return I.begin=I.end=I.excl=w,C.$include(A("Enumerable")),C.$$prototype.$$is_range=!0,C.$attr_reader("begin","end"),i(C,"$initialize",function(t,e,i){return null==i&&(i=!1),r(this.begin)&&n.$raise(A("NameError"),"'initialize' called twice"),r(t["$<=>"](e))||r(t["$nil?"]())||r(e["$nil?"]())||n.$raise(A("ArgumentError"),"bad value for range"),this.begin=t,this.end=e,this.excl=i},-3),i(C,"$===",function(t){return this["$include?"](t)}),i(C,"$count",function t(){var e=t.$$p||w;return(t.$$p=null,s(e!==w)&&r(T(this)))?A(A("Float"),"INFINITY"):o(this,a(this,"count",t,!1,!0),"count",[],e)}),i(C,"$to_a",function t(){var e=t.$$p||w;return t.$$p=null,r(T(this))&&n.$raise(A("TypeError"),"cannot convert endless range to an array"),o(this,a(this,"to_a",t,!1,!0),"to_a",[],e)}),i(C,"$cover?",function(t){var e=w,n=w,i=w,s=w,o=w;return(e=r(n=r(i=r(s=this.begin["$nil?"]())?-1:s)?i:this.begin["$<=>"](t))&&n,o=r(n=r(i=r(s=this.end["$nil?"]())?-1:s)?i:t["$<=>"](this.end))&&n,r(n=r(i=r(this.excl)?r(s=o)?l(o,0):s:r(s=o)?$(o,0):s)?e:i))?$(e,0):n}),i(C,"$each",function e(){var i,o,a=e.$$p||w,$=w,h=w,_=w;if(e.$$p=null,!(a!==w))return u(this,"enum_for",["each"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this});if(this.begin.$$is_number&&this.end.$$is_number){for((this.begin%1!=0||this.end%1!=0)&&n.$raise(A("TypeError"),"can't iterate from Float"),i=this.begin,o=this.end+(r(this.excl)?0:1);i<o;i++)a(i);return this}if(this.begin.$$is_string&&this.end.$$is_string)return u(this.begin,"upto",[this.end,this.excl],a.$to_proc()),this;for($=this.begin,h=this.end,r($["$respond_to?"]("succ"))||n.$raise(A("TypeError"),"can't iterate from "+$.$class());r(r(_=this.end["$nil?"]())?_:l($["$<=>"](h),0));)t.yield1(a,$),$=$.$succ();return s(this.excl)&&c($,h)&&t.yield1(a,$),this}),i(C,"$eql?",function(t){var e=w,n=w;return!!h(A("Range"),t)&&(r(e=r(n=this.excl["$==="](t["$exclude_end?"]()))?this.begin["$eql?"](t.$begin()):n)?this.end["$eql?"](t.$end()):e)}),i(C,"$exclude_end?",_("excl")),i(C,"$first",function t(e){var i=t.$$p||w;return(t.$$p=null,r(this.begin["$nil?"]())&&n.$raise(A("RangeError"),"cannot get the minimum of beginless range"),r(null==e))?this.begin:o(this,a(this,"first",t,!1,!0),"first",[e],i)},-1),i(C,"$last",function(t){return(r(this.end["$nil?"]())&&n.$raise(A("RangeError"),"cannot get the maximum of endless range"),r(null==t))?this.end:this.$to_a().$last(t)},-1),i(C,"$max",function t(){var e=t.$$p||w;return(t.$$p=null,r(this.end["$nil?"]()))?n.$raise(A("RangeError"),"cannot get the maximum of endless range"):e!==w?o(this,a(this,"max",t,!1,!0),"max",[],e):s(this.begin["$nil?"]())&&(r(d(this.begin,this.end))||r(this.excl)&&c(this.begin,this.end))?w:this.excl?this.end-1:this.end}),i(C,"$min",function t(){var e=t.$$p||w;return(t.$$p=null,r(this.begin["$nil?"]()))?n.$raise(A("RangeError"),"cannot get the minimum of beginless range"):e!==w?o(this,a(this,"min",t,!1,!0),"min",[],e):s(this.end["$nil?"]())&&(r(d(this.begin,this.end))||r(this.excl)&&c(this.begin,this.end))?w:this.begin}),i(C,"$size",function(){var t=w,e=w,n=w;return(t=A(A("Float"),"INFINITY"),c(this.begin,t)&&s(this.end["$nil?"]())||c(this.end,t["$-@"]())&&s(this.begin["$nil?"]()))?0:r(T(this))?t:h(A("Numeric"),this.begin)&&h(A("Numeric"),this.end)?(e=this.begin,n=this.end,r(this.excl)&&(n=p(n,1)),r(l(n,e)))?0:(Math.abs(n-e)+1).$to_i():w}),i(C,"$step",function e(i){var o=e.$$p||w,a=this,l=w,$=w;function h(){null==i?i=1:i.$$is_number||(i=f["$coerce_to!"](i,A("Integer"),"to_int")),i<0?n.$raise(A("ArgumentError"),"step can't be negative"):0===i&&n.$raise(A("ArgumentError"),"step can't be 0")}return(e.$$p=null,o!==w)?(h(),r(a.begin.$$is_number&&a.end.$$is_number)?($=0,function(){try{var e=y("break");u(a,"loop",[],function n(){var s=null==n.$$s?this:n.$$s,a=w;return null==s.begin&&(s.begin=w),null==s.excl&&(s.excl=w),null==s.end&&(s.end=w),a=g(s.begin,b($,i)),r(s.excl)?r(v(a,s.end))&&e.$throw():r(d(a,s.end))&&e.$throw(),t.yield1(o,a),$=g($,1)},{$$s:a})}catch(t){if(t===e)return t.$v;throw t}}()):(a.begin.$$is_string&&a.end.$$is_string&&i%1!=0&&n.$raise(A("TypeError"),"no implicit conversion to float from string"),u(a,"each_with_index",[],function(e,r){return(null==e&&(e=w),null==r&&(r=w),c(r["$%"](i),0))?t.yield1(o,e):w})),a):(r(a.begin["$is_a?"](R("Numeric")))||r(a.begin["$nil?"]()))&&(r(a.end["$is_a?"](R("Numeric")))||r(a.end["$nil?"]()))&&s(r(l=a.begin["$nil?"]())?a.end["$nil?"]():l)?A(A("Enumerator"),"ArithmeticSequence").$new(a,i,"step"):u(a,"enum_for",["step",i],function(){return h(),function(){if(!a.begin["$respond_to?"]("succ")||a.begin.$$is_string&&a.end.$$is_string)return w;if(i%1==0)return m(a.$size(),i).$ceil();var t,e=a.begin,r=a.end,n=Math.abs,s=Math.floor,o=(n(e)+n(r)+n(r-e))/n(i)*A(A("Float"),"EPSILON");return o>.5&&(o=.5),a.excl?(t=s((r-e)/i-o))*i+e<r&&t++:t=s((r-e)/i+o)+1,t}()})},-1),i(C,"$%",function(t){return r(this.begin["$is_a?"](R("Numeric")))&&r(this.end["$is_a?"](R("Numeric")))?A(A("Enumerator"),"ArithmeticSequence").$new(this,t,"%"):this.$step(t)}),i(C,"$bsearch",function t(){var e=t.$$p||w;return(t.$$p=null,e!==w)?(r(T(this)&&(this.begin.$$is_number||this.end.$$is_number))&&n.$raise(A("NotImplementedError"),"Can't #bsearch an infinite range"),r(this.begin.$$is_number&&this.end.$$is_number)||n.$raise(A("TypeError"),"can't do binary search for "+this.begin.$class()),u(this.$to_a(),"bsearch",[],e.$to_proc())):this.$enum_for("bsearch")}),i(C,"$to_s",function(){var t=w;return""+(r(t=this.begin)?t:"")+(r(this.excl)?"...":"..")+(r(t=this.end)?t:"")}),i(C,"$inspect",function(){var t=w;return""+(r(t=this.begin)?this.begin.$inspect():t)+(r(this.excl)?"...":"..")+(r(t=this.end)?this.end.$inspect():t)}),i(C,"$marshal_load",function(t){return this.begin=t["$[]"]("begin"),this.end=t["$[]"]("end"),this.excl=t["$[]"]("excl")}),i(C,"$hash",function(){return[this.begin,this.end,this.excl].$hash()}),x(C,"==","eql?"),x(C,"include?","cover?"),x(C,"member?","cover?")}(0,0,[])},Opal.modules["corelib/proc"]=function(t){var e,r=t.slice,n=t.klass,i=t.truthy,s=t.Kernel,o=t.defs,a=t.def,l=t.send,$=t.to_a,u=t.return_self,c=t.ensure_kwargs,h=t.Opal,_=t.alias,d=t.nil,p=t.$$$;return t.add_stubs("raise,proc,call,to_proc,new,source_location,coerce_to!,dup"),e=n("::",Function,"Proc"),t.prop(e.$$prototype,"$$is_proc",!0),t.prop(e.$$prototype,"$$is_lambda",!1),o(e,"$new",function t(){var e=t.$$p||d;return t.$$p=null,i(e)||s.$raise(p("ArgumentError"),"tried to create a Proc object without a block"),e}),a(e,"$call",function e(n){var i,s=e.$$p||d;e.$$p=null,i=r(arguments),s!==d&&(this.$$p=s);var o,a=this.$$brk,l=this.$$ret;if(a||l&&this.$$is_lambda)try{o=this.$$is_lambda?this.apply(null,i):t.yieldX(this,i)}catch(t){if(t===a||this.$$is_lambda&&t===l)return t.$v;throw t}else o=this.$$is_lambda?this.apply(null,i):t.yieldX(this,i);return o},-1),a(e,"$>>",function t(e){return t.$$p,t.$$p=null,l(s,"proc",[],function t(n){var i,s=t.$$p||d,o=null==t.$$s?this:t.$$s,a=d;return t.$$p=null,i=r(arguments),a=l(o,"call",$(i),s.$to_proc()),e.$call(a)},{$$arity:-1,$$s:this})}),a(e,"$<<",function t(e){return t.$$p,t.$$p=null,l(s,"proc",[],function t(n){var i,s=t.$$p||d,o=null==t.$$s?this:t.$$s,a=d;return t.$$p=null,i=r(arguments),a=l(e,"call",$(i),s.$to_proc()),o.$call(a)},{$$arity:-1,$$s:this})}),a(e,"$to_proc",u),a(e,"$lambda?",function(){return!!this.$$is_lambda}),a(e,"$arity",function(){return this.$$is_curried?-1:null!=this.$$arity?this.$$arity:this.length}),a(e,"$source_location",function(){var t=d;return this.$$is_curried?d:i(t=this.$$source_location)?t:d}),a(e,"$binding",function(){return(this.$$is_curried&&s.$raise(p("ArgumentError"),"Can't create Binding"),i(p("::","Binding","skip_raise")?"constant":d))?p("Binding").$new(d,[],this.$$s,this.$source_location()):d}),a(e,"$parameters",function(t){if(e=(t=c(t)).$$smap.lambda,this.$$is_curried)return[["rest"]];if(!this.$$parameters)return[];if(null==e?this.$$is_lambda:e)return this.$$parameters;var e,r,n,i=[];for(r=0,n=this.$$parameters.length;r<n;r++){var s=this.$$parameters[r];"req"===s[0]&&(s=["opt",s[1]]),i.push(s)}return i},-1),a(e,"$curry",function(t){var e=this;function n(){var i,o=r(arguments),a=o.length;return(a>t&&e.$$is_lambda&&!e.$$is_curried&&s.$raise(p("ArgumentError"),"wrong number of arguments ("+a+" for "+t+")"),a>=t)?e.$call.apply(e,o):((i=function(){return n.apply(null,o.concat(r(arguments)))}).$$is_lambda=e.$$is_lambda,i.$$is_curried=!0,i)}return void 0===t?t=e.length:(t=h["$coerce_to!"](t,p("Integer"),"to_int"),e.$$is_lambda&&t!==e.length&&s.$raise(p("ArgumentError"),"wrong number of arguments ("+t+" for "+e.length+")")),n.$$is_lambda=e.$$is_lambda,n.$$is_curried=!0,n},-1),a(e,"$dup",function(){var t=this.$$original_proc||this,e=function(){return t.apply(this,arguments)};for(var r in this)this.hasOwnProperty(r)&&(e[r]=this[r]);return e}),_(e,"===","call"),_(e,"clone","dup"),_(e,"yield","call"),_(e,"[]","call")},Opal.modules["corelib/method"]=function(t){var e,r,n,i,s=t.klass,o=t.def,a=t.truthy,l=t.slice,$=t.alias,u=t.Kernel,c=t.send,h=t.to_a,_=t.nil,d=t.$$$;return t.add_stubs("attr_reader,arity,curry,>>,<<,new,class,join,source_location,call,raise,bind,to_proc"),(r=(e=s("::",null,"Method")).$$prototype).method=r.receiver=r.owner=r.name=_,e.$attr_reader("owner","receiver","name"),o(e,"$initialize",function(t,e,r,n){return this.receiver=t,this.owner=e,this.name=n,this.method=r}),o(e,"$arity",function(){return this.method.$arity()}),o(e,"$parameters",function(){return this.method.$$parameters}),o(e,"$source_location",function(){var t=_;return a(t=this.method.$$source_location)?t:["(eval)",0]}),o(e,"$comments",function(){var t=_;return a(t=this.method.$$comments)?t:[]}),o(e,"$call",function t(e){var r,n=t.$$p||_;return t.$$p=null,r=l(arguments),this.method.$$p=n,this.method.apply(this.receiver,r)},-1),o(e,"$curry",function(t){return this.method.$curry(t)},-1),o(e,"$>>",function(t){return this.method["$>>"](t)}),o(e,"$<<",function(t){return this.method["$<<"](t)}),o(e,"$unbind",function(){return d("UnboundMethod").$new(this.receiver.$class(),this.owner,this.method,this.name)}),o(e,"$to_proc",function(){var t=this.$call.bind(this);return t.$$unbound=this.method,t.$$is_lambda=!0,t.$$arity=null==this.method.$$arity?this.method.length:this.method.$$arity,t.$$parameters=this.method.$$parameters,t}),o(e,"$inspect",function(){return"#<"+this.$class()+": "+this.receiver.$class()+"#"+this.name+" (defined in "+this.owner+" in "+this.$source_location().$join(":")+")>"}),$(e,"[]","call"),$(e,"===","call"),(i=(n=s("::",null,"UnboundMethod")).$$prototype).method=i.owner=i.name=i.source=_,n.$attr_reader("source","owner","name"),o(n,"$initialize",function(t,e,r,n){return this.source=t,this.owner=e,this.method=r,this.name=n}),o(n,"$arity",function(){return this.method.$arity()}),o(n,"$parameters",function(){return this.method.$$parameters}),o(n,"$source_location",function(){var t=_;return a(t=this.method.$$source_location)?t:["(eval)",0]}),o(n,"$comments",function(){var t=_;return a(t=this.method.$$comments)?t:[]}),o(n,"$bind",function(e){if(this.owner.$$is_module||t.is_a(e,this.owner))return d("Method").$new(e,this.owner,this.method,this.name);u.$raise(d("TypeError"),"can't bind singleton method to a different class (expected "+e+".kind_of?("+this.owner+" to be true)")}),o(n,"$bind_call",function t(e,r){var n,i=t.$$p||_;return t.$$p=null,n=l(arguments,1),c(this.$bind(e),"call",h(n),i.$to_proc())},-2),o(n,"$inspect",function(){return"#<"+this.$class()+": "+this.source+"#"+this.name+" (defined in "+this.owner+" in "+this.$source_location().$join(":")+")>"})},Opal.modules["corelib/variables"]=function(t){var e=t.gvars,r=t.const_set,n=t.Object,i=t.hash2,s=t.nil;return t.add_stubs("new"),e["&"]=e["~"]=e["`"]=e["'"]=s,e.LOADED_FEATURES=e['"']=t.loaded_features,e.LOAD_PATH=e[":"]=[],e["/"]="\n",e[","]=s,r("::","ARGV",[]),r("::","ARGF",n.$new()),r("::","ENV",i([],{})),e.VERBOSE=!1,e.DEBUG=!1,e.SAFE=0},Opal.modules["corelib/io"]=function(t){var e,r,i,s=t.klass,o=t.const_set,a=t.not,l=t.truthy,$=t.def,u=t.return_ivar,c=t.return_val,h=t.slice,_=t.Kernel,d=t.gvars,p=t.send,f=t.to_a,m=t.rb_plus,g=t.neqeq,b=t.range,v=t.hash2,y=t.eqeq,x=t.to_ary,k=t.rb_gt,w=t.assign_ivar_val,A=t.alias,E=t.nil,S=t.$$$;t.add_stubs("attr_reader,attr_accessor,!,match?,include?,size,write,String,flatten,puts,sysread_noraise,+,!=,[],ord,getc,readchar,raise,gets,==,to_str,length,split,sub,sysread,>,to_a,each_line,enum_for,getbyte,closed_write?,closed_read?,each,eof,new,write_proc=,read_proc="),(r=(e=s("::",null,"IO")).$$prototype).read_buffer=r.closed=E,o(e,"SEEK_SET",0),o(e,"SEEK_CUR",1),o(e,"SEEK_END",2),o(e,"SEEK_DATA",3),o(e,"SEEK_HOLE",4),o(e,"READABLE",1),o(e,"WRITABLE",4),e.$attr_reader("eof"),e.$attr_accessor("read_proc","sync","tty","write_proc"),$(e,"$initialize",function(t,e){return(null==e&&(e="r"),this.fd=t,this.flags=e,this.eof=!1,l(e["$include?"]("r"))&&a(e["$match?"](/[wa+]/)))?this.closed="write":l(e["$match?"](/[wa]/))&&a(e["$match?"](/[r+]/))?this.closed="read":E},-2),$(e,"$fileno",u("fd")),$(e,"$tty?",function(){return!0==this.tty}),$(e,"$write",function(t){return this.write_proc(t),t.$size()}),$(e,"$flush",c(E)),$(e,"$<<",function(t){return this.$write(t),this}),$(e,"$print",function(t){var e;null==d[","]&&(d[","]=E),e=h(arguments);for(var r=0,n=e.length;r<n;r++)e[r]=_.$String(e[r]);return this.$write(e.join(d[","])),E},-1),$(e,"$puts",function(t){var e,r;if(r=h(arguments),0===r.length)this.$write("\n");else for(var n=0,i=r.length;n<i;n++)if(r[n].$$is_array){var s=r[n].$flatten();s.length>0&&p(this,"puts",f(s))}else(e=r[n].$$is_string?r[n].valueOf():_.$String(r[n])).endsWith("\n")||(e+="\n"),this.$write(e);return E},-1),$(e,"$getc",function(){var t=E,e=E,r=E;this.read_buffer=l(t=this.read_buffer)?t:"",e="";do if(this.read_buffer=m(this.read_buffer,e),g(this.read_buffer,""))return r=this.read_buffer["$[]"](0),this.read_buffer=this.read_buffer["$[]"](b(1,-1,!1)),r;while(l(e=this.$sysread_noraise(1)));return E}),$(e,"$getbyte",function(){var t;return(t=this.$getc())===E||null==t?E:t.$ord()}),$(e,"$readbyte",function(){return this.$readchar().$ord()}),$(e,"$readchar",function(){var t=E;return l(t=this.$getc())?t:_.$raise(S("EOFError"),"end of file reached")}),$(e,"$readline",function(t){var e,r=E;return(e=h(arguments),l(r=p(this,"gets",f(e))))?r:_.$raise(S("EOFError"),"end of file reached")},-1),$(e,"$gets",function(e,r,n){var i,s=E,o=E,$=E,u=E,c=E,h=E;null==d["/"]&&(d["/"]=E),null==e&&(e=!1),null==r&&(r=E),null==n&&(n=v([],{})),l(e.$$is_number)&&a(r)&&(e=(i=[!1,e,r])[0],r=i[1],n=i[2]),l(e.$$is_hash)&&a(r)&&y(n,v([],{}))?(e=(i=[!1,E,e])[0],r=i[1],n=i[2]):l(r.$$is_hash)&&y(n,v([],{}))&&(e=(i=[e,E,r])[0],r=i[1],n=i[2]),s=e,y(e,!1)&&(e=d["/"]),y(e,"")&&(e=/\r?\n\r?\n/),e=l(o=e)?o:"",y(s,"")||(e=e.$to_str()),$=y(s,"")?2:e.$length(),y(e," ")&&(e=/ /),this.read_buffer=l(o=this.read_buffer)?o:"",u="",c=E;do if(this.read_buffer=m(this.read_buffer,u),g(e,"")&&l(l(e.$$is_regexp)?this.read_buffer["$match?"](e):this.read_buffer["$include?"](e))){h=this.read_buffer,c=null==(i=x(this.read_buffer.$split(e,2)))[0]?E:i[0],this.read_buffer=null==i[1]?E:i[1],g(c,h)&&(c=m(c,h["$[]"](c.$length(),$)));break}while(l(u=this.$sysread_noraise(y(e,"")?65536:1)));return!l(c)&&(c=(i=[l(o=this.read_buffer)?o:"",""])[0],this.read_buffer=i[1],y(c,"")&&(c=E)),l(c)&&(l(r)&&(c=c["$[]"](t.Range.$new(0,r,!0)),this.read_buffer=m(c["$[]"](t.Range.$new(r,-1,!1)),this.read_buffer)),l(n["$[]"]("chomp"))&&(c=c.$sub(/\r?\n$/,"")),y(s,"")&&(c=c.$sub(/^[\r\n]+/,""))),y(s,!1)&&(d._=c),c},-1),$(e,"$sysread",function(t){var e=E;return l(e=this.read_proc(t))?e:(this.eof=!0,_.$raise(S("EOFError"),"end of file reached"))}),$(e,"$sysread_noraise",function(e){try{return this.$sysread(e)}catch(e){if(t.rescue(e,[S("EOFError")]))try{return E}finally{t.pop_exception()}else throw e}}),$(e,"$readpartial",function(t){var e,r=E,n=E,i=E;return this.read_buffer=l(r=this.read_buffer)?r:"",n=this.$sysread(t),i=(e=[m(this.read_buffer,l(r=n)?r:""),""])[0],this.read_buffer=e[1],y(i,"")&&(i=E),i}),$(e,"$read",function(e){var r,n=E,i=E,s=E;null==e&&(e=E),this.read_buffer=l(n=this.read_buffer)?n:"",i="",s=E;do if(this.read_buffer=m(this.read_buffer,i),l(e)&&l(k(this.read_buffer.$length(),e)))return s=(r=[this.read_buffer["$[]"](t.Range.$new(0,e,!0)),this.read_buffer["$[]"](t.Range.$new(e,-1,!1))])[0],this.read_buffer=r[1],s;while(l(i=this.$sysread_noraise(l(n=e)?n:65536)));return s=(r=[this.read_buffer,""])[0],this.read_buffer=r[1],s},-1),$(e,"$readlines",function(t){return null==d["/"]&&(d["/"]=E),null==t&&(t=d["/"]),this.$each_line(t).$to_a()},-1),$(e,"$each",function e(r,n){var i,s,o=e.$$p||E,a=E;if(null==d["/"]&&(d["/"]=E),e.$$p=null,i=h(arguments),i.length>0&&(s=i.shift()),null==s&&(s=d["/"]),!(o!==E))return p(this,"enum_for",["each",s].concat(f(i)));for(;l(a=p(this,"gets",[s].concat(f(i))));)t.yield1(o,a);return this},-1),$(e,"$each_byte",function e(){var r=e.$$p||E,n=E;if(e.$$p=null,!(r!==E))return this.$enum_for("each_byte");for(;l(n=this.$getbyte());)t.yield1(r,n);return this}),$(e,"$each_char",function e(){var r=e.$$p||E,n=E;if(e.$$p=null,!(r!==E))return this.$enum_for("each_char");for(;l(n=this.$getc());)t.yield1(r,n);return this}),$(e,"$close",w("closed","both")),$(e,"$close_read",function(){return y(this.closed,"write")?this.closed="both":this.closed="read"}),$(e,"$close_write",function(){return y(this.closed,"read")?this.closed="both":this.closed="write"}),$(e,"$closed?",function(){return this.closed["$=="]("both")}),$(e,"$closed_read?",function(){var t=E;return l(t=this.closed["$=="]("read"))?t:this.closed["$=="]("both")}),$(e,"$closed_write?",function(){var t=E;return l(t=this.closed["$=="]("write"))?t:this.closed["$=="]("both")}),$(e,"$check_writable",function(){return l(this["$closed_write?"]())?_.$raise(S("IOError"),"not opened for writing"):E}),$(e,"$check_readable",function(){return l(this["$closed_read?"]())?_.$raise(S("IOError"),"not opened for reading"):E}),A(e,"each_line","each"),A(e,"eof?","eof"),o("::","STDIN",d.stdin=S("IO").$new(0,"r")),o("::","STDOUT",d.stdout=S("IO").$new(1,"w")),o("::","STDERR",d.stderr=S("IO").$new(2,"w"));var C=t.global.console;return S("STDOUT")["$write_proc="]("object"==typeof n&&"object"==typeof n.stdout?function(t){n.stdout.write(t)}:function(t){C.log(t)}),S("STDERR")["$write_proc="]("object"==typeof n&&"object"==typeof n.stderr?function(t){n.stderr.write(t)}:function(t){C.warn(t)}),i=[function(t){var e=prompt();return null!==e?e+"\n":E}],p(S("STDIN"),"read_proc=",i),i[i.length-1]},Opal.modules["opal/regexp_anchors"]=function(t){var e,r,n,i=t.module,s=t.const_set,o=[],a=(t.nil,t.$$$);return t.add_stubs("new"),r=[e=i(o[0],"Opal")].concat(o),n=t.$r(r),s(e,"REGEXP_START","^"),s(e,"REGEXP_END","$"),s(e,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),s(e,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),s(e,"INLINE_IDENTIFIER_REGEXP",n("Regexp").$new("[^"+a(e,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+a(e,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),s(e,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),s(e,"CONST_NAME_REGEXP",n("Regexp").$new(""+a(e,"REGEXP_START")+"(::)?[A-Z][^"+a(e,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+a(e,"REGEXP_END")))},Opal.modules["opal/mini"]=function(t){var e=t.Object;return t.nil,t.add_stubs("require"),e.$require("opal/base"),e.$require("corelib/nil"),e.$require("corelib/boolean"),e.$require("corelib/string"),e.$require("corelib/comparable"),e.$require("corelib/enumerable"),e.$require("corelib/enumerator"),e.$require("corelib/array"),e.$require("corelib/hash"),e.$require("corelib/number"),e.$require("corelib/range"),e.$require("corelib/proc"),e.$require("corelib/method"),e.$require("corelib/regexp"),e.$require("corelib/variables"),e.$require("corelib/io"),e.$require("opal/regexp_anchors")},Opal.modules["corelib/kernel/format"]=function(t){var e,r=t.coerce_to,n=t.module,i=t.slice,s=t.truthy,o=t.eqeq,a=t.Opal,l=t.Kernel,$=t.gvars,u=t.def,c=t.alias,h=t.nil,_=t.$$$;return t.add_stubs("respond_to?,[],==,length,coerce_to?,nil?,to_a,raise,to_int,fetch,Integer,Float,to_ary,to_str,inspect,to_s,format"),u(e=n("::","Kernel"),"$format",function(t,e){var n,u,c=h;null==$.DEBUG&&($.DEBUG=h),n=i(arguments,1),o((u=n).$length(),1)&&s(u["$[]"](0)["$respond_to?"]("to_ary"))&&!s((c=a["$coerce_to?"](u["$[]"](0),_("Array"),"to_ary"))["$nil?"]())&&(u=c.$to_a());var d,p,f,m,g,b,v,y,x,k,w,A,E,S,C,O,R="",I=0,T=t.length,z=1,F=0;function N(){32&O&&l.$raise(_("ArgumentError"),"flag after width"),128&O&&l.$raise(_("ArgumentError"),"flag after precision")}function L(){32&O&&l.$raise(_("ArgumentError"),"width given twice"),128&O&&l.$raise(_("ArgumentError"),"width after precision")}function D(t){return t>=u.length&&l.$raise(_("ArgumentError"),"too few arguments"),u[t]}function q(){switch(F){case -1:l.$raise(_("ArgumentError"),"unnumbered("+z+") mixed with numbered");case -2:l.$raise(_("ArgumentError"),"unnumbered("+z+") mixed with named")}return D((F=z++)-1)}function B(t){return F>0&&l.$raise(_("ArgumentError"),"numbered("+t+") after unnumbered("+F+")"),-2===F&&l.$raise(_("ArgumentError"),"numbered("+t+") after named"),t<1&&l.$raise(_("ArgumentError"),"invalid index - "+t+"$"),F=-1,D(t-1)}function M(){return void 0===C?q():C}function j(e){for(var r,n="";;p++){if(p===T&&l.$raise(_("ArgumentError"),"malformed format string - %*[0-9]"),48>t.charCodeAt(p)||t.charCodeAt(p)>57)return p--,(r=parseInt(n,10)||0)>2147483647&&l.$raise(_("ArgumentError"),""+e+" too big"),r;n+=t.charAt(p)}}function P(e){var r,n=j(e);return"$"===t.charAt(p+1)?(p++,r=B(n)):r=q(),r.$to_int()}for(p=t.indexOf("%");-1!==p;p=t.indexOf("%",p)){switch(m=void 0,O=0,b=-1,v=-1,C=void 0,d=p,p++,t.charAt(p)){case"%":I=p;case"":case"\n":case"\x00":p++;continue}e:for(;p<T;p++)switch(t.charAt(p)){case" ":N(),O|=16;continue;case"#":N(),O|=1;continue;case"+":N(),O|=4;continue;case"-":N(),O|=2;continue;case"0":N(),O|=8;continue;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(y=j("width"),"$"===t.charAt(p+1)){if(p+2===T){m="%",p++;break e}void 0!==C&&l.$raise(_("ArgumentError"),"value given twice - %"+y+"$"),C=B(y),p++}else L(),O|=32,b=y;continue;case"<":case"{":for(k="<"===t.charAt(p)?">":"}",x="",p++;;p++){if(p===T&&l.$raise(_("ArgumentError"),"malformed name - unmatched parenthesis"),t.charAt(p)===k){if(F>0&&l.$raise(_("ArgumentError"),"named "+x+" after unnumbered("+F+")"),-1===F&&l.$raise(_("ArgumentError"),"named "+x+" after numbered"),F=-2,void 0!==u[0]&&u[0].$$is_hash||l.$raise(_("ArgumentError"),"one hash required"),C=u[0].$fetch(x),">"===k)continue e;if(m=C.toString(),-1!==v&&(m=m.slice(0,v)),2&O)for(;m.length<b;)m+=" ";else for(;m.length<b;)m=" "+m;break e}x+=t.charAt(p)}case"*":p++,L(),O|=32,(b=P("width"))<0&&(O|=2,b=-b);continue;case".":if(128&O&&l.$raise(_("ArgumentError"),"precision given twice"),O|=192,v=0,p++,"*"===t.charAt(p)){p++,(v=P("precision"))<0&&(O&=-65);continue}v=j("precision");continue;case"d":case"i":case"u":if((f=l.$Integer(M()))>=0){for(m=f.toString();m.length<v;)m="0"+m;if(2&O)for((4&O||16&O)&&(m=(4&O?"+":" ")+m);m.length<b;)m+=" ";else if(8&O&&-1===v){for(;m.length<b-(4&O||16&O?1:0);)m="0"+m;(4&O||16&O)&&(m=(4&O?"+":" ")+m)}else for((4&O||16&O)&&(m=(4&O?"+":" ")+m);m.length<b;)m=" "+m}else{for(m=(-f).toString();m.length<v;)m="0"+m;if(2&O)for(m="-"+m;m.length<b;)m+=" ";else if(8&O&&-1===v){for(;m.length<b-1;)m="0"+m;m="-"+m}else for(m="-"+m;m.length<b;)m=" "+m}break e;case"b":case"B":case"o":case"x":case"X":switch(t.charAt(p)){case"b":case"B":w=2,A="0b",E=/^1+/,S="1";break;case"o":w=8,A="0",E=/^3?7+/,S="7";break;case"x":case"X":w=16,A="0x",E=/^f+/,S="f"}if((f=l.$Integer(M()))>=0){for(m=f.toString(w);m.length<v;)m="0"+m;if(2&O)for((4&O||16&O)&&(m=(4&O?"+":" ")+m),1&O&&0!==f&&(m=A+m);m.length<b;)m+=" ";else if(8&O&&-1===v){for(;m.length<b-(4&O||16&O?1:0)-(1&O&&0!==f?A.length:0);)m="0"+m;1&O&&0!==f&&(m=A+m),(4&O||16&O)&&(m=(4&O?"+":" ")+m)}else for(1&O&&0!==f&&(m=A+m),(4&O||16&O)&&(m=(4&O?"+":" ")+m);m.length<b;)m=" "+m}else if(4&O||16&O){for(m=(-f).toString(w);m.length<v;)m="0"+m;if(2&O)for(1&O&&(m=A+m),m="-"+m;m.length<b;)m+=" ";else if(8&O&&-1===v){for(;m.length<b-1-(1&O?2:0);)m="0"+m;1&O&&(m=A+m),m="-"+m}else for(1&O&&(m=A+m),m="-"+m;m.length<b;)m=" "+m}else{for(m=(f>>>0).toString(w).replace(E,S);m.length<v-2;)m=S+m;if(2&O)for(m=".."+m,1&O&&(m=A+m);m.length<b;)m+=" ";else if(8&O&&-1===v){for(;m.length<b-2-(1&O?A.length:0);)m=S+m;m=".."+m,1&O&&(m=A+m)}else for(m=".."+m,1&O&&(m=A+m);m.length<b;)m=" "+m}t.charAt(p)===t.charAt(p).toUpperCase()&&(m=m.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if((f=l.$Float(M()))>=0||isNaN(f)){if(f===1/0)m="Inf";else switch(t.charAt(p)){case"f":m=f.toFixed(-1===v?6:v);break;case"e":case"E":m=f.toExponential(-1===v?6:v);break;case"g":case"G":(g=parseInt((m=f.toExponential()).split("e")[1],10))<-4||g>=(-1===v?6:v)||(m=f.toPrecision(-1===v?1&O?6:void 0:v))}if(2&O)for((4&O||16&O)&&(m=(4&O?"+":" ")+m);m.length<b;)m+=" ";else if(8&O&&f!==1/0&&!isNaN(f)){for(;m.length<b-(4&O||16&O?1:0);)m="0"+m;(4&O||16&O)&&(m=(4&O?"+":" ")+m)}else for((4&O||16&O)&&(m=(4&O?"+":" ")+m);m.length<b;)m=" "+m}else{if(f===-1/0)m="Inf";else switch(t.charAt(p)){case"f":m=(-f).toFixed(-1===v?6:v);break;case"e":case"E":m=(-f).toExponential(-1===v?6:v);break;case"g":case"G":(g=parseInt((m=(-f).toExponential()).split("e")[1],10))<-4||g>=(-1===v?6:v)||(m=(-f).toPrecision(-1===v?1&O?6:void 0:v))}if(2&O)for(m="-"+m;m.length<b;)m+=" ";else if(8&O&&f!==-1/0){for(;m.length<b-1;)m="0"+m;m="-"+m}else for(m="-"+m;m.length<b;)m=" "+m}t.charAt(p)!==t.charAt(p).toUpperCase()||f===1/0||f===-1/0||isNaN(f)||(m=m.toUpperCase()),m=m.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":l.$raise(_("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if((f=M())["$respond_to?"]("to_ary")&&(f=f.$to_ary()[0]),1!==(m=f["$respond_to?"]("to_str")?f.$to_str():String.fromCharCode(r(f,_("Integer"),"to_int"))).length&&l.$raise(_("ArgumentError"),"%c requires a character"),2&O)for(;m.length<b;)m+=" ";else for(;m.length<b;)m=" "+m;break e;case"p":if(m=M().$inspect(),-1!==v&&(m=m.slice(0,v)),2&O)for(;m.length<b;)m+=" ";else for(;m.length<b;)m=" "+m;break e;case"s":if(m=M().$to_s(),-1!==v&&(m=m.slice(0,v)),2&O)for(;m.length<b;)m+=" ";else for(;m.length<b;)m=" "+m;break e;default:l.$raise(_("ArgumentError"),"malformed format string - %"+t.charAt(p))}void 0===m&&l.$raise(_("ArgumentError"),"malformed format string - %"),R+=t.slice(I,d)+m,I=p+1}return $.DEBUG&&F>=0&&z<u.length&&l.$raise(_("ArgumentError"),"too many arguments for format string"),R+t.slice(I)},-2),c(e,"sprintf","format")},Opal.modules["corelib/string/encoding"]=function(t){var e,r,n,i,s,o=t.klass,a=t.hash2,l=t.rb_plus,$=t.truthy,u=t.send,c=t.defs,h=t.eqeq,_=t.def,d=t.return_ivar,p=t.return_val,f=t.slice,m=t.Kernel,g=t.Opal,b=t.rb_lt,v=t.top,y=t.$r([]),x=t.nil,k=t.$$$;return t.add_stubs("require,+,[],clone,initialize,new,instance_eval,to_proc,each,const_set,tr,==,default_external,attr_accessor,singleton_class,attr_reader,raise,register,length,bytes,force_encoding,dup,bytesize,enum_for,each_byte,to_a,each_char,each_codepoint,coerce_to!,find,<,default_external="),v.$require("corelib/string"),(r=(e=o("::",null,"Encoding")).$$prototype).name=r.dummy=x,c(e,"$register",function e(r,n){var i=e.$$p||x,s=x,o=x,c=x,h=x,_=x,d=x;return e.$$p=null,null==n&&(n=a([],{})),s=l([r],$(o=n["$[]"]("aliases"))?o:[]),c=$(o=n["$[]"]("ascii"))&&o,h=$(o=n["$[]"]("dummy"))&&o,$(n["$[]"]("inherits"))?(_=n["$[]"]("inherits").$clone()).$initialize(r,s,c,h):_=this.$new(r,s,c,h),i!==x&&u(_,"instance_eval",[],i.$to_proc()),d=t.encodings,u(s,"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=x),r.$const_set(e.$tr("-","_"),_),d[e]=_},{$$s:this})},-2),c(e,"$find",function(e){return h(e,"default_external")?this.$default_external():t.find_encoding(e)}),e.$singleton_class().$attr_accessor("default_external"),e.$attr_reader("name","names"),_(e,"$initialize",function(t,e,r,n){return this.name=t,this.names=e,this.ascii=r,this.dummy=n}),_(e,"$ascii_compatible?",d("ascii")),_(e,"$dummy?",d("dummy")),_(e,"$binary?",p(!1)),_(e,"$to_s",d("name")),_(e,"$inspect",function(){return"#<Encoding:"+this.name+($(this.dummy)?" (dummy)":x)+">"}),_(e,"$charsize",function(t){for(var e=0,r=0,n=t.length;r<n;r++){var i=t.charCodeAt(r);!(i>=55296&&i<=56319)&&e++}return e}),_(e,"$each_char",function e(r){var n=e.$$p||x;e.$$p=null;for(var i="",s=0,o=r.length;s<o;s++){var a=r.charCodeAt(s),l=r.charAt(s);if(a>=56320&&a<=57343){i=l;continue}a>=55296&&a<=56319&&(l=i+l),"UTF-8"!=r.encoding.name&&((l=new String(l)).encoding=r.encoding),t.yield1(n,l)}}),_(e,"$each_byte",function(t){return f(arguments),m.$raise(k("NotImplementedError"))},-1),_(e,"$bytesize",function(t){return f(arguments),m.$raise(k("NotImplementedError"))},-1),o("::",k("StandardError"),"EncodingError"),o("::",k("EncodingError"),"CompatibilityError"),u(k("Encoding"),"register",["UTF-8",a(["aliases","ascii"],{aliases:["CP65001"],ascii:!0})],function e(){var r=null==e.$$s?this:e.$$s;return _(r,"$each_byte",function e(r){var n,i=e.$$p||x;e.$$p=null;for(var s=1/0,o=r.length,a=null,l=0;l<o;++l){if((n=r.charCodeAt(l))>55295&&n<57344){if(!a){if(n>56319||l+1===o){(s-=3)>-1&&(t.yield1(i,239),t.yield1(i,191),t.yield1(i,189));continue}a=n;continue}if(n<56320){(s-=3)>-1&&(t.yield1(i,239),t.yield1(i,191),t.yield1(i,189)),a=n;continue}n=(a-55296<<10|n-56320)+65536}else a&&(s-=3)>-1&&(t.yield1(i,239),t.yield1(i,191),t.yield1(i,189));if(a=null,n<128){if((s-=1)<0)break;t.yield1(i,n)}else if(n<2048){if((s-=2)<0)break;t.yield1(i,n>>6|192),t.yield1(i,63&n|128)}else if(n<65536){if((s-=3)<0)break;t.yield1(i,n>>12|224),t.yield1(i,n>>6&63|128),t.yield1(i,63&n|128)}else if(n<1114112){if((s-=4)<0)break;t.yield1(i,n>>18|240),t.yield1(i,n>>12&63|128),t.yield1(i,n>>6&63|128),t.yield1(i,63&n|128)}}}),_(r,"$bytesize",function(t){return t.$bytes().$length()})},{$$s:v}),u(k("Encoding"),"register",["UTF-16LE"],function e(){var r=null==e.$$s?this:e.$$s;return _(r,"$each_byte",function e(r){var n=e.$$p||x;e.$$p=null;for(var i=0,s=r.length;i<s;i++){var o=r.charCodeAt(i);t.yield1(n,255&o),t.yield1(n,o>>8)}}),_(r,"$bytesize",function(t){return 2*t.length})},{$$s:v}),u(k("Encoding"),"register",["UTF-16BE",a(["inherits"],{inherits:k(k("Encoding"),"UTF_16LE")})],function e(){return _(null==e.$$s?this:e.$$s,"$each_byte",function e(r){var n=e.$$p||x;e.$$p=null;for(var i=0,s=r.length;i<s;i++){var o=r.charCodeAt(i);t.yield1(n,o>>8),t.yield1(n,255&o)}})},{$$s:v}),u(k("Encoding"),"register",["UTF-32LE"],function e(){var r=null==e.$$s?this:e.$$s;return _(r,"$each_byte",function e(r){var n=e.$$p||x;e.$$p=null;for(var i=0,s=r.length;i<s;i++){var o=r.charCodeAt(i);t.yield1(n,255&o),t.yield1(n,o>>8),t.yield1(n,0),t.yield1(n,0)}}),_(r,"$bytesize",function(t){return 4*t.length})},{$$s:v}),u(k("Encoding"),"register",["UTF-32BE",a(["inherits"],{inherits:k(k("Encoding"),"UTF_32LE")})],function e(){return _(null==e.$$s?this:e.$$s,"$each_byte",function e(r){var n=e.$$p||x;e.$$p=null;for(var i=0,s=r.length;i<s;i++){var o=r.charCodeAt(i);t.yield1(n,0),t.yield1(n,0),t.yield1(n,o>>8),t.yield1(n,255&o)}})},{$$s:v}),u(k("Encoding"),"register",["ASCII-8BIT",a(["aliases","ascii"],{aliases:["BINARY"],ascii:!0})],function e(){var r=null==e.$$s?this:e.$$s;return _(r,"$each_char",function e(r){var n=e.$$p||x;e.$$p=null;for(var i=0,s=r.length;i<s;i++){var o=new String(r.charAt(i));o.encoding=r.encoding,t.yield1(n,o)}}),_(r,"$charsize",function(t){return t.length}),_(r,"$each_byte",function e(r){var n=e.$$p||x;e.$$p=null;for(var i=0,s=r.length;i<s;i++){var o=r.charCodeAt(i);t.yield1(n,255&o)}}),_(r,"$bytesize",function(t){return t.length}),_(r,"$binary?",p(!0))},{$$s:v}),k("Encoding").$register("ISO-8859-1",a(["aliases","ascii","inherits"],{aliases:["ISO8859-1"],ascii:!0,inherits:k(k("Encoding"),"ASCII_8BIT")})),k("Encoding").$register("US-ASCII",a(["aliases","ascii","inherits"],{aliases:["ASCII"],ascii:!0,inherits:k(k("Encoding"),"ASCII_8BIT")})),(i=(n=o("::",null,"String")).$$prototype).internal_encoding=i.bytes=i.encoding=x,n.$attr_reader("encoding"),n.$attr_reader("internal_encoding"),t.prop(String.prototype,"bytes",x),t.prop(String.prototype,"encoding",k(k("Encoding"),"UTF_8")),t.prop(String.prototype,"internal_encoding",k(k("Encoding"),"UTF_8")),_(n,"$b",function(){return this.$dup().$force_encoding("binary")}),_(n,"$bytesize",function(){return this.internal_encoding.$bytesize(this)}),_(n,"$each_byte",function t(){var e=t.$$p||x;return(t.$$p=null,e!==x)?(u(this.internal_encoding,"each_byte",[this],e.$to_proc()),this):u(this,"enum_for",["each_byte"],function t(){return(null==t.$$s?this:t.$$s).$bytesize()},{$$s:this})}),_(n,"$bytes",function(){var t=x;return"string"==typeof this?new String(this).$each_byte().$to_a():(this.bytes=$(t=this.bytes)?t:this.$each_byte().$to_a(),this.bytes.$dup())}),_(n,"$each_char",function t(){var e=t.$$p||x;return(t.$$p=null,e!==x)?(u(this.encoding,"each_char",[this],e.$to_proc()),this):u(this,"enum_for",["each_char"],function t(){return(null==t.$$s?this:t.$$s).$length()},{$$s:this})}),_(n,"$chars",function t(){var e=t.$$p||x;return(t.$$p=null,$(e))?u(this,"each_char",[],e.$to_proc()):this.$each_char().$to_a()}),_(n,"$each_codepoint",function e(){var r=e.$$p||x;if(e.$$p=null,!(r!==x))return this.$enum_for("each_codepoint");for(var n=0,i=this.length;n<i;n++)t.yield1(r,this.codePointAt(n));return this}),_(n,"$codepoints",function t(){var e=t.$$p||x;return(t.$$p=null,e!==x)?u(this,"each_codepoint",[],e.$to_proc()):this.$each_codepoint().$to_a()}),_(n,"$encode",function(e){return t.enc(this,e)}),_(n,"$force_encoding",function(e){var r=this;return e===r.encoding?r:(e=g["$coerce_to!"](e,k("String"),"to_s"),(e=k("Encoding").$find(e))===r.encoding)?r:r=t.set_encoding(r,e)}),_(n,"$getbyte",function(t){var e=x;return(e=this.$bytes(),t=g["$coerce_to!"](t,k("Integer"),"to_int"),$(b(e.$length(),t)))?x:e["$[]"](t)}),_(n,"$initialize_copy",function(t){return"\n      self.encoding = other.encoding;\n      self.internal_encoding = other.internal_encoding;\n    "}),_(n,"$valid_encoding?",p(!0)),s=[k(y("Encoding"),"UTF_8")],u(k("Encoding"),"default_external=",s),s[s.length-1]},Opal.modules["corelib/math"]=function(t){var e,r,n,i=t.type_error,s=t.module,o=t.const_set,a=t.Class,l=t.slice,$=t.Kernel,u=t.defs,c=t.truthy,h=t.send,_=t.def,d=t.rb_minus,p=t.eqeqeq,f=t.rb_divide,m=t.nil,g=t.$$$;return t.add_stubs("new,raise,Float,Integer,module_function,each,define_method,checked,float!,===,gamma,-,integer!,/,infinite?"),r=[e=s("::","Math")].concat([]),n=t.$r(r),o(e,"E",Math.E),o(e,"PI",Math.PI),o(e,"DomainError",a.$new(g("StandardError"))),u(e,"$checked",function(t,e){if(r=l(arguments,1),isNaN(r[0])||2==r.length&&isNaN(r[1]))return NaN;var r,i=Math[t].apply(null,r);return isNaN(i)&&$.$raise(n("DomainError"),'Numerical argument is out of domain - "'+t+'"'),i},-2),u(e,"$float!",function(e){try{return $.$Float(e)}catch(r){if(t.rescue(r,[g("ArgumentError")]))try{return $.$raise(i(e,g("Float")))}finally{t.pop_exception()}else throw r}}),u(e,"$integer!",function(e){try{return $.$Integer(e)}catch(r){if(t.rescue(r,[g("ArgumentError")]))try{return $.$raise(i(e,g("Integer")))}finally{t.pop_exception()}else throw r}}),e.$module_function(),c(void 0!==Math.erf)||t.prop(Math,"erf",function(t){var e=1;t<0&&(e=-1);var r=1/(1+.3275911*(t=Math.abs(t)));return e*(1-((((1.061405429*r+-1.453152027)*r+1.421413741)*r+-.284496736)*r+.254829592)*r*Math.exp(-t*t))}),c(void 0!==Math.erfc)||t.prop(Math,"erfc",function(t){var e=Math.abs(t),r=1/(.5*e+1),n=r*Math.exp(-e*e-1.26551223+r*(r*(r*(r*(r*(r*(r*(r*(.17087277*r+-.82215223)+1.48851587)+-1.13520398)+.27886807)+-.18628806)+.09678418)+.37409196)+1.00002368));return t<0?2-n:n}),h(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=m),h(r,"define_method",[e],function(t){return null==t&&(t=m),g("Math").$checked(e,g("Math")["$float!"](t))})},{$$s:e}),_(e,"$atan2",function(t,e){return g("Math").$checked("atan2",g("Math")["$float!"](t),g("Math")["$float!"](e))}),_(e,"$hypot",function(t,e){return g("Math").$checked("hypot",g("Math")["$float!"](t),g("Math")["$float!"](e))}),_(e,"$frexp",function(t){if(isNaN(t=n("Math")["$float!"](t)))return[NaN,0];var e=Math.floor(Math.log(Math.abs(t))/Math.log(2))+1;return[t/Math.pow(2,e),e]}),_(e,"$gamma",function(t){t=n("Math")["$float!"](t);var e,r,i,s,o,a,l,u,c,h=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-.00009837447530487956,1580887032249125e-19,-.00021026444172410488,21743961811521265e-20,-.0001643181065367639,8441822398385275e-20,-.000026190838401581408,36899182659531625e-22];if(isNaN(t))return NaN;if(0===t&&1/t<0)return-1/0;if((-1===t||t===-1/0)&&$.$raise(n("DomainError"),'Numerical argument is out of domain - "gamma"'),n("Integer")["$==="](t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(s=t-2,o=t-1;s>1;)o*=s,s--;return 0==o&&(o=1),o}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*g("Math").$gamma(d(1,t)));if(t>=171.35)return 1/0;if(t>85)return c=(u=(l=(a=t*t)*t)*t)*t,Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*a)-139/(51840*l)-571/(2488320*u)+163879/(209018880*c)+5246819/(75246796800*c*t));for(t-=1,i=h[0],e=1;e<h.length;++e)i+=h[e]/(t+e);return Math.sqrt(2*Math.PI)*Math.pow(r=t+4.7421875+.5,t+.5)*Math.exp(-r)*i}),_(e,"$ldexp",function(t,e){return t=n("Math")["$float!"](t),isNaN(e=n("Math")["$integer!"](e))&&$.$raise(g("RangeError"),"float NaN out of range of integer"),t*Math.pow(2,e)}),_(e,"$lgamma",function(t){return -1==t?[1/0,1]:[Math.log(Math.abs(g("Math").$gamma(t))),0>g("Math").$gamma(t)?-1:1]}),_(e,"$log",function(t,e){return(p(g("String"),t)&&$.$raise(i(t,g("Float"))),c(null==e))?g("Math").$checked("log",g("Math")["$float!"](t)):(p(g("String"),e)&&$.$raise(i(e,g("Float"))),f(g("Math").$checked("log",g("Math")["$float!"](t)),g("Math").$checked("log",g("Math")["$float!"](e))))},-2),_(e,"$log10",function(t){return p(g("String"),t)&&$.$raise(i(t,g("Float"))),g("Math").$checked("log10",g("Math")["$float!"](t))}),_(e,"$log2",function(t){return p(g("String"),t)&&$.$raise(i(t,g("Float"))),g("Math").$checked("log2",g("Math")["$float!"](t))}),_(e,"$tan",function(t){return c((t=g("Math")["$float!"](t))["$infinite?"]())?g(g("Float"),"NAN"):g("Math").$checked("tan",g("Math")["$float!"](t))})},Opal.modules["corelib/complex/base"]=function(t){var e,r,n,i,s,o,a=t.module,l=t.truthy,$=t.def,u=t.klass,c=[],h=t.nil;return t.add_stubs("new,from_string"),r=[e=a("::","Kernel")].concat(c),n=t.$r(r),$(e,"$Complex",function(t,e){return(null==e&&(e=h),l(e))?n("Complex").$new(t,e):n("Complex").$new(t,0)},-2),s=[i=u("::",null,"String")].concat(c),o=t.$r(s),$(i,"$to_c",function(){return o("Complex").$from_string(this)})},Opal.modules["corelib/complex"]=function(t){var e,r,n,i,s=t.klass,o=t.truthy,a=t.eqeqeq,l=t.Kernel,$=t.defs,u=t.rb_times,c=t.def,h=t.rb_plus,_=t.rb_minus,d=t.rb_divide,p=t.eqeq,f=t.to_ary,m=t.rb_gt,g=t.neqeq,b=t.return_val,v=t.const_set,y=t.alias,x=t.top,k=t.nil,w=t.$$$;return t.add_stubs("require,real?,===,raise,new,*,cos,sin,attr_reader,freeze,class,==,real,imag,Complex,-@,+,__coerced__,-,nan?,/,conj,abs2,quo,polar,exp,log,>,!=,divmod,**,hypot,atan2,lcm,denominator,finite?,infinite?,numerator,abs,arg,rationalize,to_f,to_i,to_r,inspect,zero?,positive?,Rational,rect,angle"),x.$require("corelib/numeric"),x.$require("corelib/complex/base"),r=[e=s("::",w("Numeric"),"Complex")].concat([]),n=t.$r(r),(i=e.$$prototype).real=i.imag=k,$(e,"$rect",function(t,e){return null==e&&(e=0),a(w("Numeric"),t)&&o(t["$real?"]())&&a(w("Numeric"),e)&&o(e["$real?"]())||l.$raise(w("TypeError"),"not a real"),this.$new(t,e)},-2),$(e,"$polar",function(t,e){return null==e&&(e=0),a(w("Numeric"),t)&&o(t["$real?"]())&&a(w("Numeric"),e)&&o(e["$real?"]())||l.$raise(w("TypeError"),"not a real"),this.$new(u(t,w("Math").$cos(e)),u(t,w("Math").$sin(e)))},-2),e.$attr_reader("real","imag"),c(e,"$initialize",function(t,e){return null==e&&(e=0),this.real=t,this.imag=e,this.$freeze()},-2),c(e,"$coerce",function(t){return a(w("Complex"),t)?[t,this]:a(w("Numeric"),t)&&o(t["$real?"]())?[w("Complex").$new(t,0),this]:l.$raise(w("TypeError"),""+t.$class()+" can't be coerced into Complex")}),c(e,"$==",function(t){var e=k;return a(w("Complex"),t)?o(e=this.real["$=="](t.$real()))?this.imag["$=="](t.$imag()):e:a(w("Numeric"),t)&&o(t["$real?"]())?o(e=this.real["$=="](t))?this.imag["$=="](0):e:t["$=="](this)}),c(e,"$-@",function(){return l.$Complex(this.real["$-@"](),this.imag["$-@"]())}),c(e,"$+",function(t){return a(w("Complex"),t)?l.$Complex(h(this.real,t.$real()),h(this.imag,t.$imag())):a(w("Numeric"),t)&&o(t["$real?"]())?l.$Complex(h(this.real,t),this.imag):this.$__coerced__("+",t)}),c(e,"$-",function(t){return a(w("Complex"),t)?l.$Complex(_(this.real,t.$real()),_(this.imag,t.$imag())):a(w("Numeric"),t)&&o(t["$real?"]())?l.$Complex(_(this.real,t),this.imag):this.$__coerced__("-",t)}),c(e,"$*",function(t){return a(w("Complex"),t)?l.$Complex(_(u(this.real,t.$real()),u(this.imag,t.$imag())),h(u(this.real,t.$imag()),u(this.imag,t.$real()))):a(w("Numeric"),t)&&o(t["$real?"]())?l.$Complex(u(this.real,t),u(this.imag,t)):this.$__coerced__("*",t)}),c(e,"$/",function(t){return a(w("Complex"),t)?a(w("Number"),this.real)&&o(this.real["$nan?"]())||a(w("Number"),this.imag)&&o(this.imag["$nan?"]())||a(w("Number"),t.$real())&&o(t.$real()["$nan?"]())||a(w("Number"),t.$imag())&&o(t.$imag()["$nan?"]())?w("Complex").$new(w(w("Float"),"NAN"),w(w("Float"),"NAN")):d(u(this,t.$conj()),t.$abs2()):a(w("Numeric"),t)&&o(t["$real?"]())?l.$Complex(this.real.$quo(t),this.imag.$quo(t)):this.$__coerced__("/",t)}),c(e,"$**",function(t){var e,r=k,n=k,i=k,s=k,$=k,c=k,b=k,v=k,y=k,x=k,A=k;if(p(t,0))return w("Complex").$new(1,0);if(a(w("Complex"),t))return r=null==(e=f(this.$polar()))[0]?k:e[0],n=null==e[1]?k:e[1],i=t.$real(),s=t.$imag(),$=w("Math").$exp(_(u(i,w("Math").$log(r)),u(s,n))),c=h(u(n,i),u(s,w("Math").$log(r))),w("Complex").$polar($,c);if(a(w("Integer"),t)){if(!o(m(t,0)))return d(w("Rational").$new(1,1),this)["$**"](t["$-@"]());for(b=this,v=b,y=_(t,1);g(y,0);){for(x=null==(e=f(y.$divmod(2)))[0]?k:e[0],A=null==e[1]?k:e[1];p(A,0);)b=l.$Complex(_(u(b.$real(),b.$real()),u(b.$imag(),b.$imag())),u(u(2,b.$real()),b.$imag())),x=null==(e=f((y=x).$divmod(2)))[0]?k:e[0],A=null==e[1]?k:e[1];v=u(v,b),y=_(y,1)}return v}return a(w("Float"),t)||a(w("Rational"),t)?(r=null==(e=f(this.$polar()))[0]?k:e[0],n=null==e[1]?k:e[1],w("Complex").$polar(r["$**"](t),u(n,t))):this.$__coerced__("**",t)}),c(e,"$abs",function(){return w("Math").$hypot(this.real,this.imag)}),c(e,"$abs2",function(){return h(u(this.real,this.real),u(this.imag,this.imag))}),c(e,"$angle",function(){return w("Math").$atan2(this.imag,this.real)}),c(e,"$conj",function(){return l.$Complex(this.real,this.imag["$-@"]())}),c(e,"$denominator",function(){return this.real.$denominator().$lcm(this.imag.$denominator())}),c(e,"$eql?",function(t){var e=k,r=k;return o(e=o(r=n("Complex")["$==="](t))?this.real.$class()["$=="](this.imag.$class()):r)?this["$=="](t):e}),c(e,"$fdiv",function(t){return a(w("Numeric"),t)||l.$raise(w("TypeError"),""+t.$class()+" can't be coerced into Complex"),d(this,t)}),c(e,"$finite?",function(){var t=k;return o(t=this.real["$finite?"]())?this.imag["$finite?"]():t}),c(e,"$hash",function(){return"Complex:"+this.real+":"+this.imag}),c(e,"$infinite?",function(){var t=k;return o(t=this.real["$infinite?"]())?t:this.imag["$infinite?"]()}),c(e,"$inspect",function(){return"("+this+")"}),c(e,"$numerator",function(){var t=k;return t=this.$denominator(),l.$Complex(u(this.real.$numerator(),d(t,this.real.$denominator())),u(this.imag.$numerator(),d(t,this.imag.$denominator())))}),c(e,"$polar",function(){return[this.$abs(),this.$arg()]}),c(e,"$rationalize",function(t){return arguments.length>1&&l.$raise(w("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),g(this.imag,0)&&l.$raise(w("RangeError"),"can't convert "+this+" into Rational"),this.$real().$rationalize(t)},-1),c(e,"$real?",b(!1)),c(e,"$rect",function(){return[this.real,this.imag]}),c(e,"$to_f",function(){return p(this.imag,0)||l.$raise(w("RangeError"),"can't convert "+this+" into Float"),this.real.$to_f()}),c(e,"$to_i",function(){return p(this.imag,0)||l.$raise(w("RangeError"),"can't convert "+this+" into Integer"),this.real.$to_i()}),c(e,"$to_r",function(){return p(this.imag,0)||l.$raise(w("RangeError"),"can't convert "+this+" into Rational"),this.real.$to_r()}),c(e,"$to_s",function(){var t=k;return t=h(t=this.real.$inspect(),a(w("Number"),this.imag)&&o(this.imag["$nan?"]())||o(this.imag["$positive?"]())||o(this.imag["$zero?"]())?"+":"-"),t=h(t,this.imag.$abs().$inspect()),a(w("Number"),this.imag)&&(o(this.imag["$nan?"]())||o(this.imag["$infinite?"]()))&&(t=h(t,"*")),h(t,"i")}),v(r[0],"I",e.$new(0,1)),$(e,"$from_string",function(t){var e,r,n=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;function i(){var e=t.match(n)[0];return t=t.slice(e.length),e.replace(/_/g,"")}function s(){if(!n.test(t))return null;var e=parseFloat(i());if("/"!==t[0])return e;if(t=t.slice(1),!n.test(t))return t="/"+t,e;var r=parseFloat(i());return l.$Rational(e,r)}return(t.match(n),e=s())?(r=s())?l.$Complex(e,r):"i"===t[0]?l.$Complex(0,e):l.$Complex(e,0):"i"===t[0]?l.$Complex(0,1):"-"===t[0]&&"i"===t[1]?l.$Complex(0,-1):"+"===t[0]&&"i"===t[1]?l.$Complex(0,1):l.$Complex(0,0)}),y(t.get_singleton_class(e),"rectangular","rect"),y(e,"arg","angle"),y(e,"conjugate","conj"),y(e,"divide","/"),y(e,"imaginary","imag"),y(e,"magnitude","abs"),y(e,"phase","arg"),y(e,"quo","/"),y(e,"rectangular","rect"),t.udef(e,"$negative?"),t.udef(e,"$positive?"),t.udef(e,"$step"),k},Opal.modules["corelib/rational/base"]=function(t){var e=t.module,r=t.def,n=t.klass,i=(t.nil,t.$$$);return t.add_stubs("convert,from_string"),r(e("::","Kernel"),"$Rational",function(t,e){return null==e&&(e=1),i("Rational").$convert(t,e)},-2),r(n("::",null,"String"),"$to_r",function(){return i("Rational").$from_string(this)})},Opal.modules["corelib/rational"]=function(t){var e,r,n=t.klass,i=t.eqeq,s=t.Kernel,o=t.truthy,a=t.rb_lt,l=t.rb_divide,$=t.defs,u=t.eqeqeq,c=t.not,h=t.Opal,_=t.def,d=t.return_ivar,p=t.rb_minus,f=t.rb_times,m=t.rb_plus,g=t.rb_gt,b=t.rb_le,v=t.return_self,y=t.alias,x=t.top,k=t.nil,w=t.$$$;return t.add_stubs("require,to_i,==,raise,<,-@,new,gcd,/,nil?,===,reduce,to_r,!,equal?,coerce_to!,freeze,to_f,numerator,denominator,<=>,-,*,__coerced__,+,Rational,>,**,abs,ceil,with_precision,floor,<=,truncate,send"),x.$require("corelib/numeric"),x.$require("corelib/rational/base"),(r=(e=n("::",w("Numeric"),"Rational")).$$prototype).num=r.den=k,$(e,"$reduce",function(t,e){var r=k;if(t=t.$to_i(),i(e=e.$to_i(),0))s.$raise(w("ZeroDivisionError"),"divided by 0");else if(o(a(e,0)))t=t["$-@"](),e=e["$-@"]();else if(i(e,1))return this.$new(t,e);return r=t.$gcd(e),this.$new(l(t,r),l(e,r))}),$(e,"$convert",function(t,e){return((o(t["$nil?"]())||o(e["$nil?"]()))&&s.$raise(w("TypeError"),"cannot convert nil into Rational"),u(w("Integer"),t)&&u(w("Integer"),e))?this.$reduce(t,e):((u(w("Float"),t)||u(w("String"),t)||u(w("Complex"),t))&&(t=t.$to_r()),(u(w("Float"),e)||u(w("String"),e)||u(w("Complex"),e))&&(e=e.$to_r()),o(e["$equal?"](1))&&c(w("Integer")["$==="](t)))?h["$coerce_to!"](t,w("Rational"),"to_r"):u(w("Numeric"),t)&&u(w("Numeric"),e)?l(t,e):this.$reduce(t,e)}),_(e,"$initialize",function(t,e){return this.num=t,this.den=e,this.$freeze()}),_(e,"$numerator",d("num")),_(e,"$denominator",d("den")),_(e,"$coerce",function(t){var e=k;return u(w("Rational"),e=t)?[t,this]:u(w("Integer"),e)?[t.$to_r(),this]:u(w("Float"),e)?[t,this.$to_f()]:k}),_(e,"$==",function(t){var e=k,r=k;return u(w("Rational"),e=t)?o(r=this.num["$=="](t.$numerator()))?this.den["$=="](t.$denominator()):r:u(w("Integer"),e)?o(r=this.num["$=="](t))?this.den["$=="](1):r:u(w("Float"),e)?this.$to_f()["$=="](t):t["$=="](this)}),_(e,"$<=>",function(t){var e=k;return u(w("Rational"),e=t)?p(f(this.num,t.$denominator()),f(this.den,t.$numerator()))["$<=>"](0):u(w("Integer"),e)?p(this.num,f(this.den,t))["$<=>"](0):u(w("Float"),e)?this.$to_f()["$<=>"](t):this.$__coerced__("<=>",t)}),_(e,"$+",function(t){var e=k,r=k,n=k;return u(w("Rational"),e=t)?(r=m(f(this.num,t.$denominator()),f(this.den,t.$numerator())),n=f(this.den,t.$denominator()),s.$Rational(r,n)):u(w("Integer"),e)?s.$Rational(m(this.num,f(t,this.den)),this.den):u(w("Float"),e)?m(this.$to_f(),t):this.$__coerced__("+",t)}),_(e,"$-",function(t){var e=k,r=k,n=k;return u(w("Rational"),e=t)?(r=p(f(this.num,t.$denominator()),f(this.den,t.$numerator())),n=f(this.den,t.$denominator()),s.$Rational(r,n)):u(w("Integer"),e)?s.$Rational(p(this.num,f(t,this.den)),this.den):u(w("Float"),e)?p(this.$to_f(),t):this.$__coerced__("-",t)}),_(e,"$*",function(t){var e=k,r=k,n=k;return u(w("Rational"),e=t)?(r=f(this.num,t.$numerator()),n=f(this.den,t.$denominator()),s.$Rational(r,n)):u(w("Integer"),e)?s.$Rational(f(this.num,t),this.den):u(w("Float"),e)?f(this.$to_f(),t):this.$__coerced__("*",t)}),_(e,"$/",function(t){var e=k,r=k,n=k;return u(w("Rational"),e=t)?(r=f(this.num,t.$denominator()),n=f(this.den,t.$numerator()),s.$Rational(r,n)):u(w("Integer"),e)?i(t,0)?l(this.$to_f(),0):s.$Rational(this.num,f(this.den,t)):u(w("Float"),e)?l(this.$to_f(),t):this.$__coerced__("/",t)}),_(e,"$**",function(t){var e=k;return u(w("Integer"),e=t)?i(this,0)&&o(a(t,0))?w(w("Float"),"INFINITY"):o(g(t,0))?s.$Rational(this.num["$**"](t),this.den["$**"](t)):o(a(t,0))?s.$Rational(this.den["$**"](t["$-@"]()),this.num["$**"](t["$-@"]())):s.$Rational(1,1):u(w("Float"),e)?this.$to_f()["$**"](t):u(w("Rational"),e)?i(t,0)?s.$Rational(1,1):i(t.$denominator(),1)?o(a(t,0))?s.$Rational(this.den["$**"](t.$numerator().$abs()),this.num["$**"](t.$numerator().$abs())):s.$Rational(this.num["$**"](t.$numerator()),this.den["$**"](t.$numerator())):i(this,0)&&o(a(t,0))?s.$raise(w("ZeroDivisionError"),"divided by 0"):this.$to_f()["$**"](t):this.$__coerced__("**",t)}),_(e,"$abs",function(){return s.$Rational(this.num.$abs(),this.den.$abs())}),_(e,"$ceil",function(t){return(null==t&&(t=0),i(t,0))?l(this.num["$-@"](),this.den)["$-@"]().$ceil():this.$with_precision("ceil",t)},-1),_(e,"$floor",function(t){return(null==t&&(t=0),i(t,0))?l(this.num["$-@"](),this.den)["$-@"]().$floor():this.$with_precision("floor",t)},-1),_(e,"$hash",function(){return"Rational:"+this.num+":"+this.den}),_(e,"$inspect",function(){return"("+this+")"}),_(e,"$rationalize",function(t){if(arguments.length>1&&s.$raise(w("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),null==t)return this;for(var e,r,n,i,o,a=t.$abs(),$=p(this,a),u=m(this,a),c=0,h=1,_=1,d=0;!b(e=$.$ceil(),u);)i=(r=e-1)*h+c,o=r*d+_,n=l(1,p(u,r)),u=l(1,p($,r)),$=n,c=h,_=d,h=i,d=o;return s.$Rational(e*h+c,e*d+_)},-1),_(e,"$round",function(t){var e=k,r=k;return(null==t&&(t=0),i(t,0))?i(this.num,0)?0:i(this.den,1)?this.num:(r=l(m(f(this.num.$abs(),2),this.den),f(this.den,2)).$truncate(),o(a(this.num,0)))?r["$-@"]():r:this.$with_precision("round",t)},-1),_(e,"$to_f",function(){return l(this.num,this.den)}),_(e,"$to_i",function(){return this.$truncate()}),_(e,"$to_r",v),_(e,"$to_s",function(){return""+this.num+"/"+this.den}),_(e,"$truncate",function(t){return(null==t&&(t=0),i(t,0))?o(a(this.num,0))?this.$ceil():this.$floor():this.$with_precision("truncate",t)},-1),_(e,"$with_precision",function(t,e){var r=k,n=k;return(u(w("Integer"),e)||s.$raise(w("TypeError"),"not an Integer"),n=f(this,r=10["$**"](e)),o(a(e,1)))?l(n.$send(t),r).$to_i():s.$Rational(n.$send(t),r)}),$(e,"$from_string",function(t){var e,r,n=t.trimLeft(),i=/^[+-]?[\d_]+(\.[\d_]+)?/;function o(){var t=n.match(i)[0];return n=n.slice(t.length),t.replace(/_/g,"")}return(n.match(i),i.test(n))?(e=parseFloat(o()),"/"!==n[0])?s.$Rational(e,1):(n=n.slice(1),i.test(n))?(r=parseFloat(o()),s.$Rational(e,r)):s.$Rational(e,1):s.$Rational(0,1)}),y(e,"divide","/"),y(e,"quo","/")},Opal.modules["corelib/time"]=function(t){var e=t.slice,r=t.deny_frozen_access,n=t.klass,i=t.Kernel,s=t.Opal,o=t.defs,a=t.eqeqeq,l=t.def,$=t.truthy,u=t.rb_gt,c=t.rb_lt,h=t.send,_=t.rb_plus,d=t.rb_divide,p=t.rb_minus,f=t.range,m=t.neqeq,g=t.rb_le,b=t.eqeq,v=t.alias,y=t.top,x=t.nil,k=t.$$$;return t.add_stubs("require,include,===,raise,coerce_to!,respond_to?,to_str,to_i,_parse_offset,new,<=>,to_f,nil?,>,<,strftime,each,define_method,year,month,day,+,round,/,-,copy_instance_variables,initialize_dup,is_a?,zero?,wday,utc?,mon,yday,hour,min,sec,rjust,ljust,zone,to_s,[],cweek_cyear,jd,to_date,format,isdst,!=,<=,==,ceil,local,gm,asctime,getgm,gmt_offset,inspect,usec,gmtime,gmt?"),y.$require("corelib/comparable"),function(y,w,A){var E,S=n("::",w,"Time"),C=[S].concat(A),O=t.$r(C);S.$include(k("Comparable"));var R=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],I=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],z=["January","February","March","April","May","June","July","August","September","October","November","December"];function F(t,e,r,n,o,a){if(t=t.$$is_string?parseInt(t,10):s["$coerce_to!"](t,k("Integer"),"to_int"),e===x)e=1;else if(!e.$$is_number){if(e["$respond_to?"]("to_str"))switch((e=e.$to_str()).toLowerCase()){case"jan":e=1;break;case"feb":e=2;break;case"mar":e=3;break;case"apr":e=4;break;case"may":e=5;break;case"jun":e=6;break;case"jul":e=7;break;case"aug":e=8;break;case"sep":e=9;break;case"oct":e=10;break;case"nov":e=11;break;case"dec":e=12;break;default:e=e.$to_i()}else e=s["$coerce_to!"](e,k("Integer"),"to_int")}return(e<1||e>12)&&i.$raise(k("ArgumentError"),"month out of range: "+e),e-=1,((r=r===x?1:r.$$is_string?parseInt(r,10):s["$coerce_to!"](r,k("Integer"),"to_int"))<1||r>31)&&i.$raise(k("ArgumentError"),"day out of range: "+r),((n=n===x?0:n.$$is_string?parseInt(n,10):s["$coerce_to!"](n,k("Integer"),"to_int"))<0||n>24)&&i.$raise(k("ArgumentError"),"hour out of range: "+n),((o=o===x?0:o.$$is_string?parseInt(o,10):s["$coerce_to!"](o,k("Integer"),"to_int"))<0||o>59)&&i.$raise(k("ArgumentError"),"min out of range: "+o),a===x?a=0:a.$$is_number||(a=a.$$is_string?parseInt(a,10):s["$coerce_to!"](a,k("Integer"),"to_int")),(a<0||a>60)&&i.$raise(k("ArgumentError"),"sec out of range: "+a),[t,e,r,n,o,a]}return o(S,"$at",function(t,e){var r;return k("Time")["$==="](t)?(void 0!==e&&i.$raise(k("TypeError"),"can't convert Time into an exact number"),(r=new Date(t.getTime())).timezone=t.timezone,r):(t.$$is_number||(t=s["$coerce_to!"](t,k("Integer"),"to_int")),void 0===e)?new Date(1e3*t):(e.$$is_number||(e=s["$coerce_to!"](e,k("Integer"),"to_int")),new Date(1e3*t+e/1e3))},-2),o(S,"$new",function(t,e,r,n,i,s,o){var a,l,$,u;return(null==e&&(e=x),null==r&&(r=x),null==n&&(n=x),null==i&&(i=x),null==s&&(s=x),null==o&&(o=x),void 0===t)?new Date:((t=(a=F(t,e,r,n,i,s))[0],e=a[1],r=a[2],n=a[3],i=a[4],s=a[5],o===x)?(l=new Date(t,e,r,n,i,0,1e3*s),t<100&&l.setFullYear(t)):($=this.$_parse_offset(o),u=new Date(Date.UTC(t,e,r,n,i,0,1e3*s)),t<100&&u.setUTCFullYear(t),(l=new Date(u.getTime()-36e5*$)).timezone=$),l)},-1),o(S,"$_parse_offset",function(t){var e;return t.$$is_string?"UTC"==t?e=0:/^[+-]\d\d:[0-5]\d$/.test(t)?e=("-"==t[0]?-1:1)*(+(t[1]+t[2])+ +(t[4]+t[5])/60):i.$raise(k("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+t):t.$$is_number?e=t/3600:i.$raise(k("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String"),e}),o(S,"$local",function(t,r,n,i,s,o,a,l,$,u){var c,h;return null==r&&(r=x),null==n&&(n=x),null==i&&(i=x),null==s&&(s=x),null==o&&(o=x),null==a&&(a=x),null==l&&(l=x),null==$&&($=x),null==u&&(u=x),10==arguments.length&&(c=e(arguments),t=c[5],r=c[4],n=c[3],i=c[2],s=c[1],o=c[0]),t=(c=F(t,r,n,i,s,o))[0],r=c[1],n=c[2],h=new Date(t,r,n,i=c[3],s=c[4],0,1e3*(o=c[5])),t<100&&h.setFullYear(t),h},-2),o(S,"$gm",function(t,r,n,i,s,o,a,l,$,u){var c,h;return null==r&&(r=x),null==n&&(n=x),null==i&&(i=x),null==s&&(s=x),null==o&&(o=x),null==a&&(a=x),null==l&&(l=x),null==$&&($=x),null==u&&(u=x),10==arguments.length&&(c=e(arguments),t=c[5],r=c[4],n=c[3],i=c[2],s=c[1],o=c[0]),t=(c=F(t,r,n,i,s,o))[0],r=c[1],n=c[2],h=new Date(Date.UTC(t,r,n,i=c[3],s=c[4],0,1e3*(o=c[5]))),t<100&&h.setUTCFullYear(t),h.timezone=0,h},-2),o(S,"$now",function(){return this.$new()}),l(S,"$+",function(t){a(k("Time"),t)&&i.$raise(k("TypeError"),"time + time?"),t.$$is_number||(t=s["$coerce_to!"](t,k("Integer"),"to_int"));var e=new Date(this.getTime()+1e3*t);return e.timezone=this.timezone,e}),l(S,"$-",function(t){if(a(k("Time"),t))return(this.getTime()-t.getTime())/1e3;t.$$is_number||(t=s["$coerce_to!"](t,k("Integer"),"to_int"));var e=new Date(this.getTime()-1e3*t);return e.timezone=this.timezone,e}),l(S,"$<=>",function(t){var e=x;return a(k("Time"),t)?this.$to_f()["$<=>"](t.$to_f()):$((e=t["$<=>"](this))["$nil?"]())?x:$(u(e,0))?-1:$(c(e,0))?1:0}),l(S,"$==",function(t){var e=x;return $(e=k("Time")["$==="](t))?this.$to_f()===t.$to_f():e}),l(S,"$asctime",function(){return this.$strftime("%a %b %e %H:%M:%S %Y")}),h([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function t(e,r,n,i){var s=null==t.$$s?this:t.$$s;return null==e&&(e=x),null==r&&(r=x),null==n&&(n=x),null==i&&(i=0),h(s,"define_method",[e],function t(){var e=null==t.$$s?this:t.$$s;return i+(null!=e.timezone?new Date(e.getTime()+36e5*e.timezone)[n]():e[r]())},{$$s:s})},{$$arity:-4,$$s:S}),l(S,"$yday",function(){var t=x,e=x,r=x;return t=O("Time").$new(this.$year()).$to_i(),e=O("Time").$new(this.$year(),this.$month(),this.$day()).$to_i(),r=86400,_(d(p(e,t),r).$round(),1)}),l(S,"$isdst",function(){var t=new Date(this.getFullYear(),0,1),e=new Date(this.getFullYear(),6,1);return this.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),e.getTimezoneOffset())}),l(S,"$dup",function(){var t=x;return(t=new Date(this.getTime())).$copy_instance_variables(this),t.$initialize_dup(this),t}),l(S,"$eql?",function(t){var e=x;return $(e=t["$is_a?"](k("Time")))?this["$<=>"](t)["$zero?"]():e}),h([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function t(e,r){var n=null==t.$$s?this:t.$$s;return null==e&&(e=x),null==r&&(r=x),h(n,"define_method",[e],function t(){return(null==t.$$s?this:t.$$s).$wday()===r},{$$s:n})},{$$s:S}),l(S,"$hash",function(){return"Time:"+this.getTime()}),l(S,"$inspect",function(){return $(this["$utc?"]())?this.$strftime("%Y-%m-%d %H:%M:%S UTC"):this.$strftime("%Y-%m-%d %H:%M:%S %z")}),l(S,"$succ",function(){var t=new Date(this.getTime()+1e3);return t.timezone=this.timezone,t}),l(S,"$usec",function(){return 1e3*this.getMilliseconds()}),l(S,"$zone",function(){if(0===this.timezone)return"UTC";if(null!=this.timezone)return x;var t,e=this.toString();return"GMT"==(t=-1==e.indexOf("(")?e.match(/[A-Z]{3,4}/)[0]:e.match(/\((.+)\)(?:\s|$)/)[1])&&/(GMT\W*\d{4})/.test(e)?RegExp.$1:t}),l(S,"$getgm",function(){var t=new Date(this.getTime());return t.timezone=0,t}),l(S,"$gmtime",function(){return 0!==this.timezone&&(r(this),this.timezone=0),this}),l(S,"$gmt?",function(){return 0===this.timezone}),l(S,"$gmt_offset",function(){return null!=this.timezone?60*this.timezone:-(60*this.getTimezoneOffset())}),l(S,"$strftime",function(t){var e=this;return t.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(t,r,n,i,s){var o,a,l,$="",u=-1!==r.indexOf("0"),c=-1===r.indexOf("-"),h=-1!==r.indexOf("_"),_=-1!==r.indexOf("^"),d=-1!==r.indexOf("#"),m=(r.match(":")||[]).length;switch(n=parseInt(n,10),u&&h&&(r.indexOf("0")<r.indexOf("_")?u=!1:h=!1),s){case"Y":$+=e.$year();break;case"C":u=!h,$+=Math.round(e.$year()/100);break;case"y":u=!h,$+=e.$year()%100;break;case"m":u=!h,$+=e.$mon();break;case"B":$+=z[e.$mon()-1];break;case"b":case"h":h=!u,$+=T[e.$mon()-1];break;case"d":u=!h,$+=e.$day();break;case"e":h=!u,$+=e.$day();break;case"j":u=!h,n=isNaN(n)?3:n,$+=e.$yday();break;case"H":u=!h,$+=e.$hour();break;case"k":h=!u,$+=e.$hour();break;case"I":u=!h,$+=e.$hour()%12||12;break;case"l":h=!u,$+=e.$hour()%12||12;break;case"P":$+=e.$hour()>=12?"pm":"am";break;case"p":$+=e.$hour()>=12?"PM":"AM";break;case"M":u=!h,$+=e.$min();break;case"S":u=!h,$+=e.$sec();break;case"L":u=!h,n=isNaN(n)?3:n,$+=e.getMilliseconds();break;case"N":n=isNaN(n)?9:n,$+=e.getMilliseconds().toString().$rjust(3,"0"),$=$.$ljust(n,"0");break;case"z":var g=null==e.timezone?e.getTimezoneOffset():-(60*e.timezone),b=Math.floor(Math.abs(g)/60),v=Math.abs(g)%60;$+=(g<0?"+":"-")+(b<10?"0":"")+b,m>0&&($+=":"),$+=(v<10?"0":"")+v,m>1&&($+=":00");break;case"Z":$+=e.$zone();break;case"A":$+=R[e.$wday()];break;case"a":$+=I[e.$wday()];break;case"u":$+=e.$wday()+1;break;case"w":$+=e.$wday();break;case"V":$+=e.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":$+=e.$cweek_cyear()["$[]"](1);break;case"g":$+=e.$cweek_cyear()["$[]"](1)["$[]"](f(-2,-1,!1));break;case"s":$+=e.$to_i();break;case"n":$+="\n";break;case"t":$+="	";break;case"%":$+="%";break;case"c":$+=e.$strftime("%a %b %e %T %Y");break;case"D":case"x":$+=e.$strftime("%m/%d/%y");break;case"F":$+=e.$strftime("%Y-%m-%d");break;case"v":$+=e.$strftime("%e-%^b-%4Y");break;case"r":$+=e.$strftime("%I:%M:%S %p");break;case"R":$+=e.$strftime("%H:%M");break;case"T":case"X":$+=e.$strftime("%H:%M:%S");break;case"J":if((o=e.$to_date().$jd())<2405160){$+=e.$strftime("%Y-%m-%d");break}o<2419614?(a="M",l=1867):o<2424875?(a="T",l=1911):o<2447535?(a="S",l=1925):o<2458605?(a="H",l=1988):(a="R",l=2018),$+=e.$format("%c%02d",a,p(e.$year(),l))+e.$strftime("-%m-%d");break;default:return t}return _&&($=$.toUpperCase()),d&&($=$.replace(/[A-Z]/,function(t){t.toLowerCase()}).replace(/[a-z]/,function(t){t.toUpperCase()})),c&&(u||h)&&($=$.$rjust(isNaN(n)?2:n,h?" ":"0")),$})}),l(S,"$to_a",function(){return[this.$sec(),this.$min(),this.$hour(),this.$day(),this.$month(),this.$year(),this.$wday(),this.$yday(),this.$isdst(),this.$zone()]}),l(S,"$to_f",function(){return this.getTime()/1e3}),l(S,"$to_i",function(){return parseInt(this.getTime()/1e3,10)}),l(S,"$cweek_cyear",function(){var t=x,e=x,r=x,n=x,i=x;return(t=k("Time").$new(this.$year(),1,1).$wday(),e=this.$year(),$(g(t,4))&&m(t,0)?r=p(t,1):b(r=p(p(t,7),1),-8)&&(r=-1),$(g(n=d(_(this.$yday(),r),7).$ceil(),0)))?k("Time").$new(p(this.$year(),1),12,31).$cweek_cyear():(b(n,53)&&$(g(i=k("Time").$new(this.$year(),12,31).$wday(),3))&&m(i,0)&&(n=1,e=_(e,1)),[n,e])}),v(E=t.get_singleton_class(S),"mktime","local"),v(E,"utc","gm"),v(S,"ctime","asctime"),v(S,"dst?","isdst"),v(S,"getutc","getgm"),v(S,"gmtoff","gmt_offset"),v(S,"mday","day"),v(S,"month","mon"),v(S,"to_s","inspect"),v(S,"tv_sec","to_i"),v(S,"tv_usec","usec"),v(S,"utc","gmtime"),v(S,"utc?","gmt?"),v(S,"utc_offset","gmt_offset")}(0,Date,[])},Opal.modules["corelib/struct"]=function(t){var e,r,n,i,s=t.klass,o=t.slice,a=t.extract_kwargs,l=t.ensure_kwargs,$=t.truthy,u=t.neqeq,c=t.eqeq,h=t.Opal,_=t.send,d=t.Class,p=t.to_a,f=t.def,m=t.defs,g=t.Kernel,b=t.hash2,v=t.rb_gt,y=t.rb_minus,x=t.eqeqeq,k=t.rb_lt,w=t.rb_ge,A=t.rb_plus,E=t.alias,S=t.top,C=t.nil,O=t.$$$;return t.add_stubs("require,include,!=,upcase,[],==,class,unshift,const_name!,map,coerce_to!,new,each,define_struct_attribute,allocate,initialize,alias_method,module_eval,to_proc,const_set,raise,<<,members,define_method,instance_eval,last,>,length,-,keys,any?,join,[]=,each_with_index,hash,===,<,-@,size,>=,include?,to_sym,instance_of?,__id__,eql?,enum_for,+,name,each_pair,inspect,to_h,args,each_with_object,flatten,to_a,respond_to?,dig"),S.$require("corelib/enumerable"),r=[e=s("::",null,"Struct")].concat([]),n=t.$r(r),e.$include(O("Enumerable")),m(e,"$new",function e(r,n,i){var s,m,g,b=e.$$p||C,v=C;if(e.$$p=null,s=o(arguments,1),null==(g=l(a(s)).$$smap.keyword_init)&&(g=!1),$(r)){if(c(r.$class(),O("String"))&&u(r["$[]"](0).$upcase(),r["$[]"](0)))s.$unshift(r),r=C;else try{r=h["$const_name!"](r)}catch(e){if(t.rescue(e,[O("TypeError"),O("NameError")]))try{s.$unshift(r),r=C}finally{t.pop_exception()}else throw e}}return _(s,"map",[],function(t){return null==t&&(t=C),h["$coerce_to!"](t,O("String"),"to_str")}),v=_(d,"new",[this],function e(){var r,n=null==e.$$s?this:e.$$s;return _(s,"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=C),r.$define_struct_attribute(e)},{$$s:n}),f(r=t.get_singleton_class(n),"$new",function(t){var e,r=C;return e=o(arguments),(r=this.$allocate()).$$data={},_(r,"initialize",p(e)),r},-1),r.$alias_method("[]","new")},{$$s:this}),$(b)&&_(v,"module_eval",[],b.$to_proc()),v.$$keyword_init=g,$(r)&&O("Struct").$const_set(r,v),v},-2),m(e,"$define_struct_attribute",function(t){return c(this,O("Struct"))&&g.$raise(O("ArgumentError"),"you cannot define attributes to the Struct class"),this.$members()["$<<"](t),_(this,"define_method",[t],function e(){return(null==e.$$s?this:e.$$s).$$data[t]},{$$s:this}),_(this,"define_method",[""+t+"="],function e(r){var n=null==e.$$s?this:e.$$s;return null==r&&(r=C),n.$$data[t]=r},{$$s:this})}),m(e,"$members",function(){var t=C;return null==this.members&&(this.members=C),c(this,O("Struct"))&&g.$raise(O("ArgumentError"),"the Struct class has no members"),this.members=$(t=this.members)?t:[]}),m(e,"$inherited",function(t){var e=C;return null==this.members&&(this.members=C),e=this.members,_(t,"instance_eval",[],function t(){return(null==t.$$s?this:t.$$s).members=e},{$$s:this})}),f(e,"$initialize",function(t){var e,r=C,n=C,i=C;return(e=o(arguments),$(this.$class().$$keyword_init))?(r=$(n=e.$last())?n:b([],{}),($(v(e.$length(),1))||$(1===e.length&&!r.$$is_hash))&&g.$raise(O("ArgumentError"),"wrong number of arguments (given "+e.$length()+", expected 0)"),$((i=y(r.$keys(),this.$class().$members()))["$any?"]())&&g.$raise(O("ArgumentError"),"unknown keywords: "+i.$join(", ")),_(this.$class().$members(),"each",[],function t(e){var n,i=null==t.$$s?this:t.$$s;return null==e&&(e=C),_(i,"[]=",n=[e,r["$[]"](e)]),n[n.length-1]},{$$s:this})):($(v(e.$length(),this.$class().$members().$length()))&&g.$raise(O("ArgumentError"),"struct size differs"),_(this.$class().$members(),"each_with_index",[],function t(r,n){var i,s=null==t.$$s?this:t.$$s;return null==r&&(r=C),null==n&&(n=C),_(s,"[]=",i=[r,e["$[]"](n)]),i[i.length-1]},{$$s:this}))},-1),f(e,"$initialize_copy",function(t){this.$$data={};var e,r,n,i=Object.keys(t.$$data);for(e=0,r=i.length;e<r;e++)n=i[e],this.$$data[n]=t.$$data[n]}),m(e,"$keyword_init?",function(){return this.$$keyword_init}),f(e,"$members",function(){return this.$class().$members()}),f(e,"$hash",function(){return n("Hash").$new(this.$$data).$hash()}),f(e,"$[]",function(t){return x(O("Integer"),t)?($(k(t,this.$class().$members().$size()["$-@"]()))&&g.$raise(O("IndexError"),"offset "+t+" too small for struct(size:"+this.$class().$members().$size()+")"),$(w(t,this.$class().$members().$size()))&&g.$raise(O("IndexError"),"offset "+t+" too large for struct(size:"+this.$class().$members().$size()+")"),t=this.$class().$members()["$[]"](t)):x(O("String"),t)?this.$$data.hasOwnProperty(t)||g.$raise(O("NameError").$new("no member '"+t+"' in struct",t)):g.$raise(O("TypeError"),"no implicit conversion of "+t.$class()+" into Integer"),t=h["$coerce_to!"](t,O("String"),"to_str"),this.$$data[t]}),f(e,"$[]=",function(t,e){return x(O("Integer"),t)?($(k(t,this.$class().$members().$size()["$-@"]()))&&g.$raise(O("IndexError"),"offset "+t+" too small for struct(size:"+this.$class().$members().$size()+")"),$(w(t,this.$class().$members().$size()))&&g.$raise(O("IndexError"),"offset "+t+" too large for struct(size:"+this.$class().$members().$size()+")"),t=this.$class().$members()["$[]"](t)):x(O("String"),t)?$(this.$class().$members()["$include?"](t.$to_sym()))||g.$raise(O("NameError").$new("no member '"+t+"' in struct",t)):g.$raise(O("TypeError"),"no implicit conversion of "+t.$class()+" into Integer"),t=h["$coerce_to!"](t,O("String"),"to_str"),this.$$data[t]=e}),f(e,"$==",function(t){if(!$(t["$instance_of?"](this.$class())))return!1;var e={},r={};return function t(n,i){var s,o,a;for(s in e[n.$__id__()]=!0,r[i.$__id__()]=!0,n.$$data)if(o=n.$$data[s],a=i.$$data[s],O("Struct")["$==="](o)){if((!e.hasOwnProperty(o.$__id__())||!r.hasOwnProperty(a.$__id__()))&&!t(o,a))return!1}else if(!o["$=="](a))return!1;return!0}(this,t)}),f(e,"$eql?",function(t){if(!$(t["$instance_of?"](this.$class())))return!1;var e={},r={};return function t(n,i){var s,o,a;for(s in e[n.$__id__()]=!0,r[i.$__id__()]=!0,n.$$data)if(o=n.$$data[s],a=i.$$data[s],O("Struct")["$==="](o)){if((!e.hasOwnProperty(o.$__id__())||!r.hasOwnProperty(a.$__id__()))&&!t(o,a))return!1}else if(!o["$eql?"](a))return!1;return!0}(this,t)}),f(e,"$each",function e(){var r=e.$$p||C;return(e.$$p=null,r!==C)?(_(this.$class().$members(),"each",[],function e(n){var i=null==e.$$s?this:e.$$s;return null==n&&(n=C),t.yield1(r,i["$[]"](n))},{$$s:this}),this):_(this,"enum_for",["each"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this})}),f(e,"$each_pair",function e(){var r=e.$$p||C;return(e.$$p=null,r!==C)?(_(this.$class().$members(),"each",[],function e(n){var i=null==e.$$s?this:e.$$s;return null==n&&(n=C),t.yield1(r,[n,i["$[]"](n)])},{$$s:this}),this):_(this,"enum_for",["each_pair"],function t(){return(null==t.$$s?this:t.$$s).$size()},{$$s:this})}),f(e,"$length",function(){return this.$class().$members().$length()}),f(e,"$to_a",function(){return _(this.$class().$members(),"map",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=C),r["$[]"](e)},{$$s:this})}),i=[],f(e,"$inspect",function(){var t=this,e=C,r=C;return function(){try{if(e="#<struct ",$(i["$include?"](t.$__id__())))return A(e,":...>");return i["$<<"](t.$__id__()),r=!0,x(O("Struct"),t)&&$(t.$class().$name())&&(e=A(e,""+t.$class()+" ")),e=A(e,_(t.$each_pair(),"map",[],function(t,e){return null==t&&(t=C),null==e&&(e=C),""+t+"="+n("Opal").$inspect(e)}).$join(", ")),e=A(e,">")}finally{$(r)&&i.pop()}}()}),f(e,"$to_h",function t(){var e=t.$$p||C;return(t.$$p=null,e!==C)?_(_(this,"map",[],e.$to_proc()),"to_h",p(this.$args())):_(this.$class().$members(),"each_with_object",[b([],{})],function t(e,r){var n,i=null==t.$$s?this:t.$$s;return null==e&&(e=C),null==r&&(r=C),_(r,"[]=",n=[e,i["$[]"](e)]),n[n.length-1]},{$$s:this})}),f(e,"$values_at",function(t){e=o(arguments),r=_(r=e,"map",[],function(t){return null==t&&(t=C),t.$$is_range?t.$to_a():t}).$flatten();for(var e,r,n=[],i=0,s=r.length;i<s;i++)r[i].$$is_number||g.$raise(O("TypeError"),"no implicit conversion of "+r[i].$class()+" into Integer"),n.push(this["$[]"](r[i]));return n},-1),f(e,"$dig",function(t,e){var r,n=C;return(r=o(arguments,1),(n=$(t.$$is_string&&this.$$data.hasOwnProperty(t))&&this.$$data[t]||C)===C||0===r.length)?n:($(n["$respond_to?"]("dig"))||g.$raise(O("TypeError"),""+n.$class()+" does not have #dig method"),_(n,"dig",p(r)))},-2),E(e,"size","length"),E(e,"to_s","inspect"),E(e,"values","to_a")},Opal.modules["corelib/set"]=function(t){var e=t.freeze,r=t.klass,n=t.slice,i=t.defs,s=t.hash2,o=t.truthy,a=t.eqeqeq,l=t.Kernel,$=t.send,u=t.def,c=t.eqeq,h=t.rb_lt,_=t.rb_le,d=t.alias,p=t.nil,f=t.$$$;return t.add_stubs("include,new,nil?,===,raise,each,add,merge,class,respond_to?,subtract,dup,join,to_a,equal?,instance_of?,==,instance_variable_get,size,is_a?,all?,include?,[]=,enum_for,[],<<,replace,compare_by_identity,name,compare_by_identity?,delete,select,frozen?,freeze,reject,delete_if,to_proc,keep_if,each_key,empty?,eql?,instance_eval,clear,<,<=,any?,!,intersect?,keys,|,proper_subset?,subset?,proper_superset?,superset?,-,select!,collect!"),function(m,g,b){var v=r("::",null,"Set"),y=[v].concat(b),x=t.$r(y);function k(t){o(t["$is_a?"](f("Set")))||l.$raise(f("ArgumentError"),"value must be a set")}return v.$$prototype.hash=p,v.$include(f("Enumerable")),i(v,"$[]",function(t){var e;return e=n(arguments),this.$new(e)},-1),u(v,"$initialize",function e(r){var n=e.$$p||p;return(e.$$p=null,null==r&&(r=p),this.hash=s([],{}),o(r["$nil?"]()))?p:(a(f("Enumerable"),r)||l.$raise(f("ArgumentError"),"value must be enumerable"),o(n))?$(r,"each",[],function e(r){var i=null==e.$$s?this:e.$$s;return null==r&&(r=p),i.$add(t.yield1(n,r))},{$$s:this}):this.$merge(r)},-1),u(v,"$dup",function(){return this.$class().$new().$merge(this)}),u(v,"$-",function(t){return o(t["$respond_to?"]("each"))||l.$raise(f("ArgumentError"),"value must be enumerable"),this.$dup().$subtract(t)}),u(v,"$inspect",function(){return"#<Set: {"+this.$to_a().$join(",")+"}>"}),u(v,"$==",function(t){return!!o(this["$equal?"](t))||(o(t["$instance_of?"](this.$class()))?this.hash["$=="](t.$instance_variable_get("@hash")):!!(o(t["$is_a?"](f("Set")))&&c(this.$size(),t.$size()))&&$(t,"all?",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.hash&&(r.hash=p),null==e&&(e=p),r.hash["$include?"](e)},{$$s:this}))}),u(v,"$add",function(t){return this.hash["$[]="](t,!0),this}),u(v,"$classify",function e(){var r=e.$$p||p,n=p;return(e.$$p=null,r!==p)?(n=$(f("Hash"),"new",[],function t(e,r){var n,i=null==t.$$s?this:t.$$s;return null==e&&(e=p),null==r&&(r=p),$(e,"[]=",n=[r,i.$class().$new()]),n[n.length-1]},{$$s:this}),$(this,"each",[],function(e){return null==e&&(e=p),n["$[]"](t.yield1(r,e)).$add(e)}),n):this.$enum_for("classify")}),u(v,"$collect!",function e(){var r=e.$$p||p,n=p;return(e.$$p=null,r!==p)?(n=this.$class().$new(),$(this,"each",[],function(e){return null==e&&(e=p),n["$<<"](t.yield1(r,e))}),this.$replace(n)):this.$enum_for("collect!")}),u(v,"$compare_by_identity",function(){return o(this.hash["$respond_to?"]("compare_by_identity"))?(this.hash.$compare_by_identity(),this):this.$raise(x("NotImplementedError"),""+this.$class().$name()+"#compare_by_identity is not implemented")}),u(v,"$compare_by_identity?",function(){var t=p;return o(t=this.hash["$respond_to?"]("compare_by_identity?"))?this.hash["$compare_by_identity?"]():t}),u(v,"$delete",function(t){return this.hash.$delete(t),this}),u(v,"$delete?",function(t){return o(this["$include?"](t))?(this.$delete(t),this):p}),u(v,"$delete_if",function e(){var r=e.$$p||p;return(e.$$p=null,r!==p)?($($(this,"select",[],function(e){return null==e&&(e=p),t.yield1(r,e)}),"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.hash&&(r.hash=p),null==e&&(e=p),r.hash.$delete(e)},{$$s:this}),this):this.$enum_for("delete_if")}),u(v,"$freeze",function(){return o(this["$frozen?"]())?this:(this.hash.$freeze(),e(this))}),u(v,"$keep_if",function e(){var r=e.$$p||p;return(e.$$p=null,r!==p)?($($(this,"reject",[],function(e){return null==e&&(e=p),t.yield1(r,e)}),"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==r.hash&&(r.hash=p),null==e&&(e=p),r.hash.$delete(e)},{$$s:this}),this):this.$enum_for("keep_if")}),u(v,"$reject!",function t(){var e=t.$$p||p,r=p;return(t.$$p=null,e!==p)?(r=this.$size(),$(this,"delete_if",[],e.$to_proc()),c(this.$size(),r))?p:this:this.$enum_for("reject!")}),u(v,"$select!",function t(){var e=t.$$p||p,r=p;return(t.$$p=null,e!==p)?(r=this.$size(),$(this,"keep_if",[],e.$to_proc()),c(this.$size(),r))?p:this:this.$enum_for("select!")}),u(v,"$add?",function(t){return o(this["$include?"](t))?p:this.$add(t)}),u(v,"$each",function t(){var e=t.$$p||p;return(t.$$p=null,e!==p)?($(this.hash,"each_key",[],e.$to_proc()),this):this.$enum_for("each")}),u(v,"$empty?",function(){return this.hash["$empty?"]()}),u(v,"$eql?",function(t){return this.hash["$eql?"]($(t,"instance_eval",[],function t(){var e=null==t.$$s?this:t.$$s;return null==e.hash&&(e.hash=p),e.hash},{$$s:this}))}),u(v,"$clear",function(){return this.hash.$clear(),this}),u(v,"$include?",function(t){return this.hash["$include?"](t)}),u(v,"$merge",function(t){return $(t,"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=p),r.$add(e)},{$$s:this}),this}),u(v,"$replace",function(t){return this.$clear(),this.$merge(t),this}),u(v,"$size",function(){return this.hash.$size()}),u(v,"$subtract",function(t){return $(t,"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=p),r.$delete(e)},{$$s:this}),this}),u(v,"$|",function(t){return o(t["$respond_to?"]("each"))||l.$raise(f("ArgumentError"),"value must be enumerable"),this.$dup().$merge(t)}),u(v,"$superset?",function(t){return k(t),!o(h(this.$size(),t.$size()))&&$(t,"all?",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=p),r["$include?"](e)},{$$s:this})}),u(v,"$proper_superset?",function(t){return k(t),!o(_(this.$size(),t.$size()))&&$(t,"all?",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=p),r["$include?"](e)},{$$s:this})}),u(v,"$subset?",function(t){return k(t),!o(h(t.$size(),this.$size()))&&$(this,"all?",[],function(e){return null==e&&(e=p),t["$include?"](e)})}),u(v,"$proper_subset?",function(t){return k(t),!o(_(t.$size(),this.$size()))&&$(this,"all?",[],function(e){return null==e&&(e=p),t["$include?"](e)})}),u(v,"$intersect?",function(t){return(k(t),o(h(this.$size(),t.$size())))?$(this,"any?",[],function(e){return null==e&&(e=p),t["$include?"](e)}):$(t,"any?",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=p),r["$include?"](e)},{$$s:this})}),u(v,"$disjoint?",function(t){return this["$intersect?"](t)["$!"]()}),u(v,"$to_a",function(){return this.hash.$keys()}),d(v,"+","|"),d(v,"<","proper_subset?"),d(v,"<<","add"),d(v,"<=","subset?"),d(v,">","proper_superset?"),d(v,">=","superset?"),d(v,"difference","-"),d(v,"filter!","select!"),d(v,"length","size"),d(v,"map!","collect!"),d(v,"member?","include?"),d(v,"union","|")}(0,0,[])},Opal.modules["corelib/dir"]=function(t){var e,r,n=t.klass,i=t.def,s=t.truthy,o=t.alias,a=t.nil,l=t.$$$;return t.add_stubs("[],pwd"),[e=n("::",null,"Dir")].concat([]),i(r=t.get_singleton_class(e),"$chdir",function e(r){var n=e.$$p||a,i=a;return e.$$p=null,function(){try{return i=t.current_dir,t.current_dir=r,t.yieldX(n,[])}finally{t.current_dir=i}}()}),i(r,"$pwd",function(){return t.current_dir||"."}),i(r,"$home",function(){var t=a;return s(t=l("ENV")["$[]"]("HOME"))?t:"."}),o(r,"getwd","pwd")},Opal.modules["corelib/file"]=function(t){var e,r,n,i=t.truthy,s=t.klass,o=t.const_set,a=t.Opal,l=t.regexp,$=t.rb_plus,u=t.def,c=t.Kernel,h=t.eqeq,_=t.rb_lt,d=t.rb_minus,p=t.range,f=t.send,m=t.slice,g=t.alias,b=t.nil,v=t.$$$;return t.add_stubs("respond_to?,to_path,coerce_to!,pwd,split,sub,+,unshift,join,home,raise,start_with?,absolute_path,==,<,dirname,-,basename,empty?,rindex,[],length,nil?,gsub,find,=~,map,each_with_index,flatten,reject,to_proc,end_with?,expand_path,exist?"),r=[e=s("::",v("IO"),"File")].concat([]),n=b,o(r[0],"Separator",o(r[0],"SEPARATOR","/")),o(r[0],"ALT_SEPARATOR",b),o(r[0],"PATH_SEPARATOR",":"),o(r[0],"FNM_SYSCASE",0),n=/^[a-zA-Z]:(?:\\|\/)/,function(e,r){var s=[e].concat(r),o=t.$r(s);function y(t){return i(t["$respond_to?"]("to_path"))&&(t=t.$to_path()),t=a["$coerce_to!"](t,v("String"),"to_str")}function x(){return o("ALT_SEPARATOR")===b?t.escape_regexp(o("SEPARATOR")):t.escape_regexp($(o("SEPARATOR"),o("ALT_SEPARATOR")))}return u(e,"$absolute_path",function(t,e){var r,s=b,u=b,c=b,h=b,_=b,d=b,p=b,f=b,m=b,g=b;null==e&&(e=b),s=o("SEPARATOR"),u=x(),c=[],t=i(t["$respond_to?"]("to_path"))?t.$to_path():t,t=a["$coerce_to!"](t,v("String"),"to_str"),e=i(h=e)?h:v("Dir").$pwd(),_=t.substr(0,s.length)===s||n.test(t),d=e.substr(0,s.length)===s||n.test(e),i(_)?(p=t.$split(l(["[",u,"]"])),f=n.test(t)?"":t.$sub(l(["^([",u,"]+).*$"]),"\\1"),m=!0):(p=$(e.$split(l(["[",u,"]"])),t.$split(l(["[",u,"]"]))),f=n.test(e)?"":e.$sub(l(["^([",u,"]+).*$"]),"\\1"),m=d);for(var y=0,k=p.length;y<k;y++)(r=p[y])===b||""===r&&(0===c.length||m)||"."===r&&(0===c.length||m)||(".."===r?c.pop():c.push(r));return m||"."===p[0]||c.$unshift("."),g=c.$join(s),i(m)&&(g=$(f,g)),g},-2),u(e,"$expand_path",function(t,e){var r=b,s=b,a=b,u=b,h=b;return null==e&&(e=b),r=o("SEPARATOR"),s=x(),i("~"===t[0]||e&&"~"===e[0])&&(i(a=o("Dir").$home())||c.$raise(v("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),u=n.test(a)?"":a.$sub(l(["^([",s,"]+).*$"]),"\\1"),i(a["$start_with?"](u))||c.$raise(v("ArgumentError"),"non-absolute home"),a=$(a,r),h=l(["^\\~(?:",r,"|$)"]),t=t.$sub(h,a),i(e)&&(e=e.$sub(h,a))),this.$absolute_path(t,e)},-2),u(e,"$dirname",function(t,e){var r=b;if(null==e&&(e=1),h(e,0))return t;i(_(e,0))&&c.$raise(v("ArgumentError"),"level can't be negative"),r=x();var n,s=(t=y(t)).match(RegExp("^["+r+"]"));return(n=""===(t=(t=(t=t.replace(RegExp("["+r+"]+$"),"")).replace(RegExp("[^"+r+"]+$"),"")).replace(RegExp("["+r+"]+$"),""))?s?"/":".":t,1==e)?n:this.$dirname(n,d(e,1))},-2),u(e,"$basename",function(e,r){var n=b;return null==r&&(r=b),n=x(),0==(e=y(e)).length||(r=r!==b?a["$coerce_to!"](r,v("String"),"to_str"):null,e=(e=e.replace(RegExp("(.)["+n+"]*$"),"$1")).replace(RegExp("^(?:.*["+n+"])?([^"+n+"]+)$"),"$1"),".*"===r?e=e.replace(/\.[^\.]+$/,""):null!==r&&(r=t.escape_regexp(r),e=e.replace(RegExp(""+r+"$"),""))),e},-2),u(e,"$extname",function(e){var r=b,n=b;return(e=y(e),i((r=this.$basename(e))["$empty?"]()))?"":i((n=r["$[]"](p(1,-1,!1)).$rindex("."))["$nil?"]())||h($(n,1),d(r.$length(),1))?"":r["$[]"](t.Range.$new($(n,1),-1,!1))}),u(e,"$exist?",function(e){return null!=t.modules[e]}),u(e,"$directory?",function(e){var r=b;for(var n in r=[],t.modules)r.push(n);return e=e.$gsub(l(["(^.",o("SEPARATOR"),"+|",o("SEPARATOR"),"+$)"])),f(r,"find",[],function(t){return null==t&&(t=b),t["$=~"](l(["^",e]))})}),u(e,"$join",function(t){var e,r,n=b;return(e=m(arguments),i((r=e)["$empty?"]()))?"":(n="",r=f(r.$flatten().$each_with_index(),"map",[],function(t,e){return(null==t&&(t=b),null==e&&(e=b),h(e,0)&&i(t["$empty?"]()))?o("SEPARATOR"):h(r.$length(),$(e,1))&&i(t["$empty?"]())?o("SEPARATOR"):t}),r=f(r,"reject",[],"empty?".$to_proc()),f(r,"each_with_index",[],function(t,e){var s=b;return(null==t&&(t=b),null==e&&(e=b),i((s=r["$[]"]($(e,1)))["$nil?"]()))?n=""+n+t:(i(t["$end_with?"](o("SEPARATOR")))&&i(s["$start_with?"](o("SEPARATOR")))&&(t=t.$sub(l([o("SEPARATOR"),"+$"]),"")),n=i(t["$end_with?"](o("SEPARATOR")))||i(s["$start_with?"](o("SEPARATOR")))?""+n+t:""+n+t+o("SEPARATOR"))}),n)},-1),u(e,"$split",function(t){return t.$split(o("SEPARATOR"))}),g(e,"realpath","expand_path"),g(e,"exists?","exist?")}(t.get_singleton_class(e),r)},Opal.modules["corelib/process/base"]=function(t){var e=t.klass,r=t.slice,n=t.defs,i=t.return_val,s=t.nil;return n(e("::",null,"Signal"),"$trap",function(t){return r(arguments),s},-1),n(e("::",null,"GC"),"$start",i(s))},Opal.modules["corelib/process"]=function(t){var e=t.module,r=t.defs,i=t.truthy,s=t.return_val,o=t.Kernel,a=t.nil,l=t.$$$;return t.add_stubs("const_set,size,<<,__register_clock__,to_f,now,new,[],raise"),function($){var u=e("::","Process"),c=a;if(u.__clocks__=[],r(u,"$__register_clock__",function(t,e){return null==this.__clocks__&&(this.__clocks__=a),this.$const_set(t,this.__clocks__.$size()),this.__clocks__["$<<"](e)}),u.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),c=!1,t.global.performance)c=function(){return performance.now()};else if(t.global.process&&n.hrtime){var h=n.hrtime();c=function(){var t=n.hrtime(h),e=t[1]/1e3|0;return 1e3*t[0]+e/1e3}}return i(c)&&u.$__register_clock__("CLOCK_MONOTONIC",c),r(u,"$pid",s(0)),r(u,"$times",function(){var t=a;return t=l("Time").$now().$to_f(),l(l("Benchmark"),"Tms").$new(t,t,t,t,t)}),r(u,"$clock_gettime",function(t,e){var r=a;null==this.__clocks__&&(this.__clocks__=a),null==e&&(e="float_second"),i(r=this.__clocks__["$[]"](t))||o.$raise(l(l("Errno"),"EINVAL"),"clock_gettime("+t+") "+this.__clocks__["$[]"](t));var n=r();switch(e){case"float_second":return n/1e3;case"float_millisecond":return n/1;case"float_microsecond":return 1e3*n;case"second":return n/1e3|0;case"millisecond":return n/1|0;case"microsecond":return 1e3*n|0;case"nanosecond":return 1e6*n|0;default:o.$raise(l("ArgumentError"),"unexpected unit: "+e)}},-2)}(0)},Opal.modules["corelib/random/formatter"]=function(t){var e,r,n,i,s,o=t.klass,a=t.module,l=t.def,$=t.range,u=t.send,c=t.rb_divide,h=t.Kernel,_=t.Opal,d=t.nil,p=t.$$$;return t.add_stubs("_verify_count,bytes,encode,strict_encode64,random_bytes,urlsafe_encode64,split,hex,[]=,[],map,to_proc,join,times,<<,|,ord,/,abs,random_float,raise,coerce_to!,flatten,new,random_number,length,include,extend"),r=[e=o("::",null,"Random")].concat([]),i=[n=a(e,"Formatter")].concat(r),s=t.$r(i),l(n,"$hex",function(t){null==t&&(t=d),t=p("Random").$_verify_count(t);for(var e=this.$bytes(t),r="",n=0;n<t;n++)r+=e.charCodeAt(n).toString(16).padStart(2,"0");return r.$encode("US-ASCII")},-1),l(n,"$random_bytes",function(t){return null==t&&(t=d),this.$bytes(t)},-1),l(n,"$base64",function(t){return null==t&&(t=d),p("Base64").$strict_encode64(this.$random_bytes(t)).$encode("US-ASCII")},-1),l(n,"$urlsafe_base64",function(t,e){return null==t&&(t=d),null==e&&(e=!1),p("Base64").$urlsafe_encode64(this.$random_bytes(t),e).$encode("US-ASCII")},-1),l(n,"$uuid",function(){var t=d;return(t=this.$hex(16).$split(""))["$[]="](12,"4"),t["$[]="](16,(3&parseInt(t["$[]"](16),16)|8).toString(16)),(t=u(t=[t["$[]"]($(0,8,!0)),t["$[]"]($(8,12,!0)),t["$[]"]($(12,16,!0)),t["$[]"]($(16,20,!0)),t["$[]"]($(20,32,!0))],"map",[],"join".$to_proc())).$join("-")}),l(n,"$random_float",function(){var t=d,e=d;return t=this.$bytes(4),e=0,u(4,"times",[],function(r){return null==r&&(r=d),e=(e=e["$<<"](8))["$|"](t["$[]"](r).$ord())}),c(e.$abs(),2147483647)}),l(n,"$random_number",function(t){var e=this;function r(){return e.$random_float()}function n(t){return Math.floor(r()*t)}return null==t?r():t.$$is_range?function(){var e=t.begin,r=t.end;if(e===d||r===d)return d;var i=r-e;return i<0?d:0===i?e:(r%1==0&&e%1==0&&!t.excl&&i++,n(i)+e)}():t.$$is_number?(t<=0&&h.$raise(p("ArgumentError"),"invalid argument - "+t),t%1==0)?n(t):r()*t:((t=_["$coerce_to!"](t,p("Integer"),"to_int"))<=0&&h.$raise(p("ArgumentError"),"invalid argument - "+t),n(t))},-1),l(n,"$alphanumeric",function(t){var e=d;return null==t&&(t=d),t=s("Random").$_verify_count(t),e=u([$("0","9",!1),$("a","z",!1),$("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),u(p("Array"),"new",[t],function t(r){var n=null==t.$$s?this:t.$$s;return null==r&&(r=d),e["$[]"](n.$random_number(e.$length()))},{$$s:this}).$join()},-1),e.$include(p(p("Random"),"Formatter")),e.$extend(p(p("Random"),"Formatter"))},Opal.modules["corelib/random/mersenne_twister"]=function(t){var e,r,n,i=t.klass,s=t.const_set,o=t.send,a=t.nil,l=t.$$$,$=a;return t.add_stubs("generator="),$=function(){var t=function(t,e){return(2147483648&t|2147483647&e)>>>1^(1&e?2567483615:0)};function e(e){var r;return--e.left<=0&&function(e){var r,n=0,i=e.state;for(e.left=624,e.next=0,r=228;--r;n++)i[n]=i[n+397]^t(i[n+0],i[n+1]);for(r=397;--r;n++)i[n]=i[n+-227]^t(i[n+0],i[n+1]);i[n]=i[n+-227]^t(i[n+0],i[0])}(e),r=e.state[e.next++],r^=r>>>11,r^=r<<7&2636928640,r^=r<<15&4022730752,(r^=r>>>18)>>>0}return{genrand_real:function(t){return(67108864*(e(t)>>>5)+(e(t)>>>6))*(1/9007199254740992)},init:function(t){var e={left:0,next:624,state:Array(624)};return function(t,e){var r;for(r=1,t.state[0]=e>>>0;r<624;r++)t.state[r]=1812433253*(t.state[r-1]^t.state[r-1]>>30>>>0)+r,t.state[r]&=4294967295;t.left=1,t.next=624}(e,t),e}}}(),r=i("::",null,"Random"),n=Number.MAX_SAFE_INTEGER||9007199254740991,s(r,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*n)},reseed:function(t){return $.init(t)},rand:function(t){return $.genrand_real(t)}}),e=[l(r,"MERSENNE_TWISTER_GENERATOR")],o(r,"generator=",e),e[e.length-1]},Opal.modules["corelib/random"]=function(t){var e,r=t.truthy,n=t.klass,i=t.Kernel,s=t.defs,o=t.Opal,a=t.def,l=t.eqeqeq,$=t.send,u=t.top,c=t.nil,h=t.$$$;return t.add_stubs("require,attr_reader,to_int,raise,new_seed,coerce_to!,reseed,rand,seed,bytes,===,==,state,_verify_count,encode,join,new,chr,random_number,random_float,const_defined?,const_set"),u.$require("corelib/random/formatter"),(e=n("::",null,"Random")).$attr_reader("seed","state"),s(e,"$_verify_count",function(t){return r(t)||(t=16),"number"!=typeof t&&(t=t.$to_int()),t<0&&i.$raise(h("ArgumentError"),"negative string size (or size too big)"),t=Math.floor(t)}),a(e,"$initialize",function(t){return null==t&&(t=h("Random").$new_seed()),t=o["$coerce_to!"](t,h("Integer"),"to_int"),this.state=t,this.$reseed(t)},-1),a(e,"$reseed",function(e){return this.seed=e,this.$rng=t.$$rand.reseed(e)}),s(e,"$new_seed",function(){return t.$$rand.new_seed()}),s(e,"$rand",function(t){return h(this,"DEFAULT").$rand(t)},-1),s(e,"$srand",function(t){var e=c;return null==t&&(t=h("Random").$new_seed()),t=o["$coerce_to!"](t,h("Integer"),"to_int"),e=h(this,"DEFAULT").$seed(),h(this,"DEFAULT").$reseed(t),e},-1),s(e,"$urandom",function(t){return h("SecureRandom").$bytes(t)}),a(e,"$==",function(t){var e=c;return!!l(h("Random"),t)&&(r(e=this.$seed()["$=="](t.$seed()))?this.$state()["$=="](t.$state()):e)}),a(e,"$bytes",function(t){return t=h("Random").$_verify_count(t),$(h("Array"),"new",[t],function t(){return(null==t.$$s?this:t.$$s).$rand(255).$chr()},{$$s:this}).$join().$encode("ASCII-8BIT")}),s(e,"$bytes",function(t){return h(this,"DEFAULT").$bytes(t)}),a(e,"$rand",function(t){return this.$random_number(t)},-1),a(e,"$random_float",function(){return this.state++,t.$$rand.rand(this.$rng)}),s(e,"$random_float",function(){return h(this,"DEFAULT").$random_float()}),s(e,"$generator=",function(e){return(t.$$rand=e,r(this["$const_defined?"]("DEFAULT")))?h(this,"DEFAULT").$reseed():this.$const_set("DEFAULT",this.$new(this.$new_seed()))}),u.$require("corelib/random/mersenne_twister")},Opal.modules["corelib/unsupported"]=function(t){var e,r,n,i,s,o,a,l=t.Kernel,$=t.klass,u=t.send,c=t.slice,h=t.module,_=t.def,d=t.return_val,p=t.alias,f=t.defs,m=t.top,g=t.nil,b=t.$$$;t.add_stubs("raise,warn,each,define_method,%,public,private_method_defined?,private_class_method,instance_method,instance_methods,method_defined?,private_methods");var v={};function y(e){switch(t.config.unsupported_features_severity){case"error":l.$raise(b("NotImplementedError"),e);break;case"warning":v[e]||(v[e]=!0,m.$warn(e))}}return u(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function t(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=g),u(r,"define_method",[e],function(t){return c(arguments),l.$raise(b("NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"](e))},-1)},{$$s:$("::",null,"String")}),e=h("::","Kernel"),r="Object tainting is not supported by Opal",_(e,"$taint",function(){return y(r),this}),_(e,"$untaint",function(){return y(r),this}),_(e,"$tainted?",function(){return y(r),!1}),_(n=$("::",null,"Module"),"$public",function(t){var e;return(e=c(arguments),0===e.length)?(this.$$module_function=!1,g):1===e.length?e[0]:e},-1),_(n,"$private_class_method",function(t){var e;return e=c(arguments),1===e.length?e[0]:e},-1),_(n,"$private_method_defined?",d(!1)),_(n,"$private_constant",function(t){return c(arguments),g},-1),p(n,"nesting","public"),p(n,"private","public"),p(n,"protected","public"),p(n,"protected_method_defined?","private_method_defined?"),p(n,"public_class_method","private_class_method"),p(n,"public_instance_method","instance_method"),p(n,"public_instance_methods","instance_methods"),p(n,"public_method_defined?","method_defined?"),_(i=h("::","Kernel"),"$private_methods",function(t){return c(arguments),[]},-1),p(i,"protected_methods","private_methods"),p(i,"private_instance_methods","private_methods"),p(i,"protected_instance_methods","private_methods"),o=[s=h("::","Kernel")].concat([]),a=t.$r(o),_(s,"$eval",function(t){return c(arguments),l.$raise(b("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. See https://github.com/opal/opal/blob/"+a("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details.")},-1),f(m,"$public",function(t){var e;return e=c(arguments),1===e.length?e[0]:e},-1),f(m,"$private",function(t){var e;return e=c(arguments),1===e.length?e[0]:e},-1)},Opal.queue(function(t){var e=t.Object;return t.nil,t.add_stubs("require,autoload"),e.$require("opal/base"),e.$require("opal/mini"),e.$require("corelib/kernel/format"),e.$require("corelib/string/encoding"),e.$autoload("Math","corelib/math"),e.$require("corelib/complex/base"),e.$autoload("Complex","corelib/complex"),e.$require("corelib/rational/base"),e.$autoload("Rational","corelib/rational"),e.$require("corelib/time"),e.$autoload("Struct","corelib/struct"),e.$autoload("Set","corelib/set"),e.$autoload("Dir","corelib/dir"),e.$autoload("File","corelib/file"),e.$require("corelib/process/base"),e.$autoload("Process","corelib/process"),e.$autoload("Random","corelib/random"),e.$require("corelib/unsupported")})}}]);